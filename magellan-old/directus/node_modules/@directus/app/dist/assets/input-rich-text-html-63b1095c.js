import{w as lC,d as X8,m as Y8,r as Ls,h as H8,j as Nj,g as Ij,aW as $j,aX as zj,x as V8,c as Sk,a as sc,B as Fj,o as bd,b as P0,z as mo,v as U8,t as cc,f as y3,y as zu,q as w3,u as wo,C as W8,e as FB,F as PL}from"./runtime-core.esm-bundler-becf0084.js";import{w as HB,x as C3,y as LB,z as Lj,a as Hj,A as Vj,_ as Uj}from"./index.f8ba9f9b.entry.js";import{useI18n as Wj}from"./vue-i18n.01a7b86c.entry.js";import{c as xk}from"./use-sync-5cbb6423.js";import"./pinia.e7919e7d.entry.js";import"./vue.runtime.esm-bundler-dbfb2032.js";import"./vue-router.52791413.entry.js";var jj=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Gj=function(le){return jj.map(function(nt){return nt.toLowerCase()}).indexOf(le.toLowerCase())!==-1},qj=function(le,nt,ln){Object.keys(nt).filter(Gj).forEach(function(Gt){var dt=nt[Gt];typeof dt=="function"&&(Gt==="onInit"?dt(le,ln):ln.on(Gt.substring(2),function(Qt){return dt(Qt,ln)}))})},Kj=function(le,nt,ln,Gt){var dt=le.modelEvents?le.modelEvents:null,Qt=Array.isArray(dt)?dt.join(" "):dt;lC(Gt,function(Sn,Mn){ln&&typeof Sn=="string"&&Sn!==Mn&&Sn!==ln.getContent({format:le.outputFormat})&&ln.setContent(Sn)}),ln.on(Qt||"change input undo redo",function(){nt.emit("update:modelValue",ln.getContent({format:le.outputFormat}))})},Xj=function(le,nt,ln,Gt,dt,Qt){Gt.setContent(Qt()),ln.attrs["onUpdate:modelValue"]&&Kj(nt,ln,Gt,dt),qj(le,ln.attrs,Gt)},j8=0,J8=function(le){var nt=Date.now(),ln=Math.floor(Math.random()*1e9);return j8++,le+"_"+ln+j8+String(nt)},Yj=function(le){return le!==null&&le.tagName.toLowerCase()==="textarea"},G8=function(le){return typeof le>"u"||le===""?[]:Array.isArray(le)?le:le.split(" ")},Jj=function(le,nt){return G8(le).concat(G8(nt))},Zj=function(le){return le==null},q8=function(){return{listeners:[],scriptId:J8("tiny-script"),scriptLoaded:!1}},Qj=function(){var le=q8(),nt=function(dt,Qt,Sn,Mn){var pn=Qt.createElement("script");pn.referrerPolicy="origin",pn.type="application/javascript",pn.id=dt,pn.src=Sn;var Dr=function(){pn.removeEventListener("load",Dr),Mn()};pn.addEventListener("load",Dr),Qt.head&&Qt.head.appendChild(pn)},ln=function(dt,Qt,Sn){le.scriptLoaded?Sn():(le.listeners.push(Sn),dt.getElementById(le.scriptId)||nt(le.scriptId,dt,Qt,function(){le.listeners.forEach(function(Mn){return Mn()}),le.scriptLoaded=!0}))},Gt=function(){le=q8()};return{load:ln,reinitialize:Gt}},eG=Qj(),tG=function(){return typeof window<"u"?window:global},sC=function(){var le=tG();return le&&le.tinymce?le.tinymce:null},nG={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(le){return le==="html"||le==="text"}}},cC=globalThis&&globalThis.__assign||function(){return cC=Object.assign||function(le){for(var nt,ln=1,Gt=arguments.length;ln<Gt;ln++){nt=arguments[ln];for(var dt in nt)Object.prototype.hasOwnProperty.call(nt,dt)&&(le[dt]=nt[dt])}return le},cC.apply(this,arguments)},rG=function(le,nt,ln,Gt){return le(Gt||"div",{id:nt,ref:ln})},aG=function(le,nt,ln){return le("textarea",{id:nt,visibility:"hidden",ref:ln})},oG=X8({props:nG,setup:function(le,nt){var ln=le.init?cC({},le.init):{},Gt=Y8(le),dt=Gt.disabled,Qt=Gt.modelValue,Sn=Gt.tagName,Mn=Ls(null),pn=null,Dr=le.id||J8("tiny-vue"),Bn=le.init&&le.init.inline||le.inline,Ve=!!nt.attrs["onUpdate:modelValue"],Ft=!0,xn=le.initialValue?le.initialValue:"",ze="",ge=function(qt){return Ve?function(){return Qt!=null&&Qt.value?Qt.value:""}:function(){return qt?xn:ze}},Tt=function(){var qt=ge(Ft),Z=cC(cC({},ln),{readonly:le.disabled,selector:"#"+Dr,plugins:Jj(ln.plugins,le.plugins),toolbar:le.toolbar||ln.toolbar,inline:Bn,setup:function(Ne){pn=Ne,Ne.on("init",function(ke){return Xj(ke,le,nt,Ne,Qt,qt)}),typeof ln.setup=="function"&&ln.setup(Ne)}});Yj(Mn.value)&&(Mn.value.style.visibility=""),sC().init(Z),Ft=!1};lC(dt,function(qt){var Z;pn!==null&&(typeof((Z=pn.mode)===null||Z===void 0?void 0:Z.set)=="function"?pn.mode.set(qt?"readonly":"design"):pn.setMode(qt?"readonly":"design"))}),lC(Sn,function(qt){var Z;Ve||(ze=pn.getContent()),(Z=sC())===null||Z===void 0||Z.remove(pn),H8(function(){return Tt()})}),Nj(function(){if(sC()!==null)Tt();else if(Mn.value&&Mn.value.ownerDocument){var qt=le.cloudChannel?le.cloudChannel:"5",Z=le.apiKey?le.apiKey:"no-api-key",Ne=Zj(le.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+Z+"/tinymce/"+qt+"/tinymce.min.js":le.tinymceScriptSrc;eG.load(Mn.value.ownerDocument,Ne,Tt)}}),Ij(function(){sC()!==null&&sC().remove(pn)}),Bn||($j(function(){Ft||Tt()}),zj(function(){var qt;Ve||(ze=pn.getContent()),(qt=sC())===null||qt===void 0||qt.remove(pn)}));var Ze=function(qt){var Z;ze=pn.getContent(),(Z=sC())===null||Z===void 0||Z.remove(pn),ln=cC(cC({},ln),qt),H8(function(){return Tt()})};return nt.expose({rerender:Ze}),function(){return Bn?rG(V8,Dr,Mn,le.tagName):aG(V8,Dr,Mn)}}});const iG=""+new URL("FiraMono-Medium-33e88fa9.woff2",import.meta.url).href,uG=""+new URL("FiraMono-Medium-f2ff9941.woff",import.meta.url).href,sG=""+new URL("merriweather-regular-2661709b.woff2",import.meta.url).href,cG=""+new URL("merriweather-regular-ff8db8bc.woff",import.meta.url).href;function Fu(le){return getComputedStyle(document.body).getPropertyValue(le)}function lG(le){return`
@font-face {
	font-family: 'Fira Mono';
	font-style: normal;
	src: url(${iG}) format('woff2'),
	url(${uG}) format('woff');
}

@font-face {
	font-family: 'Merriweather';
	font-style: normal;
	src: url(${sG}) format('woff2'),
	url(${cG}) format('woff');
}

::selection {
	background: ${Fu("--background-normal-alt")};
}
body {
	color: ${Fu("--foreground-normal")};
	background-color: ${Fu("--background-input")};
	margin: 20px;
	font-family: ${Fu("--family-sans-serif")};
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	-moz-osx-font-smoothing: grayscale;
}
body.mce-content-readonly {
	color: ${Fu("--foreground-subdued")};
	background-color: ${Fu("--background-subdued")};
}
.mce-offscreen-selection {
	display: none;
}
h1, h2, h3, h4, h5, h6 {
	font-family: ${Fu(`--family-${le}`)}, serif;
	color: ${Fu("--foreground-normal-alt")};
	font-weight: 700;
	margin-bottom: 0;
}
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
	margin-top: 0.5em;
}
h1 {
	font-size: 36px;
	line-height: 46px;
	margin-top: 1em;
}
h2 {
	font-size: 24px;
	line-height: 34px;
	margin-top: 1.25em;
}
h3 {
	font-size: 19px;
	line-height: 29px;
	margin-top: 1.25em;
}
h4 {
	font-size: 16px;
	line-height: 26px;
	margin-top: 1.5em;
}
h5 {
	font-size: 14px;
	line-height: 24px;
	margin-top: 2em;
}
h6 {
	font-size: 12px;
	line-height: 22px;
	margin-top: 2em;
}
p {
	font-family: ${Fu(`--family-${le}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
a {
	color: ${Fu("--primary-125")};
	text-decoration: none;
}
ul, ol {
	font-family: ${Fu(`--family-${le}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
ul ul,
	ol ol,
		ul ol,
			ol ul {
	margin: 0;
}
b, strong {
	font-weight: 700;
}
code {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 2px 4px;
	font-family: ${Fu("--family-monospace")}, monospace;
	background-color: ${Fu("--background-normal")};
	border-radius: ${Fu("--border-radius")};
	overflow-wrap: break-word;
}
pre {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 1em;
	font-family: ${Fu("--family-monospace")}, monospace;
	background-color: ${Fu("--background-normal")};
	border-radius: ${Fu("--border-radius")};
	overflow: auto;
}
blockquote {
	font-family: ${Fu(`--family-${le}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	border-left: 2px solid ${Fu("--border-normal")};
	padding-left: 1em;
	margin-left: 0px;
}
video,
img {
	max-width: 100%;
	border-radius: ${Fu("--border-radius")};
	height: auto;
}
iframe {
	max-width: 100%;
	border-radius: ${Fu("--border-radius")};
}
hr {
	background-color: ${Fu("--border-normal")};
	height: 1px;
	border: none;
	margin-top: 2em;
	margin-bottom: 2em;
}
table {
	border-collapse: collapse;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
}
table th,
table td {
	border: 1px solid ${Fu("--border-normal")};
	padding: 0.4rem;
}
figure {
	display: table;
	margin: 1rem auto;
}
figure figcaption {
	color: #999;
	display: block;
	margin-top: 0.25rem;
	text-align: center;
}`}function fG(le,nt,ln){const Gt=Ls(!1),dt=Ls(null),Qt=Ls();lC(()=>{var Ve;return(Ve=dt.value)==null?void 0:Ve.transformationKey},Ve=>{Qt.value=ln.storageAssetPresets.value.find(Ft=>Ft.key===Ve),Qt.value&&(dt.value.width=Qt.value.width??void 0,dt.value.height=Qt.value.height??void 0)});const Sn={icon:"image",tooltip:HB.global.t("wysiwyg_options.image"),onAction:Ve=>{if(Gt.value=!0,Ve===!0||Ve.isActive()){const Ft=le.value.selection.getNode(),xn=Ft.getAttribute("src"),ze=xn?new URL(xn).searchParams:void 0,ge=Ft.getAttribute("alt"),Tt=Number((ze==null?void 0:ze.get("width"))||void 0)||void 0,Ze=Number((ze==null?void 0:ze.get("height"))||void 0)||void 0,qt=(ze==null?void 0:ze.get("key"))||void 0;if(xn===null||ge===null)return;qt&&(Qt.value=ln.storageAssetPresets.value.find(Z=>Z.key===qt)),dt.value={imageUrl:xn,alt:ge,width:Qt.value?Qt.value.width??void 0:Tt,height:Qt.value?Qt.value.height??void 0:Ze,transformationKey:qt,previewUrl:Bn(xn,nt.value??C3())}}else dt.value=null},onSetup:Ve=>{const Ft=xn=>{Ve.setActive(xn.element.tagName==="IMG")};return le.value.on("NodeChange",Ft),function(){le.value.off("NodeChange",Ft)}}};return{imageDrawerOpen:Gt,imageSelection:dt,closeImageDrawer:Mn,onImageSelect:pn,saveImage:Dr,imageButton:Sn};function Mn(){dt.value=null,Gt.value=!1}function pn(Ve){const Ft=LB()+"assets/"+Ve.id;dt.value={imageUrl:Bn(Ft,nt.value),alt:Ve.title,width:Ve.width,height:Ve.height,previewUrl:Bn(Ft,nt.value??C3())}}function Dr(){le.value.fire("focus");const Ve=dt.value;if(Ve===null)return;const Ft={},xn=new URL(Ve.imageUrl);xn.searchParams.delete("width"),xn.searchParams.delete("height"),xn.searchParams.delete("key"),ln.storageAssetTransform.value==="all"?Ve.transformationKey?Ft.key=Ve.transformationKey:(Ft.width=Ve.width,Ft.height=Ve.height):ln.storageAssetTransform.value==="presets"&&Ve.transformationKey&&(Ft.key=Ve.transformationKey);const ge=`<img src="${Lj(xn.toString(),Ft)}" alt="${Ve.alt}" />`;le.value.selection.setContent(ge),le.value.undoManager.add(),Mn()}function Bn(Ve,Ft){if(!Ve.includes(LB()+"assets/"))return Ve;try{const xn=new URL(Ve),ze=new URLSearchParams(xn.search);return Ft?ze.set("access_token",Ft):ze.delete("access_token"),Array.from(ze).length>0?`${xn.origin}${xn.pathname}?${ze.toString()}`:`${xn.origin}${xn.pathname}`}catch{return Ve}}}function vG(le){const nt=Ls(!1),ln={url:null,displayText:null,title:null,newTab:!0},Gt=Ls(ln),dt=Ls(null),Qt=Ls(null),Sn={icon:"link",tooltip:HB.global.t("wysiwyg_options.link"),onAction:()=>{if(le.value.plugins.fullscreen.isFullscreen()&&le.value.execCommand("mceFullScreen"),nt.value=!0,dt.value){le.value.selection.select(Qt.value);const Bn=dt.value.getAttribute("href"),Ve=dt.value.getAttribute("title"),Ft=dt.value.innerText,xn=dt.value.getAttribute("target");if(Bn===null||Ft===null)return;Gt.value={url:Bn,displayText:Ft,title:Ve||null,newTab:xn==="_blank"}}else{const Bn={displayText:le.value.selection.getContent()||null};Mn(Bn)}},onSetup:Bn=>{const Ve=Ft=>{let xn=Ft.element;for(Qt.value=Ft.element,dt.value=null;xn&&xn.id!=="tinymce";){if(xn.tagName==="A"){dt.value=xn;break}xn=xn.parentElement}Bn.setActive(!!dt.value)};return le.value.on("NodeChange",Ve),function(){le.value.off("NodeChange",Ve)}}};return{linkDrawerOpen:nt,linkSelection:Gt,linkNode:dt,closeLinkDrawer:pn,saveLink:Dr,linkButton:Sn};function Mn(Bn={}){Gt.value=Object.assign({},ln,Bn)}function pn(){Mn(),nt.value=!1}function Dr(){le.value.fire("focus");const Bn=Gt.value;if(Bn.url===null){dt.value&&(le.value.selection.setContent(dt.value.innerText),pn());return}const Ve=`<a href="${Bn.url}" ${Bn.title?`title="${Bn.title}"`:""} target="${Bn.newTab?"_blank":"_self"}" >${Bn.displayText||Bn.url}</a>`;!dt.value||Qt.value===dt.value?le.value.selection.setContent(Ve):Qt.value&&(Qt.value.innerHTML=Bn.displayText||Bn.url,dt.value.setAttribute("data-mce-href",Bn.url),dt.value.setAttribute("href",Bn.url),Bn.title&&dt.value.setAttribute("title",Bn.title),dt.value.setAttribute("target",Bn.newTab?"_blank":"_self"),le.value.selection.select(dt.value),le.value.selection.setNode(dt.value)),le.value.undoManager.add(),pn()}}function dG(le,nt){const ln=Ls(!1),Gt=Ls(null),dt=Ls(["video","audio"]),Qt=Ls(""),Sn=Ls(""),Mn={icon:"embed",tooltip:HB.global.t("wysiwyg_options.media"),onAction:ge=>{if(ln.value=!0,ge.isActive()){if(le.value.selection.getContent()===null)return;Qt.value=le.value.selection.getContent(),Sn.value=Qt.value}else Gt.value=null},onSetup:ge=>{const Tt=Ze=>{ge.setActive(Ze.element.tagName==="SPAN"&&Ze.element.classList.contains("mce-preview-object"))};return le.value.on("NodeChange",Tt),function(){le.value.off("NodeChange",Tt)}}},pn=Sk({get(){var ge;return(ge=Gt.value)==null?void 0:ge.sourceUrl},set(ge){Gt.value={...Gt.value,sourceUrl:ge},Gt.value.previewUrl=ze(ge,nt.value||C3())}}),Dr=Sk({get(){var ge;return(ge=Gt.value)==null?void 0:ge.width},set(ge){Gt.value!==null&&(Gt.value={...Gt.value,width:ge})}}),Bn=Sk({get(){var ge;return(ge=Gt.value)==null?void 0:ge.height},set(ge){Gt.value!==null&&(Gt.value={...Gt.value,height:ge})}});return lC(Gt,ge=>{if(Qt.value===""){if(ge===null)return;Qt.value=`<${ge.tag} width="${ge.width}" height="${ge.height}" controls><source src="${ge.sourceUrl}" type="${ge.type}" /></${ge.tag}>`}else Qt.value=Qt.value.replace(/src=".*?"/g,`src="${ge==null?void 0:ge.sourceUrl}"`).replace(/width=".*?"/g,`width="${ge==null?void 0:ge.width}"`).replace(/height=".*?"/g,`height="${ge==null?void 0:ge.height}"`).replace(/type=".*?"/g,`type="${ge==null?void 0:ge.type}"`).replaceAll(/<(video|audio|iframe)/g,`<${ge==null?void 0:ge.tag}`).replaceAll(/<\/(video|audio|iframe)/g,`</${ge==null?void 0:ge.tag}`)}),lC(Qt,ge=>{var Tt,Ze,qt,Z,Ne;if(ge==="")Gt.value=null;else{const ke=(Tt=/<(video|audio|iframe)/g.exec(ge))==null?void 0:Tt[1],Vt=((Ze=/src="(.*?)"/g.exec(ge))==null?void 0:Ze[1])||void 0,Kt=Number((qt=/width="(.*?)"/g.exec(ge))==null?void 0:qt[1])||void 0,ht=Number((Z=/height="(.*?)"/g.exec(ge))==null?void 0:Z[1])||void 0,$t=((Ne=/type="(.*?)"/g.exec(ge))==null?void 0:Ne[1])||void 0;if(Vt===void 0)return;const We=ze(Vt,nt.value||C3());Gt.value={tag:ke==="audio"?"audio":ke==="iframe"?"iframe":"video",sourceUrl:Vt,width:Kt,height:ht,type:$t,previewUrl:We}}}),{mediaDrawerOpen:ln,mediaSelection:Gt,closeMediaDrawer:Ve,openMediaTab:dt,onMediaSelect:Ft,embed:Qt,saveMedia:xn,startEmbed:Sn,mediaHeight:Bn,mediaWidth:Dr,mediaSource:pn,mediaButton:Mn};function Ve(){Qt.value="",Sn.value="",Gt.value=null,ln.value=!1,dt.value=["video"]}function Ft(ge){const Tt=LB()+"assets/"+ge.id,Ze=ge.type.startsWith("audio")?"audio":"video";Gt.value={sourceUrl:ze(Tt,nt.value),width:ge.width||300,height:ge.height||150,tag:Ze,type:ge.type,previewUrl:ze(Tt,nt.value||C3())}}function xn(){if(le.value.fire("focus"),Qt.value!==""){if(Sn.value!==""){const ge=le.value.getContent().replace(Sn.value,Qt.value);le.value.setContent(ge)}else le.value.selection.setContent(Qt.value);le.value.undoManager.add(),Ve()}}function ze(ge,Tt){if(!ge.includes(LB()+"assets/"))return ge;try{const Ze=new URL(ge),qt=new URLSearchParams(Ze.search);return Tt?qt.set("access_token",Tt):qt.delete("access_token"),Array.from(qt).length>0?`${Ze.origin}${Ze.pathname}?${qt.toString()}`:`${Ze.origin}${Ze.pathname}`}catch{return ge}}}function mG(le){const nt=Ls(!1),ln=Ls(),Gt={icon:"sourcecode",tooltip:HB.global.t("wysiwyg_options.source_code"),onAction:()=>{nt.value=!0,ln.value=le.value.getContent()}};return{codeDrawerOpen:nt,code:ln,closeCodeDrawer:dt,saveCode:Qt,sourceCodeButton:Gt};function dt(){nt.value=!1}function Qt(){le.value.fire("focus"),le.value.setContent(ln.value),le.value.undoManager.add(),dt()}}var K8={},gG={get exports(){return K8},set exports(le){K8=le}};(function(le){(function(){var nt=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},ln=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Gt=function(e,n){var a=Array.prototype.slice.call(e);return a.sort(n)},dt=function(e,n){return Qt(function(a,i){return e.eq(n(a),n(i))})},Qt=function(e){return{eq:e}},Sn=Qt(function(e,n){return e===n}),Mn=Sn,pn=function(e){return Qt(function(n,a){if(n.length!==a.length)return!1;for(var i=n.length,c=0;c<i;c++)if(!e.eq(n[c],a[c]))return!1;return!0})},Dr=function(e,n){return dt(pn(e),function(a){return Gt(a,n)})},Bn=function(e){return Qt(function(n,a){var i=Object.keys(n),c=Object.keys(a);if(!Dr(Mn).eq(i,c))return!1;for(var f=i.length,g=0;g<f;g++){var b=i[g];if(!e.eq(n[b],a[b]))return!1}return!0})},Ve=Qt(function(e,n){if(e===n)return!0;var a=nt(e),i=nt(n);return a!==i?!1:ln(a)?e===n:a==="array"?pn(Ve).eq(e,n):a==="object"?Bn(Ve).eq(e,n):!1}),Ft=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},xn=function(e){return function(n){return Ft(n)===e}},ze=function(e){return function(n){return typeof n===e}},ge=function(e){return function(n){return e===n}},Tt=xn("string"),Ze=xn("object"),qt=xn("array"),Z=ge(null),Ne=ze("boolean"),ke=ge(void 0),Vt=function(e){return e==null},Kt=function(e){return!Vt(e)},ht=ze("function"),$t=ze("number"),We=function(){},ja=function(e,n){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return e(n.apply(null,a))}},ve=function(e,n){return function(a){return e(n(a))}},Y=function(e){return function(){return e}},Pn=function(e){return e},Ea=function(e,n){return e===n};function Mt(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];var f=n.concat(i);return e.apply(null,f)}}var Oa=function(e){return function(n){return!e(n)}},Vr=function(e){return function(){throw new Error(e)}},R=function(e){return e()},Aa=function(e){e()},wt=Y(!1),jt=Y(!0),go=function(){return Go},Go=function(){var e=function(i){return i()},n=Pn,a={fold:function(i,c){return i()},isSome:wt,isNone:jt,getOr:n,getOrThunk:e,getOrDie:function(i){throw new Error(i||"error: getOrDie called on none.")},getOrNull:Y(null),getOrUndefined:Y(void 0),or:n,orThunk:e,map:go,each:We,bind:go,exists:wt,forall:jt,filter:function(){return go()},toArray:function(){return[]},toString:Y("none()")};return a}(),nr=function(e){var n=Y(e),a=function(){return c},i=function(f){return f(e)},c={fold:function(f,g){return g(e)},isSome:jt,isNone:wt,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:a,orThunk:a,map:function(f){return nr(f(e))},each:function(f){f(e)},bind:i,exists:i,forall:i,filter:function(f){return f(e)?c:Go},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return c},ba=function(e){return e==null?Go:nr(e)},Q={some:nr,none:go,from:ba},Ja=Array.prototype.slice,gt=Array.prototype.indexOf,Lt=Array.prototype.push,Ro=function(e,n){return gt.call(e,n)},Er=function(e,n){var a=Ro(e,n);return a===-1?Q.none():Q.some(a)},Nt=function(e,n){return Ro(e,n)>-1},Dn=function(e,n){for(var a=0,i=e.length;a<i;a++){var c=e[a];if(n(c,a))return!0}return!1},$n=function(e,n){for(var a=e.length,i=new Array(a),c=0;c<a;c++){var f=e[c];i[c]=n(f,c)}return i},pt=function(e,n){for(var a=0,i=e.length;a<i;a++){var c=e[a];n(c,a)}},lr=function(e,n){for(var a=e.length-1;a>=0;a--){var i=e[a];n(i,a)}},Ra=function(e,n){for(var a=[],i=[],c=0,f=e.length;c<f;c++){var g=e[c],b=n(g,c)?a:i;b.push(g)}return{pass:a,fail:i}},bn=function(e,n){for(var a=[],i=0,c=e.length;i<c;i++){var f=e[i];n(f,i)&&a.push(f)}return a},Yr=function(e,n,a){return lr(e,function(i,c){a=n(a,i,c)}),a},ta=function(e,n,a){return pt(e,function(i,c){a=n(a,i,c)}),a},Nn=function(e,n,a){for(var i=0,c=e.length;i<c;i++){var f=e[i];if(n(f,i))return Q.some(f);if(a(f,i))break}return Q.none()},ya=function(e,n){return Nn(e,n,wt)},qo=function(e,n){for(var a=0,i=e.length;a<i;a++){var c=e[a];if(n(c,a))return Q.some(a)}return Q.none()},xi=function(e){for(var n=[],a=0,i=e.length;a<i;++a){if(!qt(e[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);Lt.apply(n,e[a])}return n},fi=function(e,n){return xi($n(e,n))},ni=function(e,n){for(var a=0,i=e.length;a<i;++a){var c=e[a];if(n(c,a)!==!0)return!1}return!0},io=function(e){var n=Ja.call(e,0);return n.reverse(),n},Ti=function(e,n){return bn(e,function(a){return!Nt(n,a)})},Co=function(e,n){for(var a={},i=0,c=e.length;i<c;i++){var f=e[i];a[String(f)]=n(f,i)}return a},ra=function(e,n){var a=Ja.call(e,0);return a.sort(n),a},Qr=function(e,n){return n>=0&&n<e.length?Q.some(e[n]):Q.none()},Ga=function(e){return Qr(e,0)},na=function(e){return Qr(e,e.length-1)},Pr=ht(Array.from)?Array.from:function(e){return Ja.call(e)},Ie=function(e,n){for(var a=0;a<e.length;a++){var i=n(e[a],a);if(i.isSome())return i}return Q.none()},Xt=Object.keys,sn=Object.hasOwnProperty,Zt=function(e,n){for(var a=Xt(e),i=0,c=a.length;i<c;i++){var f=a[i],g=e[f];n(g,f)}},Or=function(e,n){return Nr(e,function(a,i){return{k:i,v:n(a,i)}})},Nr=function(e,n){var a={};return Zt(e,function(i,c){var f=n(i,c);a[f.k]=f.v}),a},Ia=function(e){return function(n,a){e[a]=n}},yn=function(e,n,a,i){var c={};return Zt(e,function(f,g){(n(f,g)?a:i)(f,g)}),c},Ar=function(e,n){var a={},i={};return yn(e,n,Ia(a),Ia(i)),{t:a,f:i}},wa=function(e,n){var a={};return yn(e,n,Ia(a),We),a},Mo=function(e,n){var a=[];return Zt(e,function(i,c){a.push(n(i,c))}),a},ji=function(e){return Mo(e,Pn)},Ir=function(e,n){return fr(e,n)?Q.from(e[n]):Q.none()},fr=function(e,n){return sn.call(e,n)},So=function(e,n){return fr(e,n)&&e[n]!==void 0&&e[n]!==null},vi=function(e,n,a){return a===void 0&&(a=Ve),Bn(a).eq(e,n)},Lo=Array.isArray,xo=function(e){if(Lo(e))return e;for(var n=[],a=0,i=e.length;a<i;a++)n[a]=e[a];return n},Ko=function(e,n,a){var i,c;if(!e)return!1;if(a=a||e,e.length!==void 0){for(i=0,c=e.length;i<c;i++)if(n.call(a,e[i],i,e)===!1)return!1}else for(i in e)if(fr(e,i)&&n.call(a,e[i],i,e)===!1)return!1;return!0},Gi=function(e,n){var a=[];return Ko(e,function(i,c){a.push(n(i,c,e))}),a},di=function(e,n){var a=[];return Ko(e,function(i,c){(!n||n(i,c,e))&&a.push(i)}),a},Ho=function(e,n){if(e){for(var a=0,i=e.length;a<i;a++)if(e[a]===n)return a}return-1},qi=function(e,n,a,i){for(var c=ke(a)?e[0]:a,f=0;f<e.length;f++)c=n.call(i,c,e[f],f);return c},$r=function(e,n,a){var i,c;for(i=0,c=e.length;i<c;i++)if(n.call(a,e[i],i,e))return i;return-1},mi=function(e){return e[e.length-1]},kn=function(){return kn=Object.assign||function(n){for(var a,i=1,c=arguments.length;i<c;i++){a=arguments[i];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},kn.apply(this,arguments)};function Ju(e,n){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(a[i[c]]=e[i[c]]);return a}function Xo(e,n,a){if(a||arguments.length===2)for(var i=0,c=n.length,f;i<c;i++)(f||!(i in n))&&(f||(f=Array.prototype.slice.call(n,0,i)),f[i]=n[i]);return e.concat(f||Array.prototype.slice.call(n))}var ki=function(e){var n=!1,a;return function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return n||(n=!0,a=e.apply(null,i)),a}},Yo=function(e,n,a,i){var c=e.isiOS()&&/ipad/i.test(a)===!0,f=e.isiOS()&&!c,g=e.isiOS()||e.isAndroid(),b=g||i("(pointer:coarse)"),C=c||!f&&g&&i("(min-device-width:768px)"),D=f||g&&!C,I=n.isSafari()&&e.isiOS()&&/safari/i.test(a)===!1,z=!D&&!C&&!I;return{isiPad:Y(c),isiPhone:Y(f),isTablet:Y(C),isPhone:Y(D),isTouch:Y(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Y(I),isDesktop:Y(z)}},Fi=function(e,n){for(var a=0;a<e.length;a++){var i=e[a];if(i.test(n))return i}},Lu=function(e,n){var a=Fi(e,n);if(!a)return{major:0,minor:0};var i=function(c){return Number(n.replace(a,"$"+c))};return ne(i(1),i(2))},gi=function(e,n){var a=String(n).toLowerCase();return e.length===0?Zu():Lu(e,a)},Zu=function(){return ne(0,0)},ne=function(e,n){return{major:e,minor:n}},Ce={nu:ne,detect:gi,unknown:Zu},ie=function(e,n){return Ie(n.brands,function(a){var i=a.brand.toLowerCase();return ya(e,function(c){var f;return i===((f=c.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(function(c){return{current:c.name,version:Ce.nu(parseInt(a.version,10),0)}})})},Re=function(e,n){var a=String(n).toLowerCase();return ya(e,function(i){return i.search(a)})},_t=function(e,n){return Re(e,n).map(function(a){var i=Ce.detect(a.versionRegexes,n);return{current:a.name,version:i}})},en=function(e,n){return Re(e,n).map(function(a){var i=Ce.detect(a.versionRegexes,n);return{current:a.name,version:i}})},Wn=function(e,n){return e.substring(n)},Kn=function(e,n,a){return n===""||e.length>=n.length&&e.substr(a,a+n.length)===n},_r=function(e,n){return xr(e,n)?Wn(e,n.length):e},Ur=function(e,n){return e.indexOf(n)!==-1},xr=function(e,n){return Kn(e,n,0)},Ma=function(e){return function(n){return n.replace(e,"")}},Ba=Ma(/^\s+|\s+$/g),Ki=Ma(/^\s+/g),ho=Ma(/\s+$/g),ri=function(e){return e.length>0},lu=function(e){return!ri(e)},Pa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$a=function(e){return function(n){return Ur(n,e)}},lt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ur(e,"edge/")&&Ur(e,"chrome")&&Ur(e,"safari")&&Ur(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pa],search:function(e){return Ur(e,"chrome")&&!Ur(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ur(e,"msie")||Ur(e,"trident")}},{name:"Opera",versionRegexes:[Pa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$a("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$a("firefox")},{name:"Safari",versionRegexes:[Pa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ur(e,"safari")||Ur(e,"mobile/"))&&Ur(e,"applewebkit")}}],no=[{name:"Windows",search:$a("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ur(e,"iphone")||Ur(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$a("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:$a("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$a("linux"),versionRegexes:[]},{name:"Solaris",search:$a("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$a("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$a("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Xi={browsers:Y(lt),oses:Y(no)},Qu="Edge",es="Chrome",Tr="IE",Cs="Opera",Yi="Firefox",qa="Safari",ts=function(){return ai({current:void 0,version:Ce.unknown()})},ai=function(e){var n=e.current,a=e.version,i=function(c){return function(){return n===c}};return{current:n,version:a,isEdge:i(Qu),isChrome:i(es),isIE:i(Tr),isOpera:i(Cs),isFirefox:i(Yi),isSafari:i(qa)}},hi={unknown:ts,nu:ai,edge:Y(Qu),chrome:Y(es),ie:Y(Tr),opera:Y(Cs),firefox:Y(Yi),safari:Y(qa)},ga="Windows",ns="iOS",G="Android",de="Linux",De="OSX",Ke="Solaris",zt="FreeBSD",nn="ChromeOS",mn=function(){return vr({current:void 0,version:Ce.unknown()})},vr=function(e){var n=e.current,a=e.version,i=function(c){return function(){return n===c}};return{current:n,version:a,isWindows:i(ga),isiOS:i(ns),isAndroid:i(G),isOSX:i(De),isLinux:i(de),isSolaris:i(Ke),isFreeBSD:i(zt),isChromeOS:i(nn)}},V={unknown:mn,nu:vr,windows:Y(ga),ios:Y(ns),android:Y(G),linux:Y(de),osx:Y(De),solaris:Y(Ke),freebsd:Y(zt),chromeos:Y(nn)},fe=function(e,n,a){var i=Xi.browsers(),c=Xi.oses(),f=n.bind(function(C){return ie(i,C)}).orThunk(function(){return _t(i,e)}).fold(hi.unknown,hi.nu),g=en(c,e).fold(V.unknown,V.nu),b=Yo(g,f,e,a);return{browser:f,os:g,deviceType:b}},xe={detect:fe},Pe=function(e){return window.matchMedia(e).matches},Ye=ki(function(){return xe.detect(navigator.userAgent,Q.from(navigator.userAgentData),Pe)}),Yt=function(){return Ye()},wn=navigator.userAgent,zr=Yt(),or=zr.browser,aa=zr.os,Da=zr.deviceType,Eu=/WebKit/.test(wn)&&!or.isEdge(),To="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Tn=wn.indexOf("Windows Phone")!==-1,St={opera:or.isOpera(),webkit:Eu,ie:or.isIE()||or.isEdge()?or.version.major:!1,gecko:or.isFirefox(),mac:aa.isOSX()||aa.isiOS(),iOS:Da.isiPad()||Da.isiPhone(),android:aa.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:or.isIE()?document.documentMode||7:10,fileApi:To,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!or.isIE(),desktop:Da.isDesktop(),windowsPhone:Tn,browser:{current:or.current,version:or.version,isChrome:or.isChrome,isEdge:or.isEdge,isFirefox:or.isFirefox,isIE:or.isIE,isOpera:or.isOpera,isSafari:or.isSafari},os:{current:aa.current,version:aa.version,isAndroid:aa.isAndroid,isChromeOS:aa.isChromeOS,isFreeBSD:aa.isFreeBSD,isiOS:aa.isiOS,isLinux:aa.isLinux,isOSX:aa.isOSX,isSolaris:aa.isSolaris,isWindows:aa.isWindows},deviceType:{isDesktop:Da.isDesktop,isiPad:Da.isiPad,isiPhone:Da.isiPhone,isPhone:Da.isPhone,isTablet:Da.isTablet,isTouch:Da.isTouch,isWebView:Da.isWebView}},sa=/^\s*|\s*$/g,ko=function(e){return e==null?"":(""+e).replace(sa,"")},kr=function(e,n){return n?n==="array"&&Lo(e)?!0:typeof e===n:e!==void 0},Hs=function(e,n,a){var i;for(e=e||[],n=n||",",typeof e=="string"&&(e=e.split(n)),a=a||{},i=e.length;i--;)a[e[i]]={};return a},rs=fr,Rc=function(e,n,a){var i=this,c,f,g,b=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);var C=e[3].match(/(^|\.)(\w+)$/i)[2],D=i.createNS(e[3].replace(/\.\w+$/,""),a);if(!D[C]){if(e[2]==="static"){D[C]=n,this.onCreate&&this.onCreate(e[2],e[3],D[C]);return}n[C]||(n[C]=function(){},b=1),D[C]=n[C],i.extend(D[C].prototype,n),e[5]&&(c=i.resolve(e[5]).prototype,f=e[5].match(/\.(\w+)$/i)[1],g=D[C],b?D[C]=function(){return c[f].apply(this,arguments)}:D[C]=function(){return this.parent=c[f],g.apply(this,arguments)},D[C].prototype[C]=D[C],i.each(c,function(I,z){D[C].prototype[z]=c[z]}),i.each(n,function(I,z){c[z]?D[C].prototype[z]=function(){return this.parent=c[z],I.apply(this,arguments)}:z!==C&&(D[C].prototype[z]=I)})),i.each(n.static,function(I,z){D[C][z]=I})}},qr=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var c=n[i];for(var f in c)if(fr(c,f)){var g=c[f];g!==void 0&&(e[f]=g)}}return e},Ei=function(e,n,a,i){i=i||this,e&&(a&&(e=e[a]),Ko(e,function(c,f){if(n.call(i,c,f,a)===!1)return!1;Ei(c,n,a,i)}))},Mc=function(e,n){var a,i;for(n=n||window,e=e.split("."),a=0;a<e.length;a++)i=e[a],n[i]||(n[i]={}),n=n[i];return n},Ou=function(e,n){var a,i;for(n=n||window,e=e.split("."),a=0,i=e.length;a<i&&(n=n[e[a]],!!n);a++);return n},uo=function(e,n){return!e||kr(e,"array")?e:Gi(e.split(n||","),ko)},Vs=function(e){var n=St.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e},je={trim:ko,isArray:Lo,is:kr,toArray:xo,makeMap:Hs,each:Ko,map:Gi,grep:di,inArray:Ho,hasOwn:rs,extend:qr,create:Rc,walk:Ei,createNS:Mc,resolve:Ou,explode:uo,_addCacheSuffix:Vs},lc=function(e,n){var a=n||document,i=a.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Ss(i.childNodes[0])},so=function(e,n){var a=n||document,i=a.createElement(e);return Ss(i)},pl=function(e,n){var a=n||document,i=a.createTextNode(e);return Ss(i)},Ss=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},B=function(e,n,a){return Q.from(e.dom.elementFromPoint(n,a)).map(Ss)},T={fromHtml:lc,fromTag:so,fromText:pl,fromDom:Ss,fromPoint:B},w=function(e,n){var a=[],i=function(f){return a.push(f),n(f)},c=n(e);do c=c.bind(i);while(c.isSome());return a},A=function(e,n,a){return(e.compareDocumentPosition(n)&a)!==0},L=function(e,n){return A(e,n,Node.DOCUMENT_POSITION_CONTAINED_BY)},te=8,Te=9,tt=11,dn=1,Fn=3,Rt=function(e,n){var a=e.dom;if(a.nodeType!==dn)return!1;var i=a;if(i.matches!==void 0)return i.matches(n);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(n);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(n);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},fn=function(e){return e.nodeType!==dn&&e.nodeType!==Te&&e.nodeType!==tt||e.childElementCount===0},ir=function(e,n){var a=n===void 0?document:n.dom;return fn(a)?[]:$n(a.querySelectorAll(e),T.fromDom)},rr=function(e,n){var a=n===void 0?document:n.dom;return fn(a)?Q.none():Q.from(a.querySelector(e)).map(T.fromDom)},Yn=function(e,n){return e.dom===n.dom},La=function(e,n){var a=e.dom,i=n.dom;return a===i?!1:a.contains(i)},jn=function(e,n){return L(e.dom,n.dom)},Ca=function(e,n){return Yt().browser.isIE()?jn(e,n):La(e,n)};typeof window<"u"||Function("return this;")();var ca=function(e){var n=e.dom.nodeName;return n.toLowerCase()},Oi=function(e){return e.dom.nodeType},hr=function(e){return function(n){return Oi(n)===e}},Us=function(e){return Oi(e)===te||ca(e)==="#comment"},co=hr(dn),Eo=hr(Fn),t1=hr(Te),Ji=hr(tt),mh=function(e){return function(n){return co(n)&&ca(n)===e}},Yc=function(e){return T.fromDom(e.dom.ownerDocument)},Zn=function(e){return t1(e)?e:Yc(e)},Ws=function(e){return T.fromDom(Zn(e).dom.documentElement)},Bo=function(e){return T.fromDom(Zn(e).dom.defaultView)},Po=function(e){return Q.from(e.dom.parentNode).map(T.fromDom)},Ai=function(e,n){for(var a=ht(n)?n:wt,i=e.dom,c=[];i.parentNode!==null&&i.parentNode!==void 0;){var f=i.parentNode,g=T.fromDom(f);if(c.push(g),a(g)===!0)break;i=f}return c},oi=function(e){var n=function(a){return bn(a,function(i){return!Yn(e,i)})};return Po(e).map(Hu).map(n).getOr([])},If=function(e){return Q.from(e.dom.previousSibling).map(T.fromDom)},fc=function(e){return Q.from(e.dom.nextSibling).map(T.fromDom)},la=function(e){return io(w(e,If))},ro=function(e){return w(e,fc)},Hu=function(e){return $n(e.dom.childNodes,T.fromDom)},bl=function(e,n){var a=e.dom.childNodes;return Q.from(a[n]).map(T.fromDom)},pi=function(e){return bl(e,0)},js=function(e){return bl(e,e.dom.childNodes.length-1)},n1=function(e){return e.dom.childNodes.length},$f=function(e){var n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return T.fromDom(n)},Ha=function(e){return Ji(e)&&Kt(e.dom.host)},Bc=ht(Element.prototype.attachShadow)&&ht(Node.prototype.getRootNode),Kl=Y(Bc),as=Bc?function(e){return T.fromDom(e.dom.getRootNode())}:Zn,Vo=function(e){return Ha(e)?e:$f(Zn(e))},Xl=function(e){var n=as(e);return Ha(n)?Q.some(n):Q.none()},yl=function(e){return T.fromDom(e.dom.host)},Au=function(e){if(Kl()&&Kt(e.target)){var n=T.fromDom(e.target);if(co(n)&&os(n)&&e.composed&&e.composedPath){var a=e.composedPath();if(a)return Ga(a)}}return Q.from(e.target)},os=function(e){return Kt(e.dom.shadowRoot)},fu=function(e,n){var a=Po(e);a.each(function(i){i.dom.insertBefore(n.dom,e.dom)})},kv=function(e,n){var a=fc(e);a.fold(function(){var i=Po(e);i.each(function(c){Di(c,n)})},function(i){fu(i,n)})},Pc=function(e,n){var a=pi(e);a.fold(function(){Di(e,n)},function(i){e.dom.insertBefore(n.dom,i.dom)})},Di=function(e,n){e.dom.appendChild(n.dom)},yd=function(e,n){fu(e,n),Di(n,e)},r1=function(e,n){pt(n,function(a){fu(e,a)})},zf=function(e,n){pt(n,function(a){Di(e,a)})},Ff=function(e){e.dom.textContent="",pt(Hu(e),function(n){Uo(n)})},Uo=function(e){var n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Lf=function(e){var n=Hu(e);n.length>0&&r1(e,n),Uo(e)},Hf=function(e){var n=Eo(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;var a=n.ownerDocument;return Xl(T.fromDom(n)).fold(function(){return a.body.contains(n)},ve(Hf,yl))},Du=function(e,n){var a=function(i,c){return Du(e+i,n+c)};return{left:e,top:n,translate:a}},wl=Du,Vf=function(e){var n=e.getBoundingClientRect();return wl(n.left,n.top)},Cl=function(e,n){return e!==void 0?e:n!==void 0?n:0},po=function(e){var n=e.dom.ownerDocument,a=n.body,i=n.defaultView,c=n.documentElement;if(a===e.dom)return wl(a.offsetLeft,a.offsetTop);var f=Cl(i==null?void 0:i.pageYOffset,c.scrollTop),g=Cl(i==null?void 0:i.pageXOffset,c.scrollLeft),b=Cl(c.clientTop,a.clientTop),C=Cl(c.clientLeft,a.clientLeft);return xs(e).translate(g-C,f-b)},xs=function(e){var n=e.dom,a=n.ownerDocument,i=a.body;return i===n?wl(i.offsetLeft,i.offsetTop):Hf(e)?Vf(n):wl(0,0)},xm=function(e){var n=e!==void 0?e.dom:document,a=n.body.scrollLeft||n.documentElement.scrollLeft,i=n.body.scrollTop||n.documentElement.scrollTop;return wl(a,i)},Gs=function(e,n,a){var i=a!==void 0?a.dom:document,c=i.defaultView;c&&c.scrollTo(e,n)},Tm=function(e,n){var a=Yt().browser.isSafari();a&&ht(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},a1=function(e){var n=e===void 0?window:e;return Yt().browser.isFirefox()?Q.none():Q.from(n.visualViewport)},gh=function(e,n,a,i){return{x:e,y:n,width:a,height:i,right:e+a,bottom:n+i}},Uf=function(e){var n=e===void 0?window:e,a=n.document,i=xm(T.fromDom(a));return a1(n).fold(function(){var c=n.document.documentElement,f=c.clientWidth,g=c.clientHeight;return gh(i.left,i.top,f,g)},function(c){return gh(Math.max(c.pageLeft,i.left),Math.max(c.pageTop,i.top),c.width,c.height)})},Wf=function(e){return function(n){return!!n&&n.nodeType===e}},Yl=function(e){return!!e&&!Object.getPrototypeOf(e)},Qn=Wf(1),vc=function(e){var n=e.map(function(a){return a.toLowerCase()});return function(a){if(a&&a.nodeName){var i=a.nodeName.toLowerCase();return Nt(n,i)}return!1}},is=function(e,n){var a=n.toLowerCase().split(" ");return function(i){if(Qn(i))for(var c=0;c<a.length;c++){var f=i.ownerDocument.defaultView.getComputedStyle(i,null),g=f?f.getPropertyValue(e):null;if(g===a[c])return!0}return!1}},_u=function(e){return function(n){return Qn(n)&&n.hasAttribute(e)}},dc=function(e,n){return function(a){return Qn(a)&&a.getAttribute(e)===n}},Jo=function(e){return Qn(e)&&e.hasAttribute("data-mce-bogus")},_i=function(e){return Qn(e)&&e.getAttribute("data-mce-bogus")==="all"},ii=function(e){return Qn(e)&&e.tagName==="TABLE"},Jl=function(e){return function(n){return!!(Qn(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e))}},vu=vc(["textarea","input"]),un=Wf(3),jf=Wf(8),hh=Wf(9),pr=Wf(11),Va=vc(["br"]),km=vc(["img"]),Jc=Jl("true"),lo=Jl("false"),Em=vc(["td","th"]),Ts=vc(["video","audio","object","embed"]),wd=function(e,n,a){return a===void 0&&(a=Ea),e.exists(function(i){return a(i,n)})},wr=function(e){for(var n=[],a=function(c){n.push(c)},i=0;i<e.length;i++)e[i].each(a);return n},Vu=function(e,n,a){return e.isSome()&&n.isSome()?Q.some(a(e.getOrDie(),n.getOrDie())):Q.none()},N0=function(e,n,a,i){return e.isSome()&&n.isSome()&&a.isSome()?Q.some(i(e.getOrDie(),n.getOrDie(),a.getOrDie())):Q.none()},I0=function(e,n){return e?Q.some(n):Q.none()},bo=function(e){return e.style!==void 0&&ht(e.style.getPropertyValue)},Om=function(e,n,a){if(Tt(a)||Ne(a)||$t(a))e.setAttribute(n,a+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple")},O=function(e,n,a){Om(e.dom,n,a)},$=function(e,n){var a=e.dom;Zt(n,function(i,c){Om(a,c,i)})},U=function(e,n){var a=e.dom.getAttribute(n);return a===null?void 0:a},oe=function(e,n){return Q.from(U(e,n))},Oe=function(e,n){var a=e.dom;return a&&a.hasAttribute?a.hasAttribute(n):!1},Xe=function(e,n){e.dom.removeAttribute(n)},En=function(e){return ta(e.dom.attributes,function(n,a){return n[a.name]=a.value,n},{})},ur=function(e,n,a){if(!Tt(a))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",a,":: Element ",e),new Error("CSS value must be a string: "+a);bo(e)&&e.style.setProperty(n,a)},jr=function(e,n){var a=e.dom;Zt(n,function(i,c){ur(a,c,i)})},Cr=function(e,n){var a=e.dom,i=window.getComputedStyle(a),c=i.getPropertyValue(n);return c===""&&!Hf(e)?Ka(a,n):c},Ka=function(e,n){return bo(e)?e.style.getPropertyValue(n):""},du=function(e,n){var a=e.dom,i=Ka(a,n);return Q.from(i).filter(function(c){return c.length>0})},No=function(e){var n={},a=e.dom;if(bo(a))for(var i=0;i<a.style.length;i++){var c=a.style.item(i);n[c]=a.style[c]}return n},Tk=function(e){return e.dom.offsetWidth},fC=Yt().browser,vC=function(e){return ya(e,co)},kk=function(e){return fC.isFirefox()&&ca(e)==="table"?vC(Hu(e)).filter(function(n){return ca(n)==="caption"}).bind(function(n){return vC(ro(n)).map(function(a){var i=a.dom.offsetTop,c=n.dom.offsetTop,f=n.dom.offsetHeight;return i<=c?-f:0})}).getOr(0):0},Sl=function(e,n){return e.children&&Nt(e.children,n)},ph=function(e,n,a){var i=0,c=0,f=e.ownerDocument;if(a=a||e,n){if(a===e&&n.getBoundingClientRect&&Cr(T.fromDom(e),"position")==="static"){var g=n.getBoundingClientRect();return i=g.left+(f.documentElement.scrollLeft||e.scrollLeft)-f.documentElement.clientLeft,c=g.top+(f.documentElement.scrollTop||e.scrollTop)-f.documentElement.clientTop,{x:i,y:c}}for(var b=n;b&&b!==a&&b.nodeType&&!Sl(b,a);){var C=b;i+=C.offsetLeft||0,c+=C.offsetTop||0,b=C.offsetParent}for(b=n.parentNode;b&&b!==a&&b.nodeType&&!Sl(b,a);)i-=b.scrollLeft||0,c-=b.scrollTop||0,b=b.parentNode;c+=kk(T.fromDom(n))}return{x:i,y:c}},ks={},Am={exports:ks};(function(e,n,a,i){(function(c,f){typeof n=="object"&&typeof a<"u"?a.exports=f():typeof e=="function"&&e.amd?e(f):(c=typeof globalThis<"u"?globalThis:c||self,c.EphoxContactWrapper=f())})(this,function(){var c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xk<"u"?xk:typeof self<"u"?self:{},f={exports:{}};(function(D){(function(I){var z=setTimeout;function F(){}function q(me,_e){return function(){me.apply(_e,arguments)}}function X(me){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof me!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Ee(me,this)}function J(me,_e){for(;me._state===3;)me=me._value;if(me._state===0){me._deferreds.push(_e);return}me._handled=!0,X._immediateFn(function(){var et=me._state===1?_e.onFulfilled:_e.onRejected;if(et===null){(me._state===1?ee:ce)(_e.promise,me._value);return}var bt;try{bt=et(me._value)}catch(Xn){ce(_e.promise,Xn);return}ee(_e.promise,bt)})}function ee(me,_e){try{if(_e===me)throw new TypeError("A promise cannot be resolved with itself.");if(_e&&(typeof _e=="object"||typeof _e=="function")){var et=_e.then;if(_e instanceof X){me._state=3,me._value=_e,se(me);return}else if(typeof et=="function"){Ee(q(et,_e),me);return}}me._state=1,me._value=_e,se(me)}catch(bt){ce(me,bt)}}function ce(me,_e){me._state=2,me._value=_e,se(me)}function se(me){me._state===2&&me._deferreds.length===0&&X._immediateFn(function(){me._handled||X._unhandledRejectionFn(me._value)});for(var _e=0,et=me._deferreds.length;_e<et;_e++)J(me,me._deferreds[_e]);me._deferreds=null}function Ae(me,_e,et){this.onFulfilled=typeof me=="function"?me:null,this.onRejected=typeof _e=="function"?_e:null,this.promise=et}function Ee(me,_e){var et=!1;try{me(function(bt){et||(et=!0,ee(_e,bt))},function(bt){et||(et=!0,ce(_e,bt))})}catch(bt){if(et)return;et=!0,ce(_e,bt)}}X.prototype.catch=function(me){return this.then(null,me)},X.prototype.then=function(me,_e){var et=new this.constructor(F);return J(this,new Ae(me,_e,et)),et},X.all=function(me){var _e=Array.prototype.slice.call(me);return new X(function(et,bt){if(_e.length===0)return et([]);var Xn=_e.length;function an(qn,xt){try{if(xt&&(typeof xt=="object"||typeof xt=="function")){var tn=xt.then;if(typeof tn=="function"){tn.call(xt,function(Et){an(qn,Et)},bt);return}}_e[qn]=xt,--Xn===0&&et(_e)}catch(Et){bt(Et)}}for(var st=0;st<_e.length;st++)an(st,_e[st])})},X.resolve=function(me){return me&&typeof me=="object"&&me.constructor===X?me:new X(function(_e){_e(me)})},X.reject=function(me){return new X(function(_e,et){et(me)})},X.race=function(me){return new X(function(_e,et){for(var bt=0,Xn=me.length;bt<Xn;bt++)me[bt].then(_e,et)})},X._immediateFn=typeof setImmediate=="function"?function(me){setImmediate(me)}:function(me){z(me,0)},X._unhandledRejectionFn=function(_e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",_e)},X._setImmediateFn=function(_e){X._immediateFn=_e},X._setUnhandledRejectionFn=function(_e){X._unhandledRejectionFn=_e},D.exports?D.exports=X:I.Promise||(I.Promise=X)})(c)})(f);var g=f.exports,b=function(){return typeof window<"u"?window:Function("return this;")()}(),C={boltExport:b.Promise||g};return C})})(void 0,ks,Am);var $0=Am.exports.boltExport,bh=function(e){var n=Q.none(),a=[],i=function(D){return bh(function(I){c(function(z){I(D(z))})})},c=function(D){g()?C(D):a.push(D)},f=function(D){g()||(n=Q.some(D),b(a),a=[])},g=function(){return n.isSome()},b=function(D){pt(D,C)},C=function(D){n.each(function(I){setTimeout(function(){D(I)},0)})};return e(f),{get:c,map:i,isReady:g}},o1=function(e){return bh(function(n){n(e)})},dC={nu:bh,pure:o1},Ek=function(e){setTimeout(function(){throw e},0)},xl=function(e){var n=function(C){e().then(C,Ek)},a=function(C){return xl(function(){return e().then(C)})},i=function(C){return xl(function(){return e().then(function(D){return C(D).toPromise()})})},c=function(C){return xl(function(){return e().then(function(){return C.toPromise()})})},f=function(){return dC.nu(n)},g=function(){var C=null;return xl(function(){return C===null&&(C=e()),C})},b=e;return{map:a,bind:i,anonBind:c,toLazy:f,toCached:g,toPromise:b,get:n}},yh=function(e){return xl(function(){return new $0(e)})},Ok=function(e){return xl(function(){return $0.resolve(e)})},z0={nu:yh,pure:Ok},Ak=function(e,n){return n(function(a){var i=[],c=0,f=function(g){return function(b){i[g]=b,c++,c>=e.length&&a(i)}};e.length===0?a([]):pt(e,function(g,b){g.get(f(b))})})},Dk=function(e){return Ak(e,z0.nu)},Dm=function(e){var n=function(z){return Dm(e)},a=function(z){return Dm(e)},i=function(z){return Dm(z(e))},c=function(z){return Dm(e)},f=function(z){z(e)},g=function(z){return z(e)},b=function(z,F){return F(e)},C=function(z){return z(e)},D=function(z){return z(e)},I=function(){return Q.some(e)};return{isValue:jt,isError:wt,getOr:Y(e),getOrThunk:Y(e),getOrDie:Y(e),or:n,orThunk:a,fold:b,map:i,mapError:c,each:f,bind:g,exists:C,forall:D,toOptional:I}},wh=function(e){var n=function(D){return D()},a=function(){return Vr(String(e))()},i=Pn,c=function(D){return D()},f=function(D){return wh(e)},g=function(D){return wh(D(e))},b=function(D){return wh(e)},C=function(D,I){return D(e)};return{isValue:wt,isError:jt,getOr:Pn,getOrThunk:n,getOrDie:a,or:i,orThunk:c,fold:C,map:f,mapError:g,each:We,bind:b,exists:wt,forall:jt,toOptional:Q.none}},mC=function(e,n){return e.fold(function(){return wh(n)},Dm)},gC={value:Dm,error:wh,fromOption:mC},qs=function(e){if(!qt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");var n=[],a={};return pt(e,function(i,c){var f=Xt(i);if(f.length!==1)throw new Error("one and only one name per case");var g=f[0],b=i[g];if(a[g]!==void 0)throw new Error("duplicate key detected:"+g);if(g==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qt(b))throw new Error("case arguments must be an array");n.push(g),a[g]=function(){for(var C=[],D=0;D<arguments.length;D++)C[D]=arguments[D];var I=C.length;if(I!==b.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+b.length+" ("+b+"), got "+I);var z=function(F){var q=Xt(F);if(n.length!==q.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+q.join(","));var X=ni(n,function(J){return Nt(q,J)});if(!X)throw new Error("Not all branches were specified when using match. Specified: "+q.join(", ")+`
Required: `+n.join(", "));return F[g].apply(null,C)};return{fold:function(){for(var F=[],q=0;q<arguments.length;q++)F[q]=arguments[q];if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);var X=F[c];return X.apply(null,C)},match:z,log:function(F){console.log(F,{constructors:n,constructor:g,params:C})}}}}),a},In={generate:qs};In.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Gf=function(e){return e.fold(Pn,Pn)};function Ch(e,n,a,i,c){return e(a,i)?Q.some(a):ht(c)&&c(a)?Q.none():n(a,i,c)}var Ev=function(e,n,a){for(var i=e.dom,c=ht(a)?a:wt;i.parentNode;){i=i.parentNode;var f=T.fromDom(i);if(n(f))return Q.some(f);if(c(f))break}return Q.none()},_m=function(e,n,a){var i=function(c,f){return f(c)};return Ch(i,Ev,e,n,a)},F0=function(e,n){var a=e.dom;return a.parentNode?Zc(T.fromDom(a.parentNode),function(i){return!Yn(e,i)&&n(i)}):Q.none()},Zc=function(e,n){var a=function(c){return n(T.fromDom(c))},i=ya(e.dom.childNodes,a);return i.map(T.fromDom)},Cd=function(e,n,a){return Ev(e,function(i){return Rt(i,n)},a)},Rm=function(e,n){return rr(n,e)},Zo=function(e,n,a){var i=function(c,f){return Rt(c,f)};return Ch(i,Cd,e,n,a)},Zi=window.Promise?window.Promise:$0,Sh,Zl=function(e,n){for(var a=window.requestAnimationFrame,i=["ms","moz","webkit"],c=function(g){window.setTimeout(g,0)},f=0;f<i.length&&!a;f++)a=window[i[f]+"RequestAnimationFrame"];a||(a=c),a(e,n)},xh=function(e,n){return typeof n!="number"&&(n=0),setTimeout(e,n)},i1=function(e,n){return typeof n!="number"&&(n=1),setInterval(e,n)},u1=function(e){return clearTimeout(e)},_k=function(e){return clearInterval(e)},Mm=function(e,n){var a,i=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];clearTimeout(a),a=xh(function(){e.apply(this,c)},n)};return i.stop=function(){clearTimeout(a)},i},Ru={requestAnimationFrame:function(e,n){if(Sh){Sh.then(e);return}Sh=new Zi(function(a){n||(n=document.body),Zl(a,n)}).then(e)},setTimeout:xh,setInterval:i1,setEditorTimeout:function(e,n,a){return xh(function(){e.removed||n()},a)},setEditorInterval:function(e,n,a){var i=i1(function(){e.removed?clearInterval(i):n()},a);return i},debounce:Mm,throttle:Mm,clearInterval:_k,clearTimeout:u1},hC=function(e,n){n===void 0&&(n={});var a=0,i={},c=T.fromDom(e),f=Zn(c),g=n.maxLoadTime||5e3,b=function(ee){n.referrerPolicy=ee},C=function(ee){Di(Vo(c),ee)},D=function(ee){var ce=Vo(c);Rm(ce,"#"+ee).each(Uo)},I=function(ee){return Ir(i,ee).getOrThunk(function(){return{id:"mce-u"+a++,passed:[],failed:[],count:0}})},z=function(ee,ce,se){var Ae,Ee=je._addCacheSuffix(ee),me=I(Ee);i[Ee]=me,me.count++;var _e=function(xt,tn){for(var Et=xt.length;Et--;)xt[Et]();me.status=tn,me.passed=[],me.failed=[],Ae&&(Ae.onload=null,Ae.onerror=null,Ae=null)},et=function(){return _e(me.passed,2)},bt=function(){return _e(me.failed,3)},Xn=function(xt,tn){xt()||(Date.now()-qn<g?Ru.setTimeout(tn):bt())},an=function(){Xn(function(){for(var xt=e.styleSheets,tn=xt.length;tn--;){var Et=xt[tn],Pt=Et.ownerNode;if(Pt&&Pt.id===Ae.id)return et(),!0}return!1},an)};if(ce&&me.passed.push(ce),se&&me.failed.push(se),me.status!==1){if(me.status===2){et();return}if(me.status===3){bt();return}me.status=1;var st=T.fromTag("link",f.dom);$(st,{rel:"stylesheet",type:"text/css",id:me.id});var qn=Date.now();n.contentCssCors&&O(st,"crossOrigin","anonymous"),n.referrerPolicy&&O(st,"referrerpolicy",n.referrerPolicy),Ae=st.dom,Ae.onload=an,Ae.onerror=bt,C(st),O(st,"href",Ee)}},F=function(ee){return z0.nu(function(ce){z(ee,ja(ce,Y(gC.value(ee))),ja(ce,Y(gC.error(ee))))})},q=function(ee,ce,se){Dk($n(ee,F)).get(function(Ae){var Ee=Ra(Ae,function(me){return me.isValue()});Ee.fail.length>0?se(Ee.fail.map(Gf)):ce(Ee.pass.map(Gf))})},X=function(ee){var ce=je._addCacheSuffix(ee);Ir(i,ce).each(function(se){var Ae=--se.count;Ae===0&&(delete i[ce],D(se.id))})},J=function(ee){pt(ee,function(ce){X(ce)})};return{load:z,loadAll:q,unload:X,unloadAll:J,_setReferrerPolicy:b}},Oo=function(){var e=new WeakMap,n=function(a,i){var c=as(a),f=c.dom;return Q.from(e.get(f)).getOrThunk(function(){var g=hC(f,i);return e.set(f,g),g})};return{forElement:n}},Qc=Oo(),Ta=function(){function e(n,a){this.node=n,this.rootNode=a,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node},e.prototype.prev=function(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node},e.prototype.prev2=function(n){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",n),this.node},e.prototype.findSibling=function(n,a,i,c){var f,g;if(n){if(!c&&n[a])return n[a];if(n!==this.rootNode){if(f=n[i],f)return f;for(g=n.parentNode;g&&g!==this.rootNode;g=g.parentNode)if(f=g[i],f)return f}}},e.prototype.findPreviousNode=function(n,a,i,c){var f,g,b;if(n){if(f=n[i],this.rootNode&&f===this.rootNode)return;if(f){if(!c){for(b=f[a];b;b=b[a])if(!b[a])return b}return f}if(g=n.parentNode,g&&g!==this.rootNode)return g}},e}(),Ov=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Nc=["td","th"],Rk=["thead","tbody","tfoot"],Ri=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],us=["h1","h2","h3","h4","h5","h6"],pC=["li","dd","dt"],rt=["ul","ol","dl"],Es=["pre","script","textarea","style"],qf=function(e){var n;return function(a){return n=n||Co(e,jt),fr(n,ca(a))}},er=qf(us),mc=qf(Ov),Mk=function(e){return ca(e)==="table"},Uu=function(e){return co(e)&&!mc(e)},Bm=function(e){return co(e)&&ca(e)==="br"},Ql=qf(Ri),el=qf(rt),Mu=qf(pC),fa=qf(Rk),Tl=qf(Nc),Sd=qf(Es),Za=function(e,n,a){return Cd(e,n,a).isSome()},Av="\uFEFF",Ks=" ",Xs=function(e){return e===Av},Bk=function(e){return e.replace(/\uFEFF/g,"")},Se=Av,ss=Xs,kl=Bk,Pm=Qn,gc=un,Ua=function(e){return gc(e)&&(e=e.parentNode),Pm(e)&&e.hasAttribute("data-mce-caret")},Qa=function(e){return gc(e)&&ss(e.data)},Os=function(e){return Ua(e)||Qa(e)},Kf=function(e){return e.firstChild!==e.lastChild||!Va(e.firstChild)},L0=function(e,n){var a=e.ownerDocument,i=a.createTextNode(Se),c=e.parentNode;if(n){var f=e.previousSibling;if(gc(f)){if(Os(f))return f;if(kh(f))return f.splitText(f.data.length-1)}c.insertBefore(i,e)}else{var f=e.nextSibling;if(gc(f)){if(Os(f))return f;if(Th(f))return f.splitText(1),f}e.nextSibling?c.insertBefore(i,e.nextSibling):c.appendChild(i)}return i},Hn=function(e){var n=e.container();return un(n)?n.data.charAt(e.offset())===Se||e.isAtStart()&&Qa(n.previousSibling):!1},s1=function(e){var n=e.container();return un(n)?n.data.charAt(e.offset()-1)===Se||e.isAtEnd()&&Qa(n.nextSibling):!1},hc=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},bC=function(e,n,a){var i=n.ownerDocument,c=i.createElement(e);c.setAttribute("data-mce-caret",a?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(hc());var f=n.parentNode;return a?f.insertBefore(c,n):n.nextSibling?f.insertBefore(c,n.nextSibling):f.appendChild(c),c},Th=function(e){return gc(e)&&e.data[0]===Se},kh=function(e){return gc(e)&&e.data[e.data.length-1]===Se},H0=function(e){var n=e.getElementsByTagName("br"),a=n[n.length-1];Jo(a)&&a.parentNode.removeChild(a)},V0=function(e){return e&&e.hasAttribute("data-mce-caret")?(H0(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},ef=function(e){return Ua(e.startContainer)},Xf=Jc,Pk=lo,U0=Va,Nk=un,yC=vc(["script","style","textarea"]),Eh=vc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Nm=vc(["table"]),wC=Os,tf=function(e){return wC(e)?!1:Nk(e)?!yC(e.parentNode):Eh(e)||U0(e)||Nm(e)||W0(e)},Im=function(e){return Qn(e)&&e.getAttribute("unselectable")==="true"},W0=function(e){return Im(e)===!1&&Pk(e)},CC=function(e,n){for(e=e.parentNode;e&&e!==n;e=e.parentNode){if(W0(e))return!1;if(Xf(e))return!0}return!0},Ik=function(e){return W0(e)?ta(Pr(e.getElementsByTagName("*")),function(n,a){return n||Xf(a)},!1)!==!0:!1},$k=function(e){return Eh(e)||Ik(e)},bi=function(e,n){return tf(e)&&CC(e,n)},nf=/^[ \t\r\n]*$/,tl=function(e){return nf.test(e)},Dv=function(e,n){var a=T.fromDom(n),i=T.fromDom(e);return Za(i,"pre,code",Mt(Yn,a))},SC=function(e,n){return un(e)&&tl(e.data)&&Dv(e,n)===!1},nl=function(e){return Qn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))},xd=function(e,n){return tf(e)&&SC(e,n)===!1||nl(e)||j0(e)},j0=_u("data-mce-bookmark"),G0=_u("data-mce-bogus"),Yf=dc("data-mce-bogus","all"),Ic=function(e,n){var a=0;if(xd(e,e))return!1;var i=e.firstChild;if(!i)return!0;var c=new Ta(i,e);do{if(n){if(Yf(i)){i=c.next(!0);continue}if(G0(i)){i=c.next();continue}}if(Va(i)){a++,i=c.next();continue}if(xd(i,e))return!1;i=c.next()}while(i);return a<=1},mu=function(e,n){return n===void 0&&(n=!0),Ic(e.dom,n)},c1=function(e){return e.nodeName.toLowerCase()==="span"},q0=function(e,n){return Kt(e)&&(xd(e,n)||Uu(T.fromDom(e)))},Td=function(e,n){var a=new Ta(e,n).prev(!1),i=new Ta(e,n).next(!1),c=ke(a)||q0(a,n),f=ke(i)||q0(i,n);return c&&f},$m=function(e){return c1(e)&&e.getAttribute("data-mce-type")==="bookmark"},zm=function(e,n){return un(e)&&e.data.length>0&&Td(e,n)},zk=function(e){return Qn(e)?e.childNodes.length>0:!1},Fm=function(e){return pr(e)||hh(e)},K0=function(e,n,a){var i=a||n;if(Qn(n)&&$m(n))return n;for(var c=n.childNodes,f=c.length-1;f>=0;f--)K0(e,c[f],i);if(Qn(n)){var g=n.childNodes;g.length===1&&$m(g[0])&&n.parentNode.insertBefore(g[0],n)}return!Fm(n)&&!xd(n,i)&&!zk(n)&&!zm(n,i)&&e.remove(n),n},Fk=je.makeMap,Io=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l1=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_v=/[<>&\"\']/g,X0=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Y0={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},$c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},pc={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},kd=function(e){var n=T.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Rv=function(e,n){var a,i,c,f={};if(e){for(e=e.split(","),n=n||10,a=0;a<e.length;a+=2)i=String.fromCharCode(parseInt(e[a],n)),$c[i]||(c="&"+e[a+1]+";",f[i]=c,f[c]=i);return f}},f1=Rv("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Oh=function(e,n){return e.replace(n?Io:l1,function(a){return $c[a]||a})},J0=function(e){return(""+e).replace(_v,function(n){return $c[n]||n})},Ed=function(e,n){return e.replace(n?Io:l1,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":$c[a]||"&#"+a.charCodeAt(0)+";"})},v1=function(e,n,a){return a=a||f1,e.replace(n?Io:l1,function(i){return $c[i]||a[i]||i})},Lk=function(e,n){var a=Rv(n)||f1,i=function(g,b){return g.replace(b?Io:l1,function(C){return $c[C]!==void 0?$c[C]:a[C]!==void 0?a[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"})},c=function(g,b){return v1(g,b,a)},f=Fk(e.replace(/\+/g,","));return f.named&&f.numeric?i:f.named?n?c:v1:f.numeric?Ed:Oh},Z0=function(e){return e.replace(X0,function(n,a){return a?(a.charAt(0).toLowerCase()==="x"?a=parseInt(a.substr(1),16):a=parseInt(a,10),a>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(a&1023))):Y0[a]||String.fromCharCode(a)):pc[n]||f1[n]||kd(n)})},bc={encodeRaw:Oh,encodeAllRaw:J0,encodeNumeric:Ed,encodeNamed:v1,getEncodeFunc:Lk,decode:Z0},Ys={},Lm={},rl=je.makeMap,Bu=je.each,d1=je.extend,Jf=je.explode,xC=je.inArray,gu=function(e,n){return e=je.trim(e),e?e.split(n||" "):[]},Q0=function(e,n){var a=rl(e," ",rl(e.toUpperCase()," "));return d1(a,n)},m1=function(e){return Q0("td th li dt dd figcaption caption details summary",e.getTextBlockElements())},oa=function(e){var n={},a,i,c,f,g,b,C=function(I,z,F){var q,X,J,ee=function(se,Ae){var Ee={},me,_e;for(me=0,_e=se.length;me<_e;me++)Ee[se[me]]=Ae||{};return Ee};F=F||[],z=z||"",typeof F=="string"&&(F=gu(F));var ce=gu(I);for(q=ce.length;q--;)X=gu([a,z].join(" ")),J={attributes:ee(X),attributesOrder:X,children:ee(F,Lm)},n[ce[q]]=J},D=function(I,z){var F,q,X,J,ee=gu(I);F=ee.length;for(var ce=gu(z);F--;)for(q=n[ee[F]],X=0,J=ce.length;X<J;X++)q.attributes[ce[X]]={},q.attributesOrder.push(ce[X])};return Ys[e]?Ys[e]:(a="id accesskey class dir lang style tabindex title role",i="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",i+=" article aside details dialog figure main header footer hgroup section nav",c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(a+=" xml:lang",b="acronym applet basefont big font strike tt",c=[c,b].join(" "),Bu(gu(b),function(I){C(I,"",c)}),g="center dir isindex noframes",i=[i,g].join(" "),f=[i,c].join(" "),Bu(gu(g),function(I){C(I,"",f)})),f=f||[i,c].join(" "),C("html","manifest","head body"),C("head","","base command link meta noscript script style title"),C("title hr noscript br"),C("base","href target"),C("link","href rel media hreflang type sizes hreflang"),C("meta","name http-equiv content charset"),C("style","media type scoped"),C("script","src async defer type charset"),C("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",f),C("address dt dd div caption","",f),C("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),C("blockquote","cite",f),C("ol","reversed start type","li"),C("ul","","li"),C("li","value",f),C("dl","","dt dd"),C("a","href target rel media hreflang type",c),C("q","cite",c),C("ins del","cite datetime",f),C("img","src sizes srcset alt usemap ismap width height"),C("iframe","src name width height",f),C("embed","src type width height"),C("object","data type typemustmatch name usemap form width height",[f,"param"].join(" ")),C("param","name value"),C("map","name",[f,"area"].join(" ")),C("area","alt coords shape href target rel media hreflang type"),C("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),C("colgroup","span","col"),C("col","span"),C("tbody thead tfoot","","tr"),C("tr","","td th"),C("td","colspan rowspan headers",f),C("th","colspan rowspan headers scope abbr",f),C("form","accept-charset action autocomplete enctype method name novalidate target",f),C("fieldset","disabled form name",[f,"legend"].join(" ")),C("label","form for",c),C("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),C("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?f:c),C("select","disabled form multiple name required size","option optgroup"),C("optgroup","disabled label","option"),C("option","disabled label selected value"),C("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),C("menu","type label",[f,"li"].join(" ")),C("noscript","",f),e!=="html4"&&(C("wbr"),C("ruby","",[c,"rt rp"].join(" ")),C("figcaption","",f),C("mark rt rp summary bdi","",c),C("canvas","width height",f),C("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[f,"track source"].join(" ")),C("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[f,"track source"].join(" ")),C("picture","","img source"),C("source","src srcset type media sizes"),C("track","kind src srclang label default"),C("datalist","",[c,"option"].join(" ")),C("article section nav aside main header footer","",f),C("hgroup","","h1 h2 h3 h4 h5 h6"),C("figure","",[f,"figcaption"].join(" ")),C("time","datetime",c),C("dialog","open",f),C("command","type label icon disabled checked radiogroup command"),C("output","for form name",c),C("progress","value max",c),C("meter","value min max low high optimum",c),C("details","open",[f,"summary"].join(" ")),C("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(D("script","language xml:space"),D("style","xml:space"),D("object","declare classid code codebase codetype archive standby align border hspace vspace"),D("embed","align name hspace vspace"),D("param","valuetype type"),D("a","charset name rev shape coords"),D("br","clear"),D("applet","codebase archive code object alt name width height align hspace vspace"),D("img","name longdesc align border hspace vspace"),D("iframe","longdesc frameborder marginwidth marginheight scrolling align"),D("font basefont","size color face"),D("input","usemap align"),D("select"),D("textarea"),D("h1 h2 h3 h4 h5 h6 div p legend caption","align"),D("ul","type compact"),D("li","type"),D("ol dl menu dir","compact"),D("pre","width xml:space"),D("hr","align noshade size width"),D("isindex","prompt"),D("table","summary width frame rules cellspacing cellpadding align bgcolor"),D("col","width align char charoff valign"),D("colgroup","width align char charoff valign"),D("thead","align char charoff valign"),D("tr","align char charoff valign bgcolor"),D("th","axis align char charoff valign nowrap bgcolor width height"),D("form","accept"),D("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),D("tfoot","align char charoff valign"),D("tbody","align char charoff valign"),D("area","nohref"),D("body","background bgcolor text link vlink alink")),e!=="html4"&&(D("input button select textarea","autofocus"),D("input textarea","placeholder"),D("a","download"),D("link script img","crossorigin"),D("img","loading"),D("iframe","sandbox seamless allowfullscreen loading")),Bu(gu("a form meter progress dfn"),function(I){n[I]&&delete n[I].children[I]}),delete n.caption.children.table,delete n.script,Ys[e]=n,n)},Vn=function(e,n){var a;return e&&(a={},typeof e=="string"&&(e={"*":e}),Bu(e,function(i,c){a[c]=a[c.toUpperCase()]=n==="map"?rl(i,/[, ]/):Jf(i,/[, ]/)})),a},yc=function(e){var n={},a={},i=[],c={},f={},g=function(vt,Ot,Rn){var Me=e[vt];return Me?Me=rl(Me,/[, ]/,rl(Me.toUpperCase(),/[, ]/)):(Me=Ys[vt],Me||(Me=Q0(Ot,Rn),Ys[vt]=Me)),Me};e=e||{};var b=oa(e.schema);e.verify_html===!1&&(e.valid_elements="*[*]");var C=Vn(e.valid_styles),D=Vn(e.invalid_styles,"map"),I=Vn(e.valid_classes,"map"),z=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),F=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=g("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),X=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),J="td th iframe video audio object script code",ee=g("non_empty_elements",J+" pre",q),ce=g("move_caret_before_on_enter_elements",J+" table",q),se=g("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ae=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",se),Ee=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");Bu((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(vt){f[vt]=new RegExp("</"+vt+"[^>]*>","gi")});var me=function(vt){return new RegExp("^"+vt.replace(/([?+*])/g,".$1")+"$")},_e=function(vt){var Ot,Rn,Me,Ct,mt,zn,Un,Ya,Wi,zi,bm,Is,ys,iu,gl,$s,Pf,eo,vo=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,uu=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,oc=/[*?+]/;if(vt){var wv=gu(vt,",");for(n["@"]&&($s=n["@"].attributes,Pf=n["@"].attributesOrder),Ot=0,Rn=wv.length;Ot<Rn;Ot++)if(mt=vo.exec(wv[Ot]),mt){if(iu=mt[1],Wi=mt[2],gl=mt[3],Ya=mt[5],Is={},ys=[],zn={attributes:Is,attributesOrder:ys},iu==="#"&&(zn.paddEmpty=!0),iu==="-"&&(zn.removeEmpty=!0),mt[4]==="!"&&(zn.removeEmptyAttrs=!0),$s&&(Zt($s,function(Cv,sh){Is[sh]=Cv}),ys.push.apply(ys,Pf)),Ya){for(Ya=gu(Ya,"|"),Me=0,Ct=Ya.length;Me<Ct;Me++)if(mt=uu.exec(Ya[Me]),mt){if(Un={},bm=mt[1],zi=mt[2].replace(/[\\:]:/g,":"),iu=mt[3],eo=mt[4],bm==="!"&&(zn.attributesRequired=zn.attributesRequired||[],zn.attributesRequired.push(zi),Un.required=!0),bm==="-"){delete Is[zi],ys.splice(xC(ys,zi),1);continue}iu&&(iu==="="&&(zn.attributesDefault=zn.attributesDefault||[],zn.attributesDefault.push({name:zi,value:eo}),Un.defaultValue=eo),iu===":"&&(zn.attributesForced=zn.attributesForced||[],zn.attributesForced.push({name:zi,value:eo}),Un.forcedValue=eo),iu==="<"&&(Un.validValues=rl(eo,"?"))),oc.test(zi)?(zn.attributePatterns=zn.attributePatterns||[],Un.pattern=me(zi),zn.attributePatterns.push(Un)):(Is[zi]||ys.push(zi),Is[zi]=Un)}}!$s&&Wi==="@"&&($s=Is,Pf=ys),gl&&(zn.outputName=Wi,n[gl]=zn),oc.test(Wi)?(zn.pattern=me(Wi),i.push(zn)):n[Wi]=zn}}},et=function(vt){n={},i=[],_e(vt),Bu(b,function(Ot,Rn){a[Rn]=Ot.children})},bt=function(vt){var Ot=/^(~)?(.+)$/;vt&&(Ys.text_block_elements=Ys.block_elements=null,Bu(gu(vt,","),function(Rn){var Me=Ot.exec(Rn),Ct=Me[1]==="~",mt=Ct?"span":"div",zn=Me[2];if(a[zn]=a[mt],c[zn]=mt,Ct||(Ae[zn.toUpperCase()]={},Ae[zn]={}),!n[zn]){var Un=n[mt];Un=d1({},Un),delete Un.removeEmptyAttrs,delete Un.removeEmpty,n[zn]=Un}Bu(a,function(Ya,Wi){Ya[mt]&&(a[Wi]=Ya=d1({},a[Wi]),Ya[zn]=Ya[mt])})}))},Xn=function(vt){var Ot=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Ys[e.schema]=null,vt&&Bu(gu(vt,","),function(Rn){var Me=Ot.exec(Rn),Ct,mt;Me&&(mt=Me[1],mt?Ct=a[Me[2]]:Ct=a[Me[2]]={"#comment":{}},Ct=a[Me[2]],Bu(gu(Me[3],"|"),function(zn){mt==="-"?delete Ct[zn]:Ct[zn]={}}))})},an=function(vt){var Ot=n[vt],Rn;if(Ot)return Ot;for(Rn=i.length;Rn--;)if(Ot=i[Rn],Ot.pattern.test(vt))return Ot};e.valid_elements?et(e.valid_elements):(Bu(b,function(vt,Ot){n[Ot]={attributes:vt.attributes,attributesOrder:vt.attributesOrder},a[Ot]=vt.children}),e.schema!=="html5"&&Bu(gu("strong/b em/i"),function(vt){var Ot=gu(vt,"/");n[Ot[1]].outputName=Ot[0]}),Bu(Ee,function(vt,Ot){n[Ot]&&(e.padd_empty_block_inline_children&&(n[Ot].paddInEmptyBlock=!0),n[Ot].removeEmpty=!0)}),Bu(gu("ol ul blockquote a table tbody"),function(vt){n[vt]&&(n[vt].removeEmpty=!0)}),Bu(gu("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(vt){n[vt].paddEmpty=!0}),Bu(gu("span"),function(vt){n[vt].removeEmptyAttrs=!0})),bt(e.custom_elements),Xn(e.valid_children),_e(e.extended_valid_elements),Xn("+ol[ul|ol],+ul[ul|ol]"),Bu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(vt,Ot){n[Ot]&&(n[Ot].parentsRequired=gu(vt))}),e.invalid_elements&&Bu(Jf(e.invalid_elements),function(vt){n[vt]&&delete n[vt]}),an("span")||_e("span[!data-mce-type|*]");var st=Y(C),qn=Y(D),xt=Y(I),tn=Y(X),Et=Y(Ae),Pt=Y(se),vn=Y(Ee),ft=Y(q),on=Y(F),Hr=Y(ee),pa=Y(ce),ma=Y(z),Tu=Y(f),zo=function(vt,Ot){var Rn=a[vt.toLowerCase()];return!!(Rn&&Rn[Ot.toLowerCase()])},Ns=function(vt,Ot){var Rn,Me,Ct=an(vt);if(Ct)if(Ot){if(Ct.attributes[Ot])return!0;if(Rn=Ct.attributePatterns,Rn){for(Me=Rn.length;Me--;)if(Rn[Me].pattern.test(vt))return!0}}else return!0;return!1},ac=Y(c);return{children:a,elements:n,getValidStyles:st,getValidClasses:xt,getBlockElements:Et,getInvalidStyles:qn,getShortEndedElements:ft,getTextBlockElements:Pt,getTextInlineElements:vn,getBoolAttrs:tn,getElementRule:an,getSelfClosingElements:on,getNonEmptyElements:Hr,getMoveCaretBeforeOnEnterElements:pa,getWhiteSpaceElements:ma,getSpecialElements:Tu,isValidChild:zo,isValid:Ns,getCustomElements:ac,addValidElements:_e,setValidElements:et,addCustomElements:bt,addValidChildren:Xn}},g1=function(e,n,a,i){var c=function(f){return f=parseInt(f,10).toString(16),f.length>1?f:"0"+f};return"#"+c(n)+c(a)+c(i)},al=function(e,n){var a=this,i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,b,C={},D,I,z=Av;e=e||{},n&&(D=n.getValidStyles(),I=n.getInvalidStyles());var F=(`\\" \\' \\; \\: ; : `+z).split(" ");for(b=0;b<F.length;b++)C[F[b]]=z+b,C[z+b]=F[b];return{toHex:function(q){return q.replace(i,g1)},parse:function(q){var X={},J,ee,ce,se,Ae=e.url_converter,Ee=e.url_converter_scope||a,me=function(xt,tn,Et){var Pt=X[xt+"-top"+tn];if(Pt){var vn=X[xt+"-right"+tn];if(vn){var ft=X[xt+"-bottom"+tn];if(ft){var on=X[xt+"-left"+tn];if(on){var Hr=[Pt,vn,ft,on];for(b=Hr.length-1;b--&&Hr[b]===Hr[b+1];);b>-1&&Et||(X[xt+tn]=b===-1?Hr[0]:Hr.join(" "),delete X[xt+"-top"+tn],delete X[xt+"-right"+tn],delete X[xt+"-bottom"+tn],delete X[xt+"-left"+tn])}}}}},_e=function(xt){var tn=X[xt],Et;if(tn){for(tn=tn.split(" "),Et=tn.length;Et--;)if(tn[Et]!==tn[0])return!1;return X[xt]=tn[0],!0}},et=function(xt,tn,Et,Pt){_e(tn)&&_e(Et)&&_e(Pt)&&(X[xt]=X[tn]+" "+X[Et]+" "+X[Pt],delete X[tn],delete X[Et],delete X[Pt])},bt=function(xt){return se=!0,C[xt]},Xn=function(xt,tn){return se&&(xt=xt.replace(/\uFEFF[0-9]/g,function(Et){return C[Et]})),tn||(xt=xt.replace(/\\([\'\";:])/g,"$1")),xt},an=function(xt){return String.fromCharCode(parseInt(xt.slice(1),16))},st=function(xt){return xt.replace(/\\[0-9a-f]+/gi,an)},qn=function(xt,tn,Et,Pt,vn,ft){if(vn=vn||ft,vn)return vn=Xn(vn),"'"+vn.replace(/\'/g,"\\'")+"'";if(tn=Xn(tn||Et||Pt),!e.allow_script_urls){var on=tn.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(on)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(on))return""}return Ae&&(tn=Ae.call(Ee,tn,"style")),"url('"+tn.replace(/\'/g,"\\'")+"')"};if(q){for(q=q.replace(/[\u0000-\u001F]/g,""),q=q.replace(/\\[\"\';:\uFEFF]/g,bt).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(xt){return xt.replace(/[;:]/g,bt)});J=f.exec(q);)if(f.lastIndex=J.index+J[0].length,ee=J[1].replace(g,"").toLowerCase(),ce=J[2].replace(g,""),ee&&ce){if(ee=st(ee),ce=st(ce),ee.indexOf(z)!==-1||ee.indexOf('"')!==-1||!e.allow_script_urls&&(ee==="behavior"||/expression\s*\(|\/\*|\*\//.test(ce)))continue;ee==="font-weight"&&ce==="700"?ce="bold":(ee==="color"||ee==="background-color")&&(ce=ce.toLowerCase()),ce=ce.replace(i,g1),ce=ce.replace(c,qn),X[ee]=se?Xn(ce,!0):ce}me("border","",!0),me("border","-width"),me("border","-color"),me("border","-style"),me("padding",""),me("margin",""),et("border","border-width","border-style","border-color"),X.border==="medium none"&&delete X.border,X["border-image"]==="none"&&delete X["border-image"]}return X},serialize:function(q,X){var J="",ee=function(se){var Ae,Ee=D[se];if(Ee)for(var me=0,_e=Ee.length;me<_e;me++)se=Ee[me],Ae=q[se],Ae&&(J+=(J.length>0?" ":"")+se+": "+Ae+";")},ce=function(se,Ae){var Ee=I["*"];return Ee&&Ee[se]?!1:(Ee=I[Ae],!(Ee&&Ee[se]))};return X&&D?(ee("*"),ee(X)):Zt(q,function(se,Ae){se&&(!I||ce(Ae,X))&&(J+=(J.length>0?" ":"")+Ae+": "+se+";")}),J}}},TC={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Wa=function(e){return e instanceof Event||ht(e.initEvent)},ey=function(e){return e.isDefaultPrevented===jt||e.isDefaultPrevented===wt},h1=function(e){return Vt(e.preventDefault)||Wa(e)},p1=function(e,n){var a=n??{};for(var i in e)fr(TC,i)||(a[i]=e[i]);return Kt(a.composedPath)&&(a.composedPath=function(){return e.composedPath()}),a},ut=function(e,n,a,i){var c,f=p1(n,i);return f.type=e,Vt(f.target)&&(f.target=(c=f.srcElement)!==null&&c!==void 0?c:a),h1(n)&&(f.preventDefault=function(){f.defaultPrevented=!0,f.isDefaultPrevented=jt,ht(n.preventDefault)?n.preventDefault():Wa(n)&&(n.returnValue=!1)},f.stopPropagation=function(){f.cancelBubble=!0,f.isPropagationStopped=jt,ht(n.stopPropagation)?n.stopPropagation():Wa(n)&&(n.cancelBubble=!0)},f.stopImmediatePropagation=function(){f.isImmediatePropagationStopped=jt,f.stopPropagation()},ey(f)||(f.isDefaultPrevented=f.defaultPrevented===!0?jt:wt,f.isPropagationStopped=f.cancelBubble===!0?jt:wt,f.isImmediatePropagationStopped=wt)),f},ty="mce-data-",ny=/^(?:mouse|contextmenu)|click/,Mv=function(e,n,a,i){e.addEventListener?e.addEventListener(n,a,i||!1):e.attachEvent&&e.attachEvent("on"+n,a)},Ah=function(e,n,a,i){e.removeEventListener?e.removeEventListener(n,a,i||!1):e.detachEvent&&e.detachEvent("on"+n,a)},Od=function(e){return Kt(e)&&ny.test(e.type)},Bv=function(e,n){var a=ut(e.type,e,document,n);if(Od(e)&&ke(e.pageX)&&!ke(e.clientX)){var i=a.target.ownerDocument||document,c=i.documentElement,f=i.body,g=a;g.pageX=e.clientX+(c&&c.scrollLeft||f&&f.scrollLeft||0)-(c&&c.clientLeft||f&&f.clientLeft||0),g.pageY=e.clientY+(c&&c.scrollTop||f&&f.scrollTop||0)-(c&&c.clientTop||f&&f.clientTop||0)}return ke(a.metaKey)&&(a.metaKey=!1),a},Ad=function(e,n,a){var i=e.document,c={type:"ready"};if(a.domLoaded){n(c);return}var f=function(){return i.readyState==="complete"||i.readyState==="interactive"&&i.body},g=function(){Ah(e,"DOMContentLoaded",g),Ah(e,"load",g),a.domLoaded||(a.domLoaded=!0,n(c)),e=null};f()?g():Mv(e,"DOMContentLoaded",g),a.domLoaded||Mv(e,"load",g)},Hm=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando=ty+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(n,a,i,c){var f=this,g,b,C,D,I,z,F,q=window,X=function(ee){f.executeHandlers(Bv(ee||q.event),g)};if(!(!n||n.nodeType===3||n.nodeType===8)){n[f.expando]?g=n[f.expando]:(g=f.count++,n[f.expando]=g,f.events[g]={}),c=c||n;var J=a.split(" ");for(C=J.length;C--;){if(D=J[C],z=X,I=F=!1,D==="DOMContentLoaded"&&(D="ready"),f.domLoaded&&D==="ready"&&n.readyState==="complete"){i.call(c,Bv({type:D}));continue}f.hasMouseEnterLeave||(I=f.mouseEnterLeave[D],I&&(z=function(ee){var ce=ee.currentTarget,se=ee.relatedTarget;if(se&&ce.contains)se=ce.contains(se);else for(;se&&se!==ce;)se=se.parentNode;se||(ee=Bv(ee||q.event),ee.type=ee.type==="mouseout"?"mouseleave":"mouseenter",ee.target=ce,f.executeHandlers(ee,g))})),!f.hasFocusIn&&(D==="focusin"||D==="focusout")&&(F=!0,I=D==="focusin"?"focus":"blur",z=function(ee){ee=Bv(ee||q.event),ee.type=ee.type==="focus"?"focusin":"focusout",f.executeHandlers(ee,g)}),b=f.events[g][D],b?D==="ready"&&f.domLoaded?i(Bv({type:D})):b.push({func:i,scope:c}):(f.events[g][D]=b=[{func:i,scope:c}],b.fakeName=I,b.capture=F,b.nativeHandler=z,D==="ready"?Ad(n,z,f):Mv(n,I||D,z,F))}return n=b=null,i}},e.prototype.unbind=function(n,a,i){var c,f,g,b,C;if(!n||n.nodeType===3||n.nodeType===8)return this;var D=n[this.expando];if(D){if(C=this.events[D],a){var I=a.split(" ");for(f=I.length;f--;)if(b=I[f],c=C[b],c){if(i){for(g=c.length;g--;)if(c[g].func===i){var z=c.nativeHandler,F=c.fakeName,q=c.capture;c=c.slice(0,g).concat(c.slice(g+1)),c.nativeHandler=z,c.fakeName=F,c.capture=q,C[b]=c}}(!i||c.length===0)&&(delete C[b],Ah(n,c.fakeName||b,c.nativeHandler,c.capture))}}else Zt(C,function(X,J){Ah(n,X.fakeName||J,X.nativeHandler,X.capture)}),C={};for(b in C)if(fr(C,b))return this;delete this.events[D];try{delete n[this.expando]}catch{n[this.expando]=null}}return this},e.prototype.fire=function(n,a,i){var c;if(!n||n.nodeType===3||n.nodeType===8)return this;var f=Bv({type:a,target:n},i);do c=n[this.expando],c&&this.executeHandlers(f,c),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow;while(n&&!f.isPropagationStopped());return this},e.prototype.clean=function(n){var a,i;if(!n||n.nodeType===3||n.nodeType===8)return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName)for(this.unbind(n),i=n.getElementsByTagName("*"),a=i.length;a--;)n=i[a],n[this.expando]&&this.unbind(n);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(n,a){var i=this.events[a],c=i&&i[n.type];if(c)for(var f=0,g=c.length;f<g;f++){var b=c[f];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}},e.Event=new e,e}(),ui,dr,wc,kC,Js,ry,rf,Zf,Qf,Cc,Pv,Li,cs,af,Nv,Vm,Dd,gn,Qi="sizzle"+-new Date,El=window.document,of=0,Dh=0,EC=C1(),b1=C1(),Iv=C1(),$v=function(e,n){return e===n&&(Cc=!0),0},Um="undefined",_h=1<<31,Hk={}.hasOwnProperty,Sc=[],ay=Sc.pop,_d=Sc.push,zv=Sc.push,oy=Sc.slice,Fv=Sc.indexOf||function(e){for(var n=0,a=this.length;n<a;n++)if(this[n]===e)return n;return-1},OC="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ao="[\\x20\\t\\r\\n\\f]",hu="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Pu="\\["+Ao+"*("+hu+")(?:"+Ao+"*([*^$|!~]?=)"+Ao+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+hu+"))|)"+Ao+"*\\]",AC=":("+hu+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Pu+")*)|.*)\\)|)",y1=new RegExp("^"+Ao+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ao+"+$","g"),Vk=new RegExp("^"+Ao+"*,"+Ao+"*"),DC=new RegExp("^"+Ao+"*([>+~]|"+Ao+")"+Ao+"*"),ol=new RegExp("="+Ao+`*([^\\]'"]*?)`+Ao+"*\\]","g"),Uk=new RegExp(AC),Wm=new RegExp("^"+hu+"$"),w1={ID:new RegExp("^#("+hu+")"),CLASS:new RegExp("^\\.("+hu+")"),TAG:new RegExp("^("+hu+"|[*])"),ATTR:new RegExp("^"+Pu),PSEUDO:new RegExp("^"+AC),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ao+"*(even|odd|(([+-]|)(\\d*)n|)"+Ao+"*(?:([+-]|)"+Ao+"*(\\d+)|))"+Ao+"*\\)|)","i"),bool:new RegExp("^(?:"+OC+")$","i"),needsContext:new RegExp("^"+Ao+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ao+"*((?:-\\d)?\\d*)"+Ao+"*\\)|)(?=[^-]|$)","i")},Wk=/^(?:input|select|textarea|button)$/i,_C=/^h\d$/i,iy=/^[^{]+\{\s*\[native \w/,uy=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sy=/[+~]/,jk=/'|\\/g,Lv=new RegExp("\\\\([\\da-f]{1,6}"+Ao+"?|("+Ao+")|.)","ig"),Hv=function(e,n,a){var i="0x"+n-65536;return i!==i||a?n:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)};try{zv.apply(Sc=oy.call(El.childNodes),El.childNodes),Sc[El.childNodes.length].nodeType}catch{zv={apply:Sc.length?function(n,a){_d.apply(n,oy.call(a))}:function(n,a){for(var i=n.length,c=0;n[i++]=a[c++];);n.length=i-1}}}var za=function(e,n,a,i){var c,f,g,b,C,D,I,z,F,q;if((n?n.ownerDocument||n:El)!==Li&&Pv(n),n=n||Li,a=a||[],!e||typeof e!="string")return a;if((b=n.nodeType)!==1&&b!==9)return[];if(af&&!i){if(c=uy.exec(e))if(g=c[1]){if(b===9)if(f=n.getElementById(g),f&&f.parentNode){if(f.id===g)return a.push(f),a}else return a;else if(n.ownerDocument&&(f=n.ownerDocument.getElementById(g))&&gn(n,f)&&f.id===g)return a.push(f),a}else{if(c[2])return zv.apply(a,n.getElementsByTagName(e)),a;if((g=c[3])&&ui.getElementsByClassName)return zv.apply(a,n.getElementsByClassName(g)),a}if(ui.qsa&&(!Nv||!Nv.test(e))){if(z=I=Qi,F=n,q=b===9&&e,b===1&&n.nodeName.toLowerCase()!=="object"){for(D=Js(e),(I=n.getAttribute("id"))?z=I.replace(jk,"\\$&"):n.setAttribute("id",z),z="[id='"+z+"'] ",C=D.length;C--;)D[C]=z+x1(D[C]);F=sy.test(e)&&S1(n.parentNode)||n,q=D.join(",")}if(q)try{return zv.apply(a,F.querySelectorAll(q)),a}catch{}finally{I||n.removeAttribute("id")}}}return rf(e.replace(y1,"$1"),n,a,i)};function C1(){var e=[];function n(a,i){return e.push(a+" ")>dr.cacheLength&&delete n[e.shift()],n[a+" "]=i}return n}function Ol(e){return e[Qi]=!0,e}function RC(e,n){var a=n&&e,i=a&&e.nodeType===1&&n.nodeType===1&&(~n.sourceIndex||_h)-(~e.sourceIndex||_h);if(i)return i;if(a){for(;a=a.nextSibling;)if(a===n)return-1}return e?1:-1}function Al(e){return function(n){var a=n.nodeName.toLowerCase();return a==="input"&&n.type===e}}function uf(e){return function(n){var a=n.nodeName.toLowerCase();return(a==="input"||a==="button")&&n.type===e}}function Vv(e){return Ol(function(n){return n=+n,Ol(function(a,i){for(var c,f=e([],a.length,n),g=f.length;g--;)a[c=f[g]]&&(a[c]=!(i[c]=a[c]))})})}function S1(e){return e&&typeof e.getElementsByTagName!==Um&&e}ui=za.support={},kC=za.isXML=function(e){var n=e&&(e.ownerDocument||e).documentElement;return n?n.nodeName!=="HTML":!1},Pv=za.setDocument=function(e){var n,a=e?e.ownerDocument||e:El,i=a.defaultView;function c(f){try{return f.top}catch{}return null}return a===Li||a.nodeType!==9||!a.documentElement?Li:(Li=a,cs=a.documentElement,af=!kC(a),i&&i!==c(i)&&(i.addEventListener?i.addEventListener("unload",function(){Pv()},!1):i.attachEvent&&i.attachEvent("onunload",function(){Pv()})),ui.attributes=!0,ui.getElementsByTagName=!0,ui.getElementsByClassName=iy.test(a.getElementsByClassName),ui.getById=!0,dr.find.ID=function(f,g){if(typeof g.getElementById!==Um&&af){var b=g.getElementById(f);return b&&b.parentNode?[b]:[]}},dr.filter.ID=function(f){var g=f.replace(Lv,Hv);return function(b){return b.getAttribute("id")===g}},dr.find.TAG=ui.getElementsByTagName?function(f,g){if(typeof g.getElementsByTagName!==Um)return g.getElementsByTagName(f)}:function(f,g){var b,C=[],D=0,I=g.getElementsByTagName(f);if(f==="*"){for(;b=I[D++];)b.nodeType===1&&C.push(b);return C}return I},dr.find.CLASS=ui.getElementsByClassName&&function(f,g){if(af)return g.getElementsByClassName(f)},Vm=[],Nv=[],ui.disconnectedMatch=!0,Nv=Nv.length&&new RegExp(Nv.join("|")),Vm=Vm.length&&new RegExp(Vm.join("|")),n=iy.test(cs.compareDocumentPosition),gn=n||iy.test(cs.contains)?function(f,g){var b=f.nodeType===9?f.documentElement:f,C=g&&g.parentNode;return f===C||!!(C&&C.nodeType===1&&(b.contains?b.contains(C):f.compareDocumentPosition&&f.compareDocumentPosition(C)&16))}:function(f,g){if(g){for(;g=g.parentNode;)if(g===f)return!0}return!1},$v=n?function(f,g){if(f===g)return Cc=!0,0;var b=!f.compareDocumentPosition-!g.compareDocumentPosition;return b||(b=(f.ownerDocument||f)===(g.ownerDocument||g)?f.compareDocumentPosition(g):1,b&1||!ui.sortDetached&&g.compareDocumentPosition(f)===b?f===a||f.ownerDocument===El&&gn(El,f)?-1:g===a||g.ownerDocument===El&&gn(El,g)?1:Qf?Fv.call(Qf,f)-Fv.call(Qf,g):0:b&4?-1:1)}:function(f,g){if(f===g)return Cc=!0,0;var b,C=0,D=f.parentNode,I=g.parentNode,z=[f],F=[g];if(!D||!I)return f===a?-1:g===a?1:D?-1:I?1:Qf?Fv.call(Qf,f)-Fv.call(Qf,g):0;if(D===I)return RC(f,g);for(b=f;b=b.parentNode;)z.unshift(b);for(b=g;b=b.parentNode;)F.unshift(b);for(;z[C]===F[C];)C++;return C?RC(z[C],F[C]):z[C]===El?-1:F[C]===El?1:0},a)},za.matches=function(e,n){return za(e,null,null,n)},za.matchesSelector=function(e,n){if((e.ownerDocument||e)!==Li&&Pv(e),n=n.replace(ol,"='$1']"),ui.matchesSelector&&af&&(!Vm||!Vm.test(n))&&(!Nv||!Nv.test(n)))try{var a=Dd.call(e,n);if(a||ui.disconnectedMatch||e.document&&e.document.nodeType!==11)return a}catch{}return za(n,Li,null,[e]).length>0},za.contains=function(e,n){return(e.ownerDocument||e)!==Li&&Pv(e),gn(e,n)},za.attr=function(e,n){(e.ownerDocument||e)!==Li&&Pv(e);var a=dr.attrHandle[n.toLowerCase()],i=a&&Hk.call(dr.attrHandle,n.toLowerCase())?a(e,n,!af):void 0;return i!==void 0?i:ui.attributes||!af?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null},za.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},za.uniqueSort=function(e){var n,a=[],i=0,c=0;if(Cc=!ui.detectDuplicates,Qf=!ui.sortStable&&e.slice(0),e.sort($v),Cc){for(;n=e[c++];)n===e[c]&&(i=a.push(c));for(;i--;)e.splice(a[i],1)}return Qf=null,e},wc=za.getText=function(e){var n,a="",i=0,c=e.nodeType;if(c){if(c===1||c===9||c===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)a+=wc(e)}else if(c===3||c===4)return e.nodeValue}else for(;n=e[i++];)a+=wc(n);return a},dr=za.selectors={cacheLength:50,createPseudo:Ol,match:w1,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Lv,Hv),e[3]=(e[3]||e[4]||e[5]||"").replace(Lv,Hv),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||za.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&za.error(e[0]),e},PSEUDO:function(e){var n,a=!e[6]&&e[2];return w1.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":a&&Uk.test(a)&&(n=Js(a,!0))&&(n=a.indexOf(")",a.length-n)-a.length)&&(e[0]=e[0].slice(0,n),e[2]=a.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var n=e.replace(Lv,Hv).toLowerCase();return e==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===n}},CLASS:function(e){var n=EC[e+" "];return n||(n=new RegExp("(^|"+Ao+")"+e+"("+Ao+"|$)"))&&EC(e,function(a){return n.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==Um&&a.getAttribute("class")||"")})},ATTR:function(e,n,a){return function(i){var c=za.attr(i,e);return c==null?n==="!=":n?(c+="",n==="="?c===a:n==="!="?c!==a:n==="^="?a&&c.indexOf(a)===0:n==="*="?a&&c.indexOf(a)>-1:n==="$="?a&&c.slice(-a.length)===a:n==="~="?(" "+c+" ").indexOf(a)>-1:n==="|="?c===a||c.slice(0,a.length+1)===a+"-":!1):!0}},CHILD:function(e,n,a,i,c){var f=e.slice(0,3)!=="nth",g=e.slice(-4)!=="last",b=n==="of-type";return i===1&&c===0?function(C){return!!C.parentNode}:function(C,D,I){var z,F,q,X,J,ee,ce=f!==g?"nextSibling":"previousSibling",se=C.parentNode,Ae=b&&C.nodeName.toLowerCase(),Ee=!I&&!b;if(se){if(f){for(;ce;){for(q=C;q=q[ce];)if(b?q.nodeName.toLowerCase()===Ae:q.nodeType===1)return!1;ee=ce=e==="only"&&!ee&&"nextSibling"}return!0}if(ee=[g?se.firstChild:se.lastChild],g&&Ee){for(F=se[Qi]||(se[Qi]={}),z=F[e]||[],J=z[0]===of&&z[1],X=z[0]===of&&z[2],q=J&&se.childNodes[J];q=++J&&q&&q[ce]||(X=J=0)||ee.pop();)if(q.nodeType===1&&++X&&q===C){F[e]=[of,J,X];break}}else if(Ee&&(z=(C[Qi]||(C[Qi]={}))[e])&&z[0]===of)X=z[1];else for(;(q=++J&&q&&q[ce]||(X=J=0)||ee.pop())&&!((b?q.nodeName.toLowerCase()===Ae:q.nodeType===1)&&++X&&(Ee&&((q[Qi]||(q[Qi]={}))[e]=[of,X]),q===C)););return X-=c,X===i||X%i===0&&X/i>=0}}},PSEUDO:function(e,n){var a,i=dr.pseudos[e]||dr.setFilters[e.toLowerCase()]||za.error("unsupported pseudo: "+e);return i[Qi]?i(n):i.length>1?(a=[e,e,"",n],dr.setFilters.hasOwnProperty(e.toLowerCase())?Ol(function(c,f){for(var g,b=i(c,n),C=b.length;C--;)g=Fv.call(c,b[C]),c[g]=!(f[g]=b[C])}):function(c){return i(c,0,a)}):i}},pseudos:{not:Ol(function(e){var n=[],a=[],i=ry(e.replace(y1,"$1"));return i[Qi]?Ol(function(c,f,g,b){for(var C,D=i(c,null,b,[]),I=c.length;I--;)(C=D[I])&&(c[I]=!(f[I]=C))}):function(c,f,g){return n[0]=c,i(n,null,g,a),n[0]=null,!a.pop()}}),has:Ol(function(e){return function(n){return za(e,n).length>0}}),contains:Ol(function(e){return e=e.replace(Lv,Hv),function(n){return(n.textContent||n.innerText||wc(n)).indexOf(e)>-1}}),lang:Ol(function(e){return Wm.test(e||"")||za.error("unsupported lang: "+e),e=e.replace(Lv,Hv).toLowerCase(),function(n){var a;do if(a=af?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return a=a.toLowerCase(),a===e||a.indexOf(e+"-")===0;while((n=n.parentNode)&&n.nodeType===1);return!1}}),target:function(e){var n=window.location&&window.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===cs},focus:function(e){return e===Li.activeElement&&(!Li.hasFocus||Li.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var n=e.nodeName.toLowerCase();return n==="input"&&!!e.checked||n==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!dr.pseudos.empty(e)},header:function(e){return _C.test(e.nodeName)},input:function(e){return Wk.test(e.nodeName)},button:function(e){var n=e.nodeName.toLowerCase();return n==="input"&&e.type==="button"||n==="button"},text:function(e){var n;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()==="text")},first:Vv(function(){return[0]}),last:Vv(function(e,n){return[n-1]}),eq:Vv(function(e,n,a){return[a<0?a+n:a]}),even:Vv(function(e,n){for(var a=0;a<n;a+=2)e.push(a);return e}),odd:Vv(function(e,n){for(var a=1;a<n;a+=2)e.push(a);return e}),lt:Vv(function(e,n,a){for(var i=a<0?a+n:a;--i>=0;)e.push(i);return e}),gt:Vv(function(e,n,a){for(var i=a<0?a+n:a;++i<n;)e.push(i);return e})}},dr.pseudos.nth=dr.pseudos.eq,pt(["radio","checkbox","file","password","image"],function(e){dr.pseudos[e]=Al(e)}),pt(["submit","reset"],function(e){dr.pseudos[e]=uf(e)});function Rh(){}Rh.prototype=dr.filters=dr.pseudos,dr.setFilters=new Rh,Js=za.tokenize=function(e,n){var a,i,c,f,g,b,C,D=b1[e+" "];if(D)return n?0:D.slice(0);for(g=e,b=[],C=dr.preFilter;g;){(!a||(i=Vk.exec(g)))&&(i&&(g=g.slice(i[0].length)||g),b.push(c=[])),a=!1,(i=DC.exec(g))&&(a=i.shift(),c.push({value:a,type:i[0].replace(y1," ")}),g=g.slice(a.length));for(f in dr.filter)dr.filter.hasOwnProperty(f)&&(i=w1[f].exec(g))&&(!C[f]||(i=C[f](i)))&&(a=i.shift(),c.push({value:a,type:f,matches:i}),g=g.slice(a.length));if(!a)break}return n?g.length:g?za.error(e):b1(e,b).slice(0)};function x1(e){for(var n=0,a=e.length,i="";n<a;n++)i+=e[n].value;return i}function T1(e,n,a){var i=n.dir,c=a&&i==="parentNode",f=Dh++;return n.first?function(g,b,C){for(;g=g[i];)if(g.nodeType===1||c)return e(g,b,C)}:function(g,b,C){var D,I,z=[of,f];if(C){for(;g=g[i];)if((g.nodeType===1||c)&&e(g,b,C))return!0}else for(;g=g[i];)if(g.nodeType===1||c){if(I=g[Qi]||(g[Qi]={}),(D=I[i])&&D[0]===of&&D[1]===f)return z[2]=D[2];if(I[i]=z,z[2]=e(g,b,C))return!0}}}function Rd(e){return e.length>1?function(n,a,i){for(var c=e.length;c--;)if(!e[c](n,a,i))return!1;return!0}:e[0]}function Gk(e,n,a){for(var i=0,c=n.length;i<c;i++)za(e,n[i],a);return a}function k1(e,n,a,i,c){for(var f,g=[],b=0,C=e.length,D=n!=null;b<C;b++)(f=e[b])&&(!a||a(f,i,c))&&(g.push(f),D&&n.push(b));return g}function jm(e,n,a,i,c,f){return i&&!i[Qi]&&(i=jm(i)),c&&!c[Qi]&&(c=jm(c,f)),Ol(function(g,b,C,D){var I,z,F,q=[],X=[],J=b.length,ee=g||Gk(n||"*",C.nodeType?[C]:C,[]),ce=e&&(g||!n)?k1(ee,q,e,C,D):ee,se=a?c||(g?e:J||i)?[]:b:ce;if(a&&a(ce,se,C,D),i)for(I=k1(se,X),i(I,[],C,D),z=I.length;z--;)(F=I[z])&&(se[X[z]]=!(ce[X[z]]=F));if(g){if(c||e){if(c){for(I=[],z=se.length;z--;)(F=se[z])&&I.push(ce[z]=F);c(null,se=[],I,D)}for(z=se.length;z--;)(F=se[z])&&(I=c?Fv.call(g,F):q[z])>-1&&(g[I]=!(b[I]=F))}}else se=k1(se===b?se.splice(J,se.length):se),c?c(null,b,se,D):zv.apply(b,se)})}function Mh(e){for(var n,a,i,c=e.length,f=dr.relative[e[0].type],g=f||dr.relative[" "],b=f?1:0,C=T1(function(z){return z===n},g,!0),D=T1(function(z){return Fv.call(n,z)>-1},g,!0),I=[function(z,F,q){var X=!f&&(q||F!==Zf)||((n=F).nodeType?C(z,F,q):D(z,F,q));return n=null,X}];b<c;b++)if(a=dr.relative[e[b].type])I=[T1(Rd(I),a)];else{if(a=dr.filter[e[b].type].apply(null,e[b].matches),a[Qi]){for(i=++b;i<c&&!dr.relative[e[i].type];i++);return jm(b>1&&Rd(I),b>1&&x1(e.slice(0,b-1).concat({value:e[b-2].type===" "?"*":""})).replace(y1,"$1"),a,b<i&&Mh(e.slice(b,i)),i<c&&Mh(e=e.slice(i)),i<c&&x1(e))}I.push(a)}return Rd(I)}function Bh(e,n){var a=n.length>0,i=e.length>0,c=function(f,g,b,C,D){var I,z,F,q=0,X="0",J=f&&[],ee=[],ce=Zf,se=f||i&&dr.find.TAG("*",D),Ae=of+=ce==null?1:Math.random()||.1,Ee=se.length;for(D&&(Zf=g!==Li&&g);X!==Ee&&(I=se[X])!=null;X++){if(i&&I){for(z=0;F=e[z++];)if(F(I,g,b)){C.push(I);break}D&&(of=Ae)}a&&((I=!F&&I)&&q--,f&&J.push(I))}if(q+=X,a&&X!==q){for(z=0;F=n[z++];)F(J,ee,g,b);if(f){if(q>0)for(;X--;)J[X]||ee[X]||(ee[X]=ay.call(C));ee=k1(ee)}zv.apply(C,ee),D&&!f&&ee.length>0&&q+n.length>1&&za.uniqueSort(C)}return D&&(of=Ae,Zf=ce),J};return a?Ol(c):c}ry=za.compile=function(e,n){var a,i=[],c=[],f=Iv[e+" "];if(!f){for(n||(n=Js(e)),a=n.length;a--;)f=Mh(n[a]),f[Qi]?i.push(f):c.push(f);f=Iv(e,Bh(c,i)),f.selector=e}return f},rf=za.select=function(e,n,a,i){var c,f,g,b,C,D=typeof e=="function"&&e,I=!i&&Js(e=D.selector||e);if(a=a||[],I.length===1){if(f=I[0]=I[0].slice(0),f.length>2&&(g=f[0]).type==="ID"&&ui.getById&&n.nodeType===9&&af&&dr.relative[f[1].type]){if(n=(dr.find.ID(g.matches[0].replace(Lv,Hv),n)||[])[0],n)D&&(n=n.parentNode);else return a;e=e.slice(f.shift().value.length)}for(c=w1.needsContext.test(e)?0:f.length;c--&&(g=f[c],!dr.relative[b=g.type]);)if((C=dr.find[b])&&(i=C(g.matches[0].replace(Lv,Hv),sy.test(f[0].type)&&S1(n.parentNode)||n))){if(f.splice(c,1),e=i.length&&x1(f),!e)return zv.apply(a,i),a;break}}return(D||ry(e,I))(i,n,!af,a,sy.test(e)&&S1(n.parentNode)||n),a},ui.sortStable=Qi.split("").sort($v).join("")===Qi,ui.detectDuplicates=!!Cc,Pv(),ui.sortDetached=!0;var cy=document,Mi=Array.prototype.push,Md=Array.prototype.slice,yi=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ls=Hm.Event,Bd=je.makeMap("children,contents,next,prev"),xc=function(e){return typeof e<"u"},E1=function(e){return typeof e=="string"},sf=function(e){return e&&e===e.window},Gm=function(e,n){n=n||cy;var a=n.createElement("div"),i=n.createDocumentFragment();a.innerHTML=e;for(var c;c=a.firstChild;)i.appendChild(c);return i},qm=function(e,n,a,i){var c;if(E1(n))n=Gm(n,Uv(e[0]));else if(n.length&&!n.nodeType){if(n=br.makeArray(n),i)for(c=n.length-1;c>=0;c--)qm(e,n[c],a,i);else for(c=0;c<n.length;c++)qm(e,n[c],a,i);return e}if(n.nodeType)for(c=e.length;c--;)a.call(e[c],n);return e},MC=function(e,n){return e&&n&&(" "+e.className+" ").indexOf(" "+n+" ")!==-1},BC=function(e,n,a){var i,c;return n=br(n)[0],e.each(function(){var f=this;(!a||i!==f.parentNode)&&(i=f.parentNode,c=n.cloneNode(!1),f.parentNode.insertBefore(c,f)),c.appendChild(f)}),e},qk=je.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Kk=je.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Xk={for:"htmlFor",class:"className",readonly:"readOnly"},PC={float:"cssFloat"},O1={},A1={},pu=function(e,n){return new br.fn.init(e,n)},D1=function(e,n){var a;if(n.indexOf)return n.indexOf(e);for(a=n.length;a--;)if(n[a]===e)return a;return-1},ly=/^\s*|\s*$/g,zc=function(e){return e==null?"":(""+e).replace(ly,"")},fo=function(e,n){var a,i,c,f;if(e)if(a=e.length,a===void 0){for(i in e)if(e.hasOwnProperty(i)&&(f=e[i],n.call(f,i,f)===!1))break}else for(c=0;c<a&&(f=e[c],n.call(f,c,f)!==!1);c++);return e},Tc=function(e,n){var a=[];return fo(e,function(i,c){n(c,i)&&a.push(c)}),a},Uv=function(e){return e?e.nodeType===9?e:e.ownerDocument:cy};pu.fn=pu.prototype={constructor:pu,selector:"",context:null,length:0,init:function(e,n){var a=this,i,c;if(!e)return a;if(e.nodeType)return a.context=a[0]=e,a.length=1,a;if(n&&n.nodeType)a.context=n;else{if(n)return br(e).attr(n);a.context=n=document}if(E1(e))if(a.selector=e,e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=yi.exec(e),i)if(i[1])for(c=Gm(e,Uv(n)).firstChild;c;)Mi.call(a,c),c=c.nextSibling;else{if(c=Uv(n).getElementById(i[2]),!c)return a;if(c.id!==i[2])return a.find(e);a.length=1,a[0]=c}else return br(n).find(e);else this.add(e,!1);return a},toArray:function(){return je.toArray(this)},add:function(e,n){var a=this,i,c;if(E1(e))return a.add(br(e));if(n!==!1)for(i=br.unique(a.toArray().concat(br.makeArray(e))),a.length=i.length,c=0;c<i.length;c++)a[c]=i[c];else Mi.apply(a,br.makeArray(e));return a},attr:function(e,n){var a=this,i;if(typeof e=="object")fo(e,function(c,f){a.attr(c,f)});else if(xc(n))this.each(function(){var c;if(this.nodeType===1){if(c=O1[e],c&&c.set){c.set(this,n);return}n===null?this.removeAttribute(e,2):this.setAttribute(e,n,2)}});else{if(a[0]&&a[0].nodeType===1){if(i=O1[e],i&&i.get)return i.get(a[0],e);if(Kk[e])return a.prop(e)?e:void 0;n=a[0].getAttribute(e,2),n===null&&(n=void 0)}return n}return a},removeAttr:function(e){return this.attr(e,null)},prop:function(e,n){var a=this;if(e=Xk[e]||e,typeof e=="object")fo(e,function(i,c){a.prop(i,c)});else if(xc(n))this.each(function(){this.nodeType===1&&(this[e]=n)});else return a[0]&&a[0].nodeType&&e in a[0]?a[0][e]:n;return a},css:function(e,n){var a=this,i,c,f=function(b){return b.replace(/-(\D)/g,function(C,D){return D.toUpperCase()})},g=function(b){return b.replace(/[A-Z]/g,function(C){return"-"+C})};if(typeof e=="object")fo(e,function(b,C){a.css(b,C)});else if(xc(n))e=f(e),typeof n=="number"&&!qk[e]&&(n=n.toString()+"px"),a.each(function(){var b=this.style;if(c=A1[e],c&&c.set){c.set(this,n);return}try{this.style[PC[e]||e]=n}catch{}(n===null||n==="")&&(b.removeProperty?b.removeProperty(g(e)):b.removeAttribute(e))});else{if(i=a[0],c=A1[e],c&&c.get)return c.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(g(e))}catch{return}else return i.currentStyle?i.currentStyle[f(e)]:""}return a},remove:function(){for(var e=this,n,a=this.length;a--;)n=e[a],ls.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var e=this,n,a=this.length;a--;)for(n=e[a];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(e){var n=this,a;if(xc(e)){a=n.length;try{for(;a--;)n[a].innerHTML=e}catch{br(n[a]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var n=this,a;if(xc(e)){for(a=n.length;a--;)"innerText"in n[a]?n[a].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return qm(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.appendChild(e)})},prepend:function(){return qm(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?qm(e,arguments,function(n){this.parentNode.insertBefore(n,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?qm(e,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):e},appendTo:function(e){return br(e).append(this),this},prependTo:function(e){return br(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return BC(this,e)},wrapAll:function(e){return BC(this,e,!0)},wrapInner:function(e){return this.each(function(){br(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){br(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),br(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,n){var a=this;return typeof e!="string"||(e.indexOf(" ")!==-1?fo(e.split(" "),function(){a.toggleClass(this,n)}):a.each(function(i,c){var f=MC(c,e);if(f!==n){var g=c.className;f?c.className=zc((" "+g+" ").replace(" "+e+" "," ")):c.className+=g?" "+e:e}})),a},hasClass:function(e){return MC(this[0],e)},each:function(e){return fo(this,e)},on:function(e,n){return this.each(function(){ls.bind(this,e,n)})},off:function(e,n){return this.each(function(){ls.unbind(this,e,n)})},trigger:function(e){return this.each(function(){typeof e=="object"?ls.fire(this,e.type,e):ls.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return br(Md.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var n,a,i=[];for(n=0,a=this.length;n<a;n++)br.find(e,this[n],i);return br(i)},filter:function(e){return br(typeof e=="function"?Tc(this.toArray(),function(n,a){return e(a,n)}):br.filter(e,this.toArray()))},closest:function(e){var n=[];return e instanceof br&&(e=e[0]),this.each(function(a,i){for(;i;){if(typeof e=="string"&&br(i).is(e)){n.push(i);break}else if(i===e){n.push(i);break}i=i.parentNode}}),br(n)},offset:function(e){var n,a,i,c=0,f=0,g;return e?this.css(e):(n=this[0],n&&(a=n.ownerDocument,i=a.documentElement,n.getBoundingClientRect&&(g=n.getBoundingClientRect(),c=g.left+(i.scrollLeft||a.body.scrollLeft)-i.clientLeft,f=g.top+(i.scrollTop||a.body.scrollTop)-i.clientTop)),{left:c,top:f})},push:Mi,sort:Array.prototype.sort,splice:Array.prototype.splice},je.extend(pu,{extend:je.extend,makeArray:function(e){return sf(e)||e.nodeType?[e]:je.toArray(e)},inArray:D1,isArray:je.isArray,each:fo,trim:zc,grep:Tc,find:za,expr:za.selectors,unique:za.uniqueSort,text:za.getText,contains:za.contains,filter:function(e,n,a){var i=n.length;for(a&&(e=":not("+e+")");i--;)n[i].nodeType!==1&&n.splice(i,1);return n.length===1?n=br.find.matchesSelector(n[0],e)?[n[0]]:[]:n=br.find.matches(e,n),n}});var fy=function(e,n,a){var i=[],c=e[n];for(typeof a!="string"&&a instanceof br&&(a=a[0]);c&&c.nodeType!==9&&!(a!==void 0&&(c===a||typeof a=="string"&&br(c).is(a)));)c.nodeType===1&&i.push(c),c=c[n];return i},_1=function(e,n,a,i){var c=[];for(i instanceof br&&(i=i[0]);e;e=e[n])if(!(a&&e.nodeType!==a)){if(i!==void 0&&(e===i||typeof i=="string"&&br(e).is(i)))break;c.push(e)}return c},NC=function(e,n,a){for(e=e[n];e;e=e[n])if(e.nodeType===a)return e;return null};fo({parent:function(e){var n=e.parentNode;return n&&n.nodeType!==11?n:null},parents:function(e){return fy(e,"parentNode")},next:function(e){return NC(e,"nextSibling",1)},prev:function(e){return NC(e,"previousSibling",1)},children:function(e){return _1(e.firstChild,"nextSibling",1)},contents:function(e){return je.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,n){pu.fn[e]=function(a){var i=this,c=[];i.each(function(){var g=n.call(c,this,a,c);g&&(br.isArray(g)?c.push.apply(c,g):c.push(g))}),this.length>1&&(Bd[e]||(c=br.unique(c)),e.indexOf("parents")===0&&(c=c.reverse()));var f=br(c);return a?f.filter(a):f}}),fo({parentsUntil:function(e,n){return fy(e,"parentNode",n)},nextUntil:function(e,n){return _1(e,"nextSibling",1,n).slice(1)},prevUntil:function(e,n){return _1(e,"previousSibling",1,n).slice(1)}},function(e,n){pu.fn[e]=function(a,i){var c=this,f=[];c.each(function(){var b=n.call(f,this,a,f);b&&(br.isArray(b)?f.push.apply(f,b):f.push(b))}),this.length>1&&(f=br.unique(f),(e.indexOf("parents")===0||e==="prevUntil")&&(f=f.reverse()));var g=br(f);return i?g.filter(i):g}}),pu.fn.is=function(e){return!!e&&this.filter(e).length>0},pu.fn.init.prototype=pu.fn,pu.overrideDefaults=function(e){var n,a=function(i,c){return n=n||e(),arguments.length===0&&(i=n.element),c||(c=n.context),new a.fn.init(i,c)};return br.extend(a,this),a},pu.attrHooks=O1,pu.cssHooks=A1;var br=pu,Km=je.each,R1=je.grep,vy=St.ie,Bi=/^([a-z0-9],?)+$/i,Fc=function(e,n,a){var i=n.keep_values,c={set:function(g,b,C){n.url_converter&&b!==null&&(b=n.url_converter.call(n.url_converter_scope||a(),b,C,g[0])),g.attr("data-mce-"+C,b).attr(C,b)},get:function(g,b){return g.attr("data-mce-"+b)||g.attr(b)}},f={style:{set:function(g,b){if(b!==null&&typeof b=="object"){g.css(b);return}i&&g.attr("data-mce-style",b),b!==null&&typeof b=="string"?(g.removeAttr("style"),g.css(e.parse(b))):g.attr("style",b)},get:function(g){var b=g.attr("data-mce-style")||g.attr("style");return b=e.serialize(e.parse(b),g[0].nodeName),b}}};return i&&(f.href=f.src=c),f},IC=function(e,n){var a=n.attr("style"),i=e.serialize(e.parse(a),n[0].nodeName);i||(i=null),n.attr("data-mce-style",i)},Pd=function(e,n){var a=0,i,c;if(e)for(i=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)c=e.nodeType,!(n&&c===3&&(c===i||!e.nodeValue.length))&&(a++,i=c);return a},ao=function(e,n){n===void 0&&(n={});var a={},i=window,c={},f=0,g=!0,b=!0,C=Qc.forElement(T.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),D=[],I=n.schema?n.schema:yc({}),z=al({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),F=n.ownEvents?new Hm:Hm.Event,q=I.getBlockElements(),X=br.overrideDefaults(function(){return{context:e,element:ym.getRoot()}}),J=function(pe){if(typeof pe=="string")return!!q[pe];if(pe){var $e=pe.nodeType;if($e)return!!($e===1&&q[pe.nodeName])}return!1},ee=function(pe){return pe&&e&&Tt(pe)?e.getElementById(pe):pe},ce=function(pe){return X(typeof pe=="string"?ee(pe):pe)},se=function(pe,$e,kt){var Ht,Sr,ua=ce(pe);return ua.length&&(Ht=v3[$e],Ht&&Ht.get?Sr=Ht.get(ua,$e):Sr=ua.attr($e)),typeof Sr>"u"&&(Sr=kt||""),Sr},Ae=function(pe){var $e=ee(pe);return $e?$e.attributes:[]},Ee=function(pe,$e,kt){kt===""&&(kt=null);var Ht=ce(pe),Sr=Ht.attr($e);if(Ht.length){var ua=v3[$e];ua&&ua.set?ua.set(Ht,kt,$e):Ht.attr($e,kt),Sr!==kt&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ht,attrName:$e,attrValue:kt})}},me=function(pe,$e){if(!vy||pe.nodeType!==1||$e)return pe.cloneNode($e);var kt=e.createElement(pe.nodeName);return Km(Ae(pe),function(Ht){Ee(kt,Ht.nodeName,se(pe,Ht.nodeName))}),kt},_e=function(){return n.root_element||e.body},et=function(pe){var $e=Uf(pe);return{x:$e.x,y:$e.y,w:$e.width,h:$e.height}},bt=function(pe,$e){return ph(e.body,ee(pe),$e)},Xn=function(pe,$e,kt){var Ht=Tt($e)?ce(pe).css($e,kt):ce(pe).css($e);n.update_styles&&IC(z,Ht)},an=function(pe,$e){var kt=ce(pe).css($e);n.update_styles&&IC(z,kt)},st=function(pe,$e,kt){var Ht=ce(pe);return kt?Ht.css($e):($e=$e.replace(/-(\D)/g,function(Sr,ua){return ua.toUpperCase()}),$e==="float"&&($e=St.browser.isIE()?"styleFloat":"cssFloat"),Ht[0]&&Ht[0].style?Ht[0].style[$e]:void 0)},qn=function(pe){var $e,kt;return pe=ee(pe),$e=st(pe,"width"),kt=st(pe,"height"),$e.indexOf("px")===-1&&($e=0),kt.indexOf("px")===-1&&(kt=0),{w:parseInt($e,10)||pe.offsetWidth||pe.clientWidth,h:parseInt(kt,10)||pe.offsetHeight||pe.clientHeight}},xt=function(pe){pe=ee(pe);var $e=bt(pe),kt=qn(pe);return{x:$e.x,y:$e.y,w:kt.w,h:kt.h}},tn=function(pe,$e){var kt;if(!pe)return!1;if(!Array.isArray(pe)){if($e==="*")return pe.nodeType===1;if(Bi.test($e)){var Ht=$e.toLowerCase().split(/,/),Sr=pe.nodeName.toLowerCase();for(kt=Ht.length-1;kt>=0;kt--)if(Ht[kt]===Sr)return!0;return!1}if(pe.nodeType&&pe.nodeType!==1)return!1}var ua=Array.isArray(pe)?pe:[pe];return za($e,ua[0].ownerDocument||ua[0],null,ua).length>0},Et=function(pe,$e,kt,Ht){var Sr=[],ua,Do=ee(pe);for(Ht=Ht===void 0,kt=kt||(_e().nodeName!=="BODY"?_e().parentNode:null),je.is($e,"string")&&(ua=$e,$e==="*"?$e=function(ch){return ch.nodeType===1}:$e=function(ch){return tn(ch,ua)});Do&&!(Do===kt||Vt(Do.nodeType)||hh(Do)||pr(Do));){if(!$e||typeof $e=="function"&&$e(Do))if(Ht)Sr.push(Do);else return[Do];Do=Do.parentNode}return Ht?Sr:null},Pt=function(pe,$e,kt){var Ht=Et(pe,$e,kt,!1);return Ht&&Ht.length>0?Ht[0]:null},vn=function(pe,$e,kt){var Ht=$e;if(pe){for(typeof $e=="string"&&(Ht=function(Sr){return tn(Sr,$e)}),pe=pe[kt];pe;pe=pe[kt])if(typeof Ht=="function"&&Ht(pe))return pe}return null},ft=function(pe,$e){return vn(pe,$e,"nextSibling")},on=function(pe,$e){return vn(pe,$e,"previousSibling")},Hr=function(pe,$e){return za(pe,ee($e)||n.root_element||e,[])},pa=function(pe,$e,kt){var Ht,Sr=typeof pe=="string"?ee(pe):pe;if(!Sr)return!1;if(je.isArray(Sr)&&(Sr.length||Sr.length===0))return Ht=[],Km(Sr,function(Do,ch){Do&&Ht.push($e.call(kt,typeof Do=="string"?ee(Do):Do,ch))}),Ht;var ua=kt||this;return $e.call(ua,Sr)},ma=function(pe,$e){ce(pe).each(function(kt,Ht){Km($e,function(Sr,ua){Ee(Ht,ua,Sr)})})},Tu=function(pe,$e){var kt=ce(pe);vy?kt.each(function(Ht,Sr){if(Sr.canHaveHTML!==!1){for(;Sr.firstChild;)Sr.removeChild(Sr.firstChild);try{Sr.innerHTML="<br>"+$e,Sr.removeChild(Sr.firstChild)}catch{br("<div></div>").html("<br>"+$e).contents().slice(1).appendTo(Sr)}return $e}}):kt.html($e)},zo=function(pe,$e,kt,Ht,Sr){return pa(pe,function(ua){var Do=typeof $e=="string"?e.createElement($e):$e;return ma(Do,kt),Ht&&(typeof Ht!="string"&&Ht.nodeType?Do.appendChild(Ht):typeof Ht=="string"&&Tu(Do,Ht)),Sr?Do:ua.appendChild(Do)})},Ns=function(pe,$e,kt){return zo(e.createElement(pe),pe,$e,kt,!0)},ac=bc.decode,vt=bc.encodeAllRaw,Ot=function(pe,$e,kt){var Ht="",Sr;Ht+="<"+pe;for(Sr in $e)So($e,Sr)&&(Ht+=" "+Sr+'="'+vt($e[Sr])+'"');return typeof kt<"u"?Ht+">"+kt+"</"+pe+">":Ht+" />"},Rn=function(pe){var $e,kt=e.createElement("div"),Ht=e.createDocumentFragment();for(Ht.appendChild(kt),pe&&(kt.innerHTML=pe);$e=kt.firstChild;)Ht.appendChild($e);return Ht.removeChild(kt),Ht},Me=function(pe,$e){var kt=ce(pe);return $e?kt.each(function(){for(var Ht;Ht=this.firstChild;)Ht.nodeType===3&&Ht.data.length===0?this.removeChild(Ht):this.parentNode.insertBefore(Ht,this)}).remove():kt.remove(),kt.length>1?kt.toArray():kt[0]},Ct=function(pe){return pa(pe,function($e){var kt,Ht=$e.attributes;for(kt=Ht.length-1;kt>=0;kt--)$e.removeAttributeNode(Ht.item(kt))})},mt=function(pe){return z.parse(pe)},zn=function(pe,$e){return z.serialize(pe,$e)},Un=function(pe){var $e,kt;if(ym!==ao.DOM&&e===document){if(a[pe])return;a[pe]=!0}kt=e.getElementById("mceDefaultStyles"),kt||(kt=e.createElement("style"),kt.id="mceDefaultStyles",kt.type="text/css",$e=e.getElementsByTagName("head")[0],$e.firstChild?$e.insertBefore(kt,$e.firstChild):$e.appendChild(kt)),kt.styleSheet?kt.styleSheet.cssText+=pe:kt.appendChild(e.createTextNode(pe))},Ya=function(pe){pe||(pe=""),pt(pe.split(","),function($e){c[$e]=!0,C.load($e,We)})},Wi=function(pe,$e,kt){ce(pe).toggleClass($e,kt).each(function(){this.className===""&&br(this).attr("class",null)})},zi=function(pe,$e){ce(pe).addClass($e)},bm=function(pe,$e){Wi(pe,$e,!1)},Is=function(pe,$e){return ce(pe).hasClass($e)},ys=function(pe){ce(pe).show()},iu=function(pe){ce(pe).hide()},gl=function(pe){return ce(pe).css("display")==="none"},$s=function(pe){return(pe||"mce_")+f++},Pf=function(pe){var $e=typeof pe=="string"?ee(pe):pe;return Qn($e)?$e.outerHTML:br("<div></div>").append(br($e).clone()).html()},eo=function(pe,$e){ce(pe).each(function(){try{if("outerHTML"in this){this.outerHTML=$e;return}}catch{}Me(br(this).html($e),!0)})},vo=function(pe,$e){var kt=ee($e);return pa(pe,function(Ht){var Sr=kt.parentNode,ua=kt.nextSibling;return ua?Sr.insertBefore(Ht,ua):Sr.appendChild(Ht),Ht})},uu=function(pe,$e,kt){return pa($e,function(Ht){return je.is(Ht,"array")&&(pe=pe.cloneNode(!0)),kt&&Km(R1(Ht.childNodes),function(Sr){pe.appendChild(Sr)}),Ht.parentNode.replaceChild(pe,Ht)})},oc=function(pe,$e){var kt;return pe.nodeName!==$e.toUpperCase()&&(kt=Ns($e),Km(Ae(pe),function(Ht){Ee(kt,Ht.nodeName,se(pe,Ht.nodeName))}),uu(kt,pe,!0)),kt||pe},wv=function(pe,$e){for(var kt=pe,Ht;kt;){for(Ht=$e;Ht&&kt!==Ht;)Ht=Ht.parentNode;if(kt===Ht)break;kt=kt.parentNode}return!kt&&pe.ownerDocument?pe.ownerDocument.documentElement:kt},Cv=function(pe){return z.toHex(je.trim(pe))},sh=function(pe){if(Qn(pe)){var $e=pe.nodeName.toLowerCase()==="a"&&!se(pe,"href")&&se(pe,"id");if(se(pe,"name")||se(pe,"data-mce-bookmark")||$e)return!0}return!1},O0=function(pe,$e){var kt,Ht,Sr=0;if(sh(pe))return!1;if(pe=pe.firstChild,pe){var ua=new Ta(pe,pe.parentNode),Do=I?I.getWhiteSpaceElements():{};$e=$e||(I?I.getNonEmptyElements():null);do{if(kt=pe.nodeType,Qn(pe)){var ch=pe.getAttribute("data-mce-bogus");if(ch){pe=ua.next(ch==="all");continue}if(Ht=pe.nodeName.toLowerCase(),$e&&$e[Ht]){if(Ht==="br"){Sr++,pe=ua.next();continue}return!1}if(sh(pe))return!1}if(kt===8||kt===3&&!tl(pe.nodeValue)||kt===3&&pe.parentNode&&Do[pe.parentNode.nodeName]&&tl(pe.nodeValue))return!1;pe=ua.next()}while(pe)}return Sr<=1},gk=function(){return e.createRange()},mB=function(pe,$e,kt){var Ht=gk(),Sr,ua,Do;if(pe&&$e)return Ht.setStart(pe.parentNode,Pd(pe)),Ht.setEnd($e.parentNode,Pd($e)),Sr=Ht.extractContents(),Ht=gk(),Ht.setStart($e.parentNode,Pd($e)+1),Ht.setEnd(pe.parentNode,Pd(pe)+1),ua=Ht.extractContents(),Do=pe.parentNode,Do.insertBefore(K0(ym,Sr),pe),kt?Do.insertBefore(kt,pe):Do.insertBefore($e,pe),Do.insertBefore(K0(ym,ua),pe),Me(pe),kt||$e},gB=function(pe,$e,kt,Ht){if(je.isArray(pe)){for(var Sr=pe.length,ua=[];Sr--;)ua[Sr]=gB(pe[Sr],$e,kt,Ht);return ua}n.collect&&(pe===e||pe===i)&&D.push([pe,$e,kt,Ht]);var Do=F.bind(pe,$e,kt,Ht||ym);return Do},l3=function(pe,$e,kt){if(je.isArray(pe)){for(var Ht=pe.length,Sr=[];Ht--;)Sr[Ht]=l3(pe[Ht],$e,kt);return Sr}else{if(D.length>0&&(pe===e||pe===i))for(var Ht=D.length;Ht--;){var ua=D[Ht];pe===ua[0]&&(!$e||$e===ua[1])&&(!kt||kt===ua[2])&&F.unbind(ua[0],ua[1],ua[2])}return F.unbind(pe,$e,kt)}},HF=function(pe,$e,kt){return F.fire(pe,$e,kt)},hB=function(pe){if(pe&&Qn(pe)){var $e=pe.getAttribute("data-mce-contenteditable");return $e&&$e!=="inherit"?$e:pe.contentEditable!=="inherit"?pe.contentEditable:null}else return null},VF=function(pe){for(var $e=_e(),kt=null;pe&&pe!==$e&&(kt=hB(pe),kt===null);pe=pe.parentNode);return kt},pB=function(){if(D.length>0)for(var pe=D.length;pe--;){var $e=D[pe];F.unbind($e[0],$e[1],$e[2])}Zt(c,function(kt,Ht){C.unload(Ht),delete c[Ht]}),za.setDocument&&za.setDocument()},f3=function(pe,$e){if(vy){for(;pe;){if($e===pe)return!0;pe=pe.parentNode}return!1}else return pe===$e||$e.contains(pe)},UF=function(pe){return"startContainer: "+pe.startContainer.nodeName+", startOffset: "+pe.startOffset+", endContainer: "+pe.endContainer.nodeName+", endOffset: "+pe.endOffset},ym={doc:e,settings:n,win:i,files:c,stdMode:g,boxModel:b,styleSheetLoader:C,boundEvents:D,styles:z,schema:I,events:F,isBlock:J,$:X,$$:ce,root:null,clone:me,getRoot:_e,getViewPort:et,getRect:xt,getSize:qn,getParent:Pt,getParents:Et,get:ee,getNext:ft,getPrev:on,select:Hr,is:tn,add:zo,create:Ns,createHTML:Ot,createFragment:Rn,remove:Me,setStyle:Xn,getStyle:st,setStyles:an,removeAllAttribs:Ct,setAttrib:Ee,setAttribs:ma,getAttrib:se,getPos:bt,parseStyle:mt,serializeStyle:zn,addStyle:Un,loadCSS:Ya,addClass:zi,removeClass:bm,hasClass:Is,toggleClass:Wi,show:ys,hide:iu,isHidden:gl,uniqueId:$s,setHTML:Tu,getOuterHTML:Pf,setOuterHTML:eo,decode:ac,encode:vt,insertAfter:vo,replace:uu,rename:oc,findCommonAncestor:wv,toHex:Cv,run:pa,getAttribs:Ae,isEmpty:O0,createRng:gk,nodeIndex:Pd,split:mB,bind:gB,unbind:l3,fire:HF,getContentEditable:hB,getContentEditableParent:VF,destroy:pB,isChildOf:f3,dumpRng:UF},v3=Fc(z,n,Y(ym));return ym};ao.DOM=ao(document),ao.nodeIndex=Pd;var Nd=ao.DOM,M1=je.each,Xm=je.grep,dy=0,$C=1,Ph=2,zC=3,ev=function(){function e(n){n===void 0&&(n={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=n}return e.prototype._setReferrerPolicy=function(n){this.settings.referrerPolicy=n},e.prototype.loadScript=function(n,a,i){var c=Nd,f,g=function(){c.remove(D),f&&(f.onerror=f.onload=f=null)},b=function(){g(),a()},C=function(){g(),ht(i)?i():typeof console<"u"&&console.log&&console.log("Failed to load script: "+n)},D=c.uniqueId();f=document.createElement("script"),f.id=D,f.type="text/javascript",f.src=je._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=b,f.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(f)},e.prototype.isDone=function(n){return this.states[n]===Ph},e.prototype.markDone=function(n){this.states[n]=Ph},e.prototype.add=function(n,a,i,c){var f=this.states[n];this.queue.push(n),f===void 0&&(this.states[n]=dy),a&&(this.scriptLoadedCallbacks[n]||(this.scriptLoadedCallbacks[n]=[]),this.scriptLoadedCallbacks[n].push({success:a,failure:c,scope:i||this}))},e.prototype.load=function(n,a,i,c){return this.add(n,a,i,c)},e.prototype.remove=function(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]},e.prototype.loadQueue=function(n,a,i){this.loadScripts(this.queue,n,a,i)},e.prototype.loadScripts=function(n,a,i,c){var f=this,g=[],b=function(D,I){M1(f.scriptLoadedCallbacks[I],function(z){ht(z[D])&&z[D].call(z.scope)}),f.scriptLoadedCallbacks[I]=void 0};f.queueLoadedCallbacks.push({success:a,failure:c,scope:i||this});var C=function(){var D=Xm(n);if(n.length=0,M1(D,function(z){if(f.states[z]===Ph){b("success",z);return}if(f.states[z]===zC){b("failure",z);return}f.states[z]!==$C&&(f.states[z]=$C,f.loading++,f.loadScript(z,function(){f.states[z]=Ph,f.loading--,b("success",z),C()},function(){f.states[z]=zC,f.loading--,g.push(z),b("failure",z),C()}))}),!f.loading){var I=f.queueLoadedCallbacks.slice(0);f.queueLoadedCallbacks.length=0,M1(I,function(z){g.length===0?ht(z.success)&&z.success.call(z.scope):ht(z.failure)&&z.failure.call(z.scope,g)})}};C()},e.ScriptLoader=new e,e}(),fs=function(e){var n=e,a=function(){return n},i=function(c){n=c};return{get:a,set:i}},my=function(e){return Ze(e)&&fr(e,"raw")},Yk=function(e){return qt(e)&&e.length>1},Dl={},tv=fs("en"),B1=function(){return Ir(Dl,tv.get())},Jk=function(){return Or(Dl,function(e){return kn({},e)})},Zk=function(e){e&&tv.set(e)},Id=function(){return tv.get()},$d=function(e,n){var a=Dl[e];a||(Dl[e]=a={}),Zt(n,function(i,c){a[c.toLowerCase()]=i})},P1=function(e){var n=B1().getOr({}),a=function(C){return ht(C)?Object.prototype.toString.call(C):i(C)?"":""+C},i=function(C){return C===""||C===null||C===void 0},c=function(C){var D=a(C);return Ir(n,D.toLowerCase()).map(a).getOr(D)},f=function(C){return C.replace(/{context:\w+}$/,"")};if(i(e))return"";if(my(e))return a(e.raw);if(Yk(e)){var g=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,function(C,D){return fr(g,D)?a(g[D]):C});return f(b)}return f(c(e))},va=function(){return B1().bind(function(e){return Ir(e,"_dir")}).exists(function(e){return e==="rtl"})},Pi=function(e){return fr(Dl,e)},vs={getData:Jk,setCode:Zk,getCode:Id,add:$d,translate:P1,isRtl:va,hasCode:Pi},As=function(){var e=[],n={},a={},i=[],c=function(J,ee){var ce=bn(i,function(se){return se.name===J&&se.state===ee});pt(ce,function(se){return se.callback()})},f=function(J){if(a[J])return a[J].instance},g=function(J){var ee;return a[J]&&(ee=a[J].dependencies),ee||[]},b=function(J,ee){As.languageLoad!==!1&&X(J,function(){var ce=vs.getCode(),se=","+(ee||"")+",";!ce||ee&&se.indexOf(","+ce+",")===-1||ev.ScriptLoader.add(n[J]+"/langs/"+ce+".js")},"loaded")},C=function(J,ee,ce){var se=ee;return e.push(se),a[J]={instance:se,dependencies:ce},c(J,"added"),se},D=function(J){delete n[J],delete a[J]},I=function(J,ee){return typeof ee=="object"?ee:typeof J=="string"?{prefix:"",resource:ee,suffix:""}:{prefix:J.prefix,resource:ee,suffix:J.suffix}},z=function(J,ee){var ce=n[J];pt(ee,function(se){ev.ScriptLoader.add(ce+"/"+se)})},F=function(J,ee,ce,se){var Ae=g(J);pt(Ae,function(Ee){var me=I(ee,Ee);q(me.resource,me,void 0,void 0)}),ce&&(se?ce.call(se):ce.call(ev))},q=function(J,ee,ce,se,Ae){if(!n[J]){var Ee=typeof ee=="string"?ee:ee.prefix+ee.resource+ee.suffix;Ee.indexOf("/")!==0&&Ee.indexOf("://")===-1&&(Ee=As.baseURL+"/"+Ee),n[J]=Ee.substring(0,Ee.lastIndexOf("/"));var me=function(){c(J,"loaded"),F(J,ee,ce,se)};a[J]?me():ev.ScriptLoader.add(Ee,me,se,Ae)}},X=function(J,ee,ce){ce===void 0&&(ce="added"),fr(a,J)&&ce==="added"||fr(n,J)&&ce==="loaded"?ee():i.push({name:J,state:ce,callback:ee})};return{items:e,urls:n,lookup:a,_listeners:i,get:f,dependencies:g,requireLangPack:b,add:C,remove:D,createUrl:I,addComponents:z,load:q,waitFor:X}};As.languageLoad=!0,As.baseURL="",As.PluginManager=As(),As.ThemeManager=As();var Xa=function(e){var n=fs(Q.none()),a=function(){return n.get().each(e)},i=function(){a(),n.set(Q.none())},c=function(){return n.get().isSome()},f=function(){return n.get()},g=function(b){a(),n.set(Q.some(b))};return{clear:i,isSet:c,get:f,set:g}},Wv=function(){var e=Xa(We),n=function(a){return e.get().each(a)};return kn(kn({},e),{on:n})},N1=function(e,n){var a=null,i=function(){Z(a)||(clearTimeout(a),a=null)},c=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];Z(a)&&(a=setTimeout(function(){a=null,e.apply(null,f)},n))};return{cancel:i,throttle:c}},Hi=function(e,n){var a=null,i=function(){Z(a)||(clearTimeout(a),a=null)},c=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];i(),a=setTimeout(function(){a=null,e.apply(null,f)},n)};return{cancel:i,throttle:c}},cf=function(e,n){var a=U(e,n);return a===void 0||a===""?[]:a.split(" ")},Qk=function(e,n,a){var i=cf(e,n),c=i.concat([a]);return O(e,n,c.join(" ")),!0},eE=function(e,n,a){var i=bn(cf(e,n),function(c){return c!==a});return i.length>0?O(e,n,i.join(" ")):Xe(e,n),!1},I1=function(e){return e.dom.classList!==void 0},$1=function(e){return cf(e,"class")},gy=function(e,n){return Qk(e,"class",n)},hy=function(e,n){return eE(e,"class",n)},zd=function(e,n){I1(e)?e.dom.classList.add(n):gy(e,n)},Nh=function(e){var n=I1(e)?e.dom.classList:$1(e);n.length===0&&Xe(e,"class")},py=function(e,n){if(I1(e)){var a=e.dom.classList;a.remove(n)}else hy(e,n);Nh(e)},by=function(e,n){return I1(e)&&e.dom.classList.contains(n)},Ym=function(e,n){var a=[];return pt(Hu(e),function(i){n(i)&&(a=a.concat([i])),a=a.concat(Ym(i,n))}),a},bu=function(e,n){return ir(n,e)},Zs=Y("mce-annotation"),Ih=Y("data-mce-annotation"),Ni=Y("data-mce-annotation-uid"),z1=function(e,n){var a=e.selection.getRng(),i=T.fromDom(a.startContainer),c=T.fromDom(e.getBody()),f=n.fold(function(){return"."+Zs()},function(D){return"["+Ih()+'="'+D+'"]'}),g=bl(i,a.startOffset).getOr(i),b=Zo(g,f,function(D){return Yn(D,c)}),C=function(D,I){return Oe(D,I)?Q.some(U(D,I)):Q.none()};return b.bind(function(D){return C(D,""+Ni()).bind(function(I){return C(D,""+Ih()).map(function(z){var F=yy(e,I);return{uid:I,name:z,elements:F}})})})},nv=function(e){return co(e)&&by(e,Zs())},yy=function(e,n){var a=T.fromDom(e.getBody());return bu(a,"["+Ni()+'="'+n+'"]')},wy=function(e,n){var a=T.fromDom(e.getBody()),i=bu(a,"["+Ih()+'="'+n+'"]'),c={};return pt(i,function(f){var g=U(f,Ni()),b=Ir(c,g).getOr([]);c[g]=b.concat([f])}),c},FC=function(e,n){var a=fs({}),i=function(){return{listeners:[],previous:Wv()}},c=function(I,z){f(I,function(F){return z(F),F})},f=function(I,z){var F=a.get(),q=Ir(F,I).getOrThunk(i),X=z(q);F[I]=X,a.set(F)},g=function(I,z,F){c(I,function(q){pt(q.listeners,function(X){return X(!0,I,{uid:z,nodes:$n(F,function(J){return J.dom})})})})},b=function(I){c(I,function(z){pt(z.listeners,function(F){return F(!1,I)})})},C=Hi(function(){var I=a.get(),z=ra(Xt(I));pt(z,function(F){f(F,function(q){var X=q.previous.get();return z1(e,Q.some(F)).fold(function(){X.isSome()&&(b(F),q.previous.clear())},function(J){var ee=J.uid,ce=J.name,se=J.elements;wd(X,ee)||(g(ce,ee,se),q.previous.set(ee))}),{previous:q.previous,listeners:q.listeners}})})},30);e.on("remove",function(){C.cancel()}),e.on("NodeChange",function(){C.throttle()});var D=function(I,z){f(I,function(F){return{previous:F.previous,listeners:F.listeners.concat([z])}})};return{addListener:D}},Cy=function(e,n){var a=function(i){return Q.from(i.attr(Ih())).bind(n.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(i){pt(i,function(c){a(c).each(function(f){f.persistent===!1&&c.unwrap()})})})})},$h=function(){var e={},n=function(i,c){e[i]={name:i,settings:c}},a=function(i){return Ir(e,i).map(function(c){return c.settings})};return{register:n,lookup:a}},F1=0,LC=function(e){var n=new Date,a=n.getTime(),i=Math.floor(Math.random()*1e9);return F1++,e+"_"+i+F1+String(a)},tE=function(e,n){pt(n,function(a){zd(e,a)})},Nu=function(e,n){var a=n||document,i=a.createElement("div");return i.innerHTML=e,Hu(T.fromDom(i))},Vi=function(e){return $n(e,T.fromDom)},ds=function(e){return e.dom.innerHTML},ms=function(e,n){var a=Yc(e),i=a.dom,c=T.fromDom(i.createDocumentFragment()),f=Nu(n,i);zf(c,f),Ff(e),Di(e,c)},Ds=function(e,n){return T.fromDom(e.dom.cloneNode(n))},wi=function(e){return Ds(e,!1)},L1=function(e){return Ds(e,!0)},H1=function(e,n,a){a===void 0&&(a=wt);var i=new Ta(e,n),c=function(f){var g;do g=i[f]();while(g&&!un(g)&&!a(g));return Q.from(g).filter(un)};return{current:function(){return Q.from(i.current()).filter(un)},next:function(){return c("next")},prev:function(){return c("prev")},prev2:function(){return c("prev2")}}},Sy=function(e,n){var a=n||function(g){return e.isBlock(g)||Va(g)||lo(g)},i=function(g,b,C,D){if(un(g)){var I=D(g,b,g.data);if(I!==-1)return Q.some({container:g,offset:I})}return C().bind(function(z){return i(z.container,z.offset,C,D)})},c=function(g,b,C,D){var I=H1(g,D,a);return i(g,b,function(){return I.prev().map(function(z){return{container:z,offset:z.length}})},C).getOrNull()},f=function(g,b,C,D){var I=H1(g,D,a);return i(g,b,function(){return I.next().map(function(z){return{container:z,offset:0}})},C).getOrNull()};return{backwards:c,forwards:f}},Fd=Math.round,jv=function(e){return e?{left:Fd(e.left),top:Fd(e.top),bottom:Fd(e.bottom),right:Fd(e.right),width:Fd(e.width),height:Fd(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},V1=function(e,n){return e=jv(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},U1=function(e,n){return e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right},W1=function(e,n,a){return e>=0&&e<=Math.min(n.height,a.height)/2},Jm=function(e,n){var a=Math.min(n.height/2,e.height/2);return e.bottom-a<n.top?!0:e.top>n.bottom?!1:W1(n.top-e.bottom,e,n)},Zm=function(e,n){return e.top>n.bottom?!0:e.bottom<n.top?!1:W1(n.bottom-e.top,e,n)},HC=function(e,n,a){return n>=e.left&&n<=e.right&&a>=e.top&&a<=e.bottom},lf=function(e,n,a){return Math.min(Math.max(e,n),a)},Ld=function(e){var n=e.startContainer,a=e.startOffset;return n.hasChildNodes()&&e.endOffset===a+1?n.childNodes[a]:null},yo=function(e,n){if(Qn(e)&&e.hasChildNodes()){var a=e.childNodes,i=lf(n,0,a.length-1);return a[i]}else return e},nE=function(e,n){if(!(n<0&&Qn(e)&&e.hasChildNodes()))return yo(e,n)},rE=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),j1=function(e){return typeof e=="string"&&e.charCodeAt(0)>=768&&rE.test(e)},aE=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(a){for(var i=0;i<e.length;i++)if(e[i](a))return!0;return!1}},VC=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(a){for(var i=0;i<e.length;i++)if(!e[i](a))return!1;return!0}},Bt=Qn,oE=tf,Ii=is("display","block table"),xy=is("float","left right"),Hd=VC(Bt,oE,Oa(xy)),UC=Oa(is("white-space","pre pre-line pre-wrap")),Wu=un,zh=Va,G1=ao.nodeIndex,Fh=nE,_l=function(e){return"createRange"in e?e.createRange():ao.DOM.createRng()},Lh=function(e){return e&&/[\r\n\t ]/.test(e)},Hh=function(e){return!!e.setStart&&!!e.setEnd},gs=function(e){var n=e.startContainer,a=e.startOffset;if(Lh(e.toString())&&UC(n.parentNode)&&un(n)){var i=n.data;if(Lh(i[a-1])||Lh(i[a+1]))return!0}return!1},Rl=function(e){var n=e.ownerDocument,a=_l(n),i=n.createTextNode(Ks),c=e.parentNode;c.insertBefore(i,e),a.setStart(i,0),a.setEnd(i,1);var f=jv(a.getBoundingClientRect());return c.removeChild(i),f},WC=function(e){var n=e.startContainer,a=e.endContainer,i=e.startOffset,c=e.endOffset;if(n===a&&un(a)&&i===0&&c===1){var f=e.cloneRange();return f.setEndAfter(a),ff(f)}else return null},ju=function(e){return e.left===0&&e.right===0&&e.top===0&&e.bottom===0},ff=function(e){var n,a=e.getClientRects();return a.length>0?n=jv(a[0]):n=jv(e.getBoundingClientRect()),!Hh(e)&&zh(e)&&ju(n)?Rl(e):ju(n)&&Hh(e)?WC(e):n},Gv=function(e,n){var a=V1(e,n);return a.width=1,a.right=a.left+1,a},Vh=function(e){var n=[],a=function(C){C.height!==0&&(n.length>0&&U1(C,n[n.length-1])||n.push(C))},i=function(C,D){var I=_l(C.ownerDocument);if(D<C.data.length){if(j1(C.data[D]))return n;if(j1(C.data[D-1])&&(I.setStart(C,D),I.setEnd(C,D+1),!gs(I)))return a(Gv(ff(I),!1)),n}D>0&&(I.setStart(C,D-1),I.setEnd(C,D),gs(I)||a(Gv(ff(I),!1))),D<C.data.length&&(I.setStart(C,D),I.setEnd(C,D+1),gs(I)||a(Gv(ff(I),!0)))},c=e.container(),f=e.offset();if(Wu(c))return i(c,f),n;if(Bt(c))if(e.isAtEnd()){var g=Fh(c,f);Wu(g)&&i(g,g.data.length),Hd(g)&&!zh(g)&&a(Gv(ff(g),!1))}else{var g=Fh(c,f);if(Wu(g)&&i(g,0),Hd(g)&&e.isAtEnd())return a(Gv(ff(g),!1)),n;var b=Fh(e.container(),e.offset()-1);Hd(b)&&!zh(b)&&(Ii(b)||Ii(g)||!Hd(g))&&a(Gv(ff(b),!1)),Hd(g)&&a(Gv(ff(g),!0))}return n},Ue=function(e,n,a){var i=function(){return Wu(e),n===0},c=function(){return Wu(e)?n>=e.data.length:n>=e.childNodes.length},f=function(){var I=_l(e.ownerDocument);return I.setStart(e,n),I.setEnd(e,n),I},g=function(){return a||(a=Vh(Ue(e,n))),a},b=function(){return g().length>0},C=function(I){return I&&e===I.container()&&n===I.offset()},D=function(I){return Fh(e,I?n-1:n)};return{container:Y(e),offset:Y(n),toRange:f,getClientRects:g,isVisible:b,isAtStart:i,isAtEnd:c,isEqual:C,getNode:D}};Ue.fromRangeStart=function(e){return Ue(e.startContainer,e.startOffset)},Ue.fromRangeEnd=function(e){return Ue(e.endContainer,e.endOffset)},Ue.after=function(e){return Ue(e.parentNode,G1(e)+1)},Ue.before=function(e){return Ue(e.parentNode,G1(e))},Ue.isAbove=function(e,n){return Vu(Ga(n.getClientRects()),na(e.getClientRects()),Jm).getOr(!1)},Ue.isBelow=function(e,n){return Vu(na(n.getClientRects()),Ga(e.getClientRects()),Zm).getOr(!1)},Ue.isAtStart=function(e){return e?e.isAtStart():!1},Ue.isAtEnd=function(e){return e?e.isAtEnd():!1},Ue.isTextPosition=function(e){return e?un(e.container()):!1},Ue.isElementPosition=function(e){return Ue.isTextPosition(e)===!1};var rv=function(e,n){un(n)&&n.data.length===0&&e.remove(n)},Qm=function(e,n,a){n.insertNode(a),rv(e,a.previousSibling),rv(e,a.nextSibling)},iE=function(e,n,a){var i=Q.from(a.firstChild),c=Q.from(a.lastChild);n.insertNode(a),i.each(function(f){return rv(e,f.previousSibling)}),c.each(function(f){return rv(e,f.nextSibling)})},q1=function(e,n,a){pr(a)?iE(e,n,a):Qm(e,n,a)},il=un,K1=Jo,Ty=ao.nodeIndex,ky=function(e){var n=e.parentNode;return K1(n)?ky(n):n},X1=function(e){return e?qi(e.childNodes,function(n,a){return K1(a)&&a.nodeName!=="BR"?n=n.concat(X1(a)):n.push(a),n},[]):[]},Ey=function(e,n){for(;(e=e.previousSibling)&&il(e);)n+=e.data.length;return n},Oy=function(e){return function(n){return e===n}},Ay=function(e){var n,a;n=X1(ky(e)),a=$r(n,Oy(e),e),n=n.slice(0,a+1);var i=qi(n,function(c,f,g){return il(f)&&il(n[g-1])&&c++,c},0);return n=di(n,vc([e.nodeName])),a=$r(n,Oy(e),e),a-i},Dy=function(e){var n;return il(e)?n="text()":n=e.nodeName.toLowerCase(),n+"["+Ay(e)+"]"},Vd=function(e,n,a){var i=[];for(n=n.parentNode;n!==e&&!(a&&a(n));n=n.parentNode)i.push(n);return i},jC=function(e,n){var a,i,c=[],f,g,b;return a=n.container(),i=n.offset(),il(a)?f=Ey(a,i):(g=a.childNodes,i>=g.length?(f="after",i=g.length-1):f="before",a=g[i]),c.push(Dy(a)),b=Vd(e,a),b=di(b,Oa(Jo)),c=c.concat(Gi(b,function(C){return Dy(C)})),c.reverse().join("/")+","+f},uE=function(e,n,a){var i=X1(e);return i=di(i,function(c,f){return!il(c)||!il(i[f-1])}),i=di(i,vc([n])),i[a]},sE=function(e,n){for(var a=e,i=0,c;il(a);){if(c=a.data.length,n>=i&&n<=i+c){e=a,n=n-i;break}if(!il(a.nextSibling)){e=a,n=c;break}i+=c,a=a.nextSibling}return il(e)&&n>e.data.length&&(n=e.data.length),Ue(e,n)},eg=function(e,n){var a;if(!n)return null;var i=n.split(","),c=i[0].split("/");a=i.length>1?i[1]:"before";var f=qi(c,function(g,b){var C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),uE(g,C[1],parseInt(C[2],10))):null},e);return f?il(f)?sE(f,parseInt(a,10)):(a==="after"?a=Ty(f)+1:a=Ty(f),Ue(f.parentNode,a)):null},tg=lo,Y1=function(e,n,a){var i,c;for(c=e(n.data.slice(0,a)).length,i=n.previousSibling;i&&un(i);i=i.previousSibling)c+=e(i.data).length;return c},_y=function(e,n,a,i,c){var f=i[c?"startContainer":"endContainer"],g=i[c?"startOffset":"endOffset"],b=[],C,D=0,I=e.getRoot();for(un(f)?b.push(a?Y1(n,f,g):g):(C=f.childNodes,g>=C.length&&C.length&&(D=1,g=Math.max(0,C.length-1)),b.push(e.nodeIndex(C[g],a)+D));f&&f!==I;f=f.parentNode)b.push(e.nodeIndex(f,a));return b},ng=function(e,n,a,i){var c=n.dom,f={};return f.start=_y(c,e,a,i,!0),n.isCollapsed()||(f.end=_y(c,e,a,i,!1)),ef(i)&&(f.isFakeCaret=!0),f},Ry=function(e,n,a){var i=0;return je.each(e.select(n),function(c){if(c.getAttribute("data-mce-bogus")!=="all"){if(c===a)return!1;i++}}),i},Wo=function(e,n){var a,i,c,f=n?"start":"end";a=e[f+"Container"],i=e[f+"Offset"],Qn(a)&&a.nodeName==="TR"&&(c=a.childNodes,a=c[Math.min(n?i:i-1,c.length-1)],a&&(i=n?0:a.childNodes.length,e["set"+(n?"Start":"End")](a,i)))},Uh=function(e){return Wo(e,!0),Wo(e,!1),e},Qo=function(e,n){var a;if(Qn(e)&&(e=yo(e,n),tg(e)))return e;if(Os(e)&&(un(e)&&Ua(e)&&(e=e.parentNode),a=e.previousSibling,tg(a)||(a=e.nextSibling,tg(a))))return a},J1=function(e){return Qo(e.startContainer,e.startOffset)||Qo(e.endContainer,e.endOffset)},Ud=function(e,n,a){var i=a.getNode(),c=i?i.nodeName:null,f=a.getRng();if(tg(i)||c==="IMG")return{name:c,index:Ry(a.dom,c,i)};var g=J1(f);return g?(c=g.tagName,{name:c,index:Ry(a.dom,c,g)}):ng(e,a,n,f)},My=function(e){var n=e.getRng();return{start:jC(e.dom.getRoot(),Ue.fromRangeStart(n)),end:jC(e.dom.getRoot(),Ue.fromRangeEnd(n))}},Wh=function(e){return{rng:e.getRng()}},By=function(e,n,a){var i={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return a?e.create("span",i,"&#xFEFF;"):e.create("span",i)},GC=function(e,n){var a=e.dom,i=e.getRng(),c=a.uniqueId(),f=e.isCollapsed(),g=e.getNode(),b=g.nodeName;if(b==="IMG")return{name:b,index:Ry(a,b,g)};var C=Uh(i.cloneRange());if(!f){C.collapse(!1);var D=By(a,c+"_end",n);q1(a,C,D)}i=Uh(i),i.collapse(!0);var I=By(a,c+"_start",n);return q1(a,i,I),e.moveToBookmark({id:c,keep:!0}),{id:c}},cE=function(e,n,a){return n===2?Ud(kl,a,e):n===3?My(e):n?Wh(e):GC(e,!1)},qC=Mt(Ud,Pn,!0),lE=ao.DOM,Z1="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",jh=function(e,n,a){var i=e.getParam(n,a);if(i.indexOf("=")!==-1){var c=e.getParam(n,"","hash");return Ir(c,e.id).getOr(a)}else return i},fE=function(e){return e.getParam("iframe_attrs",{})},KC=function(e){return e.getParam("doctype","<!DOCTYPE html>")},Py=function(e){return e.getParam("document_base_url","")},vE=function(e){return jh(e,"body_id","tinymce")},dE=function(e){return jh(e,"body_class","")},Q1=function(e){return e.getParam("content_security_policy","")},Ny=function(e){return e.getParam("br_in_pre",!0)},yu=function(e){if(e.getParam("force_p_newlines",!1))return"p";var n=e.getParam("forced_root_block","p");return n===!1?"":n===!0?"p":n},rg=function(e){return e.getParam("forced_root_block_attrs",{})},ag=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},XC=function(e){return e.getParam("no_newline_selector","")},mE=function(e){return e.getParam("keep_styles",!0)},Gh=function(e){return e.getParam("end_container_on_empty_block",!1)},qh=function(e){return je.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},Wd=function(e){return je.explode(e.getParam("font_size_classes",""))},eb=function(e){return e.getParam("images_dataimg_filter",jt,"function")},Kh=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Iy=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},gE=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},vf=function(e){return e.getParam("icons","","string")},tb=function(e){return e.getParam("icons_url","","string")},hE=function(e){return e.getParam("images_upload_url","","string")},qv=function(e){return e.getParam("images_upload_base_path","","string")},Kv=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},pE=function(e){return e.getParam("images_upload_handler",null,"function")},nb=function(e){return e.getParam("content_css_cors",!1,"boolean")},rb=function(e){return e.getParam("referrer_policy","","string")},ab=function(e){return e.getParam("language","en","string")},eu=function(e){return e.getParam("language_url","","string")},YC=function(e){return e.getParam("indent_use_margin",!1)},$y=function(e){return e.getParam("indentation","40px","string")},JC=function(e){var n=e.getParam("content_css");return Tt(n)?$n(n.split(","),Ba):qt(n)?n:n===!1||e.inline?[]:["default"]},ZC=function(e){var n=e.getParam("font_css",[]);return qt(n)?n:$n(n.split(","),Ba)},Ml=function(e){return e.getParam("directionality",vs.isRtl()?"rtl":void 0)},av=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},QC=function(e){var n=e.getParam("object_resizing");return n===!1||St.iOS?!1:Tt(n)?n:"table,img,figure.image,div,video,iframe"},eS=function(e){return e.getParam("resize_img_proportional",!0,"boolean")},zy=function(e){return e.getParam("placeholder",lE.getAttrib(e.getElement(),"placeholder"),"string")},ob=function(e){return e.getParam("event_root")},tS=function(e){return e.getParam("service_message")},og=function(e){return e.getParam("theme")},bE=function(e){return e.getParam("validate")},Xh=function(e){return e.getParam("inline_boundaries")!==!1},yE=function(e){return e.getParam("formats")},ig=function(e){var n=e.getParam("preview_styles",Z1);return Tt(n)?n:""},jd=function(e){return e.getParam("format_empty_lines",!1,"boolean")},Fy=function(e){return e.getParam("custom_ui_selector","","string")},nS=function(e){return e.getParam("theme_url")},wE=function(e){return e.getParam("inline")},rS=function(e){return e.getParam("hidden_input")},aS=function(e){return e.getParam("submit_patch")},Ly=function(e){return e.getParam("encoding")==="xml"},CE=function(e){return e.getParam("add_form_submit_trigger")},ib=function(e){return e.getParam("add_unload_trigger")},SE=function(e){return yu(e)!==""},Yh=function(e){return e.getParam("custom_undo_redo_levels",0,"number")},xE=function(e){return e.getParam("disable_nodechange")},TE=function(e){return e.getParam("readonly")},kE=function(e){return e.getParam("content_css_cors")},ub=function(e){return e.getParam("plugins","","string")},EE=function(e){return e.getParam("external_plugins")},ug=function(e){return e.getParam("block_unsupported_drop",!0,"boolean")},oS=function(e){return e.getParam("visual",!0,"boolean")},OE=function(e){return e.getParam("visual_table_class","mce-item-table","string")},Hy=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")},iS=function(e){return e.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")},Vy=Qn,uS=un,sS=function(e){var n=e.parentNode;n&&n.removeChild(e)},sg=function(e){var n=kl(e);return{count:e.length-n.length,text:n}},Uy=function(e){for(var n;(n=e.data.lastIndexOf(Se))!==-1;)e.deleteData(n,1)},Wy=function(e,n){return Xv(e),n},AE=function(e,n){var a=sg(e.data.substr(0,n.offset())),i=sg(e.data.substr(n.offset())),c=a.text+i.text;return c.length>0?(Uy(e),Ue(e,n.offset()-a.count)):n},DE=function(e,n){var a=n.container(),i=Er(Pr(a.childNodes),e).map(function(c){return c<n.offset()?Ue(a,n.offset()-1):n}).getOr(n);return Xv(e),i},jy=function(e,n){return uS(e)&&n.container()===e?AE(e,n):Wy(e,n)},_E=function(e,n){return n.container()===e.parentNode?DE(e,n):Wy(e,n)},cS=function(e,n){return Ue.isTextPosition(n)?jy(e,n):_E(e,n)},Xv=function(e){Vy(e)&&Os(e)&&(Kf(e)?e.removeAttribute("data-mce-caret"):sS(e)),uS(e)&&(Uy(e),e.data.length===0&&sS(e))},cg=Yt().browser,lS=lo,RE=Ts,fS=Em,ME="*[contentEditable=false],video,audio,embed,object",Gy=function(e,n,a){var i=V1(n.getBoundingClientRect(),a),c,f;if(e.tagName==="BODY"){var g=e.ownerDocument.documentElement;c=e.scrollLeft||g.scrollLeft,f=e.scrollTop||g.scrollTop}else{var b=e.getBoundingClientRect();c=e.scrollLeft-b.left,f=e.scrollTop-b.top}i.left+=c,i.right+=c,i.top+=f,i.bottom+=f,i.width=1;var C=n.offsetWidth-n.clientWidth;return C>0&&(a&&(C*=-1),i.left+=C,i.right+=C),i},lg=function(e){for(var n=bu(T.fromDom(e),ME),a=0;a<n.length;a++){var i=n[a].dom,c=i.previousSibling;if(kh(c)){var f=c.data;f.length===1?c.parentNode.removeChild(c):c.deleteData(f.length-1,1)}if(c=i.nextSibling,Th(c)){var f=c.data;f.length===1?c.parentNode.removeChild(c):c.deleteData(0,1)}}},Gu=function(e,n,a,i){var c=Wv(),f,g,b=yu(e),C=b.length>0?b:"p",D=function(J,ee){var ce;if(I(),fS(ee))return null;if(a(ee)){g=bC(C,ee,J);var se=Gy(n,ee,J);br(g).css("top",se.top);var Ae=br('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(kn({},se)).appendTo(n)[0];c.set({caret:Ae,element:ee,before:J}),J&&br(Ae).addClass("mce-visual-caret-before"),z(),ce=ee.ownerDocument.createRange(),ce.setStart(g,0),ce.setEnd(g,0)}else return g=L0(ee,J),ce=ee.ownerDocument.createRange(),fg(g.nextSibling)?(ce.setStart(g,0),ce.setEnd(g,0)):(ce.setStart(g,1),ce.setEnd(g,1)),ce;return ce},I=function(){lg(n),g&&(Xv(g),g=null),c.on(function(J){br(J.caret).remove(),c.clear()}),f&&(Ru.clearInterval(f),f=void 0)},z=function(){f=Ru.setInterval(function(){i()?br("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden"):br("div.mce-visual-caret",n).addClass("mce-visual-caret-hidden")},500)},F=function(){c.on(function(J){var ee=Gy(n,J.element,J.before);br(J.caret).css(kn({},ee))})},q=function(){return Ru.clearInterval(f)},X=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:D,hide:I,getCss:X,reposition:F,destroy:q}},qy=function(){return cg.isIE()||cg.isEdge()||cg.isFirefox()},fg=function(e){return lS(e)||RE(e)},Gd=function(e){return fg(e)||ii(e)&&qy()},sb=lo,BE=Ts,vS=is("display","block table table-cell table-caption list-item"),Ky=Os,_s=Ua,Jh=Qn,PE=tf,qd=function(e){return e>0},Yv=function(e){return e<0},vg=function(e,n){for(var a;a=e(n);)if(!_s(a))return a;return null},Jv=function(e,n,a,i,c){var f=new Ta(e,i),g=sb(e)||_s(e);if(Yv(n)){if(g&&(e=vg(f.prev.bind(f),!0),a(e)))return e;for(;e=vg(f.prev.bind(f),c);)if(a(e))return e}if(qd(n)){if(g&&(e=vg(f.next.bind(f),!0),a(e)))return e;for(;e=vg(f.next.bind(f),c);)if(a(e))return e}return null},Bl=function(e,n){for(;e&&e!==n;){if(vS(e))return e;e=e.parentNode}return null},Pl=function(e,n,a){return Bl(e.container(),a)===Bl(n.container(),a)},cb=function(e,n){if(!n)return null;var a=n.container(),i=n.offset();return Jh(a)?a.childNodes[i+e]:null},lb=function(e,n){var a=n.ownerDocument.createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},Xy=function(e,n,a){return Bl(n,e)===Bl(a,e)},dg=function(e,n,a){for(var i=e?"previousSibling":"nextSibling";a&&a!==n;){var c=a[i];if(Ky(c)&&(c=c[i]),sb(c)||BE(c)){if(Xy(n,c,a))return c;break}if(PE(c))break;a=a.parentNode}return null},mg=Mt(lb,!0),gg=Mt(lb,!1),Iu=function(e,n,a){var i,c=Mt(dg,!0,n),f=Mt(dg,!1,n),g=a.startContainer,b=a.startOffset;if(Ua(g)){Jh(g)||(g=g.parentNode);var C=g.getAttribute("data-mce-caret");if(C==="before"&&(i=g.nextSibling,Gd(i)))return mg(i);if(C==="after"&&(i=g.previousSibling,Gd(i)))return gg(i)}if(!a.collapsed)return a;if(un(g)){if(Ky(g)){if(e===1){if(i=f(g),i)return mg(i);if(i=c(g),i)return gg(i)}if(e===-1){if(i=c(g),i)return gg(i);if(i=f(g),i)return mg(i)}return a}if(kh(g)&&b>=g.data.length-1)return e===1&&(i=f(g),i)?mg(i):a;if(Th(g)&&b<=1)return e===-1&&(i=c(g),i)?gg(i):a;if(b===g.data.length)return i=f(g),i?mg(i):a;if(b===0)return i=c(g),i?gg(i):a}return a},hg=function(e,n){return Q.from(cb(e?0:-1,n)).filter(sb)},pg=function(e,n,a){var i=Iu(e,n,a);return e===-1?Ue.fromRangeStart(i):Ue.fromRangeEnd(i)},fb=function(e){return Q.from(e.getNode()).map(T.fromDom)},NE=function(e){return Q.from(e.getNode(!0)).map(T.fromDom)},Yy=function(e,n){for(;n=e(n);)if(n.isVisible())return n;return n},vb=function(e,n){var a=Pl(e,n);return!a&&Va(e.getNode())?!0:a},wu;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(wu||(wu={}));var IE=lo,df=un,db=Qn,Jy=Va,bg=tf,Zy=$k,Zh=bi,$E=function(e,n){for(var a=[];e&&e!==n;)a.push(e),e=e.parentNode;return a},dS=function(e,n){return e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null},mS=function(e,n){if(qd(e)){if(bg(n.previousSibling)&&!df(n.previousSibling))return Ue.before(n);if(df(n))return Ue(n,0)}if(Yv(e)){if(bg(n.nextSibling)&&!df(n.nextSibling))return Ue.after(n);if(df(n))return Ue(n,n.data.length)}return Yv(e)?Jy(n)?Ue.before(n):Ue.after(n):Ue.before(n)},zE=function(e,n){var a=n.nextSibling;return a&&bg(a)?df(a)?Ue(a,0):Ue.before(a):yg(wu.Forwards,Ue.after(n),e)},yg=function(e,n,a){var i,c,f,g;if(!db(a)||!n)return null;if(n.isEqual(Ue.after(a))&&a.lastChild){if(g=Ue.after(a.lastChild),Yv(e)&&bg(a.lastChild)&&db(a.lastChild))return Jy(a.lastChild)?Ue.before(a.lastChild):g}else g=n;var b=g.container(),C=g.offset();if(df(b)){if(Yv(e)&&C>0)return Ue(b,--C);if(qd(e)&&C<b.length)return Ue(b,++C);i=b}else{if(Yv(e)&&C>0&&(c=dS(b,C-1),bg(c)))return!Zy(c)&&(f=Jv(c,e,Zh,c),f)?df(f)?Ue(f,f.data.length):Ue.after(f):df(c)?Ue(c,c.data.length):Ue.before(c);if(qd(e)&&C<b.childNodes.length&&(c=dS(b,C),bg(c)))return Jy(c)?zE(a,c):!Zy(c)&&(f=Jv(c,e,Zh,c),f)?df(f)?Ue(f,0):Ue.before(f):df(c)?Ue(c,0):Ue.after(c);i=c||g.getNode()}if((qd(e)&&g.isAtEnd()||Yv(e)&&g.isAtStart())&&(i=Jv(i,e,jt,a,!0),Zh(i,a)))return mS(e,i);c=Jv(i,e,Zh,a);var D=mi(bn($E(b,a),IE));return D&&(!c||!D.contains(c))?(qd(e)?g=Ue.after(D):g=Ue.before(D),g):c?mS(e,c):null},jo=function(e){return{next:function(n){return yg(wu.Forwards,n,e)},prev:function(n){return yg(wu.Backwards,n,e)}}},mb=function(e,n,a){var i=e?Ue.before(a):Ue.after(a);return Rs(e,n,i)},gb=function(e){return Va(e)?Ue.before(e):Ue.after(e)},Qy=function(e){return Ue.isTextPosition(e)?e.offset()===0:tf(e.getNode())},gS=function(e){if(Ue.isTextPosition(e)){var n=e.container();return e.offset()===n.data.length}else return tf(e.getNode(!0))},ew=function(e,n){return!Ue.isTextPosition(e)&&!Ue.isTextPosition(n)&&e.getNode()===n.getNode(!0)},Kd=function(e){return!Ue.isTextPosition(e)&&Va(e.getNode())},hb=function(e,n,a){return e?!ew(n,a)&&!Kd(n)&&gS(n)&&Qy(a):!ew(a,n)&&Qy(n)&&gS(a)},Rs=function(e,n,a){var i=jo(n);return Q.from(e?i.next(a):i.prev(a))},Nl=function(e,n,a){return Rs(e,n,a).bind(function(i){return Pl(a,i,n)&&hb(e,a,i)?Rs(e,n,i):Q.some(i)})},pb=function(e,n,a,i){return Nl(e,n,a).bind(function(c){return i(c)?pb(e,n,c,i):Q.some(c)})},ov=function(e,n){var a=e?n.firstChild:n.lastChild;return un(a)?Q.some(Ue(a,e?0:a.data.length)):a?tf(a)?Q.some(e?Ue.before(a):gb(a)):mb(e,n,a):Q.none()},ul=Mt(Rs,!0),Il=Mt(Rs,!1),qu=Mt(ov,!0),Lc=Mt(ov,!1),wg="_mce_caret",mf=function(e){return Qn(e)&&e.id===wg},Xd=function(e,n){for(;n&&n!==e;){if(n.id===wg)return n;n=n.parentNode}return null},hS=function(e){return Tt(e.start)},pS=function(e){return fr(e,"rng")},FE=function(e){return fr(e,"id")},LE=function(e){return fr(e,"name")},bS=function(e){return je.isArray(e.start)},yS=function(e,n){return Qn(n)&&e.isBlock(n)&&!n.innerHTML&&!St.ie&&(n.innerHTML='<br data-mce-bogus="1" />'),n},wS=function(e,n){var a,i=e.createRng();return a=eg(e.getRoot(),n.start),i.setStart(a.container(),a.offset()),a=eg(e.getRoot(),n.end),i.setEnd(a.container(),a.offset()),i},HE=function(e,n){var a=e.ownerDocument.createTextNode(Se);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},CS=function(e){return e.hasChildNodes()===!1},VE=function(e,n){return Lc(e).fold(wt,function(a){return n.setStart(a.container(),a.offset()),n.setEnd(a.container(),a.offset()),!0})},SS=function(e,n,a){return CS(n)&&Xd(e,n)?(HE(n,a),!0):!1},xS=function(e,n,a,i){var c=a[n?"start":"end"],f,g,b,C,D=e.getRoot();if(c){for(b=c[0],g=D,f=c.length-1;f>=1;f--){if(C=g.childNodes,SS(D,g,i))return!0;if(c[f]>C.length-1)return SS(D,g,i)?!0:VE(g,i);g=C[c[f]]}g.nodeType===3&&(b=Math.min(c[0],g.nodeValue.length)),g.nodeType===1&&(b=Math.min(c[0],g.childNodes.length)),n?i.setStart(g,b):i.setEnd(g,b)}return!0},tw=function(e){return un(e)&&e.data.length>0},TS=function(e,n,a){var i=e.get(a.id+"_"+n),c,f,g,b,C=a.keep,D,I;if(i){if(c=i.parentNode,n==="start"?(C?i.hasChildNodes()?(c=i.firstChild,f=1):tw(i.nextSibling)?(c=i.nextSibling,f=0):tw(i.previousSibling)?(c=i.previousSibling,f=i.previousSibling.data.length):(c=i.parentNode,f=e.nodeIndex(i)+1):f=e.nodeIndex(i),D=c,I=f):(C?i.hasChildNodes()?(c=i.firstChild,f=1):tw(i.previousSibling)?(c=i.previousSibling,f=i.previousSibling.data.length):(c=i.parentNode,f=e.nodeIndex(i)):f=e.nodeIndex(i),D=c,I=f),!C){for(b=i.previousSibling,g=i.nextSibling,je.each(je.grep(i.childNodes),function(z){un(z)&&(z.nodeValue=z.nodeValue.replace(/\uFEFF/g,""))});i=e.get(a.id+"_"+n);)e.remove(i,!0);b&&g&&b.nodeType===g.nodeType&&un(b)&&!St.opera&&(f=b.nodeValue.length,b.appendData(g.nodeValue),e.remove(g),D=b,I=f)}return Q.some(Ue(D,I))}else return Q.none()},UE=function(e,n){var a=e.createRng();return xS(e,!0,n,a)&&xS(e,!1,n,a)?Q.some(a):Q.none()},Kr=function(e,n){var a=TS(e,"start",n),i=TS(e,"end",n);return Vu(a,i.or(a),function(c,f){var g=e.createRng();return g.setStart(yS(e,c.container()),c.offset()),g.setEnd(yS(e,f.container()),f.offset()),g})},Yd=function(e,n){return Q.from(e.select(n.name)[n.index]).map(function(a){var i=e.createRng();return i.selectNode(a),i})},Cg=function(e,n){var a=e.dom;if(n){if(bS(n))return UE(a,n);if(hS(n))return Q.some(wS(a,n));if(FE(n))return Kr(a,n);if(LE(n))return Yd(a,n);if(pS(n))return Q.some(n.rng)}return Q.none()},nw=function(e,n,a){return cE(e,n,a)},WE=function(e,n){Cg(e,n).each(function(a){e.setRng(a)})},Ms=function(e){return Qn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"},jE=function(e){return function(n){return e===n}},Jd=jE(Ks),Zv=function(e){return e!==""&&` \f
\r	\v`.indexOf(e)!==-1},bb=function(e){return!Zv(e)&&!Jd(e)},yb=function(e){return!!e.nodeType},GE=function(e){return e&&/^(IMG)$/.test(e.nodeName)},kS=function(e,n,a){var i=a.startOffset,c=a.startContainer;if(!(c===a.endContainer&&GE(c.childNodes[i]))&&Qn(c)){var f=c.childNodes,g=void 0;i<f.length?(c=f[i],g=new Ta(c,e.getParent(c,e.isBlock))):(c=f[f.length-1],g=new Ta(c,e.getParent(c,e.isBlock)),g.next(!0));for(var b=g.current();b;b=g.next())if(un(b)&&!Cb(b)){a.setStart(b,0),n.setRng(a);return}}},wb=function(e,n,a){if(e){var i=n?"nextSibling":"previousSibling";for(e=a?e:e[i];e;e=e[i])if(Qn(e)||!Cb(e))return e}},rw=function(e,n){return yb(n)&&(n=n.nodeName),!!e.schema.getTextBlockElements()[n.toLowerCase()]},Sg=function(e,n,a){return e.schema.isValidChild(n,a)},Cb=function(e,n){if(n===void 0&&(n=!1),Kt(e)&&un(e)){var a=n?e.data.replace(/ /g," "):e.data;return tl(a)}else return!1},qE=function(e){return Kt(e)&&un(e)&&e.length===0},gf=function(e,n){return ht(e)?e=e(n):Kt(n)&&(e=e.replace(/%(\w+)/g,function(a,i){return n[i]||a})),e},aw=function(e,n){return e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()},ow=function(e,n,a){return(a==="color"||a==="backgroundColor")&&(n=e.toHex(n)),a==="fontWeight"&&n===700&&(n="bold"),a==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+n},xg=function(e,n,a){return ow(e,e.getStyle(n,a),a)},iw=function(e,n){var a;return e.getParent(n,function(i){return a=e.getStyle(i,"text-decoration"),a&&a!=="none"}),a},Qh=function(e,n,a){return e.getParents(n,a,e.getRoot())},ES=function(e,n){var a=function(i){var c=function(f){return f.length>1&&f.charAt(0)==="%"};return Dn(["styles","attributes"],function(f){return Ir(i,f).exists(function(g){var b=qt(g)?g:ji(g);return Dn(b,c)})})};return Dn(e.formatter.get(n),a)},KE=function(e,n,a){var i=["inline","block","selector","attributes","styles","classes"],c=function(f){return wa(f,function(g,b){return Dn(i,function(C){return C===b})})};return Dn(e.formatter.get(n),function(f){var g=c(f);return Dn(e.formatter.get(a),function(b){var C=c(b);return vi(g,C)})})},hf=function(e){return So(e,"block")},Qs=function(e){return So(e,"selector")},Cu=function(e){return So(e,"inline")},XE=function(e){return Qs(e)&&Cu(e)&&wd(Ir(e,"mixed"),!0)},uw=function(e){return Qs(e)&&e.expand!==!1&&!Cu(e)},Tg=Ms,sw=Qh,ep=Cb,cw=rw,YE=function(e){return Va(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Ut=function(e,n){for(var a=n;a;){if(Qn(a)&&e.getContentEditable(a))return e.getContentEditable(a)==="false"?a:n;a=a.parentNode}return n},$i=function(e,n,a,i){for(var c=n.data,f=a;e?f>=0:f<c.length;e?f--:f++)if(i(c.charAt(f)))return e?f+1:f;return-1},kg=function(e,n,a){return $i(e,n,a,function(i){return Jd(i)||Zv(i)})},tu=function(e,n,a){return $i(e,n,a,bb)},Hc=function(e,n,a,i,c,f){var g,b=e.getParent(a,e.isBlock)||n,C=function(I,z,F){var q=Sy(e),X=c?q.backwards:q.forwards;return Q.from(X(I,z,function(J,ee){return Tg(J.parentNode)?-1:(g=J,F(c,J,ee))},b))},D=C(a,i,kg);return D.bind(function(I){return f?C(I.container,I.offset+(c?-1:0),tu):Q.some(I)}).orThunk(function(){return g?Q.some({container:g,offset:c?0:g.length}):Q.none()})},lw=function(e,n,a,i,c){un(i)&&lu(i.data)&&i[c]&&(i=i[c]);for(var f=sw(e,i),g=0;g<f.length;g++)for(var b=0;b<n.length;b++){var C=n[b];if(!(Kt(C.collapsed)&&C.collapsed!==a.collapsed)&&Qs(C)&&e.is(f[g],C.selector))return f[g]}return i},tp=function(e,n,a,i){var c=a,f=e.dom,g=f.getRoot(),b=n[0];if(hf(b)&&(c=b.wrapper?null:f.getParent(a,b.block,g)),!c){var C=f.getParent(a,"LI,TD,TH");c=f.getParent(un(a)?a.parentNode:a,function(D){return D!==g&&cw(e,D)},C)}if(c&&hf(b)&&b.wrapper&&(c=sw(f,c,"ul,ol").reverse()[0]||c),!c)for(c=a;c[i]&&!f.isBlock(c[i])&&(c=c[i],!aw(c,"br")););return c||a},Sb=function(e,n,a,i){var c=a.parentNode;return Kt(a[i])?!1:c===n||Vt(c)||e.isBlock(c)?!0:Sb(e,n,c,i)},xb=function(e,n,a,i,c){var f=a,g=c?"previousSibling":"nextSibling",b=e.getRoot();if(un(a)&&!ep(a)&&(c?i>0:i<a.data.length))return a;for(;;){if(!n[0].block_expand&&e.isBlock(f))return f;for(var C=f[g];C;C=C[g]){var D=un(C)&&!Sb(e,b,C,g);if(!Tg(C)&&!YE(C)&&!ep(C,D))return f}if(f===b||f.parentNode===b){a=f;break}f=f.parentNode}return a},Tb=function(e){return Tg(e.parentNode)||Tg(e)},Qv=function(e,n,a,i){i===void 0&&(i=!1);var c=n.startContainer,f=n.startOffset,g=n.endContainer,b=n.endOffset,C=e.dom,D=a[0];if(Qn(c)&&c.hasChildNodes()&&(c=yo(c,f),un(c)&&(f=0)),Qn(g)&&g.hasChildNodes()&&(g=yo(g,n.collapsed?b:b-1),un(g)&&(b=g.nodeValue.length)),c=Ut(C,c),g=Ut(C,g),Tb(c)&&(c=Tg(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,un(c)&&(f=n.collapsed?c.length:0)),Tb(g)&&(g=Tg(g)?g:g.parentNode,n.collapsed?g=g.nextSibling||g:g=g.previousSibling||g,un(g)&&(b=n.collapsed?0:g.length)),n.collapsed){var I=Hc(C,e.getBody(),c,f,!0,i);I.each(function(F){var q=F.container,X=F.offset;c=q,f=X});var z=Hc(C,e.getBody(),g,b,!1,i);z.each(function(F){var q=F.container,X=F.offset;g=q,b=X})}return(Cu(D)||D.block_expand)&&((!Cu(D)||!un(c)||f===0)&&(c=xb(C,a,c,f,!0)),(!Cu(D)||!un(g)||b===g.nodeValue.length)&&(g=xb(C,a,g,b,!1))),uw(D)&&(c=lw(C,a,n,c,"previousSibling"),g=lw(C,a,n,g,"nextSibling")),(hf(D)||Qs(D))&&(c=tp(e,a,c,"previousSibling"),g=tp(e,a,g,"nextSibling"),hf(D)&&(C.isBlock(c)||(c=xb(C,a,c,f,!0)),C.isBlock(g)||(g=xb(C,a,g,b,!1)))),Qn(c)&&(f=C.nodeIndex(c),c=c.parentNode),Qn(g)&&(b=C.nodeIndex(g)+1,g=g.parentNode),{startContainer:c,startOffset:f,endContainer:g,endOffset:b}},np=function(e,n,a){var i=n.startOffset,c=yo(n.startContainer,i),f=n.endOffset,g=yo(n.endContainer,f-1),b=function(J){var ee=J[0];un(ee)&&ee===c&&i>=ee.data.length&&J.splice(0,1);var ce=J[J.length-1];return f===0&&J.length>0&&ce===g&&un(ce)&&J.splice(J.length-1,1),J},C=function(J,ee,ce){for(var se=[];J&&J!==ce;J=J[ee])se.push(J);return se},D=function(J,ee){return e.getParent(J,function(ce){return ce.parentNode===ee},ee)},I=function(J,ee,ce){for(var se=ce?"nextSibling":"previousSibling",Ae=J,Ee=Ae.parentNode;Ae&&Ae!==ee;Ae=Ee){Ee=Ae.parentNode;var me=C(Ae===J?Ae:Ae[se],se);me.length&&(ce||me.reverse(),a(b(me)))}};if(c===g)return a(b([c]));var z=e.findCommonAncestor(c,g);if(e.isChildOf(c,g))return I(c,z,!0);if(e.isChildOf(g,c))return I(g,z);var F=D(c,z)||c,q=D(g,z)||g;I(c,F,!0);var X=C(F===c?F:F.nextSibling,"nextSibling",q===g?q.nextSibling:q);X.length&&a(b(X)),I(g,q)},fw=function(e){var n=[];if(e)for(var a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));return n},vw=function(e){return fi(e,function(n){var a=Ld(n);return a?[T.fromDom(a)]:[]})},dw=function(e){return fw(e).length>1},JE=function(e){return bn(vw(e),Tl)},OS=function(e){return bu(e,"td[data-mce-selected],th[data-mce-selected]")},iv=function(e,n){var a=OS(n);return a.length>0?a:JE(e)},pf=function(e){return iv(fw(e.selection.getSel()),T.fromDom(e.getBody()))},Zd=function(e,n){return Cd(e,"table",n)},Eg=function(e){var n=e.startContainer,a=e.startOffset;return un(n)?a===0?Q.some(T.fromDom(n)):Q.none():Q.from(n.childNodes[a]).map(T.fromDom)},mw=function(e){var n=e.endContainer,a=e.endOffset;return un(n)?a===n.data.length?Q.some(T.fromDom(n)):Q.none():Q.from(n.childNodes[a-1]).map(T.fromDom)},kb=function(e){return pi(e).fold(Y([e]),function(n){return[e].concat(kb(n))})},bf=function(e){return js(e).fold(Y([e]),function(n){return ca(n)==="br"?If(n).map(function(a){return[e].concat(bf(a))}).getOr([]):[e].concat(bf(n))})},sl=function(e,n){return Vu(Eg(n),mw(n),function(a,i){var c=ya(kb(e),Mt(Yn,a)),f=ya(bf(e),Mt(Yn,i));return c.isSome()&&f.isSome()}).getOr(!1)},ed=function(e,n,a,i){var c=a,f=new Ta(a,c),g=wa(e.schema.getMoveCaretBeforeOnEnterElements(),function(b,C){return!Nt(["td","th","table"],C.toLowerCase())});do{if(un(a)&&je.trim(a.nodeValue).length!==0){i?n.setStart(a,0):n.setEnd(a,a.nodeValue.length);return}if(g[a.nodeName]){i?n.setStartBefore(a):a.nodeName==="BR"?n.setEndBefore(a):n.setEndAfter(a);return}}while(a=i?f.next():f.prev());c.nodeName==="BODY"&&(i?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},td=function(e){var n=e.selection.getSel();return n&&n.rangeCount>0},Qd=function(e,n){var a=pf(e);a.length>0?pt(a,function(i){var c=i.dom,f=e.dom.createRng();f.setStartBefore(c),f.setEndAfter(c),n(f,!0)}):n(e.selection.getRng(),!1)},Og=function(e,n,a){var i=GC(e,n);a(i),e.moveToBookmark(i)},gw=function(e,n){var a=function(f){if(!e(f))throw new Error("Can only get "+n+" value of a "+n+" node");return i(f).getOr("")},i=function(f){return e(f)?Q.from(f.dom.nodeValue):Q.none()},c=function(f,g){if(!e(f))throw new Error("Can only set raw "+n+" value of a "+n+" node");f.dom.nodeValue=g};return{get:a,getOption:i,set:c}},hw=gw(Eo,"text"),pw=function(e){return hw.get(e)},Eb=function(e){return Eo(e)&&pw(e)===Se},Su=function(e,n,a,i){return Po(n).fold(function(){return"skipping"},function(c){return i==="br"||Eb(n)?"valid":nv(n)?"existing":mf(n.dom)?"caret":!Sg(e,a,i)||!Sg(e,ca(c),a)?"invalid-child":"valid"})},kc=function(e,n){var a=Qv(e,n,[{inline:"span"}]);n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset),e.selection.setRng(n)},Vc=function(e,n,a,i){var c=n.uid,f=c===void 0?LC("mce-annotation"):c,g=Ju(n,["uid"]),b=T.fromTag("span",e);zd(b,Zs()),O(b,""+Ni(),f),O(b,""+Ih(),a);var C=i(f,g),D=C.attributes,I=D===void 0?{}:D,z=C.classes,F=z===void 0?[]:z;return $(b,I),tE(b,F),b},yf=function(e,n,a,i,c){var f=[],g=Vc(e.getDoc(),c,a,i),b=Wv(),C=function(){b.clear()},D=function(){return b.get().getOrThunk(function(){var q=wi(g);return f.push(q),b.set(q),q})},I=function(q){pt(q,z)},z=function(q){var X=Su(e,q,"span",ca(q));switch(X){case"invalid-child":{C();var J=Hu(q);I(J),C();break}case"valid":{var ee=D();yd(q,ee);break}}},F=function(q){var X=$n(q,T.fromDom);I(X)};return np(e.dom,n,function(q){C(),F(q)}),f},Ag=function(e,n,a,i){e.undoManager.transact(function(){var c=e.selection,f=c.getRng(),g=pf(e).length>0;if(f.collapsed&&!g&&kc(e,f),c.getRng().collapsed&&!g){var b=Vc(e.getDoc(),i,n,a.decorate);ms(b,Ks),c.getRng().insertNode(b.dom),c.select(b.dom)}else Og(c,!1,function(){Qd(e,function(C){yf(e,C,n,a.decorate,i)})})})},Ob=function(e){var n=$h();Cy(e,n);var a=FC(e);return{register:function(i,c){n.register(i,c)},annotate:function(i,c){n.lookup(i).each(function(f){Ag(e,i,f,c)})},annotationChanged:function(i,c){a.addListener(i,c)},remove:function(i){z1(e,Q.some(i)).each(function(c){var f=c.elements;pt(f,Lf)})},getAll:function(i){var c=wy(e,i);return Or(c,function(f){return $n(f,function(g){return g.dom})})}}},nd=function(e){return{getBookmark:Mt(nw,e),moveToBookmark:Mt(WE,e)}};nd.isBookmarkNode=Ms;var em=function(e,n){for(;n&&n!==e;){if(Jc(n)||lo(n))return n;n=n.parentNode}return null},tm=function(e,n,a){if(a.collapsed)return!1;if(St.browser.isIE()&&a.startOffset===a.endOffset-1&&a.startContainer===a.endContainer){var i=a.startContainer.childNodes[a.startOffset];if(Qn(i))return Dn(i.getClientRects(),function(c){return HC(c,e,n)})}return Dn(a.getClientRects(),function(c){return HC(c,e,n)})},ZE=function(e,n){return e.fire("PreProcess",n)},bw=function(e,n){return e.fire("PostProcess",n)},AS=function(e){return e.fire("remove")},DS=function(e){return e.fire("detach")},yw=function(e,n){return e.fire("SwitchMode",{mode:n})},ww=function(e,n,a,i,c){e.fire("ObjectResizeStart",{target:n,width:a,height:i,origin:c})},Fa=function(e,n,a,i,c){e.fire("ObjectResized",{target:n,width:a,height:i,origin:c})},wf=function(e){return e.fire("PreInit")},_S=function(e){return e.fire("PostRender")},RS=function(e){return e.fire("Init")},MS=function(e,n){return e.fire("PlaceholderToggle",{state:n})},Ab=function(e,n,a){return e.fire(n,a)},Cw=function(e,n,a,i){return e.fire("FormatApply",{format:n,node:a,vars:i})},rp=function(e,n,a,i){return e.fire("FormatRemove",{format:n,node:a,vars:i})},Jn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||Jn.metaKeyPressed(e)},metaKeyPressed:function(e){return St.mac?e.metaKey:e.ctrlKey&&!e.altKey}},QE=lo,Sw=function(e,n){var a="data-mce-selected",i=n.dom,c=je.each,f,g,b,C,D,I,z,F,q,X,J,ee,ce,se,Ae,Ee=n.getDoc(),me=document,_e=Math.abs,et=Math.round,bt=n.getBody(),Xn,an,st={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},qn=function(Me){return Me&&(Me.nodeName==="IMG"||n.dom.is(Me,"figure.image"))},xt=function(Me){return Ts(Me)||i.hasClass(Me,"mce-preview-object")},tn=function(Me,Ct){if(Me.type==="longpress"||Me.type.indexOf("touch")===0){var mt=Me.touches[0];return qn(Me.target)&&!tm(mt.clientX,mt.clientY,Ct)}else return qn(Me.target)&&!tm(Me.clientX,Me.clientY,Ct)},Et=function(Me){var Ct=Me.target;tn(Me,n.selection.getRng())&&!Me.isDefaultPrevented()&&n.selection.select(Ct)},Pt=function(Me){return i.is(Me,"figure.image")?[Me.querySelector("img")]:i.hasClass(Me,"mce-preview-object")&&Kt(Me.firstElementChild)?[Me,Me.firstElementChild]:[Me]},vn=function(Me){var Ct=QC(n);return!Ct||Me.getAttribute("data-mce-resize")==="false"||Me===n.getBody()?!1:i.hasClass(Me,"mce-preview-object")?Rt(T.fromDom(Me.firstElementChild),Ct):Rt(T.fromDom(Me),Ct)},ft=function(Me){return xt(Me)?i.create("img",{src:St.transparentSrc}):Me.cloneNode(!0)},on=function(Me,Ct,mt){if(Kt(mt)){var zn=Pt(Me);pt(zn,function(Un){Un.style[Ct]||!n.schema.isValid(Un.nodeName.toLowerCase(),Ct)?i.setStyle(Un,Ct,mt):i.setAttrib(Un,Ct,""+mt)})}},Hr=function(Me,Ct,mt){on(Me,"width",Ct),on(Me,"height",mt)},pa=function(Me){var Ct,mt,zn,Un,Ya;Ct=Me.screenX-I,mt=Me.screenY-z,se=Ct*C[2]+X,Ae=mt*C[3]+J,se=se<5?5:se,Ae=Ae<5?5:Ae,(qn(f)||xt(f))&&eS(n)!==!1?zn=!Jn.modifierPressed(Me):zn=Jn.modifierPressed(Me),zn&&(_e(Ct)>_e(mt)?(Ae=et(se*ee),se=et(Ae/ee)):(se=et(Ae/ee),Ae=et(se*ee))),Hr(g,se,Ae),Un=C.startPos.x+Ct,Ya=C.startPos.y+mt,Un=Un>0?Un:0,Ya=Ya>0?Ya:0,i.setStyles(b,{left:Un,top:Ya,display:"block"}),b.innerHTML=se+" &times; "+Ae,C[2]<0&&g.clientWidth<=se&&i.setStyle(g,"left",F+(X-se)),C[3]<0&&g.clientHeight<=Ae&&i.setStyle(g,"top",q+(J-Ae)),Ct=bt.scrollWidth-Xn,mt=bt.scrollHeight-an,Ct+mt!==0&&i.setStyles(b,{left:Un-Ct,top:Ya-mt}),ce||(ww(n,f,X,J,"corner-"+C.name),ce=!0)},ma=function(){var Me=ce;ce=!1,Me&&(on(f,"width",se),on(f,"height",Ae)),i.unbind(Ee,"mousemove",pa),i.unbind(Ee,"mouseup",ma),me!==Ee&&(i.unbind(me,"mousemove",pa),i.unbind(me,"mouseup",ma)),i.remove(g),i.remove(b),i.remove(D),Tu(f),Me&&(Fa(n,f,se,Ae,"corner-"+C.name),i.setAttrib(f,"style",i.getAttrib(f,"style"))),n.nodeChanged()},Tu=function(Me){vt();var Ct=i.getPos(Me,bt),mt=Ct.x,zn=Ct.y,Un=Me.getBoundingClientRect(),Ya=Un.width||Un.right-Un.left,Wi=Un.height||Un.bottom-Un.top;f!==Me&&(zo(),f=Me,se=Ae=0);var zi=n.fire("ObjectSelected",{target:Me}),bm=i.getAttrib(f,a,"1");vn(Me)&&!zi.isDefaultPrevented()?c(st,function(Is,ys){var iu,gl=function($s){var Pf=Pt(f)[0];I=$s.screenX,z=$s.screenY,X=Pf.clientWidth,J=Pf.clientHeight,ee=J/X,C=Is,C.name=ys,C.startPos={x:Ya*Is[0]+mt,y:Wi*Is[1]+zn},Xn=bt.scrollWidth,an=bt.scrollHeight,D=i.add(bt,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),i.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=ft(f),i.addClass(g,"mce-clonedresizable"),i.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",i.setStyles(g,{left:mt,top:zn,margin:0}),Hr(g,Ya,Wi),g.removeAttribute(a),bt.appendChild(g),i.bind(Ee,"mousemove",pa),i.bind(Ee,"mouseup",ma),me!==Ee&&(i.bind(me,"mousemove",pa),i.bind(me,"mouseup",ma)),b=i.add(bt,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},X+" &times; "+J)};iu=i.get("mceResizeHandle"+ys),iu&&i.remove(iu),iu=i.add(bt,"div",{id:"mceResizeHandle"+ys,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ys+"-resize; margin:0; padding:0"}),St.ie===11&&(iu.contentEditable=!1),i.bind(iu,"mousedown",function($s){$s.stopImmediatePropagation(),$s.preventDefault(),gl($s)}),Is.elm=iu,i.setStyles(iu,{left:Ya*Is[0]+mt-iu.offsetWidth/2,top:Wi*Is[1]+zn-iu.offsetHeight/2})}):zo(),i.getAttrib(f,a)||f.setAttribute(a,bm)},zo=function(){vt(),f&&f.removeAttribute(a),Zt(st,function(Me,Ct){var mt=i.get("mceResizeHandle"+Ct);mt&&(i.unbind(mt),i.remove(mt))})},Ns=function(Me){var Ct,mt,zn=function(Un,Ya){if(Un)do if(Un===Ya)return!0;while(Un=Un.parentNode)};if(!(ce||n.removed)){if(c(i.select("img[data-mce-selected],hr[data-mce-selected]"),function(Un){Un.removeAttribute(a)}),mt=Me.type==="mousedown"?Me.target:e.getNode(),mt=i.$(mt).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],zn(mt,bt)&&(Ot(),Ct=e.getStart(!0),zn(Ct,mt)&&zn(e.getEnd(!0),mt))){Tu(mt);return}zo()}},ac=function(Me){return QE(em(n.getBody(),Me))},vt=function(){Zt(st,function(Me){Me.elm&&(i.unbind(Me.elm),delete Me.elm)})},Ot=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};n.on("init",function(){if(Ot(),St.browser.isIE()||St.browser.isEdge()){n.on("mousedown click",function(mt){var zn=mt.target,Un=zn.nodeName;!ce&&/^(TABLE|IMG|HR)$/.test(Un)&&!ac(zn)&&(mt.button!==2&&n.selection.select(zn,Un==="TABLE"),mt.type==="mousedown"&&n.nodeChanged())});var Me=function(mt){var zn=function(Un){Ru.setEditorTimeout(n,function(){return n.selection.select(Un)})};if(ac(mt.target)||Ts(mt.target)){mt.preventDefault(),zn(mt.target);return}/^(TABLE|IMG|HR)$/.test(mt.target.nodeName)&&(mt.preventDefault(),mt.target.tagName==="IMG"&&zn(mt.target))};i.bind(bt,"mscontrolselect",Me),n.on("remove",function(){return i.unbind(bt,"mscontrolselect",Me)})}var Ct=Ru.throttle(function(mt){n.composing||Ns(mt)});n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ct),n.on("keyup compositionend",function(mt){f&&f.nodeName==="TABLE"&&Ct(mt)}),n.on("hide blur",zo),n.on("contextmenu longpress",Et,!0)}),n.on("remove",vt);var Rn=function(){f=g=D=null};return{isResizable:vn,showResizeRect:Tu,hideResizeRect:zo,updateResizeRect:Ns,destroy:Rn}},BS=function(e){return Jc(e)||lo(e)},xw=function(e,n,a){for(;e&&e!==n;){if(a(e))return e;e=e.parentNode}return null},eO=function(e,n,a){var i,c=a.elementFromPoint(e,n),f=a.body.createTextRange();if((!c||c.tagName==="HTML")&&(c=a.body),f.moveToElementText(c),i=je.toArray(f.getClientRects()),i=i.sort(function(g,b){return g=Math.abs(Math.max(g.top-n,g.bottom-n)),b=Math.abs(Math.max(b.top-n,b.bottom-n)),g-b}),i.length>0){n=(i[0].bottom+i[0].top)/2;try{return f.moveToPoint(e,n),f.collapse(!0),f}catch{}}return null},PS=function(e,n){var a=e&&e.parentElement?e.parentElement():null;return lo(xw(a,n,BS))?null:e},Tw=function(e,n,a){var i,c,f=a;if(f.caretPositionFromPoint)c=f.caretPositionFromPoint(e,n),c&&(i=a.createRange(),i.setStart(c.offsetNode,c.offset),i.collapse(!0));else if(f.caretRangeFromPoint)i=f.caretRangeFromPoint(e,n);else if(f.body.createTextRange){i=f.body.createTextRange();try{i.moveToPoint(e,n),i.collapse(!0)}catch{i=eO(e,n,a)}return PS(i,a.body)}return i},kw=function(e,n){return e&&n&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset},tO=function(e,n,a){for(;e&&e!==n;){if(a(e))return e;e=e.parentNode}return null},Ec=function(e,n,a){return tO(e,n,a)!==null},hs=function(e,n,a){return Ec(e,n,function(i){return i.nodeName===a})},Cf=function(e){return e&&e.nodeName==="TABLE"},nO=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},rO=function(e,n){return Os(e)&&Ec(e,n,mf)===!1},Ew=function(e,n,a){for(var i=new Ta(n,e.getParent(n.parentNode,e.isBlock)||e.getRoot());n=i[a?"prev":"next"]();)if(Va(n))return!0},Fr=function(e,n){return e.previousSibling&&e.previousSibling.nodeName===n},aO=function(e,n){for(;n&&n!==e;){if(lo(n))return!0;n=n.parentNode}return!1},Db=function(e,n,a,i,c){var f,g=e.getRoot(),b,C=e.schema.getNonEmptyElements(),D=e.getParent(c.parentNode,e.isBlock)||g;if(i&&Va(c)&&n&&e.isEmpty(D))return Q.some(Ue(c.parentNode,e.nodeIndex(c)));for(var I=new Ta(c,D);b=I[i?"prev":"next"]();){if(e.getContentEditableParent(b)==="false"||rO(b,g))return Q.none();if(un(b)&&b.nodeValue.length>0)return hs(b,g,"A")===!1?Q.some(Ue(b,i?b.nodeValue.length:0)):Q.none();if(e.isBlock(b)||C[b.nodeName.toLowerCase()])return Q.none();f=b}return a&&f?Q.some(Ue(f,0)):Q.none()},_b=function(e,n,a,i){var c,f,g=e.getRoot(),b,C,D=!1;c=i[(a?"start":"end")+"Container"],f=i[(a?"start":"end")+"Offset"];var I=Qn(c)&&f===c.childNodes.length,z=e.schema.getNonEmptyElements();if(C=a,Os(c))return Q.none();if(Qn(c)&&f>c.childNodes.length-1&&(C=!1),hh(c)&&(c=g,f=0),c===g){if(C&&(b=c.childNodes[f>0?f-1:0],b&&(Os(b)||z[b.nodeName]||Cf(b))))return Q.none();if(c.hasChildNodes()){if(f=Math.min(!C&&f>0?f-1:f,c.childNodes.length-1),c=c.childNodes[f],f=un(c)&&I?c.data.length:0,!n&&c===g.lastChild&&Cf(c)||aO(g,c)||Os(c))return Q.none();if(c.hasChildNodes()&&Cf(c)===!1){b=c;var F=new Ta(c,g);do{if(lo(b)||Os(b)){D=!1;break}if(un(b)&&b.nodeValue.length>0){f=C?0:b.nodeValue.length,c=b,D=!0;break}if(z[b.nodeName.toLowerCase()]&&!nO(b)){f=e.nodeIndex(b),c=b.parentNode,C||f++,D=!0;break}}while(b=C?F.next():F.prev())}}}return n&&(un(c)&&f===0&&Db(e,I,n,!0,c).each(function(q){c=q.container(),f=q.offset(),D=!0}),Qn(c)&&(b=c.childNodes[f],b||(b=c.childNodes[f-1]),b&&Va(b)&&!Fr(b,"A")&&!Ew(e,b,!1)&&!Ew(e,b,!0)&&Db(e,I,n,!0,b).each(function(q){c=q.container(),f=q.offset(),D=!0}))),C&&!n&&un(c)&&f===c.nodeValue.length&&Db(e,I,n,!1,c).each(function(q){c=q.container(),f=q.offset(),D=!0}),D?Q.some(Ue(c,f)):Q.none()},Rb=function(e,n){var a=n.collapsed,i=n.cloneRange(),c=Ue.fromRangeStart(n);return _b(e,a,!0,i).each(function(f){(!a||!Ue.isAbove(c,f))&&i.setStart(f.container(),f.offset())}),a||_b(e,a,!1,i).each(function(f){i.setEnd(f.container(),f.offset())}),a&&i.collapse(!0),kw(n,i)?Q.none():Q.some(i)},ap=function(e,n){return e.splitText(n)},uv=function(e){var n=e.startContainer,a=e.startOffset,i=e.endContainer,c=e.endOffset;return n===i&&un(n)?a>0&&a<n.nodeValue.length&&(i=ap(n,a),n=i.previousSibling,c>a?(c=c-a,n=i=ap(i,c).previousSibling,c=i.nodeValue.length,a=0):c=0):(un(n)&&a>0&&a<n.nodeValue.length&&(n=ap(n,a),a=0),un(i)&&c>0&&c<i.nodeValue.length&&(i=ap(i,c).previousSibling,c=i.nodeValue.length)),{startContainer:n,startOffset:a,endContainer:i,endOffset:c}},op=function(e){var n=function(c,f){return np(e,c,f)},a=uv,i=function(c){return Rb(e,c).fold(wt,function(f){return c.setStart(f.startContainer,f.startOffset),c.setEnd(f.endContainer,f.endOffset),!0})};return{walk:n,split:a,normalize:i}};op.compareRanges=kw,op.getCaretRangeFromPoint=Tw,op.getSelectedNode=Ld,op.getNode=yo;var oO=function(e,n){var a=function(b,C){if(!$t(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);var D=b.dom;bo(D)&&(D.style[e]=C+"px")},i=function(b){var C=n(b);if(C<=0||C===null){var D=Cr(b,e);return parseFloat(D)||0}return C},c=i,f=function(b,C){return ta(C,function(D,I){var z=Cr(b,I),F=z===void 0?0:parseInt(z,10);return isNaN(F)?D:D+F},0)},g=function(b,C,D){var I=f(b,D),z=C>I?C-I:0;return z};return{set:a,get:i,getOuter:c,aggregate:f,max:g}},NS=oO("height",function(e){var n=e.dom;return Hf(e)?n.getBoundingClientRect().height:n.offsetHeight}),Ow=function(e){return NS.get(e)},rd=function(e,n){var a=e.view(n);return a.fold(Y([]),function(i){var c=e.owner(i),f=rd(e,c);return[i].concat(f)})},Mb=function(e,n){var a=n.owner(e);return rd(n,a)},IS=function(e){var n,a=e.dom===document?Q.none():Q.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement);return a.map(T.fromDom)},iO=function(e){return Zn(e)},uO=Object.freeze({__proto__:null,view:IS,owner:iO}),sO=function(e){var n=T.fromDom(document),a=xm(n),i=Mb(e,uO),c=xs(e),f=Yr(i,function(g,b){var C=xs(b);return{left:g.left+C.left,top:g.top+C.top}},{left:0,top:0});return wl(f.left+c.left+a.left,f.top+c.top+a.top)},nm=function(e){return ca(e)==="textarea"},Aw=function(e,n){var a=e.fire("ScrollIntoView",n);return a.isDefaultPrevented()},Ln=function(e,n){e.fire("AfterScrollIntoView",n)},$S=function(e,n){var a=Hu(e);if(a.length===0||nm(e))return{element:e,offset:n};if(n<a.length&&!nm(a[n]))return{element:a[n],offset:0};var i=a[a.length-1];return nm(i)?{element:e,offset:n}:ca(i)==="img"?{element:i,offset:1}:Eo(i)?{element:i,offset:pw(i).length}:{element:i,offset:Hu(i).length}},zS=function(e,n){var a=po(e),i=Ow(e);return{element:e,bottom:a.top+i,height:i,pos:a,cleanup:n}},cO=function(e,n){var a=$S(e,n),i=T.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Se+"</span>");return fu(a.element,i),zS(i,function(){return Uo(i)})},ip=function(e){return zS(T.fromDom(e),We)},Ku=function(e,n,a,i){Dw(e,function(c,f){return lO(e,n,a,i)},a)},up=function(e,n,a,i,c){var f={elm:i.element.dom,alignToTop:c};if(!Aw(e,f)){var g=xm(n).top;a(n,g,i,c),Ln(e,f)}},lO=function(e,n,a,i){var c=T.fromDom(e.getBody()),f=T.fromDom(e.getDoc());Tk(c);var g=cO(T.fromDom(a.startContainer),a.startOffset);up(e,f,n,g,i),g.cleanup()},FS=function(e,n,a,i){var c=T.fromDom(e.getDoc());up(e,c,a,ip(n),i)},Dw=function(e,n,a){var i=a.startContainer,c=a.startOffset,f=a.endContainer,g=a.endOffset;n(T.fromDom(i),T.fromDom(f));var b=e.dom.createRng();b.setStart(i,c),b.setEnd(f,g),e.selection.setRng(a)},_w=function(e,n,a,i){var c=e.pos;if(a)Gs(c.left,c.top,i);else{var f=c.top-n+e.height;Gs(c.left,f,i)}},LS=function(e,n,a,i,c){var f=a+n,g=i.pos.top,b=i.bottom,C=b-g>=a;if(g<n)_w(i,a,c!==!1,e);else if(g>f){var D=C?c!==!1:c===!0;_w(i,a,D,e)}else b>f&&!C&&_w(i,a,c===!0,e)},Rw=function(e,n,a,i){var c=e.dom.defaultView.innerHeight;LS(e,n,c,a,i)},Mw=function(e,n,a,i){var c=e.dom.defaultView.innerHeight;LS(e,n,c,a,i);var f=sO(a.element),g=Uf(window);f.top<g.y?Tm(a.element,i!==!1):f.top>g.bottom&&Tm(a.element,i===!0)},sv=function(e,n,a){return Ku(e,Rw,n,a)},fO=function(e,n,a){return FS(e,n,Rw,a)},vO=function(e,n,a){return Ku(e,Mw,n,a)},HS=function(e,n,a){return FS(e,n,Mw,a)},dO=function(e,n,a){var i=e.inline?fO:HS;i(e,n,a)},sp=function(e,n,a){var i=e.inline?sv:vO;i(e,n,a)},ha=function(){return T.fromDom(document)},Bb=function(e){return e.dom.focus()},cv=function(e){var n=as(e).dom;return e.dom===n.activeElement},cl=function(e){return e===void 0&&(e=ha()),Q.from(e.dom.activeElement).map(T.fromDom)},ad=function(e){return cl(as(e)).filter(function(n){return e.dom.contains(n.dom)})},Bs=function(e,n,a,i){return{start:e,soffset:n,finish:a,foffset:i}},Pb={create:Bs},rm=In.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Dg=function(e,n,a,i){return e.fold(n,a,i)},od=function(e){return e.fold(Pn,Pn,Pn)},mO=rm.before,VS=rm.on,gO=rm.after,hO={before:mO,on:VS,after:gO,cata:Dg,getStart:od},Rr=In.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ll=function(e){return Rr.exact(e.start,e.soffset,e.finish,e.foffset)},_g=function(e){return e.match({domRange:function(n){return T.fromDom(n.startContainer)},relative:function(n,a){return hO.getStart(n)},exact:function(n,a,i,c){return n}})},US=Rr.domRange,cp=Rr.relative,Xr=Rr.exact,WS=function(e){var n=_g(e);return Bo(n)},jS=Pb.create,lp={domRange:US,relative:cp,exact:Xr,exactFromRange:ll,getWin:WS,range:jS},GS=Yt().browser,fp=function(e,n){var a=Eo(n)?pw(n).length:Hu(n).length+1;return e>a?a:e<0?0:e},am=function(e){return lp.range(e.start,fp(e.soffset,e.start),e.finish,fp(e.foffset,e.finish))},Bw=function(e,n){return!Yl(n.dom)&&(Ca(e,n)||Yn(e,n))},Pw=function(e){return function(n){return Bw(e,n.start)&&Bw(e,n.finish)}},qS=function(e){return e.inline===!0||GS.isIE()},KS=function(e){return lp.range(T.fromDom(e.startContainer),e.startOffset,T.fromDom(e.endContainer),e.endOffset)},id=function(e){var n=e.getSelection(),a=!n||n.rangeCount===0?Q.none():Q.from(n.getRangeAt(0));return a.map(KS)},om=function(e){var n=Bo(e);return id(n.dom).filter(Pw(e))},Nw=function(e,n){return Q.from(n).filter(Pw(e)).map(am)},XS=function(e){var n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),Q.some(n)}catch{return Q.none()}},Nb=function(e){var n=qS(e)?om(T.fromDom(e.getBody())):Q.none();e.bookmark=n.isSome()?n:e.bookmark},pO=function(e,n){var a=T.fromDom(e.getBody()),i=qS(e)?Q.from(n):Q.none(),c=i.map(KS).filter(Pw(a));e.bookmark=c.isSome()?c:e.bookmark},Rg=function(e){var n=e.bookmark?e.bookmark:Q.none();return n.bind(function(a){return Nw(T.fromDom(e.getBody()),a)}).bind(XS)},Iw=function(e){Rg(e).each(function(n){return e.selection.setRng(n)})},$w=function(e){var n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1},YS={isEditorUIElement:$w},zw=function(e){return e.type==="nodechange"&&e.selectionChange},Ib=function(e,n){var a=function(){n.throttle()};ao.DOM.bind(document,"mouseup",a),e.on("remove",function(){ao.DOM.unbind(document,"mouseup",a)})},$b=function(e){e.on("focusout",function(){Nb(e)})},Fw=function(e,n){e.on("mouseup touchend",function(a){n.throttle()})},Lw=function(e,n){var a=Yt().browser;a.isIE()?$b(e):Fw(e,n),e.on("keyup NodeChange",function(i){zw(i)||Nb(e)})},JS=function(e){var n=N1(function(){Nb(e)},0);e.on("init",function(){e.inline&&Ib(e,n),Lw(e,n)}),e.on("remove",function(){n.cancel()})},im,Mg=ao.DOM,ZS=function(e){return YS.isEditorUIElement(e)},QS=function(e){var n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},zb=function(e,n){var a=Fy(e),i=Mg.getParent(n,function(c){return ZS(c)||(a?e.dom.is(c,a):!1)});return i!==null},ex=function(e){try{var n=as(T.fromDom(e.getElement()));return cl(n).fold(function(){return document.body},function(a){return a.dom})}catch{return document.body}},tx=function(e,n){var a=n.editor;JS(a),a.on("focusin",function(){var i=e.focusedEditor;i!==a&&(i&&i.fire("blur",{focusedEditor:a}),e.setActive(a),e.focusedEditor=a,a.fire("focus",{blurredEditor:i}),a.focus(!0))}),a.on("focusout",function(){Ru.setEditorTimeout(a,function(){var i=e.focusedEditor;!zb(a,ex(a))&&i===a&&(a.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),im||(im=function(i){var c=e.activeEditor;c&&Au(i).each(function(f){f.ownerDocument===document&&f!==document.body&&!zb(c,f)&&e.focusedEditor===c&&(c.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})},Mg.bind(document,"focusin",im))},Hw=function(e,n){e.focusedEditor===n.editor&&(e.focusedEditor=null),e.activeEditor||(Mg.unbind(document,"focusin",im),im=null)},nx=function(e){e.on("AddEditor",Mt(tx,e)),e.on("RemoveEditor",Mt(Hw,e))},rx=function(e,n){return e.dom.getParent(n,function(a){return e.dom.getContentEditable(a)==="true"})},ax=function(e){return e.collapsed?Q.from(yo(e.startContainer,e.startOffset)).map(T.fromDom):Q.none()},bO=function(e,n){return ax(n).bind(function(a){return fa(a)?Q.some(a):Ca(e,a)===!1?Q.some(e):Q.none()})},ox=function(e,n){bO(T.fromDom(e.getBody()),n).bind(function(a){return qu(a.dom)}).fold(function(){e.selection.normalize()},function(a){return e.selection.setRng(a.toRange())})},Vw=function(e){if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Bg=function(e){return cv(e)||ad(e).isSome()},yO=function(e){return e.iframeElement&&cv(T.fromDom(e.iframeElement))},ix=function(e){var n=e.getBody();return n&&Bg(T.fromDom(n))},ux=function(e){var n=as(T.fromDom(e.getElement()));return cl(n).filter(function(a){return!QS(a.dom)&&zb(e,a.dom)}).isSome()},Uc=function(e){return e.inline?ix(e):yO(e)},sx=function(e){return Uc(e)||ux(e)},cx=function(e){var n=e.selection,a=e.getBody(),i=n.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&Uc(e)===!1&&Rg(e).each(function(f){e.selection.setRng(f),i=f});var c=rx(e,n.getNode());if(e.$.contains(a,c)){Vw(c),ox(e,i),Fb(e);return}e.inline||(St.opera||Vw(a),e.getWin().focus()),(St.gecko||e.inline)&&(Vw(a),ox(e,i)),Fb(e)},Fb=function(e){return e.editorManager.setActive(e)},Lb=function(e,n){e.removed||(n?Fb(e):cx(e))},Uw=function(e,n,a,i,c){var f=a?n.startContainer:n.endContainer,g=a?n.startOffset:n.endOffset;return Q.from(f).map(T.fromDom).map(function(b){return!i||!n.collapsed?bl(b,c(b,g)).getOr(b):b}).bind(function(b){return co(b)?Q.some(b):Po(b).filter(co)}).map(function(b){return b.dom}).getOr(e)},um=function(e,n,a){return Uw(e,n,!0,a,function(i,c){return Math.min(n1(i),c)})},Pg=function(e,n,a){return Uw(e,n,!1,a,function(i,c){return c>0?c-1:c})},lx=function(e,n){for(var a=e;e&&un(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||a},fx=function(e,n){var a,i,c;if(!n)return e;i=n.startContainer,c=n.endContainer;var f=n.startOffset,g=n.endOffset;return a=n.commonAncestorContainer,!n.collapsed&&(i===c&&g-f<2&&i.hasChildNodes()&&(a=i.childNodes[f]),i.nodeType===3&&c.nodeType===3&&(i.length===f?i=lx(i.nextSibling,!0):i=i.parentNode,g===0?c=lx(c.previousSibling,!1):c=c.parentNode,i&&i===c))?i:a&&a.nodeType===3?a.parentNode:a},Hb=function(e,n,a,i){var c,f=[],g=e.getRoot();if(a=e.getParent(a||um(g,n,n.collapsed),e.isBlock),i=e.getParent(i||Pg(g,n,n.collapsed),e.isBlock),a&&a!==g&&f.push(a),a&&i&&a!==i){c=a;for(var b=new Ta(a,g);(c=b.next())&&c!==i;)e.isBlock(c)&&f.push(c)}return i&&a!==i&&i!==g&&f.push(i),f},wO=function(e,n,a){return Q.from(n).map(function(i){var c=e.nodeIndex(i),f=e.createRng();return f.setStart(i.parentNode,c),f.setEnd(i.parentNode,c+1),a&&(ed(e,f,i,!0),ed(e,f,i,!1)),f})},Vb=function(e,n){return $n(n,function(a){var i=e.fire("GetSelectionRange",{range:a});return i.range!==a?i.range:a})},vp={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ub=function(e,n,a){var i=a?"lastChild":"firstChild",c=a?"prev":"next";if(e[i])return e[i];if(e!==n){var f=e[c];if(f)return f;for(var g=e.parent;g&&g!==n;g=g.parent)if(f=g[c],f)return f}},vx=function(e){if(!tl(e.value))return!1;var n=e.parent;return!(n&&(n.name!=="span"||n.attr("style"))&&/^[ ]+$/.test(e.value))},Wb=function(e){var n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n},Wc=function(){function e(n,a){this.name=n,this.type=a,a===1&&(this.attributes=[],this.attributes.map={})}return e.create=function(n,a){var i=new e(n,vp[n]||1);return a&&Zt(a,function(c,f){i.attr(f,c)}),i},e.prototype.replace=function(n){var a=this;return n.parent&&n.remove(),a.insert(n,a),a.remove(),a},e.prototype.attr=function(n,a){var i=this,c;if(typeof n!="string")return n!=null&&Zt(n,function(g,b){i.attr(b,g)}),i;if(c=i.attributes){if(a!==void 0){if(a===null){if(n in c.map){delete c.map[n];for(var f=c.length;f--;)if(c[f].name===n)return c.splice(f,1),i}return i}if(n in c.map){for(var f=c.length;f--;)if(c[f].name===n){c[f].value=a;break}}else c.push({name:n,value:a});return c.map[n]=a,i}return c.map[n]}},e.prototype.clone=function(){var n=this,a=new e(n.name,n.type),i;if(i=n.attributes){var c=[];c.map={};for(var f=0,g=i.length;f<g;f++){var b=i[f];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}a.attributes=c}return a.value=n.value,a.shortEnded=n.shortEnded,a},e.prototype.wrap=function(n){var a=this;return a.parent.insert(n,a),n.append(a),a},e.prototype.unwrap=function(){for(var n=this,a=n.firstChild;a;){var i=a.next;n.insert(a,n,!0),a=i}n.remove()},e.prototype.remove=function(){var n=this,a=n.parent,i=n.next,c=n.prev;return a&&(a.firstChild===n?(a.firstChild=i,i&&(i.prev=null)):c.next=i,a.lastChild===n?(a.lastChild=c,c&&(c.next=null)):i.prev=c,n.parent=n.next=n.prev=null),n},e.prototype.append=function(n){var a=this;n.parent&&n.remove();var i=a.lastChild;return i?(i.next=n,n.prev=i,a.lastChild=n):a.lastChild=a.firstChild=n,n.parent=a,n},e.prototype.insert=function(n,a,i){n.parent&&n.remove();var c=a.parent||this;return i?(a===c.firstChild?c.firstChild=n:a.prev.next=n,n.prev=a.prev,n.next=a,a.prev=n):(a===c.lastChild?c.lastChild=n:a.next.prev=n,n.next=a.next,n.prev=a,a.next=n),n.parent=c,n},e.prototype.getAll=function(n){for(var a=this,i=[],c=a.firstChild;c;c=Ub(c,a))c.name===n&&i.push(c);return i},e.prototype.children=function(){for(var n=this,a=[],i=n.firstChild;i;i=i.next)a.push(i);return a},e.prototype.empty=function(){var n=this;if(n.firstChild){for(var a=[],i=n.firstChild;i;i=Ub(i,n))a.push(i);for(var c=a.length;c--;){var i=a[c];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n},e.prototype.isEmpty=function(n,a,i){a===void 0&&(a={});var c=this,f=c.firstChild;if(Wb(c))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||Wb(f))return!1}if(f.type===8||f.type===3&&!vx(f)||f.type===3&&f.parent&&a[f.parent.name]&&tl(f.value)||i&&i(f))return!1}while(f=Ub(f,c));return!0},e.prototype.walk=function(n){return Ub(this,null,n)},e}(),CO=function(e){for(var n=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,a=[],i={},c=LC("img"),f,g=0,b=0;f=n.exec(e);){var C=f[0],D=c+"_"+b++;i[D]=C,g<f.index&&a.push(e.substr(g,f.index-g)),a.push(D),g=f.index+C.length}var I=new RegExp(c+"_[0-9]+","g");return g===0?{prefix:c,uris:i,html:e,re:I}:(g<e.length&&a.push(e.substr(g)),{prefix:c,uris:i,html:a.join(""),re:I})},jb=function(e,n){return e.replace(n.re,function(a){return Ir(n.uris,a).getOr(a)})},dx=function(e){var n=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return n?Q.some({type:n[1],data:decodeURIComponent(n[2])}):Q.none()},dp=je.each,mp=je.trim,Ww="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),mx={ftp:21,http:80,https:443,mailto:25},gx=["img","video"],hx=function(e,n){return Kt(e)?!e:Kt(n)?!Nt(gx,n):!0},Gb=function(e,n,a){return e.allow_html_data_urls?!1:/^data:image\//i.test(n)?hx(e.allow_svg_data_urls,a)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)},ud=function(){function e(n,a){n=mp(n),this.settings=a||{};var i=this.settings.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}var f=n.indexOf("//")===0;if(n.indexOf("/")===0&&!f&&(n=(i&&i.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){var g=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")n="//mce_host"+c.toAbsPath(g,n);else{var b=/([^#?]*)([#?]?.*)/.exec(n);n=(i&&i.protocol||"http")+"://mce_host"+c.toAbsPath(g,b[1])+b[2]}}n=n.replace(/@@/g,"(mce_at)");var C=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);dp(Ww,function(D,I){var z=C[I];z&&(z=z.replace(/\(mce_at\)/g,"@@")),c[D]=z}),i&&(c.protocol||(c.protocol=i.protocol),c.userInfo||(c.userInfo=i.userInfo),!c.port&&c.host==="mce_host"&&(c.port=i.port),(!c.host||c.host==="mce_host")&&(c.host=i.host),c.source=""),f&&(c.protocol="")}return e.parseDataUri=function(n){var a,i=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(i[0]);return c&&(a=c[1]),{type:a,data:i[1]}},e.isDomSafe=function(n,a,i){if(i===void 0&&(i={}),i.allow_script_urls)return!0;var c=bc.decode(n).replace(/[\s\u0000-\u001F]+/g,"");try{c=decodeURIComponent(c)}catch{c=unescape(c)}return/((java|vb)script|mhtml):/i.test(c)?!1:!Gb(i,c,a)},e.getDocumentBaseUrl=function(n){var a;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?a=n.href:a=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a},e.prototype.setPath=function(n){var a=/^(.*?)\/?(\w+)?$/.exec(n);this.path=a[0],this.directory=a[1],this.file=a[2],this.source="",this.getURI()},e.prototype.toRelative=function(n){var a;if(n==="./")return n;var i=new e(n,{base_uri:this});if(i.host!=="mce_host"&&this.host!==i.host&&i.host||this.port!==i.port||this.protocol!==i.protocol&&i.protocol!=="")return i.getURI();var c=this.getURI(),f=i.getURI();return c===f||c.charAt(c.length-1)==="/"&&c.substr(0,c.length-1)===f?c:(a=this.toRelPath(this.path,i.path),i.query&&(a+="?"+i.query),i.anchor&&(a+="#"+i.anchor),a)},e.prototype.toAbsolute=function(n,a){var i=new e(n,{base_uri:this});return i.getURI(a&&this.isSameOrigin(i))},e.prototype.isSameOrigin=function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var a=mx[this.protocol];if(a&&(this.port||a)==(n.port||a))return!0}return!1},e.prototype.toRelPath=function(n,a){var i=0,c="",f,g,b=n.substring(0,n.lastIndexOf("/")).split("/"),C=a.split("/");if(b.length>=C.length){for(f=0,g=b.length;f<g;f++)if(f>=C.length||b[f]!==C[f]){i=f+1;break}}if(b.length<C.length){for(f=0,g=C.length;f<g;f++)if(f>=b.length||b[f]!==C[f]){i=f+1;break}}if(i===1)return a;for(f=0,g=b.length-(i-1);f<g;f++)c+="../";for(f=i-1,g=C.length;f<g;f++)f!==i-1?c+="/"+C[f]:c+=C[f];return c},e.prototype.toAbsPath=function(n,a){var i,c=0,f=[],g,b=/\/$/.test(a)?"/":"",C=n.split("/"),D=a.split("/");for(dp(C,function(I){I&&f.push(I)}),C=f,i=D.length-1,f=[];i>=0;i--)if(!(D[i].length===0||D[i]===".")){if(D[i]===".."){c++;continue}if(c>0){c--;continue}f.push(D[i])}return i=C.length-c,i<=0?g=io(f).join("/"):g=C.slice(0,i).join("/")+"/"+io(f).join("/"),g.indexOf("/")!==0&&(g="/"+g),b&&g.lastIndexOf("/")!==g.length-1&&(g+=b),g},e.prototype.getURI=function(n){n===void 0&&(n=!1);var a;return(!this.source||n)&&(a="",n||(this.protocol?a+=this.protocol+"://":a+="//",this.userInfo&&(a+=this.userInfo+"@"),this.host&&(a+=this.host),this.port&&(a+=":"+this.port)),this.path&&(a+=this.path),this.query&&(a+="?"+this.query),this.anchor&&(a+="#"+this.anchor),this.source=a),this.source},e}(),SO=je.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),xO=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0},TO=ki(function(){return document.implementation.createHTMLDocument("parser")}),sd=function(e,n,a){for(var i=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,f=e.getShortEndedElements(),g=1,b=a;g!==0;)for(i.lastIndex=b;;){var C=i.exec(n);if(C===null)return b;if(C[1]==="!"){xr(C[2],"--")?b=jw(n,!1,C.index+3):b=jw(n,!0,C.index+1);break}else{c.lastIndex=i.lastIndex;var D=c.exec(n);if(Z(D)||D.index!==i.lastIndex)continue;C[1]==="/"?g-=1:fr(f,C[2])||(g+=1),b=i.lastIndex+D[0].length;break}}return b},kO=function(e,n){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n))},jw=function(e,n,a){a===void 0&&(a=0);var i=e.toLowerCase();if(i.indexOf("[if ",a)!==-1&&kO(i,a)){var c=i.indexOf("[endif]",a);return i.indexOf(">",c)}else if(n){var f=i.indexOf(">",a);return f!==-1?f:i.length}else{var g=/--!?>/g;g.lastIndex=a;var b=g.exec(e);return b?b.index+b[0].length:i.length}},EO=function(e,n){var a=e.exec(n);if(a){var i=a[1],c=a[2];return typeof i=="string"&&i.toLowerCase()==="data-mce-bogus"?c:null}else return null},Ng=function(e,n){n===void 0&&(n=yc()),e=e||{};var a=TO(),i=a.createElement("form");e.fix_self_closing!==!1&&(e.fix_self_closing=!0);var c=e.comment?e.comment:We,f=e.cdata?e.cdata:We,g=e.text?e.text:We,b=e.start?e.start:We,C=e.end?e.end:We,D=e.pi?e.pi:We,I=e.doctype?e.doctype:We,z=function(q,X){X===void 0&&(X="html");for(var J=q.html,ee,ce=0,se,Ae,Ee=[],me,_e,et,bt,Xn,an,st,qn,xt,tn,Et,Pt,vn,ft,on,Hr,pa,ma=0,Tu=bc.decode,zo=je.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ns=X==="html"?0:1,ac=function(eo){var vo,uu;for(vo=Ee.length;vo--&&Ee[vo].name!==eo;);if(vo>=0){for(uu=Ee.length-1;uu>=vo;uu--)eo=Ee[uu],eo.valid&&C(eo.name);Ee.length=vo}},vt=function(eo,vo){return g(jb(eo,q),vo)},Ot=function(eo){eo!==""&&(eo.charAt(0)===">"&&(eo=" "+eo),!e.allow_conditional_comments&&eo.substr(0,3).toLowerCase()==="[if"&&(eo=" "+eo),c(jb(eo,q)))},Rn=function(eo){return jb(eo,q)},Me=function(eo,vo){var uu=eo||"",oc=!xr(uu,"--"),wv=jw(J,oc,vo);return eo=J.substr(vo,wv-vo),Ot(oc?uu+eo:eo),wv+1},Ct=function(eo,vo,uu,oc,wv){if(vo=vo.toLowerCase(),uu=Rn(vo in Wi?vo:Tu(uu||oc||wv||"")),zi&&!Xn&&xO(vo)===!1){var Cv=Et[vo];if(!Cv&&Pt){for(var sh=Pt.length;sh--&&(Cv=Pt[sh],!Cv.pattern.test(vo)););sh===-1&&(Cv=null)}if(!Cv||Cv.validValues&&!(uu in Cv.validValues))return}var O0=vo==="name"||vo==="id";O0&&eo in SO&&(uu in a||uu in i)||zo[vo]&&!ud.isDomSafe(uu,eo,e)||Xn&&(vo in zo||vo.indexOf("on")===0)||(me.map[vo]=uu,me.push({name:vo,value:uu}))},mt=new RegExp(`<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\\s*|\\/)>))`,"g"),zn=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Un=n.getShortEndedElements(),Ya=e.self_closing_elements||n.getSelfClosingElements(),Wi=n.getBoolAttrs(),zi=e.validate,bm=e.remove_internals,Is=e.fix_self_closing,ys=n.getSpecialElements(),iu=J+">";ee=mt.exec(iu);){var gl=ee[0];if(ce<ee.index&&vt(Tu(J.substr(ce,ee.index-ce))),se=ee[7])se=se.toLowerCase(),se.charAt(0)===":"&&(se=se.substr(1)),ac(se);else if(se=ee[8]){if(ee.index+gl.length>J.length){vt(Tu(J.substr(ee.index))),ce=ee.index+gl.length;continue}se=se.toLowerCase(),se.charAt(0)===":"&&(se=se.substr(1)),an=se in Un,Is&&Ya[se]&&Ee.length>0&&Ee[Ee.length-1].name===se&&ac(se);var $s=EO(zn,ee[9]);if($s!==null){if($s==="all"){ce=sd(n,J,mt.lastIndex),mt.lastIndex=ce;continue}qn=!1}if(!zi||(st=n.getElementRule(se))){if(qn=!0,zi&&(Et=st.attributes,Pt=st.attributePatterns),(tn=ee[9])?(Xn=tn.indexOf("data-mce-type")!==-1,Xn&&bm&&(qn=!1),me=[],me.map={},tn.replace(zn,function(eo,vo,uu,oc,wv){return Ct(se,vo,uu,oc,wv),""})):(me=[],me.map={}),zi&&!Xn){if(vn=st.attributesRequired,ft=st.attributesDefault,on=st.attributesForced,Hr=st.removeEmptyAttrs,Hr&&!me.length&&(qn=!1),on)for(_e=on.length;_e--;)xt=on[_e],bt=xt.name,pa=xt.value,pa==="{$uid}"&&(pa="mce_"+ma++),me.map[bt]=pa,me.push({name:bt,value:pa});if(ft)for(_e=ft.length;_e--;)xt=ft[_e],bt=xt.name,bt in me.map||(pa=xt.value,pa==="{$uid}"&&(pa="mce_"+ma++),me.map[bt]=pa,me.push({name:bt,value:pa}));if(vn){for(_e=vn.length;_e--&&!(vn[_e]in me.map););_e===-1&&(qn=!1)}if(xt=me.map["data-mce-bogus"]){if(xt==="all"){ce=sd(n,J,mt.lastIndex),mt.lastIndex=ce;continue}qn=!1}}qn&&b(se,me,an)}else qn=!1;if(Ae=ys[se]){Ae.lastIndex=ce=ee.index+gl.length,(ee=Ae.exec(J))?(qn&&(et=J.substr(ce,ee.index-ce)),ce=ee.index+ee[0].length):(et=J.substr(ce),ce=J.length),qn&&(et.length>0&&vt(et,!0),C(se)),mt.lastIndex=ce;continue}an||(!tn||tn.indexOf("/")!==tn.length-1?Ee.push({name:se,valid:qn}):qn&&C(se))}else if(se=ee[1])Ot(se);else if(se=ee[2]){var Pf=Ns===1||e.preserve_cdata||Ee.length>0&&n.isValidChild(Ee[Ee.length-1].name,"#cdata");if(Pf)f(se);else{ce=Me("",ee.index+2),mt.lastIndex=ce;continue}}else if(se=ee[3])I(se);else if((se=ee[4])||gl==="<!"){ce=Me(se,ee.index+gl.length),mt.lastIndex=ce;continue}else if(se=ee[5])if(Ns===1)D(se,ee[6]);else{ce=Me("?",ee.index+2),mt.lastIndex=ce;continue}ce=ee.index+gl.length}for(ce<J.length&&vt(Tu(J.substr(ce))),_e=Ee.length-1;_e>=0;_e--)se=Ee[_e],se.valid&&C(se.name)},F=function(q,X){X===void 0&&(X="html"),z(CO(q),X)};return{parse:F}};Ng.findEndTag=sd;var Gw=function(e,n){var a=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(a,"")},px=function(e,n){for(var a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=e.schema,c=Gw(e.getTempAttrs(),n),f=i.getShortEndedElements(),g;g=a.exec(c);){var b=a.lastIndex,C=g[0].length,D=void 0;f[g[1]]?D=b:D=Ng.findEndTag(i,c,b),c=c.substring(0,b-C)+c.substring(D),a.lastIndex=b-C}return kl(c)},qb=px,bx=function(e,n){var a=yu(e),i=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+a+`>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(i,"")},yx=function(e,n){return kn(kn({},e),{format:n,get:!0,getInner:!0})},OO=function(e,n,a,i){var c=yx(n,a),f=n.no_events?c:e.fire("BeforeGetContent",c),g;return f.format==="raw"?g=je.trim(qb(e.serializer,i.innerHTML)):f.format==="text"?g=e.dom.isEmpty(i)?"":kl(i.innerText||i.textContent):f.format==="tree"?g=e.serializer.serialize(i,f):g=bx(e,e.serializer.serialize(i,f)),!Nt(["text","tree"],f.format)&&!Sd(T.fromDom(i))?f.content=je.trim(g):f.content=g,f.no_events?f.content:e.fire("GetContent",f).content},Kb=function(e,n,a){return Q.from(e.getBody()).fold(Y(n.format==="tree"?new Wc("body",11):""),function(i){return OO(e,n,a,i)})},Xb=je.each,qw=function(e){var n=function(a,i){if(a.nodeName!==i.nodeName)return!1;var c=function(g){var b={};return Xb(e.getAttribs(g),function(C){var D=C.nodeName.toLowerCase();D.indexOf("_")!==0&&D!=="style"&&D.indexOf("data-")!==0&&(b[D]=e.getAttrib(g,D))}),b},f=function(g,b){var C,D;for(D in g)if(fr(g,D)){if(C=b[D],typeof C>"u"||g[D]!==C)return!1;delete b[D]}for(D in b)if(fr(b,D))return!1;return!0};return!f(c(a),c(i))||!f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(i,"style")))?!1:!Ms(a)&&!Ms(i)};return{compare:n}},wx=je.makeMap,Cx=function(e){var n=[];e=e||{};var a=e.indent,i=wx(e.indent_before||""),c=wx(e.indent_after||""),f=bc.getEncodeFunc(e.entity_encoding||"raw",e.entities),g=e.element_format==="html";return{start:function(b,C,D){var I,z,F,q;if(a&&i[b]&&n.length>0&&(q=n[n.length-1],q.length>0&&q!==`
`&&n.push(`
`)),n.push("<",b),C)for(I=0,z=C.length;I<z;I++)F=C[I],n.push(" ",F.name,'="',f(F.value,!0),'"');!D||g?n[n.length]=">":n[n.length]=" />",D&&a&&c[b]&&n.length>0&&(q=n[n.length-1],q.length>0&&q!==`
`&&n.push(`
`))},end:function(b){var C;n.push("</",b,">"),a&&c[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:function(b,C){b.length>0&&(n[n.length]=C?b:f(b))},cdata:function(b){n.push("<![CDATA[",b,"]]>")},comment:function(b){n.push("<!--",b,"-->")},pi:function(b,C){C?n.push("<?",b," ",f(C),"?>"):n.push("<?",b,"?>"),a&&n.push(`
`)},doctype:function(b){n.push("<!DOCTYPE",b,">",a?`
`:"")},reset:function(){n.length=0},getContent:function(){return n.join("").replace(/\n$/,"")}}},sm=function(e,n){n===void 0&&(n=yc());var a=Cx(e);e=e||{},e.validate="validate"in e?e.validate:!0;var i=function(c){var f=e.validate,g={3:function(C){a.text(C.value,C.raw)},8:function(C){a.comment(C.value)},7:function(C){a.pi(C.name,C.value)},10:function(C){a.doctype(C.value)},4:function(C){a.cdata(C.value)},11:function(C){if(C=C.firstChild)do b(C);while(C=C.next)}};a.reset();var b=function(C){var D=g[C.type];if(D)D(C);else{var I=C.name,z=C.shortEnded,F=C.attributes;if(f&&F&&F.length>1){var q=[];q.map={};var X=n.getElementRule(C.name);if(X){for(var J=0,ee=X.attributesOrder.length;J<ee;J++){var ce=X.attributesOrder[J];if(ce in F.map){var se=F.map[ce];q.map[ce]=se,q.push({name:ce,value:se})}}for(var J=0,ee=F.length;J<ee;J++){var ce=F[J].name;if(!(ce in q.map)){var se=F.map[ce];q.map[ce]=se,q.push({name:ce,value:se})}}F=q}}if(a.start(C.name,F,z),!z){if(C=C.firstChild)do b(C);while(C=C.next);a.end(I)}}};return c.type===1&&!e.inner?b(c):g[11](c),a.getContent()};return{serialize:i}},gp=new Set;(function(){var e=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];pt(e,function(n){gp.add(n)})})();var Yb=["font","text-decoration","text-emphasis"],hp=function(e,n){return Xt(e.parseStyle(e.getAttrib(n,"style")))},Sx=function(e){return gp.has(e)},lv=function(e,n){return ni(hp(e,n),function(a){return!Sx(a)})},AO=function(e){return bn(e,function(n){return Dn(Yb,function(a){return xr(n,a)})})},Sf=function(e,n,a){var i=hp(e,n),c=hp(e,a),f=function(g){var b=e.getStyle(n,g),C=e.getStyle(a,g);return ri(b)&&ri(C)&&b!==C};return Dn(i,function(g){var b=function(D){return Dn(D,function(I){return I===g})};if(!b(c)&&b(Yb)){var C=AO(c);return Dn(C,f)}else return f(g)})},xx=function(e,n,a){return Q.from(a.container()).filter(un).exists(function(i){var c=e?0:-1;return n(i.data.charAt(a.offset()+c))})},Jb=Mt(xx,!0,Zv),Kw=Mt(xx,!1,Zv),DO=function(e){var n=e.container();return un(n)&&(n.data.length===0||ss(n.data)&&nd.isBookmarkNode(n.parentNode))},cd=function(e,n){return function(a){return Q.from(cb(e?0:-1,a)).filter(n).isSome()}},Tx=function(e){return km(e)&&Cr(T.fromDom(e),"display")==="block"},kx=function(e){return lo(e)&&!_i(e)},_O=cd(!0,Tx),Xw=cd(!1,Tx),Ig=cd(!0,Ts),$g=cd(!1,Ts),Ex=cd(!0,ii),Yw=cd(!1,ii),fl=cd(!0,kx),ld=cd(!1,kx),Gn=function(e){for(var n=[],a=e.dom;a;)n.push(T.fromDom(a)),a=a.lastChild;return n},Jw=function(e){var n=bu(e,"br"),a=bn(Gn(e).slice(-1),Bm);n.length===a.length&&pt(a,Uo)},xf=function(e){Ff(e),Di(e,T.fromHtml('<br data-mce-bogus="1">'))},Ox=function(e){js(e).each(function(n){If(n).each(function(a){mc(e)&&Bm(n)&&mc(a)&&Uo(n)})})},RO=function(e){return e.slice(0,-1)},Ax=function(e,n,a){return Ca(n,e)?RO(Ai(e,function(i){return a(i)||Yn(i,n)})):[]},pp=function(e,n){return Ax(e,n,wt)},$l=function(e,n){return[e].concat(pp(e,n))},Zb=function(e,n,a){return pb(e,n,a,DO)},Dx=function(e,n){return ya($l(T.fromDom(n.container()),e),mc)},sr=function(e,n,a){return Zb(e,n.dom,a).forall(function(i){return Dx(n,a).fold(function(){return Pl(i,a,n.dom)===!1},function(c){return Pl(i,a,n.dom)===!1&&Ca(c,T.fromDom(i.container()))})})},Zw=function(e,n,a){return Dx(n,a).fold(function(){return Zb(e,n.dom,a).forall(function(i){return Pl(i,a,n.dom)===!1})},function(i){return Zb(e,i.dom,a).isNone()})},mr=Mt(Zw,!1),Qw=Mt(Zw,!0),_x=Mt(sr,!1),Rx=Mt(sr,!0),zg=function(e){return fb(e).exists(Bm)},Fg=function(e,n,a){var i=bn($l(T.fromDom(a.container()),n),mc),c=Ga(i).getOr(n);return Rs(e,c.dom,a).filter(zg)},Lg=function(e,n){return fb(n).exists(Bm)||Fg(!0,e,n).isSome()},Hg=function(e,n){return NE(n).exists(Bm)||Fg(!1,e,n).isSome()},MO=Mt(Fg,!1),tr=Mt(Fg,!0),Mx=function(e){return Ue.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},e2=function(e,n){var a=bn($l(T.fromDom(n.container()),e),mc);return Ga(a).getOr(e)},bp=function(e,n){return Mx(n)?Kw(n):Kw(n)||Il(e2(e,n).dom,n).exists(Kw)},fd=function(e,n){return Mx(n)?Jb(n):Jb(n)||ul(e2(e,n).dom,n).exists(Jb)},Bx=function(e){return Nt(["pre","pre-wrap"],e)},Qb=function(e){return fb(e).bind(function(n){return _m(n,co)}).exists(function(n){return Bx(Cr(n,"white-space"))})},t2=function(e,n){return Il(e.dom,n).isNone()},BO=function(e,n){return ul(e.dom,n).isNone()},Px=function(e,n){return t2(e,n)||BO(e,n)||mr(e,n)||Qw(e,n)||Hg(e,n)||Lg(e,n)},PO=function(e,n){return Qb(n)?!1:Px(e,n)||bp(e,n)||fd(e,n)},e0=function(e,n){return Qb(n)?!1:mr(e,n)||_x(e,n)||Hg(e,n)||bp(e,n)},NO=function(e){var n=e.container(),a=e.offset();return un(n)&&a<n.data.length?Ue(n,a+1):e},t0=function(e,n){return Qb(n)?!1:Qw(e,n)||Rx(e,n)||Lg(e,n)||fd(e,n)},Nx=function(e,n){return e0(e,n)||t0(e,NO(n))},Ix=function(e,n){return Jd(e.charAt(n))},IO=function(e){var n=e.container();return un(n)&&Ur(n.data,Ks)},$x=function(e){var n=e.split("");return $n(n,function(a,i){return Jd(a)&&i>0&&i<n.length-1&&bb(n[i-1])&&bb(n[i+1])?" ":a}).join("")},n2=function(e,n){var a=n.data,i=Ue(n,0);return Ix(a,0)&&!Nx(e,i)?(n.data=" "+a.slice(1),!0):!1},Jr=function(e){var n=e.data,a=$x(n);return a!==n?(e.data=a,!0):!1},zx=function(e,n){var a=n.data,i=Ue(n,a.length-1);return Ix(a,a.length-1)&&!Nx(e,i)?(n.data=a.slice(0,-1)+" ",!0):!1},n0=function(e,n){return Q.some(n).filter(IO).bind(function(a){var i=a.container(),c=n2(e,i)||Jr(i)||zx(e,i);return c?Q.some(a):Q.none()})},r2=function(e){var n=T.fromDom(e.getBody());e.selection.isCollapsed()&&n0(n,Ue.fromRangeStart(e.selection.getRng())).each(function(a){e.selection.setRng(a.toRange())})},Fx=function(e,n,a){var i=ta(e,function(c,f){return Zv(f)||Jd(f)?c.previousCharIsSpace||c.str===""&&n||c.str.length===e.length-1&&a?{previousCharIsSpace:!1,str:c.str+Ks}:{previousCharIsSpace:!0,str:c.str+" "}:{previousCharIsSpace:!1,str:c.str+f}},{previousCharIsSpace:!1,str:""});return i.str},a2=function(e,n,a){if(a!==0){var i=T.fromDom(e),c=Ev(i,mc).getOr(i),f=e.data.slice(n,n+a),g=n+a>=e.data.length&&t0(c,Ue(e,e.data.length)),b=n===0&&e0(c,Ue(e,0));e.replaceData(n,a,Fx(f,b,g))}},yp=function(e,n){var a=e.data.slice(n),i=a.length-Ki(a).length;a2(e,n,i)},r0=function(e,n){var a=e.data.slice(0,n),i=a.length-ho(a).length;a2(e,n-i,i)},u=function(e,n,a,i){i===void 0&&(i=!0);var c=ho(e.data).length,f=i?e:n,g=i?n:e;return i?f.appendData(g.data):f.insertData(0,g.data),Uo(T.fromDom(g)),a&&yp(f,c),f},l=function(e,n){var a=e.container(),i=e.offset();return Ue.isTextPosition(e)===!1&&a===n.parentNode&&i>Ue.before(n).offset()},d=function(e,n){return l(n,e)?Ue(n.container(),n.offset()-1):n},h=function(e){return un(e)?Ue(e,0):Ue.before(e)},y=function(e){return un(e)?Ue(e,e.data.length):Ue.after(e)},k=function(e){return tf(e.previousSibling)?Q.some(y(e.previousSibling)):e.previousSibling?Lc(e.previousSibling):Q.none()},_=function(e){return tf(e.nextSibling)?Q.some(h(e.nextSibling)):e.nextSibling?qu(e.nextSibling):Q.none()},N=function(e,n){var a=Ue.before(n.previousSibling?n.previousSibling:n.parentNode);return Il(e,a).fold(function(){return ul(e,Ue.after(n))},Q.some)},j=function(e,n){return ul(e,Ue.after(n)).fold(function(){return Il(e,Ue.before(n))},Q.some)},re=function(e,n){return k(n).orThunk(function(){return _(n)}).orThunk(function(){return N(e,n)})},he=function(e,n){return _(n).orThunk(function(){return k(n)}).orThunk(function(){return j(e,n)})},Ge=function(e,n,a){return e?he(n,a):re(n,a)},yt=function(e,n,a){return Ge(e,n,a).map(Mt(d,a))},at=function(e,n,a){a.fold(function(){e.focus()},function(i){e.selection.setRng(i.toRange(),n)})},qe=function(e){return function(n){return n.dom===e}},Dt=function(e,n){return n&&fr(e.schema.getBlockElements(),ca(n))},It=function(e){if(mu(e)){var n=T.fromHtml('<br data-mce-bogus="1">');return Ff(e),Di(e,n),Q.some(Ue.before(n.dom))}else return Q.none()},_n=function(e,n,a){var i=If(e).filter(Eo),c=fc(e).filter(Eo);return Uo(e),N0(i,c,n,function(f,g,b){var C=f.dom,D=g.dom,I=C.data.length;return u(C,D,a),b.container()===D?Ue(C,I):b}).orThunk(function(){return a&&(i.each(function(f){return r0(f.dom,f.dom.length)}),c.each(function(f){return yp(f.dom,0)})),n})},ia=function(e,n){return fr(e.schema.getTextInlineElements(),ca(n))},An=function(e,n,a,i){i===void 0&&(i=!0);var c=yt(n,e.getBody(),a.dom),f=Ev(a,Mt(Dt,e),qe(e.getBody())),g=_n(a,c,ia(e,a));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(It).fold(function(){i&&at(e,n,g)},function(b){i&&at(e,n,Q.some(b))})},ar=function(e){return function(n){return Yn(e,n)}},Lr=function(e){return bu(e,"td,th")},Mr=function(e,n){var a=function(D){return Zd(T.fromDom(D),n)},i=a(e.startContainer),c=a(e.endContainer),f=i.isSome(),g=c.isSome(),b=Vu(i,c,Yn).getOr(!1),C=!b&&f&&g;return{startTable:i,endTable:c,isStartInTable:f,isEndInTable:g,isSameTable:b,isMultiTable:C}},ei=function(e,n){return{start:e,end:n}},nu=function(e,n,a){return{rng:e,table:n,cells:a}},ru=In.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Zr=function(e,n){return Zo(T.fromDom(e),"td,th",n)},cr=function(e){return!Yn(e.start,e.end)},Gr=function(e,n){return Zd(e.start,n).bind(function(a){return Zd(e.end,n).bind(function(i){return I0(Yn(a,i),a)})})},Na=function(e,n){return!cr(e)&&Gr(e,n).exists(function(a){var i=a.dom.rows;return i.length===1&&i[0].cells.length===1})},$o=function(e,n){var a=Zr(e.startContainer,n),i=Zr(e.endContainer,n);return Vu(a,i,ei)},fv=function(e){return function(n){return Zd(n,e).bind(function(a){return na(Lr(a)).map(function(i){return ei(n,i)})})}},_a=function(e){return function(n){return Zd(n,e).bind(function(a){return Ga(Lr(a)).map(function(i){return ei(i,n)})})}},ec=function(e){return function(n){return Gr(n,e).map(function(a){return nu(n,a,Lr(a))})}},au=function(e,n,a,i){if(a.collapsed||!e.forall(cr))return Q.none();if(n.isSameTable){var c=e.bind(ec(i));return Q.some({start:c,end:c})}else{var f=Zr(a.startContainer,i),g=Zr(a.endContainer,i),b=f.bind(fv(i)).bind(ec(i)),C=g.bind(_a(i)).bind(ec(i));return Q.some({start:b,end:C})}},wp=function(e,n){return qo(e,function(a){return Yn(a,n)})},vv=function(e){return Vu(wp(e.cells,e.rng.start),wp(e.cells,e.rng.end),function(n,a){return e.cells.slice(n,a+1)})},zl=function(e,n,a){return e.exists(function(i){return Na(i,a)&&sl(i.start,n)})},Oc=function(e,n){var a=n.startTable,i=n.endTable,c=e.cloneRange();return a.each(function(f){return c.setStartAfter(f.dom)}),i.each(function(f){return c.setEndBefore(f.dom)}),c},Tf=function(e,n,a,i){return au(e,n,a,i).bind(function(c){var f=c.start,g=c.end;return f.or(g)}).bind(function(c){var f=n.isSameTable,g=vv(c).getOr([]);if(f&&c.cells.length===g.length)return Q.some(ru.fullTable(c.table));if(g.length>0){if(f)return Q.some(ru.partialTable(g,Q.none()));var b=Oc(a,n);return Q.some(ru.partialTable(g,Q.some(kn(kn({},n),{rng:b}))))}else return Q.none()})},a0=function(e,n,a,i){return au(e,n,a,i).bind(function(c){var f=c.start,g=c.end,b=f.bind(vv).getOr([]),C=g.bind(vv).getOr([]);if(b.length>0&&C.length>0){var D=Oc(a,n);return Q.some(ru.multiTable(b,C,D))}else return Q.none()})},Vg=function(e,n){var a=ar(e),i=$o(n,a),c=Mr(n,a);return zl(i,n,a)?i.map(function(f){return ru.singleCellTable(n,f.start)}):c.isMultiTable?a0(i,c,n,a):Tf(i,c,n,a)},Ug=function(e){var n=Us(e)?If(e):js(e);return n.bind(Ug).orThunk(function(){return Q.some(e)})},Wg=function(e){return pt(e,function(n){Xe(n,"contenteditable"),xf(n)})},Fl=function(e,n){return Q.from(e.dom.getParent(n,e.dom.isBlock)).map(T.fromDom)},jg=function(e,n,a){a.each(function(i){n?Uo(i):(xf(i),e.selection.setCursorLocation(i.dom,0))})},Gg=function(e,n,a,i){var c=a.cloneRange();i?(c.setStart(a.startContainer,a.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(a.endContainer,a.endOffset)),$O(e,c,n,!1)},o2=function(e){var n=pf(e),a=T.fromDom(e.selection.getNode());Em(a.dom)&&mu(a)?e.selection.setCursorLocation(a.dom,0):e.selection.collapse(!0),n.length>1&&Dn(n,function(i){return Yn(i,a)})&&O(a,"data-mce-selected","1")},qg=function(e,n,a){var i=e.selection.getRng(),c=a.bind(function(f){var g=f.rng,b=f.isStartInTable,C=Fl(e,b?g.endContainer:g.startContainer);g.deleteContents(),jg(e,b,C.filter(mu));var D=b?n[0]:n[n.length-1];return Gg(e,D,i,b),mu(D)?Q.none():Q.some(b?n.slice(1):n.slice(0,-1))}).getOr(n);return Wg(c),o2(e),!0},S3=function(e,n,a,i){var c=e.selection.getRng(),f=n[0],g=a[a.length-1];Gg(e,f,c,!0),Gg(e,g,c,!1);var b=mu(f)?n:n.slice(1),C=mu(g)?a:a.slice(0,-1);return Wg(b.concat(C)),i.deleteContents(),o2(e),!0},$O=function(e,n,a,i){i===void 0&&(i=!0),n.deleteContents();var c=Ug(a).getOr(a),f=T.fromDom(e.dom.getParent(c.dom,e.dom.isBlock));if(mu(f)&&(xf(f),i&&e.selection.setCursorLocation(f.dom,0)),!Yn(a,f)){var g=wd(Po(f),a)?[]:oi(f);pt(g.concat(Hu(a)),function(b){!Yn(b,f)&&!Ca(b,f)&&mu(b)&&Uo(b)})}return!0},VB=function(e,n){return An(e,!1,n),!0},Kg=function(e,n,a){return Vg(n,a).map(function(i){return i.fold(Mt($O,e),Mt(VB,e),Mt(qg,e),Mt(S3,e))})},UB=function(e,n){return o0(e,n)},tc=function(e,n,a,i){return zO(n,i).fold(function(){return Kg(e,n,a)},function(c){return UB(e,c)}).getOr(!1)},Sa=function(e,n,a){var i=T.fromDom(e.getBody()),c=e.selection.getRng();return a.length!==0?qg(e,a,Q.none()):tc(e,i,c,n)},kf=function(e,n){return ya($l(n,e),Tl)},zO=function(e,n){return ya($l(n,e),mh("caption"))},x3=function(e,n,a,i,c){return Nl(a,e.getBody(),c).bind(function(f){return kf(n,T.fromDom(f.getNode())).map(function(g){return Yn(g,i)===!1})})},o0=function(e,n){return xf(n),e.selection.setCursorLocation(n.dom,0),Q.some(!0)},FO=function(e,n,a,i){return qu(e.dom).bind(function(c){return Lc(e.dom).map(function(f){return n?a.isEqual(c)&&i.isEqual(f):a.isEqual(f)&&i.isEqual(c)})}).getOr(!0)},T3=function(e,n){return o0(e,n)},k3=function(e,n,a){return zO(e,T.fromDom(a.getNode())).map(function(i){return Yn(i,n)===!1})},WB=function(e,n,a,i,c){return Nl(a,e.getBody(),c).bind(function(f){return FO(i,a,c,f)?T3(e,i):k3(n,i,f)}).or(Q.some(!0))},jB=function(e,n,a,i){var c=Ue.fromRangeStart(e.selection.getRng());return kf(a,i).bind(function(f){return mu(f)?o0(e,f):x3(e,a,n,f,c)}).getOr(!1)},LO=function(e,n,a,i){var c=Ue.fromRangeStart(e.selection.getRng());return mu(i)?o0(e,i):WB(e,a,n,i,c)},HO=function(e,n){return e?Ex(n):Yw(n)},dv=function(e,n){var a=Ue.fromRangeStart(e.selection.getRng());return HO(n,a)||Rs(n,e.getBody(),a).exists(function(i){return HO(n,i)})},GB=function(e,n,a){var i=T.fromDom(e.getBody());return zO(i,a).fold(function(){return jB(e,n,i,a)||dv(e,n)},function(c){return LO(e,n,i,c).getOr(!1)})},Lx=function(e,n){var a=T.fromDom(e.selection.getStart(!0)),i=pf(e);return e.selection.isCollapsed()&&i.length===0?GB(e,n,a):Sa(e,a,i)},qB=function(e,n,a,i){var c=document.createRange();return c.setStart(e,n),c.setEnd(a,i),c},VO=function(e){var n=Ue.fromRangeStart(e),a=Ue.fromRangeEnd(e),i=e.commonAncestorContainer;return Rs(!1,i,a).map(function(c){return!Pl(n,a,i)&&Pl(n,c,i)?qB(n.container(),n.offset(),c.container(),c.offset()):e}).getOr(e)},UO=function(e){return e.collapsed?e:VO(e)},KB=function(e){return e.firstChild&&e.firstChild===e.lastChild},WO=function(e){return e.name==="br"||e.value===Ks},XB=function(e,n){var a=e.getBlockElements();return a[n.name]&&KB(n)&&WO(n.firstChild)},YB=function(e,n){var a=e.getNonEmptyElements();return n&&(n.isEmpty(a)||XB(e,n))},E3=function(e,n){var a=n.firstChild,i=n.lastChild;return a&&a.name==="meta"&&(a=a.next),i&&i.attr("id")==="mce_marker"&&(i=i.prev),YB(e,i)&&(i=i.prev),!a||a!==i?!1:a.name==="ul"||a.name==="ol"},JB=function(e){var n=e.firstChild,a=e.lastChild;return n&&n.nodeName==="META"&&n.parentNode.removeChild(n),a&&a.id==="mce_marker"&&a.parentNode.removeChild(a),e},ZB=function(e,n,a){var i=n.serialize(a),c=e.createFragment(i);return JB(c)},Hx=function(e){return bn(e.childNodes,function(n){return n.nodeName==="LI"})},QB=function(e){return e.data===Ks||Va(e)},O3=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&QB(e.firstChild)},A3=function(e){return!e.firstChild||O3(e)},jO=function(e){return e.length>0&&A3(e[e.length-1])?e.slice(0,-1):e},GO=function(e,n){var a=e.getParent(n,e.isBlock);return a&&a.nodeName==="LI"?a:null},eP=function(e,n){return!!GO(e,n)},qO=function(e,n){var a=n.cloneRange(),i=n.cloneRange();return a.setStartBefore(e),i.setEndAfter(e),[a.cloneContents(),i.cloneContents()]},tP=function(e,n){var a=Ue.before(e),i=jo(n),c=i.next(a);return c?c.toRange():null},D3=function(e,n){var a=Ue.after(e),i=jo(n),c=i.prev(a);return c?c.toRange():null},i2=function(e,n,a,i){var c=qO(e,i),f=e.parentNode;return f.insertBefore(c[0],e),je.each(n,function(g){f.insertBefore(g,e)}),f.insertBefore(c[1],e),f.removeChild(e),D3(n[n.length-1],a)},KO=function(e,n,a){var i=e.parentNode;return je.each(n,function(c){i.insertBefore(c,e)}),tP(e,a)},nP=function(e,n,a,i){return i.insertAfter(n.reverse(),e),D3(n[0],a)},rP=function(e,n,a,i){var c=ZB(n,e,i),f=GO(n,a.startContainer),g=jO(Hx(c.firstChild)),b=1,C=2,D=n.getRoot(),I=function(z){var F=Ue.fromRangeStart(a),q=jo(n.getRoot()),X=z===b?q.prev(F):q.next(F);return X?GO(n,X.getNode())!==f:!0};return I(b)?KO(f,g,D):I(C)?nP(f,g,D,n):i2(f,g,D,a)},_3=function(e,n,a){var i=T.fromDom(e.getRoot());return e0(i,Ue.fromRangeStart(n))?a=a.replace(/^ /,"&nbsp;"):a=a.replace(/^&nbsp;/," "),t0(i,Ue.fromRangeEnd(n))?a=a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a=a.replace(/&nbsp;(<br( \/)?>)?$/," "),a},Vx=Em,aP=function(e,n,a){if(a!==null){var i=e.getParent(n.endContainer,Vx);return a===i&&sl(T.fromDom(a),n)}else return!1},oP=function(e,n,a){if(a.getAttribute("data-mce-bogus")==="all")a.parentNode.insertBefore(e.dom.createFragment(n),a);else{var i=a.firstChild,c=a.lastChild;!i||i===c&&i.nodeName==="BR"?e.dom.setHTML(a,n):e.selection.setContent(n)}},iP=function(e,n){Q.from(e.getParent(n,"td,th")).map(T.fromDom).each(Ox)},uP=function(e,n){var a=e.schema.getTextInlineElements(),i=e.dom;if(n){var c=e.getBody(),f=qw(i);je.each(i.select("*[data-mce-fragment]"),function(g){var b=Kt(a[g.nodeName.toLowerCase()]);if(b&&lv(i,g))for(var C=g.parentNode;Kt(C)&&C!==c;C=C.parentNode){var D=Sf(i,g,C);if(D)break;if(f.compare(C,g)){i.remove(g,!0);break}}})}},R3=function(e){for(var n=e;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},M3=function(e){je.each(e.getElementsByTagName("*"),function(n){n.removeAttribute("data-mce-fragment")})},sP=function(e){return!!e.getAttribute("data-mce-fragment")},cP=function(e,n){return n&&!e.schema.getShortEndedElements()[n.nodeName]},lP=function(e,n){var a,i=e.dom,c=e.selection;if(n){c.scrollIntoView(n);var f=em(e.getBody(),n);if(i.getContentEditable(f)==="false"){i.remove(n),c.select(f);return}var g=i.createRng(),b=n.previousSibling;if(un(b)){if(g.setStart(b,b.nodeValue.length),!St.ie){var C=n.nextSibling;un(C)&&(b.appendData(C.data),C.parentNode.removeChild(C))}}else g.setStartBefore(n),g.setEndBefore(n);var D=function(z){var F=Ue.fromRangeStart(z),q=jo(e.getBody());if(F=q.next(F),F)return F.toRange()},I=i.getParent(n,i.isBlock);i.remove(n),I&&i.isEmpty(I)&&(e.$(I).empty(),g.setStart(I,0),g.setEnd(I,0),!Vx(I)&&!sP(I)&&(a=D(g))?(g=a,i.remove(I)):i.add(I,i.create("br",{"data-mce-bogus":"1"}))),c.setRng(g)}},fP=function(e){var n=e.dom,a=UO(e.selection.getRng());e.selection.setRng(a);var i=n.getParent(a.startContainer,Vx);aP(n,a,i)?$O(e,a,T.fromDom(i)):e.getDoc().execCommand("Delete",!1,null)},vP=function(e,n,a){var i,c,f,g=e.selection,b=e.dom;/^ | $/.test(n)&&(n=_3(b,g.getRng(),n));var C=e.parser,D=a.merge,I=sm({validate:bE(e)},e.schema),z='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',F=e.fire("BeforeSetContent",{content:n,format:"html",selection:!0,paste:a.paste});if(F.isDefaultPrevented()){e.fire("SetContent",{content:F.content,format:"html",selection:!0,paste:a.paste});return}n=F.content,n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,z),c=g.getRng();var q=c.startContainer||(c.parentElement?c.parentElement():null),X=e.getBody();q===X&&g.isCollapsed()&&b.isBlock(X.firstChild)&&cP(e,X.firstChild)&&b.isEmpty(X.firstChild)&&(c=b.createRng(),c.setStart(X.firstChild,0),c.setEnd(X.firstChild,0),g.setRng(c)),g.isCollapsed()||fP(e),i=g.getNode();var J={context:i.nodeName.toLowerCase(),data:a.data,insert:!0},ee=C.parse(n,J);if(a.paste===!0&&E3(e.schema,ee)&&eP(b,i)){c=rP(I,b,g.getRng(),ee),g.setRng(c),e.fire("SetContent",F);return}if(R3(ee),f=ee.lastChild,f.attr("id")==="mce_marker"){var ce=f;for(f=f.prev;f;f=f.walk(!0))if(f.type===3||!b.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(ce,f,f.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(i),!J.invalid)n=I.serialize(ee),oP(e,n,i);else{e.selection.setContent(z),i=g.getNode();var se=e.getBody();for(i.nodeType===9?i=f=se:f=i;f!==se;)i=f,f=f.parentNode;n=i===se?se.innerHTML:b.getOuterHTML(i),n=I.serialize(C.parse(n.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return I.serialize(ee)}))),i===se?b.setHTML(se,n):b.setOuterHTML(i,n)}uP(e,D),lP(e,b.get("mce_marker")),M3(e.getBody()),iP(b,g.getStart()),e.fire("SetContent",F),e.addVisual()},XO=function(e,n){n(e),e.firstChild&&XO(e.firstChild,n),e.next&&XO(e.next,n)},u2=function(e,n,a){var i={},c={},f=[];a.firstChild&&XO(a.firstChild,function(C){pt(e,function(D){D.name===C.name&&(i[D.name]?i[D.name].nodes.push(C):i[D.name]={filter:D,nodes:[C]})}),pt(n,function(D){typeof C.attr(D.name)=="string"&&(c[D.name]?c[D.name].nodes.push(C):c[D.name]={filter:D,nodes:[C]})})});for(var g in i)fr(i,g)&&f.push(i[g]);for(var b in c)fr(c,b)&&f.push(c[b]);return f},dP=function(e,n,a){var i=u2(e,n,a);pt(i,function(c){pt(c.filter.callbacks,function(f){f(c.nodes,c.filter.name,{})})})},B3="html",s2=function(e){return e instanceof Wc},mP=function(e){Uc(e)&&qu(e.getBody()).each(function(n){var a=n.getNode(),i=ii(a)?qu(a).getOr(n):n;e.selection.setRng(i.toRange())})},Ux=function(e,n,a){e.dom.setHTML(e.getBody(),n),a!==!0&&mP(e)},P3=function(e,n,a,i){if(a.length===0||/^\s+$/.test(a)){var c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?a="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(a="<li>"+c+"</li>");var f=yu(e);f&&e.schema.isValidChild(n.nodeName.toLowerCase(),f.toLowerCase())?(a=c,a=e.dom.createHTML(f,rg(e),a)):a||(a='<br data-mce-bogus="1">'),Ux(e,a,i.no_selection),e.fire("SetContent",i)}else i.format!=="raw"&&(a=sm({validate:e.validate},e.schema).serialize(e.parser.parse(a,{isRootContent:!0,insert:!0}))),i.content=Sd(T.fromDom(n))?a:je.trim(a),Ux(e,i.content,i.no_selection),i.no_events||e.fire("SetContent",i);return i.content},gP=function(e,n,a,i){dP(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),a);var c=sm({validate:e.validate},e.schema).serialize(a);return i.content=Sd(T.fromDom(n))?c:je.trim(c),Ux(e,i.content,i.no_selection),i.no_events||e.fire("SetContent",i),a},hP=function(e,n){return kn(kn({format:B3},e),{set:!0,content:s2(n)?"":n})},pP=function(e,n,a){var i=hP(a,n),c=a.no_events?i:e.fire("BeforeSetContent",i);return s2(n)||(n=c.content),Q.from(e.getBody()).fold(Y(n),function(f){return s2(n)?gP(e,f,n,c):P3(e,f,n,c)})},bP=function(e,n){return F0(e,n).isSome()},N3=function(e){return ht(e)?e:wt},yP=function(e,n,a){for(var i=e.dom,c=N3(a);i.parentNode;){i=i.parentNode;var f=T.fromDom(i),g=n(f);if(g.isSome())return g;if(c(f))break}return Q.none()},YO=function(e,n,a){var i=n(e),c=N3(a);return i.orThunk(function(){return c(e)?Q.none():yP(e,n,c)})},JO=aw,I3=function(e,n,a){var i=e.formatter.get(a);if(i)for(var c=0;c<i.length;c++){var f=i[c];if(Qs(f)&&f.inherit===!1&&e.dom.is(n,f.selector))return!0}return!1},ZO=function(e,n,a,i,c){var f=e.dom.getRoot();return n===f?!1:(n=e.dom.getParent(n,function(g){return I3(e,g,a)?!0:g.parentNode===f||!!Xu(e,g,a,i,!0)}),!!Xu(e,n,a,i,c))},QO=function(e,n,a){if(JO(n,a.inline)||JO(n,a.block))return!0;if(a.selector)return n.nodeType===1&&e.is(n,a.selector)},Wx=function(e,n,a,i,c,f){var g=a[i];if(ht(a.onmatch))return a.onmatch(n,a,i);if(g){if(ke(g.length)){for(var b in g)if(fr(g,b)){var C=i==="attributes"?e.getAttrib(n,b):xg(e,n,b),D=gf(g[b],f),I=Vt(C)||lu(C);if(I&&Vt(D))continue;if(c&&I&&!a.exact||(!c||a.exact)&&!JO(C,ow(e,D,b)))return!1}}else for(var z=0;z<g.length;z++)if(i==="attributes"?e.getAttrib(n,g[z]):xg(e,n,g[z]))return!0}return!0},Xu=function(e,n,a,i,c){var f=e.formatter.get(a),g=e.dom;if(f&&n)for(var b=0;b<f.length;b++){var C=f[b];if(QO(e.dom,n,C)&&Wx(g,n,C,"attributes",c,i)&&Wx(g,n,C,"styles",c,i)){var D=C.classes;if(D){for(var I=0;I<D.length;I++)if(!e.dom.hasClass(n,gf(D[I],i)))return}return C}}},c2=function(e,n,a,i,c){if(i)return ZO(e,i,n,a,c);if(i=e.selection.getNode(),ZO(e,i,n,a,c))return!0;var f=e.selection.getStart();return!!(f!==i&&ZO(e,f,n,a,c))},e4=function(e,n,a){var i=[],c={},f=e.selection.getStart();return e.dom.getParent(f,function(g){for(var b=0;b<n.length;b++){var C=n[b];!c[C]&&Xu(e,g,C,a)&&(c[C]=!0,i.push(C))}},e.dom.getRoot()),i},t4=function(e,n){var a=function(c){return Yn(c,T.fromDom(e.getBody()))},i=function(c,f){return Xu(e,c.dom,f)?Q.some(f):Q.none()};return Q.from(e.selection.getStart(!0)).bind(function(c){return YO(T.fromDom(c),function(f){return Ie(n,function(g){return i(f,g)})},a)}).getOrNull()},wP=function(e,n){var a=e.formatter.get(n),i=e.dom;if(a)for(var c=e.selection.getStart(),f=Qh(i,c),g=a.length-1;g>=0;g--){var b=a[g];if(!Qs(b)||Kt(b.defaultBlock))return!0;for(var C=f.length-1;C>=0;C--)if(i.is(f[C],b.selector))return!0}return!1},$3=function(e,n,a){return ta(a,function(i,c){var f=ES(e,c);return e.formatter.matchNode(n,c,{},f)?i.concat([c]):i},[])},i0=Se,n4="_mce_caret",r4=function(e,n){return e.importNode(n,!0)},CP=function(e){for(var n=[];e;){if(e.nodeType===3&&e.nodeValue!==i0||e.childNodes.length>1)return[];e.nodeType===1&&n.push(e),e=e.firstChild}return n},a4=function(e){return CP(e).length>0},z3=function(e){if(e){var n=new Ta(e,e);for(e=n.current();e;e=n.next())if(un(e))return e}return null},Cp=function(e){var n=T.fromTag("span");return $(n,{id:n4,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Di(n,T.fromText(i0)),n},F3=function(e){var n=z3(e);return n&&n.nodeValue.charAt(0)===i0&&n.deleteData(0,1),n},o4=function(e,n,a){a===void 0&&(a=!0);var i=e.dom,c=e.selection;if(a4(n))An(e,!1,T.fromDom(n),a);else{var f=c.getRng(),g=i.getParent(n,i.isBlock),b=f.startContainer,C=f.startOffset,D=f.endContainer,I=f.endOffset,z=F3(n);i.remove(n,!0),b===z&&C>0&&f.setStart(z,C-1),D===z&&I>0&&f.setEnd(z,I-1),g&&i.isEmpty(g)&&xf(T.fromDom(g)),c.setRng(f)}},jx=function(e,n,a){a===void 0&&(a=!0);var i=e.dom,c=e.selection;if(n)o4(e,n,a);else if(n=Xd(e.getBody(),c.getStart()),!n)for(;n=i.get(n4);)o4(e,n,!1)},SP=function(e,n,a){var i=e.dom,c=i.getParent(a,Mt(rw,e));c&&i.isEmpty(c)?a.parentNode.replaceChild(n,a):(Jw(T.fromDom(a)),i.isEmpty(a)?a.parentNode.replaceChild(n,a):i.insertAfter(n,a))},L3=function(e,n){return e.appendChild(n),n},H3=function(e,n){var a=Yr(e,function(i,c){return L3(i,c.cloneNode(!1))},n);return L3(a,a.ownerDocument.createTextNode(i0))},xP=function(e,n,a,i,c,f){var g=e.formatter,b=e.dom,C=bn(Xt(g.get()),function(F){return F!==i&&!Ur(F,"removeformat")}),D=$3(e,a,C),I=bn(D,function(F){return!KE(e,F,i)});if(I.length>0){var z=a.cloneNode(!1);return b.add(n,z),g.remove(i,c,z,f),b.remove(z),Q.some(z)}else return Q.none()},TP=function(e,n,a){var i,c,f=e.selection,g=f.getRng(),b=g.startOffset,C=g.startContainer,D=C.nodeValue;i=Xd(e.getBody(),f.getStart()),i&&(c=z3(i));var I=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(D&&b>0&&b<D.length&&I.test(D.charAt(b))&&I.test(D.charAt(b-1))){var z=f.getBookmark();g.collapse(!0);var F=Qv(e,g,e.formatter.get(n));F=uv(F),e.formatter.apply(n,a,F),f.moveToBookmark(z)}else(!i||c.nodeValue!==i0)&&(i=r4(e.getDoc(),Cp(!0).dom),c=i.firstChild,g.insertNode(i),b=1),e.formatter.apply(n,a,i),f.setCursorLocation(c,b)},V3=function(e,n,a,i){var c=e.dom,f=e.selection,g,b,C,D=[],I=f.getRng(),z=I.startContainer,F=I.startOffset;for(b=z,z.nodeType===3&&(F!==z.nodeValue.length&&(g=!0),b=b.parentNode);b;){if(Xu(e,b,n,a,i)){C=b;break}b.nextSibling&&(g=!0),D.push(b),b=b.parentNode}if(C)if(g){var q=f.getBookmark();I.collapse(!0);var X=Qv(e,I,e.formatter.get(n),!0);X=uv(X),e.formatter.remove(n,a,X,i),f.moveToBookmark(q)}else{var J=Xd(e.getBody(),C),ee=Cp(!1).dom;SP(e,ee,J!==null?J:C);var ce=xP(e,ee,C,n,a,i),se=H3(D.concat(ce.toArray()),ee);o4(e,J,!1),f.setCursorLocation(se,1),c.isEmpty(C)&&c.remove(C)}},kP=function(e,n){var a=e.selection,i=e.getBody();jx(e,null,!1),(n===8||n===46)&&a.isCollapsed()&&a.getStart().innerHTML===i0&&jx(e,Xd(i,a.getStart())),(n===37||n===39)&&jx(e,Xd(i,a.getStart()))},i4=function(e){e.on("mouseup keydown",function(n){kP(e,n.keyCode)})},u0=function(e,n){var a=Cp(!1),i=H3(n,a.dom);return fu(T.fromDom(e),a),Uo(T.fromDom(e)),Ue(i,0)},EP=function(e,n){var a=e.schema.getTextInlineElements();return fr(a,ca(n))&&!mf(n.dom)&&!Jo(n.dom)},OP=function(e){return mf(e.dom)&&a4(e.dom)},Sp={},Gx=di,U3=Ko,AP=function(e,n){var a=Sp[e];a||(Sp[e]=[]),Sp[e].push(n)},W3=function(e,n){U3(Sp[e],function(a){a(n)})};AP("pre",function(e){var n=e.selection.getRng(),a,i=function(g){return f(g.previousSibling)&&Ho(a,g.previousSibling)!==-1},c=function(g,b){br(b).remove(),br(g).append("<br><br>").append(b.childNodes)},f=vc(["pre"]);n.collapsed||(a=e.selection.getSelectedBlocks(),U3(Gx(Gx(a,f),i),function(g){c(g.previousSibling,g)}))});var l2=je.each,u4=function(e){return Qn(e)&&!Ms(e)&&!mf(e)&&!Jo(e)},f2=function(e,n){for(var a=e;a;a=a[n]){if(un(a)&&ri(a.data))return e;if(Qn(a)&&!Ms(a))return a}return e},vd=function(e,n,a){var i=qw(e);if(n&&a&&(n=f2(n,"previousSibling"),a=f2(a,"nextSibling"),i.compare(n,a))){for(var c=n.nextSibling;c&&c!==a;){var f=c;c=c.nextSibling,n.appendChild(f)}return e.remove(a),je.each(je.grep(a.childNodes),function(g){n.appendChild(g)}),n}return a},j3=function(e,n,a,i){if(i&&n.merge_siblings!==!1){var c=vd(e,wb(i),i);vd(e,c,wb(c,!0))}},s4=function(e,n,a){if(n.clear_child_styles){var i=n.links?"*:not(a)":"*";l2(e.select(i,a),function(c){u4(c)&&l2(n.styles,function(f,g){e.setStyle(c,g,"")})})}},c4=function(e,n,a){l2(e.childNodes,function(i){u4(i)&&(n(i)&&a(i),i.hasChildNodes()&&c4(i,n,a))})},DP=function(e,n){n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},G3=function(e,n){return function(a){return!!(a&&xg(e,a,n))}},q3=function(e,n,a){return function(i){e.setStyle(i,n,a),i.getAttribute("style")===""&&i.removeAttribute("style"),DP(e,i)}},s0=In.generate([{keep:[]},{rename:["name"]},{removed:[]}]),_P=/^(src|href|style)$/,Xg=je.each,c0=aw,RP=function(e){return/^(TR|TH|TD)$/.test(e.nodeName)},K3=function(e,n,a){return e.isChildOf(n,a)&&n!==a&&!e.isBlock(a)},X3=function(e,n,a){var i=n[a?"startContainer":"endContainer"],c=n[a?"startOffset":"endOffset"];if(Qn(i)){var f=i.childNodes.length-1;!a&&c&&c--,i=i.childNodes[c>f?f:c]}return un(i)&&a&&c>=i.nodeValue.length&&(i=new Ta(i,e.getBody()).next()||i),un(i)&&!a&&c===0&&(i=new Ta(i,e.getBody()).prev()||i),i},l4=function(e,n){var a=n?"firstChild":"lastChild";if(RP(e)&&e[a]){var i=e[a];return e.nodeName==="TR"&&i[a]||i}return e},f4=function(e,n,a,i){var c=e.create(a,i);return n.parentNode.insertBefore(c,n),c.appendChild(n),c},Y3=function(e,n,a,i,c){var f=T.fromDom(n),g=T.fromDom(e.create(i,c)),b=a?ro(f):la(f);return zf(g,b),a?(fu(f,g),Pc(g,f)):(kv(f,g),Di(g,f)),g.dom},MP=function(e,n,a){if(Cu(a)&&c0(n,a.inline)||hf(a)&&c0(n,a.block))return!0;if(Qs(a))return Qn(n)&&e.is(n,a.selector)},BP=function(e,n){return n.links&&e.nodeName==="A"},qx=function(e,n,a,i){var c=wb(n,a,i);return Vt(c)||c.nodeName==="BR"||e.isBlock(c)},PP=function(e,n,a){var i=n.parentNode,c,f=e.dom,g=yu(e);hf(a)&&(g?i===f.getRoot()&&(!a.list_block||!c0(n,a.list_block))&&pt(Pr(n.childNodes),function(b){Sg(e,g,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=f4(f,b,g),f.setAttribs(c,e.settings.forced_root_block_attrs)):c=null}):f.isBlock(n)&&!f.isBlock(i)&&(!qx(f,n,!1)&&!qx(f,n.firstChild,!0,!0)&&n.insertBefore(f.create("br"),n.firstChild),!qx(f,n,!0)&&!qx(f,n.lastChild,!1,!0)&&n.appendChild(f.create("br")))),!(XE(a)&&!c0(a.inline,n))&&f.remove(n,!0)},J3=function(e,n,a,i,c){var f,g=e.dom;if(!MP(g,i,n)&&!BP(i,n))return s0.keep();var b=i;if(Cu(n)&&n.remove==="all"&&qt(n.preserve_attributes)){var C=bn(g.getAttribs(b),function(F){return Nt(n.preserve_attributes,F.name.toLowerCase())});if(g.removeAllAttribs(b),pt(C,function(F){return g.setAttrib(b,F.name,F.value)}),C.length>0)return s0.rename("span")}if(n.remove!=="all"){Xg(n.styles,function(F,q){F=ow(g,gf(F,a),q+""),$t(q)&&(q=F,c=null),(n.remove_similar||!c||c0(xg(g,c,q),F))&&g.setStyle(b,q,""),f=!0}),f&&g.getAttrib(b,"style")===""&&(b.removeAttribute("style"),b.removeAttribute("data-mce-style")),Xg(n.attributes,function(F,q){var X;if(F=gf(F,a),$t(q)&&(q=F,c=null),n.remove_similar||!c||c0(g.getAttrib(c,q),F)){if(q==="class"&&(F=g.getAttrib(b,q),F&&(X="",pt(F.split(/\s+/),function(J){/mce\-\w+/.test(J)&&(X+=(X?" ":"")+J)}),X))){g.setAttrib(b,q,X);return}if(_P.test(q)&&b.removeAttribute("data-mce-"+q),q==="style"&&vc(["li"])(b)&&g.getStyle(b,"list-style-type")==="none"){b.removeAttribute(q),g.setStyle(b,"list-style-type","none");return}q==="class"&&b.removeAttribute("className"),b.removeAttribute(q)}}),Xg(n.classes,function(F){F=gf(F,a),(!c||g.hasClass(c,F))&&g.removeClass(b,F)});for(var D=g.getAttribs(b),I=0;I<D.length;I++){var z=D[I].nodeName;if(z.indexOf("_")!==0&&z.indexOf("data-")!==0)return s0.keep()}}return n.remove!=="none"?(PP(e,b,n),s0.removed()):s0.keep()},l0=function(e,n,a,i,c){return J3(e,n,a,i,c).fold(wt,function(f){return e.dom.rename(i,f),!0},jt)},NP=function(e,n,a,i,c){var f;return pt(Qh(e.dom,n.parentNode).reverse(),function(g){if(!f&&g.id!=="_start"&&g.id!=="_end"){var b=Xu(e,g,a,i,c);b&&b.split!==!1&&(f=g)}}),f},IP=function(e,n,a,i){return J3(e,n,a,i,i).fold(Y(i),function(c){var f=e.dom.createFragment();return f.appendChild(i),e.dom.rename(i,c)},Y(null))},v4=function(e,n,a,i,c,f,g,b){var C,D,I,z=e.dom;if(a){for(var F=a.parentNode,q=i.parentNode;q&&q!==F;q=q.parentNode){C=z.clone(q,!1);for(var X=0;X<n.length&&(C=IP(e,n[X],b,C),C!==null);X++);C&&(D&&C.appendChild(D),I||(I=C),D=C)}f&&(!g.mixed||!z.isBlock(a))&&(i=z.split(a,i)),D&&(c.parentNode.insertBefore(D,c),I.appendChild(c),Cu(g)&&j3(z,g,b,D))}return i},d4=function(e,n,a,i,c){var f=e.formatter.get(n),g=f[0],b=!0,C=e.dom,D=e.selection,I=function(se){var Ae=NP(e,se,n,a,c);return v4(e,f,Ae,se,se,!0,g,a)},z=function(se){return Ms(se)&&Qn(se)&&(se.id==="_start"||se.id==="_end")},F=function(se){return Dn(f,function(Ae){return l0(e,Ae,a,se,se)})},q=function(se){var Ae=!0,Ee=!1;Qn(se)&&C.getContentEditable(se)&&(Ae=b,b=C.getContentEditable(se)==="true",Ee=!0);var me=Pr(se.childNodes);if(b&&!Ee){var _e=F(se),et=_e||Dn(f,function(st){return QO(C,se,st)}),bt=se.parentNode;!et&&Kt(bt)&&uw(g)&&F(bt)}if(g.deep&&me.length){for(var Xn=0;Xn<me.length;Xn++)q(me[Xn]);Ee&&(b=Ae)}var an=["underline","line-through","overline"];pt(an,function(st){Qn(se)&&e.dom.getStyle(se,"text-decoration")===st&&se.parentNode&&iw(C,se.parentNode)===st&&l0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:st}},null,se)})},X=function(se){var Ae=C.get(se?"_start":"_end"),Ee=Ae[se?"firstChild":"lastChild"];return z(Ee)&&(Ee=Ee[se?"firstChild":"lastChild"]),un(Ee)&&Ee.data.length===0&&(Ee=se?Ae.previousSibling||Ae.nextSibling:Ae.nextSibling||Ae.previousSibling),C.remove(Ae,!0),Ee},J=function(se){var Ae,Ee,me=Qv(e,se,f,se.collapsed);if(g.split){if(me=uv(me),Ae=X3(e,me,!0),Ee=X3(e,me),Ae!==Ee){if(Ae=l4(Ae,!0),Ee=l4(Ee,!1),K3(C,Ae,Ee)){var _e=Q.from(Ae.firstChild).getOr(Ae);I(Y3(C,_e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),X(!0);return}if(K3(C,Ee,Ae)){var _e=Q.from(Ee.lastChild).getOr(Ee);I(Y3(C,_e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),X(!1);return}Ae=f4(C,Ae,"span",{id:"_start","data-mce-type":"bookmark"}),Ee=f4(C,Ee,"span",{id:"_end","data-mce-type":"bookmark"});var et=C.createRng();et.setStartAfter(Ae),et.setEndBefore(Ee),np(C,et,function(bt){pt(bt,function(Xn){!Ms(Xn)&&!Ms(Xn.parentNode)&&I(Xn)})}),I(Ae),I(Ee),Ae=X(!0),Ee=X()}else Ae=Ee=I(Ae);me.startContainer=Ae.parentNode?Ae.parentNode:Ae,me.startOffset=C.nodeIndex(Ae),me.endContainer=Ee.parentNode?Ee.parentNode:Ee,me.endOffset=C.nodeIndex(Ee)+1}np(C,me,function(bt){pt(bt,q)})};if(i){if(yb(i)){var ee=C.createRng();ee.setStartBefore(i),ee.setEndAfter(i),J(ee)}else J(i);rp(e,n,i,a);return}if(C.getContentEditable(D.getNode())==="false"){i=D.getNode();for(var ce=0;ce<f.length&&!(f[ce].ceFalseOverride&&l0(e,f[ce],a,i,i));ce++);rp(e,n,i,a);return}!D.isCollapsed()||!Cu(g)||pf(e).length?(Og(D,!0,function(){Qd(e,J)}),Cu(g)&&c2(e,n,a,D.getStart())&&kS(C,D,D.getRng()),e.nodeChanged()):V3(e,n,a,c),rp(e,n,i,a)},Z3=je.each,Kx=function(e,n,a,i){var c=function(f){if(f.nodeType===1&&f.parentNode&&f.parentNode.nodeType===1){var g=iw(e,f.parentNode);e.getStyle(f,"color")&&g?e.setStyle(f,"text-decoration",g):e.getStyle(f,"text-decoration")===g&&e.setStyle(f,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(je.walk(i,c,"childNodes"),c(i))},Q3=function(e,n,a,i){n.styles&&n.styles.backgroundColor&&c4(i,G3(e,"fontSize"),q3(e,"backgroundColor",gf(n.styles.backgroundColor,a)))},v2=function(e,n,a,i){Cu(n)&&(n.inline==="sub"||n.inline==="sup")&&(c4(i,G3(e,"fontSize"),q3(e,"fontSize","")),e.remove(e.select(n.inline==="sup"?"sub":"sup",i),!0))},d2=function(e,n,a,i){Z3(n,function(c){Cu(c)&&Z3(e.dom.select(c.inline,i),function(f){u4(f)&&l0(e,c,a,f,c.exact?f:null)}),s4(e.dom,c,i)})},eD=function(e,n,a,i,c){Xu(e,c.parentNode,a,i)&&l0(e,n,i,c)||n.merge_with_parents&&e.dom.getParent(c.parentNode,function(f){if(Xu(e,f,a,i))return l0(e,n,i,c),!0})},Xx=je.each,$P=function(e){return Qn(e)&&!Ms(e)&&!mf(e)&&!Jo(e)},zP=function(e,n,a,i){if(jd(e)&&Cu(n)){var c=m1(e.schema),f=bP(T.fromDom(a),function(g){return mf(g.dom)});return So(c,i)&&mu(T.fromDom(a.parentNode),!1)&&!f}else return!1},m4=function(e,n,a,i){var c=e.formatter.get(n),f=c[0],g=!i&&e.selection.isCollapsed(),b=e.dom,C=e.selection,D=function(Ae,Ee){if(Ee===void 0&&(Ee=f),ht(Ee.onformat)&&Ee.onformat(Ae,Ee,a,i),Xx(Ee.styles,function(_e,et){b.setStyle(Ae,et,gf(_e,a))}),Ee.styles){var me=b.getAttrib(Ae,"style");me&&b.setAttrib(Ae,"data-mce-style",me)}Xx(Ee.attributes,function(_e,et){b.setAttrib(Ae,et,gf(_e,a))}),Xx(Ee.classes,function(_e){_e=gf(_e,a),b.hasClass(Ae,_e)||b.addClass(Ae,_e)})},I=function(Ae,Ee){var me=!1;return Xx(Ae,function(_e){if(!Qs(_e))return!1;if(!(Kt(_e.collapsed)&&_e.collapsed!==g)&&b.is(Ee,_e.selector)&&!mf(Ee))return D(Ee,_e),me=!0,!1}),me},z=function(Ae){if(Tt(Ae)){var Ee=b.create(Ae);return D(Ee),Ee}else return null},F=function(Ae,Ee,me){var _e=[],et=!0,bt=f.inline||f.block,Xn=z(bt);np(Ae,Ee,function(an){var st,qn=function(xt){var tn=!1,Et=et,Pt=xt.nodeName.toLowerCase(),vn=xt.parentNode,ft=vn.nodeName.toLowerCase();if(Qn(xt)&&Ae.getContentEditable(xt)&&(Et=et,et=Ae.getContentEditable(xt)==="true",tn=!0),Va(xt)&&!zP(e,f,xt,ft)){st=null,hf(f)&&Ae.remove(xt);return}if(hf(f)&&f.wrapper&&Xu(e,xt,n,a)){st=null;return}if(et&&!tn&&hf(f)&&!f.wrapper&&rw(e,Pt)&&Sg(e,ft,bt)){var on=Ae.rename(xt,bt);D(on),_e.push(on),st=null;return}if(Qs(f)){var Hr=I(c,xt);if(!Hr&&Kt(vn)&&uw(f)&&(Hr=I(c,vn)),!Cu(f)||Hr){st=null;return}}et&&!tn&&Sg(e,bt,Pt)&&Sg(e,ft,bt)&&!(!me&&un(xt)&&ss(xt.data))&&!mf(xt)&&(!Cu(f)||!Ae.isBlock(xt))?(st||(st=Ae.clone(Xn,!1),xt.parentNode.insertBefore(st,xt),_e.push(st)),st.appendChild(xt)):(st=null,pt(Pr(xt.childNodes),qn),tn&&(et=Et),st=null)};pt(an,qn)}),f.links===!0&&pt(_e,function(an){var st=function(qn){qn.nodeName==="A"&&D(qn,f),pt(Pr(qn.childNodes),st)};st(an)}),pt(_e,function(an){var st=function(tn){var Et=0;return pt(tn.childNodes,function(Pt){!qE(Pt)&&!Ms(Pt)&&Et++}),Et},qn=function(tn){var Et=ya(tn.childNodes,$P).filter(function(Pt){return QO(Ae,Pt,f)});return Et.map(function(Pt){var vn=Ae.clone(Pt,!1);return D(vn),Ae.replace(vn,tn,!0),Ae.remove(Pt,!0),vn}).getOr(tn)},xt=st(an);if((_e.length>1||!Ae.isBlock(an))&&xt===0){Ae.remove(an,!0);return}(Cu(f)||hf(f)&&f.wrapper)&&(!f.exact&&xt===1&&(an=qn(an)),d2(e,c,a,an),eD(e,f,n,a,an),Q3(Ae,f,a,an),Kx(Ae,f,a,an),v2(Ae,f,a,an),j3(Ae,f,a,an))})};if(b.getContentEditable(C.getNode())==="false"){i=C.getNode();for(var q=0,X=c.length;q<X;q++){var J=c[q];if(J.ceFalseOverride&&Qs(J)&&b.is(i,J.selector)){D(i,J);break}}Cw(e,n,i,a);return}if(f){if(i)if(yb(i)){if(!I(c,i)){var ee=b.createRng();ee.setStartBefore(i),ee.setEndAfter(i),F(b,Qv(e,ee,c),!0)}}else F(b,i,!0);else if(!g||!Cu(f)||pf(e).length){var ce=C.getNode(),se=c[0];!e.settings.forced_root_block&&se.defaultBlock&&!b.getParent(ce,b.isBlock)&&m4(e,se.defaultBlock),C.setRng(UO(C.getRng())),Og(C,!0,function(){Qd(e,function(Ae,Ee){var me=Ee?Ae:Qv(e,Ae,c);F(b,me,!1)})}),kS(b,C,C.getRng()),e.nodeChanged()}else TP(e,n,a);W3(n,e)}Cw(e,n,i,a)},tD=function(e){return fr(e,"vars")},FP=function(e,n){e.set({}),n.on("NodeChange",function(a){f0(n,a.element,e.get())}),n.on("FormatApply FormatRemove",function(a){var i=Q.from(a.node).map(function(c){return yb(c)?c:c.startContainer}).bind(function(c){return Qn(c)?Q.some(c):Q.from(c.parentElement)}).getOrThunk(function(){return nD(n)});f0(n,i,e.get())})},nD=function(e){return e.selection.getStart()},g4=function(e,n,a,i,c){var f=function(b){var C=e.formatter.matchNode(b,a,c??{},i);return!ke(C)},g=function(b){return I3(e,b,a)?!0:i?!1:Kt(e.formatter.matchNode(b,a,c,!0))};return Nn(n,f,g)},rD=function(e,n){var a=n??nD(e);return bn(Qh(e.dom,a),function(i){return Qn(i)&&!Jo(i)})},f0=function(e,n,a){var i=rD(e,n);Zt(a,function(c,f){var g=function(b){var C=g4(e,i,f,b.similar,tD(b)?b.vars:void 0),D=C.isSome();if(b.state.get()!==D){b.state.set(D);var I=C.getOr(n);tD(b)?b.callback(D,{node:I,format:f,parents:i}):pt(b.callbacks,function(z){return z(D,{node:I,format:f,parents:i})})}};pt([c.withSimilar,c.withoutSimilar],g),pt(c.withVars,g)})},LP=function(e,n,a,i,c,f){var g=n.get();pt(a.split(","),function(b){var C=Ir(g,b).getOrThunk(function(){var z={withSimilar:{state:fs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:fs(!1),similar:!1,callbacks:[]},withVars:[]};return g[b]=z,z}),D=function(){var z=rD(e);return g4(e,z,b,c,f).isSome()};if(ke(f)){var I=c?C.withSimilar:C.withoutSimilar;I.callbacks.push(i),I.callbacks.length===1&&I.state.set(D())}else C.withVars.push({state:fs(D()),similar:c,vars:f,callback:i})}),n.set(g)},HP=function(e,n,a){var i=e.get();pt(n.split(","),function(c){return Ir(i,c).each(function(f){i[c]={withSimilar:kn(kn({},f.withSimilar),{callbacks:bn(f.withSimilar.callbacks,function(g){return g!==a})}),withoutSimilar:kn(kn({},f.withoutSimilar),{callbacks:bn(f.withoutSimilar.callbacks,function(g){return g!==a})}),withVars:bn(f.withVars,function(g){return g.callback!==a})}})}),e.set(i)},VP=function(e,n,a,i,c,f){return n.get()===null&&FP(n,e),LP(e,n,a,i,c,f),{unbind:function(){return HP(n,a,i)}}},UP=function(e,n,a,i){var c=e.formatter.get(n);c2(e,n,a,i)&&(!("toggle"in c[0])||c[0].toggle)?d4(e,n,a,i):m4(e,n,a,i)},Yx=function(e,n){var a=n||document,i=a.createDocumentFragment();return pt(e,function(c){i.appendChild(c.dom)}),T.fromDom(i)},Jx=function(e,n,a){return{element:e,width:n,rows:a}},h4=function(e,n){return{element:e,cells:n}},aD=function(e,n){return{x:e,y:n}},Zx=function(e,n){var a=parseInt(U(e,n),10);return isNaN(a)?1:a},oD=function(e,n,a,i,c){for(var f=Zx(c,"rowspan"),g=Zx(c,"colspan"),b=e.rows,C=a;C<a+f;C++){b[C]||(b[C]=h4(L1(i),[]));for(var D=n;D<n+g;D++){var I=b[C].cells;I[D]=C===a&&D===n?c:wi(c)}}},WP=function(e,n,a){var i=e.rows,c=i[a]?i[a].cells:[];return!!c[n]},jP=function(e,n,a){for(;WP(e,n,a);)n++;return n},iD=function(e){return ta(e,function(n,a){return a.cells.length>n?a.cells.length:n},0)},uD=function(e,n){for(var a=e.rows,i=0;i<a.length;i++)for(var c=a[i].cells,f=0;f<c.length;f++)if(Yn(c[f],n))return Q.some(aD(f,i));return Q.none()},sD=function(e,n,a,i,c){for(var f=[],g=e.rows,b=a;b<=c;b++){var C=g[b].cells,D=n<i?C.slice(n,i+1):C.slice(i,n+1);f.push(h4(g[b].element,D))}return f},p4=function(e,n,a){var i=n.x,c=n.y,f=a.x,g=a.y,b=c<g?sD(e,i,c,f,g):sD(e,i,g,f,c);return Jx(e.element,iD(b),b)},b4=function(e,n){var a=wi(e.element),i=T.fromTag("tbody");return zf(i,n),Di(a,i),a},cD=function(e){return $n(e.rows,function(n){var a=$n(n.cells,function(c){var f=L1(c);return Xe(f,"colspan"),Xe(f,"rowspan"),f}),i=wi(n.element);return zf(i,a),i})},Qx=function(e){var n=Jx(wi(e),0,[]);return pt(bu(e,"tr"),function(a,i){pt(bu(a,"td,th"),function(c,f){oD(n,jP(n,f,i),i,a,c)})}),Jx(n.element,iD(n.rows),n.rows)},vl=function(e){return b4(e,cD(e))},m2=function(e,n,a){return uD(e,n).bind(function(i){return uD(e,a).map(function(c){return p4(e,i,c)})})},xp=function(e){return ya(e,function(n){return ca(n)==="ul"||ca(n)==="ol"})},GP=function(e,n){return ya(e,function(a){return ca(a)==="li"&&sl(a,n)}).fold(Y([]),function(a){return xp(e).map(function(i){var c=T.fromTag(ca(i)),f=wa(No(i),function(g,b){return xr(b,"list-style")});return jr(c,f),[T.fromTag("li"),c]}).getOr([])})},lD=function(e,n){var a=ta(n,function(i,c){return Di(c,i),c},e);return n.length>0?Yx([a]):a},fD=function(e){return Mu(e)?Po(e).filter(el).fold(Y([]),function(n){return[e,n]}):el(e)?[e]:[]},qP=function(e,n){var a=T.fromDom(n.commonAncestorContainer),i=$l(a,e),c=bn(i,function(b){return Uu(b)||er(b)}),f=GP(i,n),g=c.concat(f.length?f:fD(a));return $n(g,wi)},vD=function(){return Yx([])},KP=function(e,n){return lD(T.fromDom(n.cloneContents()),qP(e,n))},dD=function(e,n){return Cd(n,"table",Mt(Yn,e))},eT=function(e,n){return dD(e,n[0]).bind(function(a){var i=n[0],c=n[n.length-1],f=Qx(a);return m2(f,i,c).map(function(g){return Yx([vl(g)])})}).getOrThunk(vD)},mD=function(e,n){return n.length>0&&n[0].collapsed?vD():KP(e,n[0])},gD=function(e,n){var a=iv(n,e);return a.length>0?eT(e,a):mD(e,n)},tT=function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")},nT=function(e,n){return n>=0&&n<e.length&&Zv(e.charAt(n))},hD=function(e,n){var a=kl(e.innerText);return n?tT(a):a},XP=function(e){return e.map(function(n){return n.nodeName}).getOr("div").toLowerCase()},YP=function(e){return Q.from(e.selection.getRng()).map(function(n){var a=Q.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),c=XP(a),f=St.browser.isIE()&&c!=="pre",g=e.dom.add(i,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},n.cloneContents()),b=hD(g,f),C=kl(g.textContent);if(e.dom.remove(g),nT(C,0)||nT(C,C.length-1)){var D=a.getOr(i),I=hD(D,f),z=I.indexOf(b);if(z===-1)return b;var F=nT(I,z-1),q=nT(I,z+b.length);return(F?" ":"")+b+(q?" ":"")}else return b}).getOr("")},JP=function(e,n){var a=e.selection.getRng(),i=e.dom.create("body"),c=e.selection.getSel(),f=Vb(e,fw(c)),g=n.contextual?gD(T.fromDom(e.getBody()),f).dom:a.cloneContents();return g&&i.appendChild(g),e.selection.serializer.serialize(i,n)},ZP=function(e,n){return kn(kn({},e),{format:n,get:!0,selection:!0})},QP=function(e,n,a){a===void 0&&(a={});var i=ZP(a,n),c=e.fire("BeforeGetContent",i);if(c.isDefaultPrevented())return e.fire("GetContent",c),c.content;if(c.format==="text")return YP(e);c.getInner=!0;var f=JP(e,c);return c.format==="tree"?f:(c.content=e.selection.isCollapsed()?"":f,e.fire("GetContent",c),c.content)},y4=0,pD=1,bD=2,e5=function(e,n){var a=e.length+n.length+2,i=new Array(a),c=new Array(a),f=function(I,z,F){return{start:I,end:z,diag:F}},g=function(I,z,F,q,X){var J=C(I,z,F,q);if(J===null||J.start===z&&J.diag===z-q||J.end===I&&J.diag===I-F)for(var ee=I,ce=F;ee<z||ce<q;)ee<z&&ce<q&&e[ee]===n[ce]?(X.push([y4,e[ee]]),++ee,++ce):z-I>q-F?(X.push([bD,e[ee]]),++ee):(X.push([pD,n[ce]]),++ce);else{g(I,J.start,F,J.start-J.diag,X);for(var se=J.start;se<J.end;++se)X.push([y4,e[se]]);g(J.end,z,J.end-J.diag,q,X)}},b=function(I,z,F,q){for(var X=I;X-z<q&&X<F&&e[X]===n[X-z];)++X;return f(I,X,z)},C=function(I,z,F,q){var X=z-I,J=q-F;if(X===0||J===0)return null;var ee=X-J,ce=J+X,se=(ce%2===0?ce:ce+1)/2;i[1+se]=I,c[1+se]=z+1;var Ae,Ee,me,_e,et;for(Ae=0;Ae<=se;++Ae){for(Ee=-Ae;Ee<=Ae;Ee+=2){for(me=Ee+se,Ee===-Ae||Ee!==Ae&&i[me-1]<i[me+1]?i[me]=i[me+1]:i[me]=i[me-1]+1,_e=i[me],et=_e-I+F-Ee;_e<z&&et<q&&e[_e]===n[et];)i[me]=++_e,++et;if(ee%2!==0&&ee-Ae<=Ee&&Ee<=ee+Ae&&c[me-ee]<=i[me])return b(c[me-ee],Ee+I-F,z,q)}for(Ee=ee-Ae;Ee<=ee+Ae;Ee+=2){for(me=Ee+se-ee,Ee===ee-Ae||Ee!==ee+Ae&&c[me+1]<=c[me-1]?c[me]=c[me+1]-1:c[me]=c[me-1],_e=c[me]-1,et=_e-I+F-Ee;_e>=I&&et>=F&&e[_e]===n[et];)c[me]=_e--,et--;if(ee%2===0&&-Ae<=Ee&&Ee<=Ae&&c[me]<=i[me+ee])return b(c[me],Ee+I-F,z,q)}}},D=[];return g(0,e.length,0,n.length,D),D},yD=function(e){return Qn(e)?e.outerHTML:un(e)?bc.encodeRaw(e.data,!1):jf(e)?"<!--"+e.data+"-->":""},w4=function(e){var n,a=document.createElement("div"),i=document.createDocumentFragment();for(e&&(a.innerHTML=e);n=a.firstChild;)i.appendChild(n);return i},t5=function(e,n,a){var i=w4(n);if(e.hasChildNodes()&&a<e.childNodes.length){var c=e.childNodes[a];c.parentNode.insertBefore(i,c)}else e.appendChild(i)},v0=function(e,n){if(e.hasChildNodes()&&n<e.childNodes.length){var a=e.childNodes[n];a.parentNode.removeChild(a)}},wD=function(e,n){var a=0;pt(e,function(i){i[0]===y4?a++:i[0]===pD?(t5(n,i[1],a),a++):i[0]===bD&&v0(n,a)})},Ui=function(e){return bn($n(Pr(e.childNodes),yD),function(n){return n.length>0})},n5=function(e,n){var a=$n(Pr(n.childNodes),yD);return wD(e5(a,e),n),n},r5=ki(function(){return document.implementation.createHTMLDocument("undo")}),a5=function(e){return e.indexOf("</iframe>")!==-1},o5=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},Ef=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},d0=function(e){var n=Ui(e.getBody()),a=fi(n,function(c){var f=px(e.serializer,c);return f.length>0?[f]:[]}),i=a.join("");return a5(i)?o5(a):Ef(i)},Tp=function(e,n,a){var i=a?n.beforeBookmark:n.bookmark;n.type==="fragmented"?n5(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Kt(i)&&bS(i)?!i.isFakeCaret:!0}),e.selection.moveToBookmark(i)},kp=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content},rT=function(e){var n=T.fromTag("body",r5());return ms(n,kp(e)),pt(bu(n,"*[data-mce-bogus]"),Lf),ds(n)},i5=function(e,n){return kp(e)===kp(n)},u5=function(e,n){return rT(e)===rT(n)},cm=function(e,n){return!e||!n?!1:i5(e,n)?!0:u5(e,n)},Yg=function(e){return e.get()===0},lm=function(e,n,a){Yg(a)&&(e.typing=n)},aT=function(e,n){e.typing&&(lm(e,!1,n),e.add())},s5=function(e){e.typing&&(e.typing=!1,e.add())},C4=function(e,n,a){Yg(n)&&a.set(qC(e.selection))},CD=function(e,n,a,i,c,f,g){var b=d0(e);if(f=f||{},f=je.extend(f,b),Yg(i)===!1||e.removed)return null;var C=n.data[a.get()];if(e.fire("BeforeAddUndo",{level:f,lastLevel:C,originalEvent:g}).isDefaultPrevented()||C&&cm(C,f))return null;n.data[a.get()]&&c.get().each(function(F){n.data[a.get()].beforeBookmark=F});var D=Yh(e);if(D&&n.data.length>D){for(var I=0;I<n.data.length-1;I++)n.data[I]=n.data[I+1];n.data.length--,a.set(n.data.length)}f.bookmark=qC(e.selection),a.get()<n.data.length-1&&(n.data.length=a.get()+1),n.data.push(f),a.set(n.data.length-1);var z={level:f,lastLevel:C,originalEvent:g};return a.get()>0?(e.setDirty(!0),e.fire("AddUndo",z),e.fire("change",z)):e.fire("AddUndo",z),f},SD=function(e,n,a){n.data=[],a.set(0),n.typing=!1,e.fire("ClearUndos")},c5=function(e,n,a,i,c){if(n.transact(i)){var f=n.data[a.get()].bookmark,g=n.data[a.get()-1];Tp(e,g,!0),n.transact(c)&&(n.data[a.get()-1].beforeBookmark=f)}},l5=function(e,n,a){var i;return n.get()<a.length-1&&(n.set(n.get()+1),i=a[n.get()],Tp(e,i,!1),e.setDirty(!0),e.fire("Redo",{level:i})),i},xD=function(e,n,a,i){var c;return n.typing&&(n.add(),n.typing=!1,lm(n,!1,a)),i.get()>0&&(i.set(i.get()-1),c=n.data[i.get()],Tp(e,c,!0),e.setDirty(!0),e.fire("Undo",{level:c})),c},f5=function(e){e.clear(),e.add()},v5=function(e,n,a){return a.get()>0||n.typing&&n.data[0]&&!cm(d0(e),n.data[0])},d5=function(e,n){return n.get()<e.data.length-1&&!e.typing},m5=function(e,n,a){return aT(e,n),e.beforeChange(),e.ignore(a),e.add()},g5=function(e,n){try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},TD=function(e,n){var a=e.dom,i=Kt(n)?n:e.getBody();ke(e.hasVisual)&&(e.hasVisual=oS(e)),pt(a.select("table,a",i),function(c){switch(c.nodeName){case"TABLE":var f=OE(e),g=a.getAttrib(c,"border");(!g||g==="0")&&e.hasVisual?a.addClass(c,f):a.removeClass(c,f);break;case"A":if(!a.getAttrib(c,"href")){var b=a.getAttrib(c,"name")||c.id,C=Hy(e);b&&e.hasVisual?a.addClass(c,C):a.removeClass(c,C)}break}}),e.fire("VisualAid",{element:n,hasVisual:e.hasVisual})},kD=function(e){return{undoManager:{beforeChange:function(n,a){return C4(e,n,a)},add:function(n,a,i,c,f,g){return CD(e,n,a,i,c,f,g)},undo:function(n,a,i){return xD(e,n,a,i)},redo:function(n,a){return l5(e,n,a)},clear:function(n,a){return SD(e,n,a)},reset:function(n){return f5(n)},hasUndo:function(n,a){return v5(e,n,a)},hasRedo:function(n,a){return d5(n,a)},transact:function(n,a,i){return m5(n,a,i)},ignore:function(n,a){return g5(n,a)},extra:function(n,a,i,c){return c5(e,n,a,i,c)}},formatter:{match:function(n,a,i,c){return c2(e,n,a,i,c)},matchAll:function(n,a){return e4(e,n,a)},matchNode:function(n,a,i,c){return Xu(e,n,a,i,c)},canApply:function(n){return wP(e,n)},closest:function(n){return t4(e,n)},apply:function(n,a,i){return m4(e,n,a,i)},remove:function(n,a,i,c){return d4(e,n,a,i,c)},toggle:function(n,a,i){return UP(e,n,a,i)},formatChanged:function(n,a,i,c,f){return VP(e,n,a,i,c,f)}},editor:{getContent:function(n,a){return Kb(e,n,a)},setContent:function(n,a){return pP(e,n,a)},insertContent:function(n,a){return vP(e,n,a)},addVisual:function(n){return TD(e,n)}},selection:{getContent:function(n,a){return QP(e,n,a)}},raw:{getModel:function(){return Q.none()}}}},g2=function(e){var n=function(b){return Ze(b)?b:{}},a=e.undoManager,i=e.formatter,c=e.editor,f=e.selection,g=e.raw;return{undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:function(b,C,D){return a.transact(D)},ignore:function(b,C){return a.ignore(C)},extra:function(b,C,D,I){return a.extra(D,I)}},formatter:{match:function(b,C,D,I){return i.match(b,n(C),I)},matchAll:i.matchAll,matchNode:i.matchNode,canApply:function(b){return i.canApply(b)},closest:function(b){return i.closest(b)},apply:function(b,C,D){return i.apply(b,n(C))},remove:function(b,C,D,I){return i.remove(b,n(C))},toggle:function(b,C,D){return i.toggle(b,n(C))},formatChanged:function(b,C,D,I,z){return i.formatChanged(C,D,I,z)}},editor:{getContent:function(b,C){return c.getContent(b)},setContent:function(b,C){return c.setContent(b,C)},insertContent:function(b,C){return c.insertContent(b)},addVisual:c.addVisual},selection:{getContent:function(b,C){return f.getContent(C)}},raw:{getModel:function(){return Q.some(g.getRawModel())}}}},ED=function(){var e=Y(null),n=Y("");return{undoManager:{beforeChange:We,add:e,undo:e,redo:e,clear:We,reset:We,hasUndo:wt,hasRedo:wt,transact:e,ignore:We,extra:We},formatter:{match:wt,matchAll:Y([]),matchNode:Y(void 0),canApply:wt,closest:n,apply:We,remove:We,toggle:We,formatChanged:Y({unbind:We})},editor:{getContent:n,setContent:n,insertContent:We,addVisual:We},selection:{getContent:n},raw:{getModel:Y(Q.none())}}},fm=function(e){return fr(e.plugins,"rtc")},OD=function(e){return Ir(e.plugins,"rtc").bind(function(n){return Q.from(n.setup)})},h5=function(e){var n=e;return OD(e).fold(function(){return n.rtcInstance=kD(e),Q.none()},function(a){return n.rtcInstance=ED(),Q.some(function(){return a().then(function(i){return n.rtcInstance=g2(i),i.rtc.isRemote})})})},oT=function(e){return e.rtcInstance?e.rtcInstance:kD(e)},xu=function(e){var n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},p5=function(e,n,a){xu(e).undoManager.beforeChange(n,a)},AD=function(e,n,a,i,c,f,g){return xu(e).undoManager.add(n,a,i,c,f,g)},DD=function(e,n,a,i){return xu(e).undoManager.undo(n,a,i)},_D=function(e,n,a){return xu(e).undoManager.redo(n,a)},RD=function(e,n,a){xu(e).undoManager.clear(n,a)},MD=function(e,n){xu(e).undoManager.reset(n)},b5=function(e,n,a){return xu(e).undoManager.hasUndo(n,a)},y5=function(e,n,a){return xu(e).undoManager.hasRedo(n,a)},w5=function(e,n,a,i){return xu(e).undoManager.transact(n,a,i)},C5=function(e,n,a){xu(e).undoManager.ignore(n,a)},S4=function(e,n,a,i,c){xu(e).undoManager.extra(n,a,i,c)},h2=function(e,n,a,i,c){return xu(e).formatter.match(n,a,i,c)},BD=function(e,n,a){return xu(e).formatter.matchAll(n,a)},PD=function(e,n,a,i,c){return xu(e).formatter.matchNode(n,a,i,c)},iT=function(e,n){return xu(e).formatter.canApply(n)},S5=function(e,n){return xu(e).formatter.closest(n)},x5=function(e,n,a,i){xu(e).formatter.apply(n,a,i)},Jg=function(e,n,a,i,c){xu(e).formatter.remove(n,a,i,c)},x4=function(e,n,a,i){xu(e).formatter.toggle(n,a,i)},ND=function(e,n,a,i,c,f){return xu(e).formatter.formatChanged(n,a,i,c,f)},p2=function(e,n,a){return oT(e).editor.getContent(n,a)},ID=function(e,n,a){return oT(e).editor.setContent(n,a)},$D=function(e,n,a){return oT(e).editor.insertContent(n,a)},zD=function(e,n,a){return xu(e).selection.getContent(n,a)},FD=function(e,n){return xu(e).editor.addVisual(n)},T5=function(e,n){n===void 0&&(n={});var a=n.format?n.format:"html";return zD(e,a,n)},LD=function(e){return e.dom.length===0?(Uo(e),Q.none()):Q.some(e)},k5=function(e,n){return e.filter(function(a){return nd.isBookmarkNode(a.dom)}).bind(n?fc:If)},T4=function(e,n,a,i){var c=e.dom,f=n.dom,g=i?c.length:f.length;i?(u(c,f,!1,!i),a.setStart(f,g)):(u(f,c,!1,!i),a.setEnd(f,g))},E5=function(e,n){Po(e).each(function(a){var i=e.dom;n&&e0(a,Ue(i,0))?yp(i,0):!n&&t0(a,Ue(i,i.length))&&r0(i,i.length)})},HD=function(e,n,a,i){e.bind(function(c){var f=i?r0:yp;return f(c.dom,i?c.dom.length:0),n.filter(Eo).map(function(g){return T4(c,g,a,i)})}).orThunk(function(){var c=k5(n,i).or(n).filter(Eo);return c.map(function(f){return E5(f,i)})})},b2=function(e,n){var a=Q.from(n.firstChild).map(T.fromDom),i=Q.from(n.lastChild).map(T.fromDom);e.deleteContents(),e.insertNode(n);var c=a.bind(If).filter(Eo).bind(LD),f=i.bind(fc).filter(Eo).bind(LD);HD(c,a,e,!0),HD(f,i,e,!1),e.collapse(!1)},k4=function(e,n){return kn(kn({format:"html"},e),{set:!0,selection:!0,content:n})},O5=function(e,n){if(n.format!=="raw"){var a=e.selection.getRng(),i=e.dom.getParent(a.commonAncestorContainer,e.dom.isBlock),c=i?{context:i.nodeName.toLowerCase()}:{},f=e.parser.parse(n.content,kn(kn({isRootContent:!0,forced_root_block:!1},c),n));return sm({validate:e.validate},e.schema).serialize(f)}else return n.content},VD=function(e,n,a){a===void 0&&(a={});var i=k4(a,n),c=i;if(!i.no_events){var f=e.fire("BeforeSetContent",i);if(f.isDefaultPrevented()){e.fire("SetContent",f);return}else c=f}c.content=O5(e,c);var g=e.selection.getRng();b2(g,g.createContextualFragment(c.content)),e.selection.setRng(g),sp(e,g),c.no_events||e.fire("SetContent",c)},UD=function(e,n,a){if(e&&fr(e,n)){var i=bn(e[n],function(c){return c!==a});i.length===0?delete e[n]:e[n]=i}};function uT(e,n){var a,i,c=function(g,b){return ya(b,function(C){return e.is(C,g)})},f=function(g){return e.getParents(g,null,e.getRoot())};return{selectorChangedWithUnbind:function(g,b){return a||(a={},i={},n.on("NodeChange",function(C){var D=C.element,I=f(D),z={};je.each(a,function(F,q){c(q,I).each(function(X){i[q]||(pt(F,function(J){J(!0,{node:X,selector:q,parents:I})}),i[q]=F),z[q]=F})}),je.each(i,function(F,q){z[q]||(delete i[q],je.each(F,function(X){X(!1,{node:D,selector:q,parents:I})}))})})),a[g]||(a[g]=[]),a[g].push(b),c(g,f(n.selection.getStart())).each(function(){i[g]=a[g]}),{unbind:function(){UD(a,g,b),UD(i,g,b)}}}}}var E4=function(e){return!!e.select},WD=function(e){return!!(e&&e.ownerDocument)&&Ca(T.fromDom(e.ownerDocument),T.fromDom(e))},ou=function(e){return e?E4(e)?!0:WD(e.startContainer)&&WD(e.endContainer):!1},jD=function(e,n,a,i){var c,f,g=uT(e,i).selectorChangedWithUnbind,b=function(ft,on){var Hr=e.createRng();Kt(ft)&&Kt(on)?(Hr.setStart(ft,on),Hr.setEnd(ft,on),Ae(Hr),ee(!1)):(ed(e,Hr,i.getBody(),!0),Ae(Hr))},C=function(ft){return T5(i,ft)},D=function(ft,on){return VD(i,ft,on)},I=function(ft){return um(i.getBody(),se(),ft)},z=function(ft){return Pg(i.getBody(),se(),ft)},F=function(ft,on){return Pt.getBookmark(ft,on)},q=function(ft){return Pt.moveToBookmark(ft)},X=function(ft,on){return wO(e,ft,on).each(Ae),ft},J=function(){var ft=se(),on=ce();return!ft||ft.item?!1:ft.compareEndPoints?ft.compareEndPoints("StartToEnd",ft)===0:!on||ft.collapsed},ee=function(ft){var on=se();on.collapse(!!ft),Ae(on)},ce=function(){return n.getSelection?n.getSelection():n.document.selection},se=function(){var ft,on,Hr,pa=function(zo,Ns,ac){try{return Ns.compareBoundaryPoints(zo,ac)}catch{return-1}},ma=n.document;if(i.bookmark!==void 0&&Uc(i)===!1){var Tu=Rg(i);if(Tu.isSome())return Tu.map(function(zo){return Vb(i,[zo])[0]}).getOr(ma.createRange())}try{(ft=ce())&&!Yl(ft.anchorNode)&&(ft.rangeCount>0?on=ft.getRangeAt(0):on=ft.createRange?ft.createRange():ma.createRange(),on=Vb(i,[on])[0])}catch{}return on||(on=ma.createRange?ma.createRange():ma.body.createTextRange()),on.setStart&&on.startContainer.nodeType===9&&on.collapsed&&(Hr=e.getRoot(),on.setStart(Hr,0),on.setEnd(Hr,0)),c&&f&&(pa(on.START_TO_START,on,c)===0&&pa(on.END_TO_END,on,c)===0?on=f:(c=null,f=null)),on},Ae=function(ft,on){var Hr;if(ou(ft)){var pa=E4(ft)?ft:null;if(pa){f=null;try{pa.select()}catch{}return}var ma=ce(),Tu=i.fire("SetSelectionRange",{range:ft,forward:on});if(ft=Tu.range,ma){f=ft;try{ma.removeAllRanges(),ma.addRange(ft)}catch{}on===!1&&ma.extend&&(ma.collapse(ft.endContainer,ft.endOffset),ma.extend(ft.startContainer,ft.startOffset)),c=ma.rangeCount>0?ma.getRangeAt(0):null}!ft.collapsed&&ft.startContainer===ft.endContainer&&ma.setBaseAndExtent&&!St.ie&&ft.endOffset-ft.startOffset<2&&ft.startContainer.hasChildNodes()&&(Hr=ft.startContainer.childNodes[ft.startOffset],Hr&&Hr.tagName==="IMG"&&(ma.setBaseAndExtent(ft.startContainer,ft.startOffset,ft.endContainer,ft.endOffset),(ma.anchorNode!==ft.startContainer||ma.focusNode!==ft.endContainer)&&ma.setBaseAndExtent(Hr,0,Hr,1))),i.fire("AfterSetSelectionRange",{range:ft,forward:on})}},Ee=function(ft){return D(e.getOuterHTML(ft)),ft},me=function(){return fx(i.getBody(),se())},_e=function(ft,on){return Hb(e,se(),ft,on)},et=function(){var ft=ce(),on=ft==null?void 0:ft.anchorNode,Hr=ft==null?void 0:ft.focusNode;if(!ft||!on||!Hr||Yl(on)||Yl(Hr))return!0;var pa=e.createRng();pa.setStart(on,ft.anchorOffset),pa.collapse(!0);var ma=e.createRng();return ma.setStart(Hr,ft.focusOffset),ma.collapse(!0),pa.compareBoundaryPoints(pa.START_TO_START,ma)<=0},bt=function(){var ft=se(),on=ce();if(!dw(on)&&td(i)){var Hr=Rb(e,ft);return Hr.each(function(pa){Ae(pa,et())}),Hr.getOr(ft)}return ft},Xn=function(ft,on){return g(ft,on),Et},an=function(){for(var ft,on=e.getRoot();on&&on.nodeName!=="BODY";){if(on.scrollHeight>on.clientHeight){ft=on;break}on=on.parentNode}return ft},st=function(ft,on){Kt(ft)?dO(i,ft,on):sp(i,se(),on)},qn=function(ft,on){return Ae(Tw(ft,on,i.getDoc()))},xt=function(){var ft=se();return ft.collapsed?Ue.fromRangeStart(ft).getClientRects()[0]:ft.getBoundingClientRect()},tn=function(){n=c=f=null,vn.destroy()},Et={bookmarkManager:null,controlSelection:null,dom:e,win:n,serializer:a,editor:i,collapse:ee,setCursorLocation:b,getContent:C,setContent:D,getBookmark:F,moveToBookmark:q,select:X,isCollapsed:J,isForward:et,setNode:Ee,getNode:me,getSel:ce,setRng:Ae,getRng:se,getStart:I,getEnd:z,getSelectedBlocks:_e,normalize:bt,selectorChanged:Xn,selectorChangedWithUnbind:g,getScrollContainer:an,scrollIntoView:st,placeCaretAt:qn,getBoundingClientRect:xt,destroy:tn},Pt=nd(Et),vn=Sw(Et,i);return Et.bookmarkManager=Pt,Et.controlSelection=vn,Et},GD=function(e,n){pt(n,function(a){e.attr(a,null)})},A5=function(e,n,a){e.addNodeFilter("font",function(i){pt(i,function(c){var f=n.parse(c.attr("style")),g=c.attr("color"),b=c.attr("face"),C=c.attr("size");g&&(f.color=g),b&&(f["font-family"]=b),C&&(f["font-size"]=a[parseInt(c.attr("size"),10)-1]),c.name="span",c.attr("style",n.serialize(f)),GD(c,["color","face","size"])})})},D5=function(e,n){e.addNodeFilter("strike",function(a){pt(a,function(i){var c=n.parse(i.attr("style"));c["text-decoration"]="line-through",i.name="span",i.attr("style",n.serialize(c))})})},qD=function(e,n){var a=al();n.convert_fonts_to_spans&&A5(e,a,je.explode(n.font_size_legacy_values)),D5(e,a)},_5=function(e,n){n.inline_styles&&qD(e,n)},O4=function(e){return new Zi(function(n,a){var i=function(){a("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var c=new XMLHttpRequest;c.open("GET",e,!0),c.responseType="blob",c.onload=function(){c.status===200?n(c.response):i()},c.onerror=i,c.send()}catch{i()}})},A4=function(e){var n,a=decodeURIComponent(e).split(","),i=/data:([^;]+)/.exec(a[0]);return i&&(n=i[1]),{type:n,data:a[1]}},D4=function(e,n){var a;try{a=atob(n)}catch{return Q.none()}for(var i=new Uint8Array(a.length),c=0;c<i.length;c++)i[c]=a.charCodeAt(c);return Q.some(new Blob([i],{type:e}))},_4=function(e){return new Zi(function(n){var a=A4(e),i=a.type,c=a.data;D4(i,c).fold(function(){return n(new Blob([]))},n)})},KD=function(e){return e.indexOf("blob:")===0?O4(e):e.indexOf("data:")===0?_4(e):null},R5=function(e){return new Zi(function(n){var a=new FileReader;a.onloadend=function(){n(a.result)},a.readAsDataURL(e)})},M5=0,R4=function(e){return(e||"blobid")+M5++},B5=function(e,n,a,i){var c,f;if(n.src.indexOf("blob:")===0){f=e.getByUri(n.src),f?a({image:n,blobInfo:f}):KD(n.src).then(function(D){R5(D).then(function(I){c=A4(I).data,f=e.create(R4(),D,c),e.add(f),a({image:n,blobInfo:f})})},function(D){i(D)});return}var g=A4(n.src),b=g.data,C=g.type;c=b,f=e.getByData(c,C),f?a({image:n,blobInfo:f}):KD(n.src).then(function(D){f=e.create(R4(),D,c),e.add(f),a({image:n,blobInfo:f})},function(D){i(D)})},XD=function(e){return e?Pr(e.getElementsByTagName("img")):[]},YD=function(e,n){var a={},i=function(c,f){f||(f=jt);var g=bn(XD(c),function(C){var D=C.src;return!St.fileApi||C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!D||D===St.transparentSrc?!1:D.indexOf("blob:")===0?!e.isUploaded(D)&&f(C):D.indexOf("data:")===0?f(C):!1}),b=$n(g,function(C){if(a[C.src]!==void 0)return new Zi(function(I){a[C.src].then(function(z){if(typeof z=="string")return z;I({image:C,blobInfo:z.blobInfo})})});var D=new Zi(function(I,z){B5(n,C,I,z)}).then(function(I){return delete a[I.image.src],I}).catch(function(I){return delete a[C.src],I});return a[C.src]=D,D});return Zi.all(b)};return{findAll:i}},y2=function(e,n,a,i){var c=e.padd_empty_with_br||n.insert;c&&a[i.name]?i.empty().append(new Wc("br",1)).shortEnded=!0:i.empty().append(new Wc("#text",3)).value=Ks},JD=function(e){return M4(e,"#text")&&e.firstChild.value===Ks},M4=function(e,n){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===n},ZD=function(e,n){var a=e.getElementRule(n.name);return a&&a.paddEmpty},m0=function(e,n,a,i){return i.isEmpty(n,a,function(c){return ZD(e,c)})},QD=function(e,n){return e&&(fr(n,e.name)||e.name==="br")},e_=function(e){return Kt(e.attr("data-mce-bogus"))},P5=function(e){return e.attr("src")===St.transparentSrc||Kt(e.attr("data-mce-placeholder"))},B4=function(e,n){if(n.images_dataimg_filter){var a=new Image;return a.src=e.attr("src"),Zt(e.attributes.map,function(i,c){a.setAttribute(c,i)}),n.images_dataimg_filter(a)}else return!0},N5=function(e,n){var a=n.blob_cache,i=function(c){var f=c.attr("src");P5(c)||e_(c)||dx(f).filter(function(){return B4(c,n)}).bind(function(g){var b=g.type,C=g.data;return Q.from(a.getByData(C,b)).orThunk(function(){return D4(b,C).map(function(D){var I=a.create(R4(),D,C);return a.add(I),I})})}).each(function(g){c.attr("src",g.blobUri())})};a&&e.addAttributeFilter("src",function(c){return pt(c,i)})},sT=function(e,n){var a=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",function(i,c,f){var g,b=i.length,C,D=je.extend({},a.getBlockElements()),I=a.getNonEmptyElements(),z,F,q,X,J=a.getWhiteSpaceElements(),ee,ce;for(D.body=1,g=0;g<b;g++)if(C=i[g],z=C.parent,D[C.parent.name]&&C===z.lastChild){for(q=C.prev;q;){if(X=q.name,X!=="span"||q.attr("data-mce-type")!=="bookmark"){X==="br"&&(C=null);break}q=q.prev}C&&(C.remove(),m0(a,I,J,z)&&(ee=a.getElementRule(z.name),ee&&(ee.removeEmpty?z.remove():ee.paddEmpty&&y2(n,f,D,z))))}else{for(F=C;z&&z.firstChild===F&&z.lastChild===F&&(F=z,!D[z.name]);)z=z.parent;F===z&&n.padd_empty_with_br!==!0&&(ce=new Wc("#text",3),ce.value=Ks,C.replace(ce))}}),e.addAttributeFilter("href",function(i){var c=i.length,f=function(C){var D=C.split(" ").filter(function(I){return I.length>0});return D.concat(["noopener"]).sort().join(" ")},g=function(C){var D=C?je.trim(C):"";return/\b(noopener)\b/g.test(D)?D:f(D)};if(!n.allow_unsafe_link_target)for(;c--;){var b=i[c];b.name==="a"&&b.attr("target")==="_blank"&&b.attr("rel",g(b.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(i){for(var c=i.length,f,g,b,C;c--;)if(C=i[c],C.name==="a"&&C.firstChild&&!C.attr("href")){b=C.parent,f=C.lastChild;do g=f.prev,b.insert(f,C),f=g;while(f)}}),n.fix_list_elements&&e.addNodeFilter("ul,ol",function(i){for(var c=i.length,f,g;c--;)if(f=i[c],g=f.parent,g.name==="ul"||g.name==="ol")if(f.prev&&f.prev.name==="li")f.prev.append(f);else{var b=new Wc("li",1);b.attr("style","list-style-type: none"),f.wrap(b)}}),n.validate&&a.getValidClasses()&&e.addAttributeFilter("class",function(i){for(var c=a.getValidClasses(),f=i.length;f--;){for(var g=i[f],b=g.attr("class").split(" "),C="",D=0;D<b.length;D++){var I=b[D],z=!1,F=c["*"];F&&F[I]&&(z=!0),F=c[g.name],!z&&F&&F[I]&&(z=!0),z&&(C&&(C+=" "),C+=I)}C.length||(C=null),g.attr("class",C)}}),N5(e,n)},t_=je.makeMap,n_=je.each,r_=je.explode,a_=je.extend,cT=function(e,n){n===void 0&&(n=yc());var a={},i=[],c={},f={};e=e||{},e.validate="validate"in e?e.validate:!0,e.root_name=e.root_name||"body";var g=function(X){for(var J=t_("tr,td,th,tbody,thead,tfoot,table"),ee=n.getNonEmptyElements(),ce=n.getWhiteSpaceElements(),se=n.getTextBlockElements(),Ae=n.getSpecialElements(),Ee=function(Pt,vn){if(vn===void 0&&(vn=Pt.parent),Ae[Pt.name])Pt.empty().remove();else{for(var ft=Pt.children(),on=0,Hr=ft;on<Hr.length;on++){var pa=Hr[on];n.isValidChild(vn.name,pa.name)||Ee(pa,vn)}Pt.unwrap()}},me=0;me<X.length;me++){var _e=X[me],et=void 0,bt=void 0,Xn=void 0;if(!(!_e.parent||_e.fixed)){if(se[_e.name]&&_e.parent.name==="li"){for(var an=_e.next;an&&se[an.name];){an.name="li",an.fixed=!0,_e.parent.insert(an,_e.parent);an=an.next}_e.unwrap();continue}var st=[_e];for(et=_e.parent;et&&!n.isValidChild(et.name,_e.name)&&!J[et.name];et=et.parent)st.push(et);if(et&&st.length>1)if(n.isValidChild(et.name,_e.name)){st.reverse(),bt=b(st[0].clone());for(var qn=bt,xt=0;xt<st.length-1;xt++){n.isValidChild(qn.name,st[xt].name)?(Xn=b(st[xt].clone()),qn.append(Xn)):Xn=qn;for(var tn=st[xt].firstChild;tn&&tn!==st[xt+1];){var Et=tn.next;Xn.append(tn),tn=Et}qn=Xn}m0(n,ee,ce,bt)?et.insert(_e,st[0],!0):(et.insert(bt,st[0],!0),et.insert(_e,bt)),et=st[0],(m0(n,ee,ce,et)||M4(et,"br"))&&et.empty().remove()}else Ee(_e);else if(_e.parent){if(_e.name==="li"){var an=_e.prev;if(an&&(an.name==="ul"||an.name==="ol")){an.append(_e);continue}if(an=_e.next,an&&(an.name==="ul"||an.name==="ol")){an.insert(_e,an.firstChild,!0);continue}_e.wrap(b(new Wc("ul",1)));continue}n.isValidChild(_e.parent.name,"div")&&n.isValidChild("div",_e.name)?_e.wrap(b(new Wc("div",1))):Ee(_e)}}}},b=function(X){var J=X.name;if(J in a){var ee=c[J];ee?ee.push(X):c[J]=[X]}for(var ce=i.length;ce--;){var se=i[ce].name;if(se in X.attributes.map){var ee=f[se];ee?ee.push(X):f[se]=[X]}}return X},C=function(X,J){n_(r_(X),function(ee){var ce=a[ee];ce||(a[ee]=ce=[]),ce.push(J)})},D=function(){var X=[];for(var J in a)fr(a,J)&&X.push({name:J,callbacks:a[J]});return X},I=function(X,J){n_(r_(X),function(ee){var ce;for(ce=0;ce<i.length;ce++)if(i[ce].name===ee){i[ce].callbacks.push(J);return}i.push({name:ee,callbacks:[J]})})},z=function(){return[].concat(i)},F=function(X,J){var ee,ce,se,Ae,Ee,me,_e,et=[],bt,Xn=function(Me){return Me===!1?"":Me===!0?"p":Me};J=J||{},c={},f={};var an=a_(t_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),st=m1(n),qn=n.getNonEmptyElements(),xt=n.children,tn=e.validate,Et="forced_root_block"in J?J.forced_root_block:e.forced_root_block,Pt=Xn(Et),vn=n.getWhiteSpaceElements(),ft=/^[ \t\r\n]+/,on=/[ \t\r\n]+$/,Hr=/[ \t\r\n]+/g,pa=/^[ \t\r\n]+$/,ma=fr(vn,J.context)||fr(vn,e.root_name),Tu=function(){var Me=Rn.firstChild,Ct=null,mt=function(Un){Un&&(Me=Un.firstChild,Me&&Me.type===3&&(Me.value=Me.value.replace(ft,"")),Me=Un.lastChild,Me&&Me.type===3&&(Me.value=Me.value.replace(on,"")))};if(n.isValidChild(Rn.name,Pt.toLowerCase())){for(;Me;){var zn=Me.next;Me.type===3||Me.type===1&&Me.name!=="p"&&!an[Me.name]&&!Me.attr("data-mce-type")?(Ct||(Ct=zo(Pt,1),Ct.attr(e.forced_root_block_attrs),Rn.insert(Ct,Me)),Ct.append(Me)):(mt(Ct),Ct=null),Me=zn}mt(Ct)}},zo=function(Me,Ct){var mt=new Wc(Me,Ct),zn;return Me in a&&(zn=c[Me],zn?zn.push(mt):c[Me]=[mt]),mt},Ns=function(Me){for(var Ct=n.getBlockElements(),mt=Me.prev;mt&&mt.type===3;){var zn=mt.value.replace(on,"");if(zn.length>0){mt.value=zn;return}var Un=mt.next;if(Un){if(Un.type===3&&Un.value.length){mt=mt.prev;continue}if(!Ct[Un.name]&&Un.name!=="script"&&Un.name!=="style"){mt=mt.prev;continue}}var Ya=mt.prev;mt.remove(),mt=Ya}},ac=function(Me){var Ct={};for(var mt in Me)mt!=="li"&&mt!=="p"&&(Ct[mt]=Me[mt]);return Ct},vt=function(Me){for(var Ct=Me;Kt(Ct);){if(Ct.name in st)return m0(n,qn,vn,Ct);Ct=Ct.parent}return!1},Ot=Ng({validate:tn,document:e.document,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:ac(n.getSelfClosingElements()),cdata:function(Me){bt.append(zo("#cdata",4)).value=Me},text:function(Me,Ct){var mt;ma||(Me=Me.replace(Hr," "),QD(bt.lastChild,an)&&(Me=Me.replace(ft,""))),Me.length!==0&&(mt=zo("#text",3),mt.raw=!!Ct,bt.append(mt).value=Me)},comment:function(Me){bt.append(zo("#comment",8)).value=Me},pi:function(Me,Ct){bt.append(zo(Me,7)).value=Ct,Ns(bt)},doctype:function(Me){var Ct=bt.append(zo("#doctype",10));Ct.value=Me,Ns(bt)},start:function(Me,Ct,mt){var zn=tn?n.getElementRule(Me):{};if(zn){var Un=zo(zn.outputName||Me,1);Un.attributes=Ct,Un.shortEnded=mt,bt.append(Un);var Ya=xt[bt.name];Ya&&xt[Un.name]&&!Ya[Un.name]&&et.push(Un);for(var Wi=i.length;Wi--;){var zi=i[Wi].name;zi in Ct.map&&(me=f[zi],me?me.push(Un):f[zi]=[Un])}an[Me]&&Ns(Un),mt||(bt=Un),!ma&&vn[Me]&&(ma=!0)}},end:function(Me){var Ct,mt,zn,Un=tn?n.getElementRule(Me):{};if(Un){if(an[Me]&&!ma){if(Ct=bt.firstChild,Ct&&Ct.type===3)if(mt=Ct.value.replace(ft,""),mt.length>0)Ct.value=mt,Ct=Ct.next;else for(zn=Ct.next,Ct.remove(),Ct=zn;Ct&&Ct.type===3;)mt=Ct.value,zn=Ct.next,(mt.length===0||pa.test(mt))&&(Ct.remove(),Ct=zn),Ct=zn;if(Ct=bt.lastChild,Ct&&Ct.type===3)if(mt=Ct.value.replace(on,""),mt.length>0)Ct.value=mt,Ct=Ct.prev;else for(zn=Ct.prev,Ct.remove(),Ct=zn;Ct&&Ct.type===3;)mt=Ct.value,zn=Ct.prev,(mt.length===0||pa.test(mt))&&(Ct.remove(),Ct=zn),Ct=zn}ma&&vn[Me]&&(ma=!1);var Ya=m0(n,qn,vn,bt),Wi=bt.parent;Un.paddInEmptyBlock&&Ya&&vt(bt)?y2(e,J,an,bt):Un.removeEmpty&&Ya?an[bt.name]?bt.empty().remove():bt.unwrap():Un.paddEmpty&&(JD(bt)||Ya)&&y2(e,J,an,bt),bt=Wi}}},n),Rn=bt=new Wc(J.context||e.root_name,11);if(Ot.parse(X,J.format),tn&&et.length&&(J.context?J.invalid=!0:g(et)),Pt&&(Rn.name==="body"||J.isRootContent)&&Tu(),!J.invalid){for(_e in c)if(fr(c,_e)){for(me=a[_e],ee=c[_e],Ae=ee.length;Ae--;)ee[Ae].parent||ee.splice(Ae,1);for(ce=0,se=me.length;ce<se;ce++)me[ce](ee,_e,J)}for(ce=0,se=i.length;ce<se;ce++)if(me=i[ce],me.name in f){for(ee=f[me.name],Ae=ee.length;Ae--;)ee[Ae].parent||ee.splice(Ae,1);for(Ae=0,Ee=me.callbacks.length;Ae<Ee;Ae++)me.callbacks[Ae](ee,me.name,J)}}return Rn},q={schema:n,addAttributeFilter:I,getAttributeFilters:z,addNodeFilter:C,getNodeFilters:D,filterNode:b,parse:F};return sT(q,e),_5(q,e),q},I5=function(e,n,a){e.addAttributeFilter("data-mce-tabindex",function(i,c){for(var f=i.length;f--;){var g=i[f];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(c,null)}}),e.addAttributeFilter("src,href,style",function(i,c){for(var f="data-mce-"+c,g=n.url_converter,b=n.url_converter_scope,C=i.length;C--;){var D=i[C],I=D.attr(f);I!==void 0?(D.attr(c,I.length>0?I:null),D.attr(f,null)):(I=D.attr(c),c==="style"?I=a.serializeStyle(a.parseStyle(I),D.name):g&&(I=g.call(b,I,c,D.name)),D.attr(c,I.length>0?I:null))}}),e.addAttributeFilter("class",function(i){for(var c=i.length;c--;){var f=i[c],g=f.attr("class");g&&(g=f.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",g.length>0?g:null))}}),e.addAttributeFilter("data-mce-type",function(i,c,f){for(var g=i.length;g--;){var b=i[g];if(b.attr("data-mce-type")==="bookmark"&&!f.cleanup){var C=Q.from(b.firstChild).exists(function(D){return!ss(D.value)});C?b.unwrap():b.remove()}}}),e.addNodeFilter("noscript",function(i){for(var c=i.length;c--;){var f=i[c].firstChild;f&&(f.value=bc.decode(f.value))}}),e.addNodeFilter("script,style",function(i,c){for(var f=function(I){return I.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},g=i.length;g--;){var b=i[g],C=b.firstChild?b.firstChild.value:"";if(c==="script"){var D=b.attr("type");D&&b.attr("type",D==="mce-no/type"?null:D.replace(/^mce\-/,"")),n.element_format==="xhtml"&&C.length>0&&(b.firstChild.value=`// <![CDATA[
`+f(C)+`
// ]]>`)}else n.element_format==="xhtml"&&C.length>0&&(b.firstChild.value=`<!--
`+f(C)+`
-->`)}}),e.addNodeFilter("#comment",function(i){for(var c=i.length;c--;){var f=i[c];n.preserve_cdata&&f.value.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=a.decode(f.value.replace(/^\[CDATA\[|\]\]$/g,""))):f.value.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(f.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",function(i,c){for(var f=i.length;f--;){var g=i[f];g.type===7?g.remove():g.type===1&&c==="input"&&!g.attr("type")&&g.attr("type","text")}}),e.addAttributeFilter("data-mce-type",function(i){pt(i,function(c){c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(i,c){for(var f=i.length;f--;)i[f].attr(c,null)})},$5=function(e){var n=function(c){return c&&c.name==="br"},a=e.lastChild;if(n(a)){var i=a.prev;n(i)&&(a.remove(),i.remove())}},z5=function(e,n,a){var i,c=e.dom,f=n.cloneNode(!0),g=document.implementation;if(g.createHTMLDocument){var b=g.createHTMLDocument("");je.each(f.nodeName==="BODY"?f.childNodes:[f],function(C){b.body.appendChild(b.importNode(C,!0))}),f.nodeName!=="BODY"?f=b.body.firstChild:f=b.body,i=c.doc,c.doc=b}return ZE(e,kn(kn({},a),{node:f})),i&&(c.doc=i),f},F5=function(e,n){return e&&e.hasEventListeners("PreProcess")&&!n.no_events},o_=function(e,n,a){return F5(e,a)?z5(e,n,a):n},L5=function(e,n,a){je.inArray(n,a)===-1&&(e.addAttributeFilter(a,function(i,c){for(var f=i.length;f--;)i[f].attr(c,null)}),n.push(a))},H5=function(e,n,a){if(!n.no_events&&e){var i=bw(e,kn(kn({},n),{content:a}));return i.content}else return a},V5=function(e,n,a){var i=kl(a.getInner?n.innerHTML:e.getOuterHTML(n));return a.selection||Sd(T.fromDom(n))?i:je.trim(i)},U5=function(e,n,a){var i=a.selection?kn({forced_root_block:!1},a):a,c=e.parse(n,i);return $5(c),c},W5=function(e,n,a){var i=sm(e,n);return i.serialize(a)},j5=function(e,n,a,i,c){var f=W5(n,a,i);return H5(e,c,f)},G5=function(e,n){var a=["data-mce-selected"],i=n&&n.dom?n.dom:ao.DOM,c=n&&n.schema?n.schema:yc(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;var f=cT(e,c);I5(f,e,i);var g=function(b,C){C===void 0&&(C={});var D=kn({format:"html"},C),I=o_(n,b,D),z=V5(i,I,D),F=U5(f,z,D);return D.format==="tree"?F:j5(n,e,c,F,D)};return{schema:c,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:g,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:Mt(L5,f,a),getTempAttrs:Y(a),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters}},i_=function(e,n){var a=G5(e,n);return{schema:a.schema,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:a.serialize,addRules:a.addRules,setRules:a.setRules,addTempAttr:a.addTempAttr,getTempAttrs:a.getTempAttrs,getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters}},u_="html",q5=function(e,n){n===void 0&&(n={});var a=n.format?n.format:u_;return p2(e,n,a)},P4=function(e,n,a){return a===void 0&&(a={}),ID(e,n,a)},lT=ao.DOM,K5=function(e){lT.setStyle(e.id,"display",e.orgDisplay)},fT=function(e){return Q.from(e).each(function(n){return n.destroy()})},w2=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},X5=function(e){var n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),lT.unbind(n,"submit reset",e.formEventDelegate))},Y5=function(e){if(!e.removed){var n=e._selectionOverrides,a=e.editorUpload,i=e.getBody(),c=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&c&&lT.remove(c.nextSibling),AS(e),e.editorManager.remove(e),!e.inline&&i&&K5(e),DS(e),lT.remove(e.getContainer()),fT(n),fT(a),e.destroy()}},s_=function(e,n){var a=e.selection,i=e.dom;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),fT(a),fT(i)),X5(e),w2(e),e.destroyed=!0}},c_=function(e,n){var a=Ze(e)&&Ze(n);return a?l_(e,n):n},J5=function(e){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(n.length===0)throw new Error("Can't merge zero objects");for(var i={},c=0;c<n.length;c++){var f=n[c];for(var g in f)fr(f,g)&&(i[g]=e(i[g],f[g]))}return i}},l_=J5(c_),Z5="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),C2="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),f_="imagetools,toc".split(","),v_=function(e){var n=bn(Z5,function(i){return fr(e,i)}),a=e.forced_root_block;return(a===!1||a==="")&&n.push("forced_root_block (false only)"),ra(n)},Q5=function(e){var n=je.makeMap(e.plugins," "),a=function(c){return fr(n,c)},i=Xo(Xo([],bn(C2,a),!0),fi(f_,function(c){return a(c)?[c+" (moving to premium)"]:[]}),!0);return ra(i)},d_=function(e,n){var a=v_(e),i=Q5(n),c=i.length>0,f=a.length>0,g=n.theme==="mobile";if(c||f||g){var b=`
- `,C=g?`

Themes:`+b+"mobile":"",D=c?`

Plugins:`+b+i.join(b):"",I=f?`

Settings:`+b+a.join(b):"";console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+C+D+I)}},eN=function(e,n){return{sections:Y(e),settings:Y(n)}},N4=Yt().deviceType,tN=N4.isTouch(),I4=N4.isPhone(),nN=N4.isTablet(),rN=["lists","autolink","autosave"],m_={table_grid:!1,object_resizing:!1,resize:!1},g0=function(e){var n=qt(e)?e.join(" "):e,a=$n(Tt(n)?n.split(" "):[],Ba);return bn(a,function(i){return i.length>0})},aN=function(e){return bn(e,Mt(Nt,rN))},oN=function(e,n){var a=Ar(n,function(i,c){return Nt(e,c)});return eN(a.t,a.f)},S2=function(e,n,a){a===void 0&&(a={});var i=e.sections(),c=Ir(i,n).getOr({});return je.extend({},a,c)},x2=function(e,n){return fr(e.sections(),n)},g_=function(e,n,a){var i=e.sections();return x2(e,n)&&i[n].theme===a},iN=function(e,n){return x2(e,n)?e.sections()[n]:{}},h_=function(e,n){return Ir(e,"toolbar_mode").orThunk(function(){return Ir(e,"toolbar_drawer").map(function(a){return a===!1?"wrap":a})}).getOr(n)},uN=function(e,n,a,i,c){var f={id:n,theme:"silver",toolbar_mode:h_(e,"floating"),plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c};return kn(kn({},f),i?m_:{})},p_=function(e,n){var a={resize:!1,toolbar_mode:h_(e,"scrolling"),toolbar_sticky:!1},i={menubar:!1};return kn(kn(kn({},m_),a),n?i:{})},sN=function(e,n){var a=n.external_plugins?n.external_plugins:{};return e&&e.external_plugins?je.extend({},e.external_plugins,a):a},cN=function(e,n){return[].concat(g0(e)).concat(g0(n))},lN=function(e,n,a,i){return e&&g_(n,"mobile","mobile")?aN(i):e&&x2(n,"mobile")?i:a},fN=function(e,n,a,i){var c=g0(a.forced_plugins),f=g0(i.plugins),g=iN(n,"mobile"),b=g.plugins?g0(g.plugins):f,C=lN(e,n,f,b),D=cN(c,C);if(St.browser.isIE()&&Nt(D,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return je.extend(i,{plugins:D.join(" ")})},vN=function(e,n){return e&&x2(n,"mobile")},ps=function(e,n,a,i,c){var f=e?{mobile:p_(c.mobile||{},n)}:{},g=oN(["mobile"],l_(f,c)),b=je.extend(a,i,g.settings(),vN(e,g)?S2(g,"mobile"):{},{validate:!0,external_plugins:sN(i,g.settings())});return fN(e,g,i,b)},b_=function(e,n,a,i,c){var f=uN(c,n,a,tN,e),g=ps(I4||nN,I4,f,i,c);return g.deprecation_warnings!==!1&&d_(c,g),g},Ep=function(e,n,a){return Q.from(n.settings[a]).filter(e)},dN=function(e){var n={};return typeof e=="string"?pt(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(a){var i=a.split("=");i.length>1?n[je.trim(i[0])]=je.trim(i[1]):n[je.trim(i[0])]=je.trim(i[0])}):n=e,n},mN=function(e){return function(n){return qt(n)&&ni(n,e)}},gN=function(e,n,a,i){var c=n in e.settings?e.settings[n]:a;return i==="hash"?dN(c):i==="string"?Ep(Tt,e,n).getOr(a):i==="number"?Ep($t,e,n).getOr(a):i==="boolean"?Ep(Ne,e,n).getOr(a):i==="object"?Ep(Ze,e,n).getOr(a):i==="array"?Ep(qt,e,n).getOr(a):i==="string[]"?Ep(mN(Tt),e,n).getOr(a):i==="function"?Ep(ht,e,n).getOr(a):c},da=function(){var e={},n=function(c,f){e[c]=f},a=function(c){return e[c]?e[c]:{icons:{}}},i=function(c){return fr(e,c)};return{add:n,get:a,has:i}},vT=da(),y_=function(e,n){var a=n.dom;return a[e]},w_=function(e,n){return parseInt(Cr(n,e),10)},si=Mt(y_,"clientWidth"),hN=Mt(y_,"clientHeight"),T2=Mt(w_,"margin-top"),pN=Mt(w_,"margin-left"),bN=function(e){return e.dom.getBoundingClientRect()},yN=function(e,n,a){var i=si(e),c=hN(e);return n>=0&&a>=0&&n<=i&&a<=c},C_=function(e,n,a,i){var c=bN(n),f=e?c.left+n.dom.clientLeft+pN(n):0,g=e?c.top+n.dom.clientTop+T2(n):0,b=a-f,C=i-g;return{x:b,y:C}},vm=function(e,n,a){var i=T.fromDom(e.getBody()),c=e.inline?i:Ws(i),f=C_(e.inline,c,n,a);return yN(c,f.x,f.y)},dl=function(e){return Q.from(e).map(T.fromDom)},k2=function(e){var n=e.inline?e.getBody():e.getContentAreaContainer();return dl(n).map(Hf).getOr(!1)},Op=function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}},mv=function(e){var n=[],a=function(){var F=e.theme;return F&&F.getNotificationManagerImpl?F.getNotificationManagerImpl():Op()},i=function(){return Q.from(n[0])},c=function(F,q){return F.type===q.type&&F.text===q.text&&!F.progressBar&&!F.timeout&&!q.progressBar&&!q.timeout},f=function(){n.length>0&&a().reposition(n)},g=function(F){n.push(F)},b=function(F){qo(n,function(q){return q===F}).each(function(q){n.splice(q,1)})},C=function(F,q){if(q===void 0&&(q=!0),!(e.removed||!k2(e)))return q&&e.fire("BeforeOpenNotification",{notification:F}),ya(n,function(X){return c(a().getArgs(X),F)}).getOrThunk(function(){e.editorManager.setActive(e);var X=a().open(F,function(){b(X),f(),i().fold(function(){return e.focus()},function(J){return Bb(T.fromDom(J.getEl()))})});return g(X),f(),e.fire("OpenNotification",{notification:kn({},X)}),X})},D=function(){i().each(function(F){a().close(F),b(F),f()})},I=Y(n),z=function(F){F.on("SkinLoaded",function(){var q=tS(F);q&&C({text:q,type:"warning",timeout:0},!1),f()}),F.on("show ResizeEditor ResizeWindow NodeChange",function(){Ru.requestAnimationFrame(f)}),F.on("remove",function(){pt(n.slice(),function(q){a().close(q)})})};return z(e),{open:C,close:D,getNotifications:I}},jc=As.PluginManager,dd=As.ThemeManager;function $4(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}var z4=function(e){var n=[],a=function(){var J=e.theme;return J&&J.getWindowManagerImpl?J.getWindowManagerImpl():$4()},i=function(J,ee){return function(){for(var ce=[],se=0;se<arguments.length;se++)ce[se]=arguments[se];return ee?ee.apply(J,ce):void 0}},c=function(J){e.fire("OpenWindow",{dialog:J})},f=function(J){e.fire("CloseWindow",{dialog:J})},g=function(J){n.push(J),c(J)},b=function(J){f(J),n=bn(n,function(ee){return ee!==J}),n.length===0&&e.focus()},C=function(){return Q.from(n[n.length-1])},D=function(J){e.editorManager.setActive(e),Nb(e);var ee=J();return g(ee),ee},I=function(J,ee){return D(function(){return a().open(J,ee,b)})},z=function(J){return D(function(){return a().openUrl(J,b)})},F=function(J,ee,ce){var se=a();se.alert(J,i(ce||se,ee))},q=function(J,ee,ce){var se=a();se.confirm(J,i(ce||se,ee))},X=function(){C().each(function(J){a().close(J),b(J)})};return e.on("remove",function(){pt(n,function(J){a().close(J)})}),{open:I,openUrl:z,alert:F,confirm:q,close:X}},F4=function(e,n){e.notificationManager.open({type:"error",text:n})},dT=function(e,n){e._skinLoaded?F4(e,n):e.on("SkinLoaded",function(){F4(e,n)})},S_=function(e,n){dT(e,vs.translate(["Failed to upload image: {0}",n]))},mT=function(e,n,a){Ab(e,n,{message:a}),console.error(a)},L4=function(e,n,a){return a?"Failed to load "+e+": "+a+" from url "+n:"Failed to load "+e+" url: "+n},gT=function(e,n,a){mT(e,"PluginLoadError",L4("plugin",n,a))},wN=function(e,n,a){mT(e,"IconsLoadError",L4("icons",n,a))},E2=function(e,n,a){mT(e,"LanguageLoadError",L4("language",n,a))},x_=function(e,n,a){var i=vs.translate(["Failed to initialize plugin: {0}",n]);Ab(e,"PluginLoadError",{message:i}),O2(i,a),dT(e,i)},O2=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=window.console;i&&(i.error?i.error.apply(i,Xo([e],n,!1)):i.log.apply(i,Xo([e],n,!1)))},dm=function(e){return/^[a-z0-9\-]+$/i.test(e)},H4=function(e){return T_(e,JC(e))},CN=function(e){return T_(e,ZC(e))},T_=function(e,n){var a=e.editorManager.baseURL+"/skins/content",i=e.editorManager.suffix,c="content"+i+".css",f=e.inline===!0;return $n(n,function(g){return dm(g)&&!f?a+"/"+g+"/"+c:e.documentBaseURI.toAbsolute(g)})},SN=function(e){e.contentCSS=e.contentCSS.concat(H4(e),CN(e))},Ap=function(){var e=1,n=2,a={},i=function(F,q){return{status:F,resultUri:q}},c=function(F){return F in a},f=function(F){var q=a[F];return q?q.resultUri:null},g=function(F){return c(F)?a[F].status===e:!1},b=function(F){return c(F)?a[F].status===n:!1},C=function(F){a[F]=i(e,null)},D=function(F,q){a[F]=i(n,q)},I=function(F){delete a[F]},z=function(){a={}};return{hasBlobUri:c,getResultUri:f,isPending:g,isUploaded:b,markPending:C,markUploaded:D,removeFailed:I,destroy:z}},xN=0,TN=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)},n=new Date().getTime();return"s"+n.toString(36)+e()+e()+e()},$u=function(e){return e+xN+++TN()},kN=function(){var e=[],n=function(z){var F={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return F[z.toLowerCase()]||"dat"},a=function(z,F,q,X,J){if(Tt(z)){var ee=z;return i({id:ee,name:X,filename:J,blob:F,base64:q})}else{if(Ze(z))return i(z);throw new Error("Unknown input type")}},i=function(z){if(!z.blob||!z.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var F=z.id||$u("blobid"),q=z.name||F,X=z.blob;return{id:Y(F),name:Y(q),filename:Y(z.filename||q+"."+n(X.type)),blob:Y(X),base64:Y(z.base64),blobUri:Y(z.blobUri||URL.createObjectURL(X)),uri:Y(z.uri)}},c=function(z){g(z.id())||e.push(z)},f=function(z){return ya(e,z).getOrUndefined()},g=function(z){return f(function(F){return F.id()===z})},b=function(z){return f(function(F){return F.blobUri()===z})},C=function(z,F){return f(function(q){return q.base64()===z&&q.blob().type===F})},D=function(z){e=bn(e,function(F){return F.blobUri()===z?(URL.revokeObjectURL(F.blobUri()),!1):!0})},I=function(){pt(e,function(z){URL.revokeObjectURL(z.blobUri())}),e=[]};return{create:a,add:c,get:g,getByUri:b,getByData:C,findFirst:f,removeByUri:D,destroy:I}},k_=function(e,n){var a={},i=function(X,J){return X?X.replace(/\/$/,"")+"/"+J.replace(/^\//,""):J},c=function(X,J,ee,ce){var se=new XMLHttpRequest;se.open("POST",n.url),se.withCredentials=n.credentials,se.upload.onprogress=function(Ee){ce(Ee.loaded/Ee.total*100)},se.onerror=function(){ee("Image upload failed due to a XHR Transport error. Code: "+se.status)},se.onload=function(){if(se.status<200||se.status>=300){ee("HTTP Error: "+se.status);return}var Ee=JSON.parse(se.responseText);if(!Ee||typeof Ee.location!="string"){ee("Invalid JSON: "+se.responseText);return}J(i(n.basePath,Ee.location))};var Ae=new FormData;Ae.append("file",X.blob(),X.filename()),se.send(Ae)},f=function(){return new Zi(function(X){X([])})},g=function(X,J){return{url:J,blobInfo:X,status:!0}},b=function(X,J,ee){return{url:"",blobInfo:X,status:!1,error:{message:J,options:ee}}},C=function(X,J){je.each(a[X],function(ee){ee(J)}),delete a[X]},D=function(X,J,ee){return e.markPending(X.blobUri()),new Zi(function(ce){var se,Ae;try{var Ee=function(){se&&(se.close(),Ae=We)},me=function(et){Ee(),e.markUploaded(X.blobUri(),et),C(X.blobUri(),g(X,et)),ce(g(X,et))},_e=function(et,bt){var Xn=bt||{};Ee(),e.removeFailed(X.blobUri()),C(X.blobUri(),b(X,et,Xn)),ce(b(X,et,Xn))};Ae=function(et){et<0||et>100||Q.from(se).orThunk(function(){return Q.from(ee).map(R)}).each(function(bt){se=bt,bt.progressBar.value(et)})},J(X,me,_e,Ae)}catch(et){ce(b(X,et.message,{}))}})},I=function(X){return X===c},z=function(X){var J=X.blobUri();return new Zi(function(ee){a[J]=a[J]||[],a[J].push(ee)})},F=function(X,J){return X=je.grep(X,function(ee){return!e.isUploaded(ee.blobUri())}),Zi.all(je.map(X,function(ee){return e.isPending(ee.blobUri())?z(ee):D(ee,n.handler,J)}))},q=function(X,J){return!n.url&&I(n.handler)?f():F(X,J)};return ht(n.handler)===!1&&(n.handler=c),{upload:q}},V4=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},U4=function(e,n){return k_(n,{url:hE(e),basePath:qv(e),credentials:Kv(e),handler:pE(e)})},E_=function(e){var n=Ap(),a=U4(e,n);return{upload:function(i,c){return c===void 0&&(c=!0),a.upload(i,c?V4(e):void 0)}}},W4=function(e){var n=fs(null);e.on("change AddUndo",function(i){n.set(kn({},i.level))});var a=function(){var i=e.undoManager.data;na(i).filter(function(c){return!cm(n.get(),c)}).each(function(c){e.setDirty(!0),e.fire("change",{level:c,lastLevel:Qr(i,i.length-2).getOrNull()})})};return{fireIfChanged:a}},EN=function(e){var n=kN(),a,i,c=Ap(),f=[],g=W4(e),b=function(Ee){return function(me){return e.selection?Ee(me):[]}},C=function(Ee){return Ee+(Ee.indexOf("?")===-1?"?":"&")+new Date().getTime()},D=function(Ee,me,_e){var et=0;do et=Ee.indexOf(me,et),et!==-1&&(Ee=Ee.substring(0,et)+_e+Ee.substr(et+me.length),et+=_e.length-me.length+1);while(et!==-1);return Ee},I=function(Ee,me,_e){var et='src="'+_e+'"'+(_e===St.transparentSrc?' data-mce-placeholder="1"':"");return Ee=D(Ee,'src="'+me+'"',et),Ee=D(Ee,'data-mce-src="'+me+'"','data-mce-src="'+_e+'"'),Ee},z=function(Ee,me){pt(e.undoManager.data,function(_e){_e.type==="fragmented"?_e.fragments=$n(_e.fragments,function(et){return I(et,Ee,me)}):_e.content=I(_e.content,Ee,me)})},F=function(Ee,me){var _e=e.convertURL(me,"src");z(Ee.src,me),e.$(Ee).attr({src:Iy(e)?C(me):me,"data-mce-src":_e})},q=function(Ee){return a||(a=U4(e,c)),ce().then(b(function(me){var _e=$n(me,function(et){return et.blobInfo});return a.upload(_e,V4(e)).then(b(function(et){var bt=[],Xn=$n(et,function(an,st){var qn=me[st].blobInfo,xt=me[st].image;return an.status&&gE(e)?(n.removeByUri(xt.src),fm(e)||F(xt,an.url)):an.error&&(an.error.options.remove&&(z(xt.getAttribute("src"),St.transparentSrc),bt.push(xt)),S_(e,an.error.message)),{element:xt,status:an.status,uploadUri:an.url,blobInfo:qn}});return Xn.length>0&&g.fireIfChanged(),bt.length>0&&(fm(e)?console.error("Removing images on failed uploads is currently unsupported for RTC"):e.undoManager.transact(function(){pt(bt,function(an){e.dom.remove(an),n.removeByUri(an.src)})})),Ee&&Ee(Xn),Xn}))}))},X=function(Ee){if(Kh(e))return q(Ee)},J=function(Ee){if(ni(f,function(_e){return _e(Ee)})===!1)return!1;if(Ee.getAttribute("src").indexOf("data:")===0){var me=eb(e);return me(Ee)}return!0},ee=function(Ee){f.push(Ee)},ce=function(){return i||(i=YD(c,n)),i.findAll(e.getBody(),J).then(b(function(Ee){return Ee=bn(Ee,function(me){return typeof me=="string"?(dT(e,me),!1):!0}),fm(e)||pt(Ee,function(me){z(me.image.src,me.blobInfo.blobUri()),me.image.src=me.blobInfo.blobUri(),me.image.removeAttribute("data-mce-src")}),Ee}))},se=function(){n.destroy(),c.destroy(),i=a=null},Ae=function(Ee){return Ee.replace(/src="(blob:[^"]+)"/g,function(me,_e){var et=c.getResultUri(_e);if(et)return'src="'+et+'"';var bt=n.getByUri(_e);if(bt||(bt=ta(e.editorManager.get(),function(an,st){return an||st.editorUpload&&st.editorUpload.blobCache.getByUri(_e)},null)),bt){var Xn=bt.blob();return'src="data:'+Xn.type+";base64,"+bt.base64()+'"'}return me})};return e.on("SetContent",function(){Kh(e)?X():ce()}),e.on("RawSaveContent",function(Ee){Ee.content=Ae(Ee.content)}),e.on("GetContent",function(Ee){Ee.source_view||Ee.format==="raw"||Ee.format==="tree"||(Ee.content=Ae(Ee.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(Ee){pt(Ee,function(me){var _e=me.attr("src");if(!n.getByUri(_e)){var et=c.getResultUri(_e);et&&me.attr("src",et)}})})}),{blobCache:n,addFilter:ee,uploadImages:q,uploadImagesAuto:X,scanForImages:ce,destroy:se}},ON=function(e){var n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a,i,c){return Qn(a)&&a.hasAttribute("href")},onformat:function(a,i,c){je.each(c,function(f,g){e.setAttrib(a,g,f)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(a){var i;return(i=a==null?void 0:a.customValue)!==null&&i!==void 0?i:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return je.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(a){n[a]={block:a,remove:"all"}}),n},AN=function(e){var n={},a=function(g){return Kt(g)?n[g]:n},i=function(g){return fr(n,g)},c=function(g,b){g&&(Tt(g)?(qt(b)||(b=[b]),pt(b,function(C){ke(C.deep)&&(C.deep=!Qs(C)),ke(C.split)&&(C.split=!Qs(C)||Cu(C)),ke(C.remove)&&Qs(C)&&!Cu(C)&&(C.remove="none"),Qs(C)&&Cu(C)&&(C.mixed=!0,C.block_expand=!0),Tt(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[g]=b):Zt(g,function(C,D){c(D,C)}))},f=function(g){return g&&n[g]&&delete n[g],n};return c(ON(e.dom)),c(yE(e)),{get:a,has:i,register:c,unregister:f}},hT=je.each,nc=ao.DOM,gv=function(e,n){var a,i,c,f=n&&n.schema||yc({}),g=function(I,z){z.classes.length&&nc.addClass(I,z.classes.join(" ")),nc.setAttribs(I,z.attrs)},b=function(I){i=typeof I=="string"?{name:I,classes:[],attrs:{}}:I;var z=nc.create(i.name);return g(z,i),z},C=function(I,z){var F=typeof I!="string"?I.nodeName.toLowerCase():I,q=f.getElementRule(F),X=q&&q.parentsRequired;return X&&X.length?z&&je.inArray(X,z)!==-1?z:X[0]:!1},D=function(I,z,F){var q,X,J=z.length>0&&z[0],ee=J&&J.name,ce=C(I,ee);if(ce)ee===ce?(X=z[0],z=z.slice(1)):X=ce;else if(J)X=z[0],z=z.slice(1);else if(!F)return I;return X&&(q=b(X),q.appendChild(I)),F&&(q||(q=nc.create("div"),q.appendChild(I)),je.each(F,function(se){var Ae=b(se);q.insertBefore(Ae,I)})),D(q,z,X&&X.siblings)};return e&&e.length?(i=e[0],a=b(i),c=nc.create("div"),c.appendChild(D(a,e.slice(1),i.siblings)),c):""},DN=function(e){var n,a={classes:[],attrs:{}};return e=a.selector=je.trim(e),e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(i,c,f,g,b){switch(c){case"#":a.attrs.id=f;break;case".":a.classes.push(f);break;case":":je.inArray("checked disabled enabled read-only required".split(" "),f)!==-1&&(a.attrs[f]=f);break}if(g==="["){var C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(a.attrs[C[1]]=C[2])}return""})),a.name=n||"div",a},_N=function(e){return!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),je.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){var a=je.map(n.split(/(?:~\+|~|\+)/),DN),i=a.pop();return a.length&&(i.siblings=a),i}).reverse())},RN=function(e,n){var a,i,c="",f,g=ig(e);if(g==="")return"";var b=function(z){return z.replace(/%(\w+)/g,"")};if(typeof n=="string"){if(n=e.formatter.get(n),!n)return;n=n[0]}if("preview"in n){var C=Ir(n,"preview");if(wd(C,!1))return"";g=C.getOr(g)}a=n.block||n.inline||"span";var D=_N(n.selector);D.length?(D[0].name||(D[0].name=a),a=n.selector,i=gv(D,e)):i=gv([a],e);var I=nc.select(a,i)[0]||i.firstChild;return hT(n.styles,function(z,F){var q=b(z);q&&nc.setStyle(I,F,q)}),hT(n.attributes,function(z,F){var q=b(z);q&&nc.setAttrib(I,F,q)}),hT(n.classes,function(z){var F=b(z);nc.hasClass(I,F)||nc.addClass(I,F)}),e.fire("PreviewFormats"),nc.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),f=nc.getStyle(e.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,hT(g.split(" "),function(z){var F=nc.getStyle(I,z,!0);if(!(z==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(F)&&(F=nc.getStyle(e.getBody(),z,!0),nc.toHex(F).toLowerCase()==="#ffffff"))&&!(z==="color"&&nc.toHex(F).toLowerCase()==="#000000")){if(z==="font-size"&&/em|%$/.test(F)){if(f===0)return;var q=parseFloat(F)/(/%$/.test(F)?100:1);F=q*f+"px"}z==="border"&&F&&(c+="padding:0 2px;"),c+=z+":"+F+";"}}),e.fire("AfterPreviewFormats"),nc.remove(i),c},MN=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},O_=function(e){var n=AN(e),a=fs(null);return MN(e),i4(e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:function(i,c,f){x5(e,i,c,f)},remove:function(i,c,f,g){Jg(e,i,c,f,g)},toggle:function(i,c,f){x4(e,i,c,f)},match:function(i,c,f,g){return h2(e,i,c,f,g)},closest:function(i){return S5(e,i)},matchAll:function(i,c){return BD(e,i,c)},matchNode:function(i,c,f,g){return PD(e,i,c,f,g)},canApply:function(i){return iT(e,i)},formatChanged:function(i,c,f,g){return ND(e,a,i,c,f,g)},getCssText:Mt(RN,e)}},ci=function(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},A_=function(e,n,a){var i=fs(!1),c=function(C){lm(n,!1,a),n.add({},C)};e.on("init",function(){n.add()}),e.on("BeforeExecCommand",function(C){var D=C.command;ci(D)||(aT(n,a),n.beforeChange())}),e.on("ExecCommand",function(C){var D=C.command;ci(D)||c(C)}),e.on("ObjectResizeStart cut",function(){n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",function(C){var D=C.keyCode;C.isDefaultPrevented()||((D>=33&&D<=36||D>=37&&D<=40||D===45||C.ctrlKey)&&(c(),e.nodeChanged()),(D===46||D===8)&&e.nodeChanged(),i.get()&&n.typing&&cm(d0(e),n.data[0])===!1&&(e.isDirty()===!1&&(e.setDirty(!0),e.fire("change",{level:n.data[0],lastLevel:null})),e.fire("TypingUndo"),i.set(!1),e.nodeChanged()))}),e.on("keydown",function(C){var D=C.keyCode;if(!C.isDefaultPrevented()){if(D>=33&&D<=36||D>=37&&D<=40||D===45){n.typing&&c(C);return}var I=C.ctrlKey&&!C.altKey||C.metaKey;(D<16||D>20)&&D!==224&&D!==91&&!n.typing&&!I&&(n.beforeChange(),lm(n,!0,a),n.add({},C),i.set(!0))}}),e.on("mousedown",function(C){n.typing&&c(C)});var f=function(C){return C.inputType==="insertReplacementText"},g=function(C){return C.inputType==="insertText"&&C.data===null},b=function(C){return C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop"};e.on("input",function(C){C.inputType&&(f(C)||g(C)||b(C))&&c(C)}),e.on("AddUndo Undo Redo ClearUndos",function(C){C.isDefaultPrevented()||e.nodeChanged()})},D_=function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},Of=function(e){var n=Wv(),a=fs(0),i=fs(0),c={data:[],typing:!1,beforeChange:function(){p5(e,a,n)},add:function(f,g){return AD(e,c,i,a,n,f,g)},undo:function(){return DD(e,c,a,i)},redo:function(){return _D(e,i,c.data)},clear:function(){RD(e,c,i)},reset:function(){MD(e,c)},hasUndo:function(){return b5(e,c,i)},hasRedo:function(){return y5(e,c,i)},transact:function(f){return w5(e,c,a,f)},ignore:function(f){C5(e,a,f)},extra:function(f,g){S4(e,c,i,f,g)}};return fm(e)||A_(e,c,a),D_(e),c},__=[9,27,Jn.HOME,Jn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Jn.DOWN,Jn.UP,Jn.LEFT,Jn.RIGHT].concat(St.browser.isFirefox()?[224]:[]),R_="data-mce-placeholder",M_=function(e){return e.type==="keydown"||e.type==="keyup"},pT=function(e){var n=e.keyCode;return n===Jn.BACKSPACE||n===Jn.DELETE},BN=function(e){if(M_(e)){var n=e.keyCode;return!pT(e)&&(Jn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Nt(__,n))}else return!1},h0=function(e){return M_(e)&&!(pT(e)||e.type==="keyup"&&e.keyCode===229)},PN=function(e,n,a){if(mu(T.fromDom(n),!1)){var i=a==="",c=n.firstElementChild;return c?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:i?!e.isBlock(c):a===c.nodeName.toLowerCase():!0}else return!1},B_=function(e){var n=e.dom,a=yu(e),i=zy(e),c=function(f,g){if(!BN(f)){var b=e.getBody(),C=h0(f)?!1:PN(n,b,a),D=n.getAttrib(b,R_)!=="";(D!==C||g)&&(n.setAttrib(b,R_,C?i:null),n.setAttrib(b,"aria-placeholder",C?i:null),MS(e,C),e.on(C?"keydown":"keyup",c),e.off(C?"keyup":"keydown",c))}};i&&e.on("init",function(f){c(f,!0),e.on("change SetContent ExecCommand",c),e.on("paste",function(g){return Ru.setEditorTimeout(e,function(){return c(g)})})})},P_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,j4=function(e){return P_.test(e)},Zg=function(e,n){return Rt(T.fromDom(n),av(e))},G4=function(e){return ao.DOM.getStyle(e,"direction",!0)==="rtl"||j4(e.textContent)},NN=function(e,n,a){return bn(ao.DOM.getParents(a.container(),"*",n),e)},Qg=function(e,n,a){var i=NN(e,n,a);return Q.from(i[i.length-1])},IN=function(e,n,a){var i=Bl(n,e),c=Bl(a,e);return i&&i===c},Af=function(e){return Hn(e)||s1(e)},Ll=function(e,n){if(!n)return n;var a=n.container(),i=n.offset();return e?Qa(a)?un(a.nextSibling)?Ue(a.nextSibling,0):Ue.after(a):Hn(n)?Ue(a,i+1):n:Qa(a)?un(a.previousSibling)?Ue(a.previousSibling,a.previousSibling.data.length):Ue.before(a):s1(n)?Ue(a,i-1):n},N_=Mt(Ll,!0),I_=Mt(Ll,!1),A2=function(e){return function(n){return Yn(e,T.fromDom(n.dom.parentNode))}},$N=function(e){return Ql(e)||Mu(e)},D2=function(e,n){return Ca(e,n)?_m(n,$N,A2(e)):Q.none()},$_=function(e){var n=e.getBody(),a=n.firstChild&&e.dom.isBlock(n.firstChild)?n.firstChild:n;e.selection.setCursorLocation(a,0)},q4=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),$_(e))},zN=function(e,n,a){return Vu(qu(a),Lc(a),function(i,c){var f=Ll(!0,i),g=Ll(!1,c),b=Ll(!1,n);return e?ul(a,b).exists(function(C){return C.isEqual(g)&&n.isEqual(f)}):Il(a,b).exists(function(C){return C.isEqual(f)&&n.isEqual(g)})}).getOr(!0)},FN=function(e,n){return{block:e,position:n}},eh=function(e,n){return{from:e,to:n}},K4=function(e,n){var a=T.fromDom(e),i=T.fromDom(n.container());return D2(a,i).map(function(c){return FN(c,n)})},LN=function(e){return Yn(e.from.block,e.to.block)===!1},HN=function(e){return Po(e.from.block).bind(function(n){return Po(e.to.block).filter(function(a){return Yn(n,a)})}).isSome()},VN=function(e){return lo(e.from.block.dom)===!1&&lo(e.to.block.dom)===!1},UN=function(e,n,a){return Va(a.position.getNode())&&mu(a.block)===!1?ov(!1,a.block.dom).bind(function(i){return i.isEqual(a.position)?Rs(n,e,i).bind(function(c){return K4(e,c)}):Q.some(a)}).getOr(a):a},WN=function(e,n,a){var i=K4(e,Ue.fromRangeStart(a)),c=i.bind(function(f){return Rs(n,e,f.position).bind(function(g){return K4(e,g).map(function(b){return UN(e,n,b)})})});return Vu(i,c,eh).filter(function(f){return LN(f)&&HN(f)&&VN(f)})},jN=function(e,n,a){return a.collapsed?WN(e,n,a):Q.none()},GN=function(e){var n=Hu(e);return qo(n,mc).fold(Y(n),function(a){return n.slice(0,a)})},z_=function(e){var n=GN(e);return pt(n,Uo),n},F_=function(e,n){var a=$l(n,e);return ya(a.reverse(),function(i){return mu(i)}).each(Uo)},qN=function(e){return bn(la(e),function(n){return!mu(n)}).length===0},KN=function(e,n,a,i){if(mu(a))return xf(a),qu(a.dom);qN(i)&&mu(n)&&fu(i,T.fromTag("br"));var c=Il(a.dom,Ue.before(i.dom));return pt(z_(n),function(f){fu(i,f)}),F_(e,n),c},_2=function(e,n,a){if(mu(a))return Uo(a),mu(n)&&xf(n),qu(n.dom);var i=Lc(a.dom);return pt(z_(n),function(c){Di(a,c)}),F_(e,n),i},XN=function(e,n){var a=$l(n,e);return Q.from(a[a.length-1])},X4=function(e,n){return Ca(n,e)?XN(n,e):Q.none()},L_=function(e,n){ov(e,n.dom).map(function(a){return a.getNode()}).map(T.fromDom).filter(Bm).each(Uo)},H_=function(e,n,a){return L_(!0,n),L_(!1,a),X4(n,a).fold(Mt(_2,e,n,a),Mt(KN,e,n,a))},V_=function(e,n,a,i){return n?H_(e,i,a):H_(e,a,i)},bT=function(e,n){var a=T.fromDom(e.getBody()),i=jN(a.dom,n,e.selection.getRng()).bind(function(c){return V_(a,n,c.from.block,c.to.block)});return i.each(function(c){e.selection.setRng(c.toRange())}),i.isSome()},Dp=function(e,n){var a=n.getRng();return Vu(D2(e,T.fromDom(a.startContainer)),D2(e,T.fromDom(a.endContainer)),function(i,c){return Yn(i,c)===!1?(a.deleteContents(),V_(e,!0,i,c).each(function(f){n.setRng(f.toRange())}),!0):!1}).getOr(!1)},th=function(e,n){var a=T.fromDom(n),i=Mt(Yn,e);return Ev(a,Tl,i).isSome()},yT=function(e,n){return th(e,n.startContainer)||th(e,n.endContainer)},wT=function(e,n){var a=Il(e.dom,Ue.fromRangeStart(n)).isNone(),i=ul(e.dom,Ue.fromRangeEnd(n)).isNone();return!yT(e,n)&&a&&i},_p=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},Rp=function(e){var n=T.fromDom(e.getBody()),a=e.selection.getRng();return wT(n,a)?_p(e):Dp(n,e.selection)},Mp=function(e,n){return e.selection.isCollapsed()?!1:Rp(e)},CT=Jc,U_=lo,hv=function(e,n,a,i,c){return Q.from(n._selectionOverrides.showCaret(e,a,i,c))},Y4=function(e){var n=e.ownerDocument.createRange();return n.selectNode(e),n},Bp=function(e,n){var a=e.fire("BeforeObjectSelected",{target:n});return a.isDefaultPrevented()?Q.none():Q.some(Y4(n))},J4=function(e,n,a){var i=Iu(1,e.getBody(),n),c=Ue.fromRangeStart(i),f=c.getNode();if(fg(f))return hv(1,e,f,!c.isAtEnd(),!1);var g=c.getNode(!0);if(fg(g))return hv(1,e,g,!1,!1);var b=e.dom.getParent(c.getNode(),function(C){return U_(C)||CT(C)});return fg(b)?hv(1,e,b,!1,a):Q.none()},nh=function(e,n,a){return n.collapsed?J4(e,n,a).getOr(n):n},W_=function(e){return fl(e)||Ig(e)},j_=function(e){return ld(e)||$g(e)},G_=function(e,n){un(n)&&n.data.length===0&&e.remove(n)},R2=function(e,n,a,i,c,f){return hv(i,e,f.getNode(!c),c,!0).each(function(g){if(n.collapsed){var b=n.cloneRange();c?b.setEnd(g.startContainer,g.startOffset):b.setStart(g.endContainer,g.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(g)}),G_(e.dom,a),!0},q_=function(e,n){var a=e.selection.getRng();if(!un(a.commonAncestorContainer))return!1;var i=n?wu.Forwards:wu.Backwards,c=jo(e.getBody()),f=Mt(Yy,n?c.next:c.prev),g=n?W_:j_,b=pg(i,e.getBody(),a),C=Ll(n,f(b));if(!C||!vb(b,C))return!1;if(g(C))return R2(e,a,b.getNode(),i,n,C);var D=f(C);return D&&g(D)&&vb(C,D)?R2(e,a,b.getNode(),i,n,D):!1},M2=function(e,n){return q_(e,n)},K_=function(e){return Tl(T.fromDom(e))||Mu(T.fromDom(e))},Gc=In.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),mm=function(e,n){var a=n.getNode(e===!1),i=e?"after":"before";return Qn(a)&&a.getAttribute("data-mce-caret")===i},X_=function(e,n,a,i){var c=function(f){return Uu(T.fromDom(f))&&!Pl(a,i,e)};return hg(!n,a).fold(function(){return hg(n,i).fold(wt,c)},c)},Z4=function(e,n,a,i){var c=i.getNode(n===!1);return D2(T.fromDom(e),T.fromDom(a.getNode())).map(function(f){return mu(f)?Gc.remove(f.dom):Gc.moveToElement(c)}).orThunk(function(){return Q.some(Gc.moveToElement(c))})},gm=function(e,n,a){return Rs(n,e,a).bind(function(i){return K_(i.getNode())||X_(e,n,a,i)?Q.none():n&&lo(i.getNode())||n===!1&&lo(i.getNode(!0))?Z4(e,n,a,i):n&&ld(a)||n===!1&&fl(a)?Q.some(Gc.moveToPosition(i)):Q.none()})},Df=function(e,n){return e&&lo(n.nextSibling)?Q.some(Gc.moveToElement(n.nextSibling)):e===!1&&lo(n.previousSibling)?Q.some(Gc.moveToElement(n.previousSibling)):Q.none()},YN=function(e,n,a){return a.fold(function(i){return Q.some(Gc.remove(i))},function(i){return Q.some(Gc.moveToElement(i))},function(i){return Pl(n,i,e)?Q.none():Q.some(Gc.moveToPosition(i))})},JN=function(e,n,a){return mm(n,a)?Df(n,a.getNode(n===!1)).fold(function(){return gm(e,n,a)},Q.some):gm(e,n,a).bind(function(i){return YN(e,a,i)})},ZN=function(e,n,a){var i=Iu(n?1:-1,e,a),c=Ue.fromRangeStart(i),f=T.fromDom(e);return n===!1&&ld(c)?Q.some(Gc.remove(c.getNode(!0))):n&&fl(c)?Q.some(Gc.remove(c.getNode())):n===!1&&fl(c)&&Hg(f,c)?MO(f,c).map(function(g){return Gc.remove(g.getNode())}):n&&ld(c)&&Lg(f,c)?tr(f,c).map(function(g){return Gc.remove(g.getNode())}):JN(e,n,c)},QN=function(e,n){return function(a){return e._selectionOverrides.hideFakeCaret(),An(e,n,T.fromDom(a)),!0}},eI=function(e,n){return function(a){var i=n?Ue.before(a):Ue.after(a);return e.selection.setRng(i.toRange()),!0}},tI=function(e){return function(n){return e.selection.setRng(n.toRange()),!0}},Y_=function(e,n){return Q.from(em(e.getBody(),n))},nI=function(e,n){var a=e.selection.getNode();return Y_(e,a).filter(lo).fold(function(){return ZN(e.getBody(),n,e.selection.getRng()).exists(function(i){return i.fold(QN(e,n),eI(e,n),tI(e))})},jt)},rI=function(e){pt(bu(e,".mce-offscreen-selection"),Uo)},aI=function(e,n){var a=e.selection.getNode();if(lo(a)&&!Em(a)){var i=Y_(e,a.parentNode).filter(lo);return i.fold(function(){return rI(T.fromDom(e.getBody())),An(e,n,T.fromDom(e.selection.getNode())),q4(e),!0},jt)}return!1},J_=function(e){var n=e.dom,a=e.selection,i=em(e.getBody(),a.getNode());if(Jc(i)&&n.isBlock(i)&&n.isEmpty(i)){var c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(i,""),i.appendChild(c),a.setRng(Ue.before(c).toRange())}return!0},ST=function(e,n){return e.selection.isCollapsed()?nI(e,n):aI(e,n)},Q4=function(e,n){var a=Ue.fromRangeStart(e.selection.getRng());return Rs(n,e.getBody(),a).filter(function(i){return n?_O(i):Xw(i)}).bind(function(i){return Q.from(cb(n?0:-1,i))}).exists(function(i){return e.selection.select(i),!0})},p0=function(e,n){return e.selection.isCollapsed()?Q4(e,n):!1},Pp=un,Z_=function(e){return Pp(e)&&e.data[0]===Se},Q_=function(e){return Pp(e)&&e.data[e.data.length-1]===Se},eA=function(e){return e.ownerDocument.createTextNode(Se)},eR=function(e){if(Pp(e.previousSibling))return Q_(e.previousSibling)||e.previousSibling.appendData(Se),e.previousSibling;if(Pp(e))return Z_(e)||e.insertData(0,Se),e;var n=eA(e);return e.parentNode.insertBefore(n,e),n},tA=function(e){if(Pp(e.nextSibling))return Z_(e.nextSibling)||e.nextSibling.insertData(0,Se),e.nextSibling;if(Pp(e))return Q_(e)||e.appendData(Se),e;var n=eA(e);return e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n),n},B2=function(e,n){return e?eR(n):tA(n)},tR=Mt(B2,!0),nA=Mt(B2,!1),nR=function(e,n){return un(e.container())?B2(n,e.container()):B2(n,e.getNode())},rR=function(e,n){var a=n.get();return a&&e.container()===a&&Qa(a)},_f=function(e,n){return n.fold(function(a){Xv(e.get());var i=tR(a);return e.set(i),Q.some(Ue(i,i.length-1))},function(a){return qu(a).map(function(i){if(rR(i,e))return Ue(e.get(),1);Xv(e.get());var c=nR(i,!0);return e.set(c),Ue(c,1)})},function(a){return Lc(a).map(function(i){if(rR(i,e))return Ue(e.get(),e.get().length-1);Xv(e.get());var c=nR(i,!1);return e.set(c),Ue(c,c.length-1)})},function(a){Xv(e.get());var i=nA(a);return e.set(i),Q.some(Ue(i,1))})},Hl=function(e,n){for(var a=0;a<e.length;a++){var i=e[a].apply(null,n);if(i.isSome())return i}return Q.none()},Yu=In.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rA=function(e,n){var a=Bl(n,e);return a||e},xT=function(e,n,a){var i=N_(a),c=rA(n,i.container());return Qg(e,c,i).fold(function(){return ul(c,i).bind(Mt(Qg,e,c)).map(function(f){return Yu.before(f)})},Q.none)},aR=function(e,n){return Xd(e,n)===null},aA=function(e,n,a){return Qg(e,n,a).filter(Mt(aR,n))},oR=function(e,n,a){var i=I_(a);return aA(e,n,i).bind(function(c){var f=Il(c,i);return f.isNone()?Q.some(Yu.start(c)):Q.none()})},iR=function(e,n,a){var i=N_(a);return aA(e,n,i).bind(function(c){var f=ul(c,i);return f.isNone()?Q.some(Yu.end(c)):Q.none()})},uR=function(e,n,a){var i=I_(a),c=rA(n,i.container());return Qg(e,c,i).fold(function(){return Il(c,i).bind(Mt(Qg,e,c)).map(function(f){return Yu.after(f)})},Q.none)},oA=function(e){return G4(b0(e))===!1},Vl=function(e,n,a){var i=Hl([xT,oR,iR,uR],[e,n,a]);return i.filter(oA)},b0=function(e){return e.fold(Pn,Pn,Pn,Pn)},TT=function(e){return e.fold(Y("before"),Y("start"),Y("end"),Y("after"))},kT=function(e){return e.fold(Yu.before,Yu.before,Yu.after,Yu.after)},iA=function(e){return e.fold(Yu.start,Yu.start,Yu.end,Yu.end)},oI=function(e,n){return TT(e)===TT(n)&&b0(e)===b0(n)},iI=function(e,n,a,i,c,f){return Vu(Qg(n,a,i),Qg(n,a,c),function(g,b){return g!==b&&IN(a,g,b)?Yu.after(e?g:b):f}).getOr(f)},sR=function(e,n){return e.fold(jt,function(a){return!oI(a,n)})},uI=function(e,n,a,i,c){var f=Ll(e,c),g=Rs(e,a,f).map(Mt(Ll,e)),b=g.fold(function(){return i.map(kT)},function(C){return Vl(n,a,C).map(Mt(iI,e,n,a,f,C)).filter(Mt(sR,i))});return b.filter(oA)},sI=function(e,n){return e?n.fold(ja(Q.some,Yu.start),Q.none,ja(Q.some,Yu.after),Q.none):n.fold(Q.none,ja(Q.some,Yu.before),Q.none,ja(Q.some,Yu.end))},P2=function(e,n,a,i){var c=Ll(e,i),f=Vl(n,a,c);return Vl(n,a,c).bind(Mt(sI,e)).orThunk(function(){return uI(e,n,a,f,i)})};Mt(P2,!1),Mt(P2,!0);var cI=function(e){return ht(e.selection.getSel().modify)},cR=function(e,n,a){var i=e?1:-1;return n.setRng(Ue(a.container(),a.offset()+i).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},lI=function(e,n){var a=n.selection.getRng(),i=e?Ue.fromRangeEnd(a):Ue.fromRangeStart(a);return cI(n)?e&&Hn(i)?cR(!0,n.selection,i):!e&&s1(i)?cR(!1,n.selection,i):!1:!1},md;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(md||(md={}));var ET=function(e,n){return e===wu.Backwards?io(n):n},fI=function(e,n,a){return e===wu.Forwards?n.next(a):n.prev(a)},vI=function(e,n,a,i){return Va(i.getNode(n===wu.Forwards))?md.Br:Pl(a,i)===!1?md.Block:md.Wrap},N2=function(e,n,a,i){for(var c=jo(a),f=i,g=[];f;){var b=fI(n,c,f);if(!b)break;if(Va(b.getNode(!1)))return n===wu.Forwards?{positions:ET(n,g).concat([b]),breakType:md.Br,breakAt:Q.some(b)}:{positions:ET(n,g),breakType:md.Br,breakAt:Q.some(b)};if(!b.isVisible()){f=b;continue}if(e(f,b)){var C=vI(a,n,f,b);return{positions:ET(n,g),breakType:C,breakAt:Q.some(b)}}g.push(b),f=b}return{positions:ET(n,g),breakType:md.Eol,breakAt:Q.none()}},I2=function(e,n,a,i){return n(a,i).breakAt.map(function(c){var f=n(a,c).positions;return e===wu.Backwards?f.concat(c):[c].concat(f)}).getOr([])},$2=function(e,n){return ta(e,function(a,i){return a.fold(function(){return Q.some(i)},function(c){return Vu(Ga(c.getClientRects()),Ga(i.getClientRects()),function(f,g){var b=Math.abs(n-f.left),C=Math.abs(n-g.left);return C<=b?i:c}).or(a)})},Q.none())},lR=function(e,n){return Ga(n.getClientRects()).bind(function(a){return $2(e,a.left)})},z2=Mt(N2,Ue.isAbove,-1),F2=Mt(N2,Ue.isBelow,1),dI=Mt(I2,-1,z2),fR=Mt(I2,1,F2),mI=function(e,n){return z2(e,n).breakAt.isNone()},gI=function(e,n){return F2(e,n).breakAt.isNone()},uA=function(e){return qu(e).map(function(n){return[n].concat(F2(e,n).positions)}).getOr([])},hI=function(e){return Lc(e).map(function(n){return z2(e,n).positions.concat(n)}).getOr([])},pI=function(e){var n=function(i){return $n(i,function(c){var f=jv(c);return f.node=e,f})};if(Qn(e))return n(e.getClientRects());if(un(e)){var a=e.ownerDocument.createRange();return a.setStart(e,0),a.setEnd(e,e.data.length),n(a.getClientRects())}},sA=function(e){return fi(e,pI)},Np;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Np||(Np={}));var bI=function(e,n,a,i){for(;i=Jv(i,e,bi,n);)if(a(i))return},vR=function(e,n,a,i,c,f){var g=0,b=[],C=function(z){var F=sA([z]);e===-1&&(F=F.reverse());for(var q=0;q<F.length;q++){var X=F[q];if(!a(X,D)){if(b.length>0&&n(X,mi(b))&&g++,X.line=g,c(X))return!0;b.push(X)}}},D=mi(f.getClientRects());if(!D)return b;var I=f.getNode();return C(I),bI(e,i,C,I),b},yI=function(e,n){return n.line>e},OT=function(e,n){return n.line===e},AT=Mt(vR,Np.Up,Jm,Zm),wI=Mt(vR,Np.Down,Zm,Jm),CI=function(e,n,a,i){var c=jo(n),f,g,b,C,D=[],I=0,z=function(J){return mi(J.getClientRects())};e===1?(f=c.next,g=Zm,b=Jm,C=Ue.after(i)):(f=c.prev,g=Jm,b=Zm,C=Ue.before(i));var F=z(C);do if(C.isVisible()){var q=z(C);if(!b(q,F)){D.length>0&&g(q,mi(D))&&I++;var X=jv(q);if(X.position=C,X.line=I,a(X))return D;D.push(X)}}while(C=f(C));return D},L2=function(e){return function(n){return yI(e,n)}},cA=function(e){return function(n){return OT(e,n)}},SI=lo,dR=Jv,lA=function(e,n){return Math.abs(e.left-n)},fA=function(e,n){return Math.abs(e.right-n)},mR=function(e,n){return e>=n.left&&e<=n.right},xI=function(e,n){return e>=n.top&&e<=n.bottom},TI=function(e){return So(e,"node")},DT=function(e,n,a){return a===void 0&&(a=jt),qi(e,function(i,c){if(mR(n,c))return a(c)?c:i;if(mR(n,i))return a(i)?i:c;var f=Math.min(lA(i,n),fA(i,n)),g=Math.min(lA(c,n),fA(c,n));return g===f&&TI(c)&&SI(c.node)||g<f?c:i})},gR=function(e,n,a,i,c){var f=dR(i,e,bi,n,!c);do if(!f||a(f))return;while(f=dR(f,e,bi,n))},kI=function(e,n,a){a===void 0&&(a=!0);var i=[],c=function(f,g){var b=bn(sA([g]),function(C){return!f(C,n)});return i=i.concat(b),b.length===0};return i.push(n),gR(Np.Up,e,Mt(c,Jm),n.node,a),gR(Np.Down,e,Mt(c,Zm),n.node,a),i},EI=function(e){return bn(Pr(e.getElementsByTagName("*")),Gd)},Rf=function(e,n){return{node:e.node,before:lA(e,n)<fA(e,n)}},vA=function(e,n,a){var i=sA(EI(e)),c=bn(i,Mt(xI,a)),f=function(C){return!ii(C.node)&&!Ts(C.node)},g=DT(c,n,f);if(g){var b=f(g);if(g=DT(kI(e,g,b),n,f),g&&Gd(g.node))return Rf(g,n)}return null},gd=function(e,n){e.selection.setRng(n),sp(e,e.selection.getRng())},_T=function(e,n,a){return Q.some(nh(e,n,a))},hR=function(e,n,a,i,c,f){var g=n===wu.Forwards,b=jo(e.getBody()),C=Mt(Yy,g?b.next:b.prev),D=g?i:c;if(!a.collapsed){var I=Ld(a);if(f(I))return hv(n,e,I,n===wu.Backwards,!1)}var z=pg(n,e.getBody(),a);if(D(z))return Bp(e,z.getNode(!g));var F=Ll(g,C(z)),q=ef(a);if(!F)return q?Q.some(a):Q.none();if(D(F))return hv(n,e,F.getNode(!g),g,!1);var X=C(F);return X&&D(X)&&vb(F,X)?hv(n,e,X.getNode(!g),g,!1):q?_T(e,F.toRange(),!1):Q.none()},dA=function(e,n,a,i,c,f){var g=pg(n,e.getBody(),a),b=mi(g.getClientRects()),C=n===Np.Down;if(!b)return Q.none();var D=C?wI:AT,I=D(e.getBody(),L2(1),g),z=bn(I,cA(1)),F=b.left,q=DT(z,F);if(q&&f(q.node)){var X=Math.abs(F-q.left),J=Math.abs(F-q.right);return hv(n,e,q.node,X<J,!1)}var ee;if(i(g)?ee=g.getNode():c(g)?ee=g.getNode(!0):ee=Ld(a),ee){var ce=CI(n,e.getBody(),L2(1),ee),se=DT(bn(ce,cA(1)),F);if(se||(se=mi(bn(ce,cA(0))),se))return _T(e,se.position.toRange(),!1)}return z.length===0?mA(e,C).filter(C?c:i).map(function(Ae){return nh(e,Ae.toRange(),!1)}):Q.none()},mA=function(e,n){var a=e.selection.getRng(),i=e.getBody();if(n){var c=Ue.fromRangeEnd(a),f=F2(i,c);return na(f.positions)}else{var c=Ue.fromRangeStart(a),f=z2(i,c);return Ga(f.positions)}},gA=function(e,n,a){return mA(e,n).filter(a).exists(function(i){return e.selection.setRng(i.toRange()),!0})},RT=function(e,n){var a=e.dom.createRng();a.setStart(n.container(),n.offset()),a.setEnd(n.container(),n.offset()),e.selection.setRng(a)},pR=function(e,n){e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},bR=function(e,n,a){return _f(n,a).map(function(i){return RT(e,i),a})},y0=function(e,n,a){var i=e.getBody(),c=Ue.fromRangeStart(e.selection.getRng()),f=Mt(Zg,e),g=P2(a,f,i,c);return g.bind(function(b){return bR(e,n,b)})},yR=function(e,n,a){var i=$n(bu(T.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(g){return g.dom}),c=bn(i,e),f=bn(a,e);pt(Ti(c,f),Mt(pR,!1)),pt(Ti(f,c),Mt(pR,!0))},wR=function(e,n){if(e.selection.isCollapsed()&&e.composing!==!0&&n.get()){var a=Ue.fromRangeStart(e.selection.getRng());Ue.isTextPosition(a)&&Af(a)===!1&&(RT(e,cS(n.get(),a)),n.set(null))}},CR=function(e,n,a,i){if(n.selection.isCollapsed()){var c=bn(i,e);pt(c,function(f){var g=Ue.fromRangeStart(n.selection.getRng());Vl(e,n.getBody(),g).bind(function(b){return bR(n,a,b)})})}},MT=function(e,n,a){return Xh(e)?y0(e,n,a).isSome():!1},SR=function(e,n,a){return Xh(n)?lI(e,n):!1},OI=function(e){var n=fs(null),a=Mt(Zg,e);return e.on("NodeChange",function(i){Xh(e)&&!(St.browser.isIE()&&i.initial)&&(yR(a,e.dom,i.parents),wR(e,n),CR(a,e,n,i.parents))}),n},AI=Mt(SR,!0),DI=Mt(SR,!1),BT=function(e,n,a){if(Xh(e)){var i=mA(e,n).getOrThunk(function(){var c=e.selection.getRng();return n?Ue.fromRangeEnd(c):Ue.fromRangeStart(c)});return Vl(Mt(Zg,e),e.getBody(),i).exists(function(c){var f=kT(c);return _f(a,f).exists(function(g){return RT(e,g),!0})})}else return!1},_I=function(e,n){var a=document.createRange();return a.setStart(e.container(),e.offset()),a.setEnd(n.container(),n.offset()),a},pv=function(e){return Vu(qu(e),Lc(e),function(n,a){var i=Ll(!0,n),c=Ll(!1,a);return ul(e,i).forall(function(f){return f.isEqual(c)})}).getOr(!0)},xR=function(e,n){return function(a){return _f(n,a).exists(function(i){return RT(e,i),!0})}},TR=function(e,n,a,i){var c=e.getBody(),f=Mt(Zg,e);e.undoManager.ignore(function(){e.selection.setRng(_I(a,i)),e.execCommand("Delete"),Vl(f,c,Ue.fromRangeStart(e.selection.getRng())).map(iA).map(xR(e,n))}),e.nodeChanged()},RI=function(e,n){var a=Bl(n,e);return a||e},MI=function(e,n,a,i){var c=RI(e.getBody(),i.container()),f=Mt(Zg,e),g=Vl(f,c,i);return g.bind(function(b){return a?b.fold(Y(Q.some(iA(b))),Q.none,Y(Q.some(kT(b))),Q.none):b.fold(Q.none,Y(Q.some(kT(b))),Q.none,Y(Q.some(iA(b))))}).map(xR(e,n)).getOrThunk(function(){var b=Nl(a,c,i),C=b.bind(function(D){return Vl(f,c,D)});return Vu(g,C,function(){return Qg(f,c,i).exists(function(D){return pv(D)?(An(e,a,T.fromDom(D)),!0):!1})}).orThunk(function(){return C.bind(function(D){return b.map(function(I){return a?TR(e,n,i,I):TR(e,n,I,i),!0})})}).getOr(!1)})},PT=function(e,n,a){if(e.selection.isCollapsed()&&Xh(e)){var i=Ue.fromRangeStart(e.selection.getRng());return MI(e,n,a,i)}return!1},BI=function(e,n){var a=$l(n,e);return qo(a,mc).fold(Y(a),function(i){return a.slice(0,i)})},PI=function(e){return n1(e)===1},rh=function(e,n,a,i){var c=Mt(EP,n),f=$n(bn(i,c),function(b){return b.dom});if(f.length===0)An(n,e,a);else{var g=u0(a.dom,f);n.selection.setRng(g.toRange())}},NI=function(e,n){var a=T.fromDom(e.getBody()),i=T.fromDom(e.selection.getStart()),c=bn(BI(a,i),PI);return na(c).exists(function(f){var g=Ue.fromRangeStart(e.selection.getRng());return zN(n,g,f.dom)&&!OP(f)?(rh(n,e,f,c),!0):!1})},NT=function(e,n){return e.selection.isCollapsed()?NI(e,n):!1},IT=function(e,n,a){return e._selectionOverrides.hideFakeCaret(),An(e,n,T.fromDom(a)),!0},hA=function(e,n){var a=n?Ig:$g,i=n?wu.Forwards:wu.Backwards,c=pg(i,e.getBody(),e.selection.getRng());return a(c)?IT(e,n,c.getNode(!n)):Q.from(Ll(n,c)).filter(function(f){return a(f)&&vb(c,f)}).exists(function(f){return IT(e,n,f.getNode(!n))})},II=function(e,n){var a=e.selection.getNode();return Ts(a)?IT(e,n,a):!1},$T=function(e,n){return e.selection.isCollapsed()?hA(e,n):II(e,n)},$I=function(e){return _m(e,function(n){return Jc(n.dom)||lo(n.dom)}).exists(function(n){return Jc(n.dom)})},hm=function(e){var n=parseInt(e,10);return isNaN(n)?0:n},kR=function(e,n){var a=e||Mk(n)?"margin":"padding",i=Cr(n,"direction")==="rtl"?"-right":"-left";return a+i},zI=function(e,n,a,i,c,f){var g=kR(a,T.fromDom(f));if(n==="outdent"){var b=Math.max(0,hm(f.style[g])-i);e.setStyle(f,g,b?b+c:"")}else{var b=hm(f.style[g])+i+c;e.setStyle(f,g,b)}},FI=function(e,n){return ni(n,function(a){var i=kR(YC(e),a),c=du(a,i).map(hm).getOr(0),f=e.dom.getContentEditable(a.dom);return f!=="false"&&c>0})},ER=function(e){var n=bA(e);return!e.mode.isReadOnly()&&(n.length>1||FI(e,n))},zT=function(e){return el(e)||Mu(e)},pA=function(e){return Po(e).exists(zT)},bA=function(e){return bn(Vi(e.selection.getSelectedBlocks()),function(n){return!zT(n)&&!pA(n)&&$I(n)})},yA=function(e,n){var a=e.dom,i=e.selection,c=e.formatter,f=$y(e),g=/[a-z%]+$/i.exec(f)[0],b=parseInt(f,10),C=YC(e),D=yu(e);!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")&&D===""&&!a.getParent(i.getNode(),a.isBlock)&&c.apply("div"),pt(bA(e),function(I){zI(a,n,C,b,g,I.dom)})},wA=function(e,n){if(e.selection.isCollapsed()&&ER(e)){var a=e.dom,i=e.selection.getRng(),c=Ue.fromRangeStart(i),f=a.getParent(i.startContainer,a.isBlock);if(f!==null&&mr(T.fromDom(f),c))return yA(e,"outdent"),!0}return!1},OR=function(e,n){e.getDoc().execCommand(n,!1,null)},H2=function(e,n){if(!wA(e)){if(ST(e,!1))return;if(M2(e,!1))return;if(PT(e,n,!1))return;if(bT(e,!1))return;if(Lx(e))return;if(p0(e,!1))return;if($T(e,!1))return;if(Mp(e))return;if(NT(e,!1))return;OR(e,"Delete"),q4(e)}},LI=function(e,n){if(!ST(e,!0)){if(M2(e,!0))return;if(PT(e,n,!0))return;if(bT(e,!0))return;if(Lx(e))return;if(p0(e,!0))return;if($T(e,!0))return;if(Mp(e))return;if(NT(e,!0))return;OR(e,"ForwardDelete")}},HI=function(e,n){e.addCommand("delete",function(){H2(e,n)}),e.addCommand("forwardDelete",function(){LI(e,n)})},AR=5,w0=400,DR=function(e){return e.touches===void 0||e.touches.length!==1?Q.none():Q.some(e.touches[0])},pm=function(e,n){var a=Math.abs(e.clientX-n.x),i=Math.abs(e.clientY-n.y);return a>AR||i>AR},VI=function(e){var n=Wv(),a=fs(!1),i=Hi(function(c){e.fire("longpress",kn(kn({},c),{type:"longpress"})),a.set(!0)},w0);e.on("touchstart",function(c){DR(c).each(function(f){i.cancel();var g={x:f.clientX,y:f.clientY,target:c.target};i.throttle(c),a.set(!1),n.set(g)})},!0),e.on("touchmove",function(c){i.cancel(),DR(c).each(function(f){n.on(function(g){pm(f,g)&&(n.clear(),a.set(!1),e.fire("longpresscancel"))})})},!0),e.on("touchend touchcancel",function(c){i.cancel(),c.type!=="touchcancel"&&n.get().filter(function(f){return f.target.isEqualNode(c.target)}).each(function(){a.get()?c.preventDefault():e.fire("tap",kn(kn({},c),{type:"tap"}))})},!0)},V2=function(e,n){return fr(e,n.nodeName)},CA=function(e,n){return un(n)?!0:Qn(n)?!V2(e,n)&&!Ms(n):!1},UI=function(e,n,a){return Dn(pp(T.fromDom(a),T.fromDom(n)),function(i){return V2(e,i.dom)})},WI=function(e,n){if(un(n)){if(n.nodeValue.length===0)return!0;if(/^\s+$/.test(n.nodeValue)&&(!n.nextSibling||V2(e,n.nextSibling)))return!0}return!1},jI=function(e){var n=e.dom,a=e.selection,i=e.schema,c=i.getBlockElements(),f=a.getStart(),g=e.getBody(),b,C,D,I=yu(e);if(!(!f||!Qn(f)||!I)){var z=g.nodeName.toLowerCase();if(!(!i.isValidChild(z,I.toLowerCase())||UI(c,g,f))){var F=a.getRng(),q=F.startContainer,X=F.startOffset,J=F.endContainer,ee=F.endOffset,ce=Uc(e);for(f=g.firstChild;f;)if(CA(c,f)){if(WI(c,f)){C=f,f=f.nextSibling,n.remove(C);continue}b||(b=n.create(I,rg(e)),f.parentNode.insertBefore(b,f),D=!0),C=f,f=f.nextSibling,b.appendChild(C)}else b=null,f=f.nextSibling;D&&ce&&(F.setStart(q,X),F.setEnd(J,ee),a.setRng(F),e.nodeChanged())}}},_R=function(e){yu(e)&&e.on("NodeChange",Mt(jI,e))},GI=function(e){return Rm(T.fromDom(e.getBody()),"*[data-mce-caret]").map(function(n){return n.dom}).getOrNull()},qI=function(e){e.selection.setRng(e.selection.getRng())},RR=function(e,n){n.hasAttribute("data-mce-caret")&&(V0(n),qI(e),e.selection.scrollIntoView(n))},KI=function(e,n){var a=GI(e);if(a){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),RR(e,a);return}Kf(a)&&(RR(e,a),e.undoManager.add())}},MR=function(e){e.on("keyup compositionstart",Mt(KI,e))},BR=lo,Ip=function(e,n,a){return hR(n,e,a,fl,ld,BR)},XI=function(e,n,a){var i=function(f){return fl(f)||Ex(f)},c=function(f){return ld(f)||Yw(f)};return dA(n,e,a,i,c,BR)},U2=function(e){var n=e.dom.create(yu(e));return(!St.ie||St.ie>=11)&&(n.innerHTML='<br data-mce-bogus="1">'),n},SA=function(e,n,a){var i=jo(e.getBody()),c=Mt(Yy,n===1?i.next:i.prev);if(a.collapsed&&SE(e)){var f=e.dom.getParent(a.startContainer,"PRE");if(!f)return;var g=c(Ue.fromRangeStart(a));if(!g){var b=U2(e);n===1?e.$(f).after(b):e.$(f).before(b),e.selection.select(b,!0),e.selection.collapse()}}},xA=function(e,n){var a=n?wu.Forwards:wu.Backwards,i=e.selection.getRng();return Ip(a,e,i).orThunk(function(){return SA(e,a,i),Q.none()})},TA=function(e,n){var a=n?1:-1,i=e.selection.getRng();return XI(a,e,i).orThunk(function(){return SA(e,a,i),Q.none()})},PR=function(e,n){return xA(e,n).exists(function(a){return gd(e,a),!0})},NR=function(e,n){return TA(e,n).exists(function(a){return gd(e,a),!0})},IR=function(e,n){var a=n?ld:fl;return gA(e,n,a)},kA=function(e){return Nt(["figcaption"],ca(e))},$R=function(e){var n=document.createRange();return n.setStartBefore(e.dom),n.setEndBefore(e.dom),n},zR=function(e,n,a){a?Di(e,n):Pc(e,n)},YI=function(e,n){var a=T.fromTag("br");return zR(e,a,n),$R(a)},JI=function(e,n,a,i){var c=T.fromTag(a),f=T.fromTag("br");return $(c,i),Di(c,f),zR(e,c,n),$R(f)},FR=function(e,n,a,i){return n===""?YI(e,i):JI(e,i,n,a)},ZI=function(e,n){var a=Mt(Yn,n);return _m(T.fromDom(e.container()),mc,a).filter(kA)},QI=function(e,n,a){return n?gI(e.dom,a):mI(e.dom,a)},e$=function(e,n){var a=T.fromDom(e.getBody()),i=Ue.fromRangeStart(e.selection.getRng()),c=yu(e),f=rg(e);return ZI(i,a).exists(function(){if(QI(a,n,i)){var g=FR(a,c,f,n);return e.selection.setRng(g),!0}else return!1})},LR=function(e,n){return e.selection.isCollapsed()?e$(e,n):!1},t$=function(e){return $n(e,function(n){return kn({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:We},n)})},n$=function(e,n){return n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey},r$=function(e,n){return fi(t$(e),function(a){return n$(a,n)?[a]:[]})},ea=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return e.apply(null,n)}},$p=function(e,n){return ya(r$(e,n),function(a){return a.action()})},HR=function(e,n){var a=n?wu.Forwards:wu.Backwards,i=e.selection.getRng();return hR(e,a,i,Ig,$g,Ts).exists(function(c){return gd(e,c),!0})},EA=function(e,n){var a=n?1:-1,i=e.selection.getRng();return dA(e,a,i,Ig,$g,Ts).exists(function(c){return gd(e,c),!0})},VR=function(e,n){var a=n?$g:Ig;return gA(e,n,a)},a$=function(e,n){return{left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}},o$=function(e,n){return fi(n,function(a){var i=a$(jv(a.getBoundingClientRect()),-1);return[{x:i.left,y:e(i),cell:a},{x:i.right,y:e(i),cell:a}]})},i$=function(e,n,a){return ta(e,function(i,c){return i.fold(function(){return Q.some(c)},function(f){var g=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-a)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-a));return Q.some(b<g?c:f)})},Q.none())},UR=function(e,n,a,i,c){var f=bu(T.fromDom(a),"td,th,caption").map(function(b){return b.dom}),g=bn(o$(e,f),function(b){return n(b,c)});return i$(g,i,c).map(function(b){return b.cell})},u$=function(e){return e.bottom},s$=function(e){return e.top},c$=function(e,n){return e.y<n},l$=function(e,n){return e.y>n},f$=Mt(UR,u$,c$),v$=Mt(UR,s$,l$),d$=function(e,n){return Ga(n.getClientRects()).bind(function(a){return f$(e,a.left,a.top)}).bind(function(a){return lR(hI(a),n)})},m$=function(e,n){return na(n.getClientRects()).bind(function(a){return v$(e,a.left,a.top)}).bind(function(a){return lR(uA(a),n)})},WR=function(e,n,a){return a.breakAt.exists(function(i){return e(n,i).breakAt.isSome()})},g$=function(e){return e.breakType===md.Wrap&&e.positions.length===0},h$=function(e){return e.breakType===md.Br&&e.positions.length===1},OA=function(e,n,a){var i=e(n,a);return g$(i)||!Va(a.getNode())&&h$(i)?!WR(e,n,i):i.breakAt.isNone()},jR=Mt(OA,z2),FT=Mt(OA,F2),GR=function(e,n,a){var i=Ue.fromRangeStart(n);return ov(!e,a).exists(function(c){return c.isEqual(i)})},AA=function(e,n,a,i){var c=e.selection.getRng(),f=n?1:-1;return qy()&&GR(n,c,a)?(hv(f,e,a,!n,!1).each(function(g){gd(e,g)}),!0):!1},DA=function(e,n,a){return d$(n,a).orThunk(function(){return Ga(a.getClientRects()).bind(function(i){return $2(dI(e,Ue.before(n)),i.left)})}).getOr(Ue.before(n))},qR=function(e,n,a){return m$(n,a).orThunk(function(){return Ga(a.getClientRects()).bind(function(i){return $2(fR(e,Ue.after(n)),i.left)})}).getOr(Ue.after(n))},KR=function(e,n){var a=n.getNode(e);return Qn(a)&&a.nodeName==="TABLE"?Q.some(a):Q.none()},XR=function(e,n,a,i){var c=yu(n);c?n.undoManager.transact(function(){var f=T.fromTag(c);$(f,rg(n)),Di(f,T.fromTag("br")),e?kv(T.fromDom(a),f):fu(T.fromDom(a),f);var g=n.dom.createRng();g.setStart(f.dom,0),g.setEnd(f.dom,0),gd(n,g)}):gd(n,i.toRange())},zp=function(e,n,a){var i=KR(!!n,a),c=n===!1;i.fold(function(){return gd(e,a.toRange())},function(f){return ov(c,e.getBody()).filter(function(g){return g.isEqual(a)}).fold(function(){return gd(e,a.toRange())},function(g){return XR(n,e,f,a)})})},YR=function(e,n,a,i){var c=e.selection.getRng(),f=Ue.fromRangeStart(c),g=e.getBody();if(!n&&jR(i,f)){var b=DA(g,a,f);return zp(e,n,b),!0}else if(n&&FT(i,f)){var b=qR(g,a,f);return zp(e,n,b),!0}else return!1},LT=function(e,n,a){return Q.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(i){return Q.from(e.dom.getParent(i,"table")).map(function(c){return a(e,n,c,i)})}).getOr(!1)},JR=function(e,n){return LT(e,n,AA)},HT=function(e,n){return LT(e,n,YR)},p$=function(e,n,a){var i=Yt().os;$p([{keyCode:Jn.RIGHT,action:ea(PR,e,!0)},{keyCode:Jn.LEFT,action:ea(PR,e,!1)},{keyCode:Jn.UP,action:ea(NR,e,!1)},{keyCode:Jn.DOWN,action:ea(NR,e,!0)},{keyCode:Jn.RIGHT,action:ea(JR,e,!0)},{keyCode:Jn.LEFT,action:ea(JR,e,!1)},{keyCode:Jn.UP,action:ea(HT,e,!1)},{keyCode:Jn.DOWN,action:ea(HT,e,!0)},{keyCode:Jn.RIGHT,action:ea(HR,e,!0)},{keyCode:Jn.LEFT,action:ea(HR,e,!1)},{keyCode:Jn.UP,action:ea(EA,e,!1)},{keyCode:Jn.DOWN,action:ea(EA,e,!0)},{keyCode:Jn.RIGHT,action:ea(MT,e,n,!0)},{keyCode:Jn.LEFT,action:ea(MT,e,n,!1)},{keyCode:Jn.RIGHT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:ea(AI,e,n)},{keyCode:Jn.LEFT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:ea(DI,e,n)},{keyCode:Jn.UP,action:ea(LR,e,!1)},{keyCode:Jn.DOWN,action:ea(LR,e,!0)}],a).each(function(c){a.preventDefault()})},b$=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&p$(e,n,a)})},y$=function(e,n,a){$p([{keyCode:Jn.BACKSPACE,action:ea(wA,e,!1)},{keyCode:Jn.BACKSPACE,action:ea(ST,e,!1)},{keyCode:Jn.DELETE,action:ea(ST,e,!0)},{keyCode:Jn.BACKSPACE,action:ea(M2,e,!1)},{keyCode:Jn.DELETE,action:ea(M2,e,!0)},{keyCode:Jn.BACKSPACE,action:ea(PT,e,n,!1)},{keyCode:Jn.DELETE,action:ea(PT,e,n,!0)},{keyCode:Jn.BACKSPACE,action:ea(Lx,e,!1)},{keyCode:Jn.DELETE,action:ea(Lx,e,!0)},{keyCode:Jn.BACKSPACE,action:ea(p0,e,!1)},{keyCode:Jn.DELETE,action:ea(p0,e,!0)},{keyCode:Jn.BACKSPACE,action:ea($T,e,!1)},{keyCode:Jn.DELETE,action:ea($T,e,!0)},{keyCode:Jn.BACKSPACE,action:ea(Mp,e,!1)},{keyCode:Jn.DELETE,action:ea(Mp,e,!0)},{keyCode:Jn.BACKSPACE,action:ea(bT,e,!1)},{keyCode:Jn.DELETE,action:ea(bT,e,!0)},{keyCode:Jn.BACKSPACE,action:ea(NT,e,!1)},{keyCode:Jn.DELETE,action:ea(NT,e,!0)}],a).each(function(i){a.preventDefault()})},w$=function(e,n){$p([{keyCode:Jn.BACKSPACE,action:ea(J_,e)},{keyCode:Jn.DELETE,action:ea(J_,e)}],n)},C$=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&y$(e,n,a)}),e.on("keyup",function(a){a.isDefaultPrevented()===!1&&w$(e,a)})},S$=function(e){for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},C0=function(e,n){var a,i=n,c=e.dom,f=e.schema.getMoveCaretBeforeOnEnterElements();if(n){if(/^(LI|DT|DD)$/.test(n.nodeName)){var g=S$(n.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&n.insertBefore(c.doc.createTextNode(Ks),n.firstChild)}var b=c.createRng();if(n.normalize(),n.hasChildNodes()){for(var C=new Ta(n,n);a=C.current();){if(un(a)){b.setStart(a,0),b.setEnd(a,0);break}if(f[a.nodeName.toLowerCase()]){b.setStartBefore(a),b.setEndBefore(a);break}i=a,a=C.next()}a||(b.setStart(i,0),b.setEnd(i,0))}else Va(n)?n.nextSibling&&c.isBlock(n.nextSibling)?(b.setStartBefore(n),b.setEndBefore(n)):(b.setStartAfter(n),b.setEndAfter(n)):(b.setStart(n,0),b.setEnd(n,0));e.selection.setRng(b),sp(e,b)}},S0=function(e,n){var a=e.getRoot(),i,c;for(i=n;i!==a&&e.getContentEditable(i)!=="false";)e.getContentEditable(i)==="true"&&(c=i),i=i.parentNode;return i!==a?c:a},_A=function(e){return Q.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},RA=function(e){return _A(e).fold(Y(""),function(n){return n.nodeName.toUpperCase()})},x$=function(e){return _A(e).filter(function(n){return Mu(T.fromDom(n))}).isSome()},ZR=function(e,n){return e.firstChild&&e.firstChild.nodeName===n},QR=function(e){var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},MA=function(e,n){return e&&e.parentNode&&e.parentNode.nodeName===n},BA=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},PA=function(e){return BA(e)&&BA(e.parentNode)},W2=function(e){var n=e.parentNode;return/^(LI|DT|DD)$/.test(n.nodeName)?n:e},VT=function(e,n,a){for(var i=e[a?"firstChild":"lastChild"];i&&!Qn(i);)i=i[a?"nextSibling":"previousSibling"];return i===n},T$=function(e,n,a,i,c){var f=e.dom,g=e.selection.getRng();if(a!==e.getBody()){PA(a)&&(c="LI");var b=c?n(c):f.create("BR");if(VT(a,i,!0)&&VT(a,i,!1))if(MA(a,"LI")){var C=W2(a);f.insertAfter(b,C),QR(a)?f.remove(C):f.remove(a)}else f.replace(b,a);else if(VT(a,i,!0))MA(a,"LI")?(f.insertAfter(b,W2(a)),b.appendChild(f.doc.createTextNode(" ")),b.appendChild(a)):a.parentNode.insertBefore(b,a),f.remove(i);else if(VT(a,i,!1))f.insertAfter(b,W2(a)),f.remove(i);else{a=W2(a);var D=g.cloneRange();D.setStartAfter(i),D.setEndAfter(a);var I=D.extractContents();c==="LI"&&ZR(I,"LI")?(b=I.firstChild,f.insertAfter(I,a)):(f.insertAfter(I,a),f.insertAfter(b,a)),f.remove(i)}C0(e,b)}},UT=function(e){pt(Ym(T.fromDom(e),Eo),function(n){var a=n.dom;a.nodeValue=kl(a.nodeValue)})},k$=function(e,n){return n&&n.nodeName==="A"&&e.isEmpty(n)},E$=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},NA=function(e){e.innerHTML='<br data-mce-bogus="1">'},WT=function(e,n){return e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n},eM=function(e,n){return n&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true"},O$=function(e,n,a){var i=a,c=[],f;if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;Qn(i)&&!n[i.nodeName.toLowerCase()]&&c.push(i)}for(f=c.length;f--;)i=c[f],(!i.hasChildNodes()||i.firstChild===i.lastChild&&i.firstChild.nodeValue===""||k$(e,i))&&e.remove(i)}},Ac=function(e,n,a){return un(n)===!1?a:e?a===1&&n.data.charAt(a-1)===Se?0:a:a===n.data.length-1&&n.data.charAt(a)===Se?n.data.length:a},A$=function(e){var n=e.cloneRange();return n.setStart(e.startContainer,Ac(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Ac(!1,e.endContainer,e.endOffset)),n},IA=function(e){do un(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},$A=function(e,n){var a=e.getRoot(),i,c;for(i=n;i!==a&&e.getContentEditable(i)!=="false";)e.getContentEditable(i)==="true"&&(c=i),i=i.parentNode;return i!==a?c:a},zA=function(e,n,a){var i=e.dom;Q.from(a.style).map(i.parseStyle).each(function(C){var D=No(T.fromDom(n)),I=kn(kn({},D),C);i.setStyles(n,I)});var c=Q.from(a.class).map(function(C){return C.split(/\s+/)}),f=Q.from(n.className).map(function(C){return bn(C.split(/\s+/),function(D){return D!==""})});Vu(c,f,function(C,D){var I=bn(D,function(F){return!Nt(C,F)}),z=Xo(Xo([],C,!0),I,!0);i.setAttrib(n,"class",z.join(" "))});var g=["style","class"],b=wa(a,function(C,D){return!Nt(g,D)});i.setAttribs(n,b)},j2=function(e,n){var a=yu(e);if(a&&a.toLowerCase()===n.tagName.toLowerCase()){var i=rg(e);zA(e,n,i)}},D$=function(e,n,a,i,c){var f,g,b,C,D,I,z=n||"P",F=e.dom,q=$A(F,i);if(g=F.getParent(i,F.isBlock),!g||!eM(F,g)){if(g=g||q,g===e.getBody()||E$(g)?I=g.nodeName.toLowerCase():I=g.parentNode.nodeName.toLowerCase(),!g.hasChildNodes())return f=F.create(z),j2(e,f),g.appendChild(f),a.setStart(f,0),a.setEnd(f,0),f;for(C=i;C.parentNode!==g;)C=C.parentNode;for(;C&&!F.isBlock(C);)b=C,C=C.previousSibling;if(b&&e.schema.isValidChild(I,z.toLowerCase())){for(f=F.create(z),j2(e,f),b.parentNode.insertBefore(f,b),C=b;C&&!F.isBlock(C);)D=C.nextSibling,f.appendChild(C),C=D;a.setStart(i,c),a.setEnd(i,c)}}return i},tM=function(e,n){n.normalize();var a=n.lastChild;(!a||/^(left|right)$/gi.test(e.getStyle(a,"float",!0)))&&e.add(n,"br")},_$=function(e,n){var a,i,c,f,g,b,C,D,I,z,F=e.dom,q=e.schema,X=q.getNonEmptyElements(),J=e.selection.getRng(),ee=function(et){var bt=i,Xn,an,st,qn=q.getTextInlineElements();if(et||D==="TABLE"||D==="HR"?Xn=F.create(et||I):Xn=f.cloneNode(!1),st=Xn,mE(e)===!1)F.setAttrib(Xn,"style",null),F.setAttrib(Xn,"class",null);else do if(qn[bt.nodeName]){if(mf(bt)||Ms(bt))continue;an=bt.cloneNode(!1),F.setAttrib(an,"id",""),Xn.hasChildNodes()?(an.appendChild(Xn.firstChild),Xn.appendChild(an)):(st=an,Xn.appendChild(an))}while((bt=bt.parentNode)&&bt!==me);return j2(e,Xn),NA(st),Xn},ce=function(et){var bt,Xn,an=Ac(et,i,c);if(un(i)&&(et?an>0:an<i.nodeValue.length))return!1;if(i.parentNode===f&&z&&!et||et&&Qn(i)&&i===f.firstChild)return!0;if(WT(i,"TABLE")||WT(i,"HR"))return z&&!et||!z&&et;var st=new Ta(i,f);for(un(i)&&(et&&an===0?st.prev():!et&&an===i.nodeValue.length&&st.next());bt=st.current();){if(Qn(bt)){if(!bt.getAttribute("data-mce-bogus")&&(Xn=bt.nodeName.toLowerCase(),X[Xn]&&Xn!=="br"))return!1}else if(un(bt)&&!tl(bt.nodeValue))return!1;et?st.prev():st.next()}return!0},se=function(){/^(H[1-6]|PRE|FIGURE)$/.test(D)&&_e!=="HGROUP"?g=ee(I):g=ee(),Gh(e)&&eM(F,C)&&F.isEmpty(f)?g=F.split(C,f):F.insertAfter(g,f),C0(e,g)};Rb(F,J).each(function(et){J.setStart(et.startContainer,et.startOffset),J.setEnd(et.endContainer,et.endOffset)}),i=J.startContainer,c=J.startOffset,I=yu(e);var Ae=!!(n&&n.shiftKey),Ee=!!(n&&n.ctrlKey);Qn(i)&&i.hasChildNodes()&&(z=c>i.childNodes.length-1,i=i.childNodes[Math.min(c,i.childNodes.length-1)]||i,z&&un(i)?c=i.nodeValue.length:c=0);var me=$A(F,i);if(me){(I&&!Ae||!I&&Ae)&&(i=D$(e,I,J,i,c)),f=F.getParent(i,F.isBlock),C=f?F.getParent(f.parentNode,F.isBlock):null,D=f?f.nodeName.toUpperCase():"";var _e=C?C.nodeName.toUpperCase():"";if(_e==="LI"&&!Ee&&(f=C,C=C.parentNode,D=_e),/^(LI|DT|DD)$/.test(D)&&F.isEmpty(f)){T$(e,ee,C,f,I);return}I&&f===e.getBody()||(I=I||"P",Ua(f)?(g=V0(f),F.isEmpty(f)&&NA(f),j2(e,g),C0(e,g)):ce()?se():ce(!0)?(g=f.parentNode.insertBefore(ee(),f),C0(e,WT(f,"HR")?g:f)):(a=A$(J).cloneRange(),a.setEndAfter(f),b=a.extractContents(),UT(b),IA(b),g=b.firstChild,F.insertAfter(b,f),O$(F,X,g),tM(F,f),F.isEmpty(f)&&NA(f),g.normalize(),F.isEmpty(g)?(F.remove(g),se()):(j2(e,g),C0(e,g))),F.setAttrib(g,"id",""),e.fire("NewBlock",{newBlock:g}))}},R$=function(e,n,a){for(var i=new Ta(n,a),c,f=e.getNonEmptyElements();c=i.next();)if(f[c.nodeName.toLowerCase()]||c.length>0)return!0},nM=function(e,n,a){var i=e.dom.createRng();a?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),e.selection.setRng(i),sp(e,i)},M$=function(e,n){var a=e.selection,i=e.dom,c=a.getRng(),f,g;Rb(i,c).each(function(X){c.setStart(X.startContainer,X.startOffset),c.setEnd(X.endContainer,X.endOffset)});var b=c.startOffset,C=c.startContainer;if(C.nodeType===1&&C.hasChildNodes()){var D=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,D&&C.nodeType===3?b=C.nodeValue.length:b=0}var I=i.getParent(C,i.isBlock),z=I?i.getParent(I.parentNode,i.isBlock):null,F=z?z.nodeName.toUpperCase():"",q=!!(n&&n.ctrlKey);F==="LI"&&!q&&(I=z),C&&C.nodeType===3&&b>=C.nodeValue.length&&(R$(e.schema,C,I)||(f=i.create("br"),c.insertNode(f),c.setStartAfter(f),c.setEndAfter(f),g=!0)),f=i.create("br"),q1(i,c,f),nM(e,f,g),e.undoManager.add()},B$=function(e,n){var a=T.fromTag("br");fu(T.fromDom(n),a),e.undoManager.add()},P$=function(e,n){I$(e.getBody(),n)||kv(T.fromDom(n),T.fromTag("br"));var a=T.fromTag("br");kv(T.fromDom(n),a),nM(e,a.dom,!1),e.undoManager.add()},N$=function(e){return Va(e.getNode())},I$=function(e,n){return N$(Ue.after(n))?!0:ul(e,Ue.after(n)).map(function(a){return Va(a.getNode())}).getOr(!1)},rM=function(e){return e&&e.nodeName==="A"&&"href"in e},bs=function(e){return e.fold(wt,rM,rM,wt)},$$=function(e){var n=Mt(Zg,e),a=Ue.fromRangeStart(e.selection.getRng());return Vl(n,e.getBody(),a).filter(bs)},z$=function(e,n){n.fold(We,Mt(B$,e),Mt(P$,e),We)},aM=function(e,n){var a=$$(e);a.isSome()?a.each(Mt(z$,e)):M$(e,n)},rc=function(e,n){return _A(e).filter(function(a){return n.length>0&&Rt(T.fromDom(a),n)}).isSome()},F$=function(e){return rc(e,ag(e))},oM=function(e){return rc(e,XC(e))},ml=In.generate([{br:[]},{block:[]},{none:[]}]),x0=function(e,n){return oM(e)},FA=function(e){return function(n,a){var i=yu(n)==="";return i===e}},iM=function(e){return function(n,a){return x$(n)===e}},jT=function(e,n){return function(a,i){var c=RA(a)===e.toUpperCase();return c===n}},GT=function(e){return jT("pre",e)},L$=function(){return jT("summary",!0)},qT=function(e){return function(n,a){return Ny(n)===e}},H$=function(e,n){return F$(e)},G2=function(e,n){return n},uM=function(e){var n=yu(e),a=S0(e.dom,e.selection.getStart());return a&&e.schema.isValidChild(a.nodeName,n||"P")},Dc=function(e,n){return function(a,i){var c=ta(e,function(f,g){return f&&g(a,i)},!0);return c?Q.some(n):Q.none()}},sM=function(e,n){return Hl([Dc([x0],ml.none()),Dc([L$()],ml.br()),Dc([GT(!0),qT(!1),G2],ml.br()),Dc([GT(!0),qT(!1)],ml.block()),Dc([GT(!0),qT(!0),G2],ml.block()),Dc([GT(!0),qT(!0)],ml.br()),Dc([iM(!0),G2],ml.br()),Dc([iM(!0)],ml.block()),Dc([FA(!0),G2,uM],ml.block()),Dc([FA(!0)],ml.br()),Dc([H$],ml.br()),Dc([FA(!1),G2],ml.br()),Dc([uM],ml.block())],[e,!!(n&&n.shiftKey)]).getOr(ml.none())},cM=function(e,n){sM(e,n).fold(function(){aM(e,n)},function(){_$(e,n)},We)},V$=function(e,n){n.isDefaultPrevented()||(n.preventDefault(),s5(e.undoManager),e.undoManager.transact(function(){e.selection.isCollapsed()===!1&&e.execCommand("Delete"),cM(e,n)}))},U$=function(e){e.on("keydown",function(n){n.keyCode===Jn.ENTER&&V$(e,n)})},W$=function(e,n,a){$p([{keyCode:Jn.END,action:ea(IR,e,!0)},{keyCode:Jn.HOME,action:ea(IR,e,!1)},{keyCode:Jn.END,action:ea(VR,e,!0)},{keyCode:Jn.HOME,action:ea(VR,e,!1)},{keyCode:Jn.END,action:ea(BT,e,!0,n)},{keyCode:Jn.HOME,action:ea(BT,e,!1,n)}],a).each(function(i){a.preventDefault()})},j$=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&W$(e,n,a)})},LA=Yt().browser,lM=function(e){var n=N1(function(){e.composing||r2(e)},0);LA.isIE()&&(e.on("keypress",function(a){n.throttle()}),e.on("remove",function(a){n.cancel()}))},fM=function(e){lM(e),e.on("input",function(n){n.isComposing===!1&&r2(e)})},vM=Yt(),G$=function(e,n,a){$p([{keyCode:Jn.PAGE_UP,action:ea(BT,e,!1,n)},{keyCode:Jn.PAGE_DOWN,action:ea(BT,e,!0,n)}],a)},dM=function(e){return e.stopImmediatePropagation()},mM=function(e){return e.keyCode===Jn.PAGE_UP||e.keyCode===Jn.PAGE_DOWN},gM=function(e,n,a){a&&!e.get()?n.on("NodeChange",dM,!0):!a&&e.get()&&n.off("NodeChange",dM),e.set(a)},q$=function(e,n){if(!vM.os.isOSX()){var a=fs(!1);e.on("keydown",function(i){mM(i)&&gM(a,e,!0)}),e.on("keyup",function(i){i.isDefaultPrevented()===!1&&G$(e,n,i),mM(i)&&a.get()&&(gM(a,e,!1),e.nodeChanged())})}},hM=function(e,n){var a=n.container(),i=n.offset();return un(a)?(a.insertData(i,e),Q.some(Ue(a,i+e.length))):fb(n).map(function(c){var f=T.fromText(e);return n.isAtEnd()?kv(c,f):fu(c,f),Ue(f.dom,e.length)})},pM=Mt(hM,Ks),K$=Mt(hM," "),X$=function(e){return function(n){return n.fold(function(a){return Il(e.dom,Ue.before(a))},function(a){return qu(a)},function(a){return Lc(a)},function(a){return ul(e.dom,Ue.after(a))})}},Y$=function(e,n){return function(a){return PO(e,a)?pM(n):K$(n)}},J$=function(e){return function(n){return e.selection.setRng(n.toRange()),e.nodeChanged(),!0}},bM=function(e){var n=Ue.fromRangeStart(e.selection.getRng()),a=T.fromDom(e.getBody());if(e.selection.isCollapsed()){var i=Mt(Zg,e),c=Ue.fromRangeStart(e.selection.getRng());return Vl(i,e.getBody(),c).bind(X$(a)).bind(Y$(a,n)).exists(J$(e))}else return!1},Z$=function(e,n){$p([{keyCode:Jn.SPACEBAR,action:ea(bM,e)}],n).each(function(a){n.preventDefault()})},Q$=function(e){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&Z$(e,n)})},ez=function(e){var n=OI(e);return MR(e),b$(e,n),C$(e,n),U$(e),Q$(e),fM(e),j$(e,n),q$(e,n),n},tz=function(e){return fm(e)?fs(null):ez(e)},yM=function(){function e(n){this.lastPath=[],this.editor=n;var a,i=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(c){var f=n.selection.getRng(),g={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};(c.type==="nodechange"||!kw(g,a))&&n.fire("SelectionChange"),a=g}),n.on("contextmenu",function(){n.fire("SelectionChange")}),n.on("SelectionChange",function(){var c=n.selection.getStart(!0);!c||!St.range&&n.selection.isCollapsed()||td(n)&&!i.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",function(c){!c.isDefaultPrevented()&&td(n)&&(n.selection.getNode().nodeName==="IMG"?Ru.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}return e.prototype.nodeChanged=function(n){var a=this.editor.selection,i,c,f;this.editor.initialized&&a&&!xE(this.editor)&&!this.editor.mode.isReadOnly()&&(f=this.editor.getBody(),i=a.getStart(!0)||f,(i.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(i,f))&&(i=f),c=[],this.editor.dom.getParent(i,function(g){if(g===f)return!0;c.push(g)}),n=n||{},n.element=i,n.parents=c,this.editor.fire("NodeChange",n))},e.prototype.isSameElementPath=function(n){var a,i=this.editor.$(n).parentsUntil(this.editor.getBody()).add(n);if(i.length===this.lastPath.length){for(a=i.length;a>=0&&i[a]===this.lastPath[a];a--);if(a===-1)return this.lastPath=i,!0}return this.lastPath=i,!1},e}(),KT=function(e){e.on("click",function(n){e.dom.getParent(n.target,"details")&&n.preventDefault()})},wM=function(e){e.parser.addNodeFilter("details",function(n){pt(n,function(a){a.attr("data-mce-open",a.attr("open")),a.attr("open","open")})}),e.serializer.addNodeFilter("details",function(n){pt(n,function(a){var i=a.attr("data-mce-open");a.attr("open",Tt(i)?i:null),a.attr("data-mce-open",null)})})},CM=function(e){KT(e),wM(e)},SM=function(e){return Qn(e)&&Ql(T.fromDom(e))},nz=function(e){var n=e.selection.getRng(),a=Ue.fromRangeStart(n),i=Ue.fromRangeEnd(n);if(Ue.isElementPosition(a)){var c=a.container();SM(c)&&qu(c).each(function(f){return n.setStart(f.container(),f.offset())})}if(Ue.isElementPosition(i)){var c=a.container();SM(c)&&Lc(c).each(function(g){return n.setEnd(g.container(),g.offset())})}e.selection.setRng(UO(n))},HA=function(e){e.on("click",function(n){n.detail>=3&&nz(e)})},xM=function(e){var n=e.getBoundingClientRect(),a=e.ownerDocument,i=a.documentElement,c=a.defaultView;return{top:n.top+c.pageYOffset-i.clientTop,left:n.left+c.pageXOffset-i.clientLeft}},rz=function(e){return e.inline?xM(e.getBody()):{left:0,top:0}},az=function(e){var n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},oz=function(e){var n=e.getBody(),a=e.getDoc().documentElement,i={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||a.scrollLeft,top:n.scrollTop||a.scrollTop};return e.inline?i:c},Mf=function(e,n){if(n.target.ownerDocument!==e.getDoc()){var a=xM(e.getContentAreaContainer()),i=oz(e);return{left:n.pageX-a.left+i.left,top:n.pageY-a.top+i.top}}return{left:n.pageX,top:n.pageY}},TM=function(e,n,a){return{pageX:a.left-e.left+n.left,pageY:a.top-e.top+n.top}},kM=function(e,n){return TM(rz(e),az(e),Mf(e,n))},XT=lo,iz=Jc,uz=function(e,n){return XT(n)&&n!==e},sz=function(e,n,a){return n===a||e.dom.isChildOf(n,a)?!1:!XT(n)},cz=function(e){var n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},lz=function(e,n,a,i){var c=e.dom,f=n.cloneNode(!0);c.setStyles(f,{width:a,height:i}),c.setAttrib(f,"data-mce-selected",null);var g=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(g,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:a,height:i}),c.setStyles(f,{margin:0,boxSizing:"border-box"}),g.appendChild(f),g},fz=function(e,n){e.parentNode!==n&&n.appendChild(e)},VA=function(e,n,a,i,c,f){var g=0,b=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+a>c&&(g=n.pageX+a-c),n.pageY+i>f&&(b=n.pageY+i-f),e.style.width=a-g+"px",e.style.height=i-b+"px"},EM=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},vz=function(e){return e.button===0},OM=function(e,n){return{pageX:n.pageX-e.relX,pageY:n.pageY+5}},dz=function(e,n){return function(a){if(vz(a)){var i=ya(n.dom.getParents(a.target),aE(XT,iz)).getOr(null);if(uz(n.getBody(),i)){var c=n.dom.getPos(i),f=n.getBody(),g=n.getDoc().documentElement;e.set({element:i,dragging:!1,screenX:a.screenX,screenY:a.screenY,maxX:(n.inline?f.scrollWidth:g.offsetWidth)-2,maxY:(n.inline?f.scrollHeight:g.offsetHeight)-2,relX:a.pageX-c.x,relY:a.pageY-c.y,width:i.offsetWidth,height:i.offsetHeight,ghost:lz(n,i,i.offsetWidth,i.offsetHeight)})}}}},mz=function(e,n){var a=Ru.throttle(function(i,c){n._selectionOverrides.hideFakeCaret(),n.selection.placeCaretAt(i,c)},0);return n.on("remove",a.stop),function(i){return e.on(function(c){var f=Math.max(Math.abs(i.screenX-c.screenX),Math.abs(i.screenY-c.screenY));if(!c.dragging&&f>10){var g=n.fire("dragstart",{target:c.element});if(g.isDefaultPrevented())return;c.dragging=!0,n.focus()}if(c.dragging){var b=OM(c,kM(n,i));fz(c.ghost,n.getBody()),VA(c.ghost,b,c.width,c.height,c.maxX,c.maxY),a(i.clientX,i.clientY)}})}},gz=function(e){var n=e.getSel().getRangeAt(0),a=n.startContainer;return a.nodeType===3?a.parentNode:a},hz=function(e,n){return function(a){e.on(function(i){if(i.dragging){if(sz(n,gz(n.selection),i.element)){var c=cz(i.element),f=n.fire("drop",{clientX:a.clientX,clientY:a.clientY});f.isDefaultPrevented()||n.undoManager.transact(function(){EM(i.element),n.insertContent(n.dom.getOuterHTML(c)),n._selectionOverrides.hideFakeCaret()})}n.fire("dragend")}}),AM(e)}},pz=function(e,n){return function(){e.on(function(a){a.dragging&&n.fire("dragend")}),AM(e)}},AM=function(e){e.on(function(n){EM(n.ghost)}),e.clear()},UA=function(e){var n=Wv(),a=ao.DOM,i=document,c=dz(n,e),f=mz(n,e),g=hz(n,e),b=pz(n,e);e.on("mousedown",c),e.on("mousemove",f),e.on("mouseup",g),a.bind(i,"mousemove",f),a.bind(i,"mouseup",b),e.on("remove",function(){a.unbind(i,"mousemove",f),a.unbind(i,"mouseup",b)}),e.on("keydown",function(C){C.keyCode===Jn.ESC&&b()})},bz=function(e){e.on("drop",function(n){var a=typeof n.clientX<"u"?e.getDoc().elementFromPoint(n.clientX,n.clientY):null;(XT(a)||e.dom.getContentEditableParent(a)==="false")&&n.preventDefault()})},DM=function(e){var n=function(c){if(!c.isDefaultPrevented()){var f=c.dataTransfer;f&&(Nt(f.types,"Files")||f.files.length>0)&&(c.preventDefault(),c.type==="drop"&&dT(e,"Dropped file type is not supported"))}},a=function(c){zb(e,c.target)&&n(c)},i=function(){var c=ao.DOM,f=e.dom,g=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];pt(C,function(D){c.bind(g,D,a),f.bind(b,D,n)}),e.on("remove",function(){pt(C,function(D){c.unbind(g,D,a),f.unbind(b,D,n)})})};e.on("init",function(){Ru.setEditorTimeout(e,i,0)})},yz=function(e){UA(e),bz(e),ug(e)&&DM(e)},wz=function(e){var n=N1(function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var a=e.selection.getRng();if(a.collapsed){var i=nh(e,a,!1);e.selection.setRng(i)}}},0);e.on("focus",function(){n.throttle()}),e.on("blur",function(){n.cancel()})},Cz=function(e){e.on("init",function(){e.on("focusin",function(n){var a=n.target;if(Ts(a)){var i=em(e.getBody(),a),c=lo(i)?i:a;e.selection.getNode()!==c&&Bp(e,c).each(function(f){return e.selection.setRng(f)})}})})},_M=Jc,ti=lo,YT=function(e,n){return em(e.getBody(),n)},Sz=function(e){var n=e.selection,a=e.dom,i=a.isBlock,c=e.getBody(),f=Gu(e,c,i,function(){return Uc(e)}),g="sel-"+a.uniqueId(),b="data-mce-selected",C,D=function(st){return a.hasClass(st,"mce-offscreen-selection")},I=function(st){return st!==c&&(ti(st)||Ts(st))&&a.isChildOf(st,c)},z=function(st){return fl(st)||ld(st)||Ig(st)||$g(st)},F=function(){var st=a.get(g);return st&&st.getElementsByTagName("*")[0]},q=function(st){st&&n.setRng(st)},X=n.getRng,J=function(st,qn,xt,tn){tn===void 0&&(tn=!0);var Et=e.fire("ShowCaret",{target:qn,direction:st,before:xt});return Et.isDefaultPrevented()?null:(tn&&n.scrollIntoView(qn,st===-1),f.show(xt,qn))},ee=function(st){st.hasAttribute("data-mce-caret")&&(V0(st),q(X()),n.scrollIntoView(st))},ce=function(){e.on("mouseup",function(Et){var Pt=X();Pt.collapsed&&vm(e,Et.clientX,Et.clientY)&&J4(e,Pt,!1).each(q)}),e.on("click",function(Et){var Pt=YT(e,Et.target);Pt&&(ti(Pt)&&(Et.preventDefault(),e.focus()),_M(Pt)&&a.isChildOf(Pt,n.getNode())&&bt())}),e.on("blur NewBlock",bt),e.on("ResizeWindow FullscreenStateChanged",f.reposition);var st=function(Et){var Pt=Et.firstChild;if(Vt(Pt))return!1;var vn=Ue.before(Pt);if(Va(vn.getNode())&&Et.childNodes.length===1)return!z(vn);var ft=jo(Et),on=ft.next(vn);return on&&!z(on)},qn=function(Et,Pt){var vn=a.getParent(Et,i),ft=a.getParent(Pt,i);return vn===ft},xt=function(Et,Pt){var vn=a.getParent(Et,i),ft=a.getParent(Pt,i);return Vt(vn)?!1:Et!==ft&&a.isChildOf(vn,ft)&&ti(YT(e,vn))===!1?!0:!a.isChildOf(ft,vn)&&!qn(vn,ft)&&st(vn)};e.on("tap",function(Et){var Pt=Et.target,vn=YT(e,Pt);ti(vn)?(Et.preventDefault(),Bp(e,vn).each(et)):I(Pt)&&Bp(e,Pt).each(et)},!0),e.on("mousedown",function(Et){var Pt=Et.target;if(!(Pt!==c&&Pt.nodeName!=="HTML"&&!a.isChildOf(Pt,c))&&vm(e,Et.clientX,Et.clientY)!==!1){var vn=YT(e,Pt);if(vn)ti(vn)?(Et.preventDefault(),Bp(e,vn).each(et)):(bt(),!(_M(vn)&&Et.shiftKey)&&!tm(Et.clientX,Et.clientY,n.getRng())&&(an(),n.placeCaretAt(Et.clientX,Et.clientY)));else if(I(Pt))Bp(e,Pt).each(et);else if(Gd(Pt)===!1){bt(),an();var ft=vA(c,Et.clientX,Et.clientY);if(ft&&!xt(Pt,ft.node)){Et.preventDefault();var on=J(1,ft.node,ft.before,!1);q(on),e.getBody().focus()}}}}),e.on("keypress",function(Et){Jn.modifierPressed(Et)||ti(n.getNode())&&Et.preventDefault()}),e.on("GetSelectionRange",function(Et){var Pt=Et.range;if(C){if(!C.parentNode){C=null;return}Pt=Pt.cloneRange(),Pt.selectNode(C),Et.range=Pt}}),e.on("SetSelectionRange",function(Et){Et.range=Ee(Et.range);var Pt=et(Et.range,Et.forward);Pt&&(Et.range=Pt)});var tn=function(Et){return Et.id==="mcepastebin"};e.on("AfterSetSelectionRange",function(Et){var Pt=Et.range,vn=Pt.startContainer.parentNode;!Ae(Pt)&&!tn(vn)&&an(),D(vn)||bt()}),e.on("copy",function(Et){var Pt=Et.clipboardData;if(!Et.isDefaultPrevented()&&Et.clipboardData&&!St.ie){var vn=F();vn&&(Et.preventDefault(),Pt.clearData(),Pt.setData("text/html",vn.outerHTML),Pt.setData("text/plain",vn.outerText||vn.innerText))}}),yz(e),wz(e),Cz(e)},se=function(st){return Os(st)||Th(st)||kh(st)},Ae=function(st){return se(st.startContainer)||se(st.endContainer)},Ee=function(st){var qn=e.schema.getShortEndedElements(),xt=a.createRng(),tn=st.startContainer,Et=st.startOffset,Pt=st.endContainer,vn=st.endOffset;return fr(qn,tn.nodeName.toLowerCase())?Et===0?xt.setStartBefore(tn):xt.setStartAfter(tn):xt.setStart(tn,Et),fr(qn,Pt.nodeName.toLowerCase())?vn===0?xt.setEndBefore(Pt):xt.setEndAfter(Pt):xt.setEnd(Pt,vn),xt},me=function(st,qn,xt){var tn=e.$,Et=Rm(T.fromDom(e.getBody()),"#"+g).fold(function(){return tn([])},function(ft){return tn([ft.dom])});Et.length===0&&(Et=tn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",g),Et.appendTo(e.getBody()));var Pt=a.createRng();qn===xt&&St.ie?(Et.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(qn),Pt.setStartAfter(Et[0].firstChild.firstChild),Pt.setEndAfter(qn)):(Et.empty().append(Ks).append(qn).append(Ks),Pt.setStart(Et[0].firstChild,1),Pt.setEnd(Et[0].lastChild,0)),Et.css({top:a.getPos(st,e.getBody()).y}),Et[0].focus();var vn=n.getSel();return vn.removeAllRanges(),vn.addRange(Pt),Pt},_e=function(st){var qn=st.cloneNode(!0),xt=e.fire("ObjectSelected",{target:st,targetClone:qn});if(xt.isDefaultPrevented())return null;var tn=me(st,xt.targetClone,qn),Et=T.fromDom(st);return pt(bu(T.fromDom(e.getBody()),"*[data-mce-selected]"),function(Pt){Yn(Et,Pt)||Xe(Pt,b)}),a.getAttrib(st,b)||st.setAttribute(b,"1"),C=st,an(),tn},et=function(st,qn){if(!st)return null;if(st.collapsed){if(!Ae(st)){var xt=qn?1:-1,tn=pg(xt,c,st),Et=tn.getNode(!qn);if(Gd(Et))return J(xt,Et,qn?!tn.isAtEnd():!1,!1);var Pt=tn.getNode(qn);if(Gd(Pt))return J(xt,Pt,qn?!1:!tn.isAtEnd(),!1)}return null}var vn=st.startContainer,ft=st.startOffset,on=st.endOffset;if(vn.nodeType===3&&ft===0&&ti(vn.parentNode)&&(vn=vn.parentNode,ft=a.nodeIndex(vn),vn=vn.parentNode),vn.nodeType!==1)return null;if(on===ft+1&&vn===st.endContainer){var Hr=vn.childNodes[ft];if(I(Hr))return _e(Hr)}return null},bt=function(){C&&C.removeAttribute(b),Rm(T.fromDom(e.getBody()),"#"+g).each(Uo),C=null},Xn=function(){f.destroy(),C=null},an=function(){f.hide()};return St.ceFalse&&!fm(e)&&ce(),{showCaret:J,showBlockCaretContainer:ee,hideFakeCaret:an,destroy:Xn}},xz=function(e){var n=je.each,a=Jn.BACKSPACE,i=Jn.DELETE,c=e.dom,f=e.selection,g=e.parser,b=St.gecko,C=St.ie,D=St.webkit,I="data:text/mce-internal,",z=C?"Text":"URL",F=function(vt,Ot){try{e.getDoc().execCommand(vt,!1,Ot)}catch{}},q=function(vt){return vt.isDefaultPrevented()},X=function(vt){var Ot,Rn;vt.dataTransfer&&(e.selection.isCollapsed()&&vt.target.tagName==="IMG"&&f.select(vt.target),Ot=e.selection.getContent(),Ot.length>0&&(Rn=I+escape(e.id)+","+escape(Ot),vt.dataTransfer.setData(z,Rn)))},J=function(vt){var Ot;return vt.dataTransfer&&(Ot=vt.dataTransfer.getData(z),Ot&&Ot.indexOf(I)>=0)?(Ot=Ot.substr(I.length).split(","),{id:unescape(Ot[0]),html:unescape(Ot[1])}):null},ee=function(vt,Ot){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:vt,internal:Ot}):e.execCommand("mceInsertContent",!1,vt)},ce=function(){var vt=function(Rn){var Me=c.create("body"),Ct=Rn.cloneContents();return Me.appendChild(Ct),f.serializer.serialize(Me,{format:"html"})},Ot=function(Rn){var Me=vt(Rn),Ct=c.createRng();Ct.selectNode(e.getBody());var mt=vt(Ct);return Me===mt};e.on("keydown",function(Rn){var Me=Rn.keyCode,Ct,mt;if(!q(Rn)&&(Me===i||Me===a)){if(Ct=e.selection.isCollapsed(),mt=e.getBody(),Ct&&!c.isEmpty(mt)||!Ct&&!Ot(e.selection.getRng()))return;Rn.preventDefault(),e.setContent(""),mt.firstChild&&c.isBlock(mt.firstChild)?e.selection.setCursorLocation(mt.firstChild,0):e.selection.setCursorLocation(mt,0),e.nodeChanged()}})},se=function(){e.shortcuts.add("meta+a",null,"SelectAll")},Ae=function(){e.inline||c.bind(e.getDoc(),"mousedown mouseup",function(vt){var Ot;if(vt.target===e.getDoc().documentElement)if(Ot=f.getRng(),e.getBody().focus(),vt.type==="mousedown"){if(Os(Ot.startContainer))return;f.placeCaretAt(vt.clientX,vt.clientY)}else f.setRng(Ot)})},Ee=function(){e.on("keydown",function(vt){if(!q(vt)&&vt.keyCode===a){if(!e.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&f.getRng().startOffset===0){var Ot=f.getNode(),Rn=Ot.previousSibling;if(Ot.nodeName==="HR"){c.remove(Ot),vt.preventDefault();return}Rn&&Rn.nodeName&&Rn.nodeName.toLowerCase()==="hr"&&(c.remove(Rn),vt.preventDefault())}}})},me=function(){Range.prototype.getClientRects||e.on("mousedown",function(vt){if(!q(vt)&&vt.target.nodeName==="HTML"){var Ot=e.getBody();Ot.blur(),Ru.setEditorTimeout(e,function(){Ot.focus()})}})},_e=function(){e.on("click",function(vt){var Ot=vt.target;/^(IMG|HR)$/.test(Ot.nodeName)&&c.getContentEditableParent(Ot)!=="false"&&(vt.preventDefault(),e.selection.select(Ot),e.nodeChanged()),Ot.nodeName==="A"&&c.hasClass(Ot,"mce-item-anchor")&&(vt.preventDefault(),f.select(Ot))})},et=function(){var vt=function(){var Rn=c.getAttribs(f.getStart().cloneNode(!1));return function(){var Me=f.getStart();Me!==e.getBody()&&(c.setAttrib(Me,"style",null),n(Rn,function(Ct){Me.setAttributeNode(Ct.cloneNode(!0))}))}},Ot=function(){return!f.isCollapsed()&&c.getParent(f.getStart(),c.isBlock)!==c.getParent(f.getEnd(),c.isBlock)};e.on("keypress",function(Rn){var Me;if(!q(Rn)&&(Rn.keyCode===8||Rn.keyCode===46)&&Ot())return Me=vt(),e.getDoc().execCommand("delete",!1,null),Me(),Rn.preventDefault(),!1}),c.bind(e.getDoc(),"cut",function(Rn){var Me;!q(Rn)&&Ot()&&(Me=vt(),Ru.setEditorTimeout(e,function(){Me()}))})},bt=function(){e.on("keydown",function(vt){if(!q(vt)&&vt.keyCode===a&&f.isCollapsed()&&f.getRng().startOffset===0){var Ot=f.getNode().previousSibling;if(Ot&&Ot.nodeName&&Ot.nodeName.toLowerCase()==="table")return vt.preventDefault(),!1}})},Xn=function(){e.on("keydown",function(vt){var Ot,Rn;if(!(q(vt)||vt.keyCode!==Jn.BACKSPACE)){Ot=f.getRng();var Me=Ot.startContainer,Ct=Ot.startOffset,mt=c.getRoot();if(Rn=Me,!(!Ot.collapsed||Ct!==0)){for(;Rn&&Rn.parentNode&&Rn.parentNode.firstChild===Rn&&Rn.parentNode!==mt;)Rn=Rn.parentNode;Rn.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,Rn),Ot=c.createRng(),Ot.setStart(Me,0),Ot.setEnd(Me,0),f.setRng(Ot))}}})},an=function(){var vt=function(){F("StyleWithCSS",!1),F("enableInlineTableEditing",!1),QC(e)||F("enableObjectResizing",!1)};TE(e)||e.on("BeforeExecCommand mousedown",vt)},st=function(){var vt=function(){n(c.select("a"),function(Ot){var Rn=Ot.parentNode,Me=c.getRoot();if(Rn.lastChild===Ot){for(;Rn&&!c.isBlock(Rn);){if(Rn.parentNode.lastChild!==Rn||Rn===Me)return;Rn=Rn.parentNode}c.add(Rn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(Ot){(Ot.type==="setcontent"||Ot.command==="mceInsertLink")&&vt()})},qn=function(){yu(e)&&e.on("init",function(){F("DefaultParagraphSeparator",yu(e))})},xt=function(){e.on("keyup focusin mouseup",function(vt){Jn.modifierPressed(vt)||f.normalize()},!0)},tn=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Et=function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})},Pt=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(vt){var Ot;if(vt.target.nodeName==="HTML"){if(St.ie>11){e.getBody().focus();return}Ot=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ot),e.selection.normalize(),e.nodeChanged()}}))},vn=function(){St.mac&&e.on("keydown",function(vt){if(Jn.metaKeyPressed(vt)&&!vt.shiftKey&&(vt.keyCode===37||vt.keyCode===39)){vt.preventDefault();var Ot=e.selection.getSel();Ot.modify("move",vt.keyCode===37?"backward":"forward","lineboundary")}})},ft=function(){F("AutoUrlDetect",!1)},on=function(){e.on("click",function(vt){var Ot=vt.target;do if(Ot.tagName==="A"){vt.preventDefault();return}while(Ot=Ot.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Hr=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(vt){vt.preventDefault()})})},pa=function(){g.addNodeFilter("br",function(vt){for(var Ot=vt.length;Ot--;)vt[Ot].attr("class")==="Apple-interchange-newline"&&vt[Ot].remove()})},ma=function(){e.on("dragstart",function(vt){X(vt)}),e.on("drop",function(vt){if(!q(vt)){var Ot=J(vt);if(Ot&&Ot.id!==e.id){vt.preventDefault();var Rn=Tw(vt.x,vt.y,e.getDoc());f.setRng(Rn),ee(Ot.html,!0)}}})},Tu=We,zo=function(){if(!b||e.removed)return!1;var vt=e.selection.getSel();return!vt||!vt.rangeCount||vt.rangeCount===0},Ns=function(){D&&(Ae(),_e(),Hr(),se(),St.iOS&&(Et(),Pt(),on())),b&&(me(),an(),tn(),vn())},ac=function(){Xn(),ce(),St.windowsPhone||xt(),D&&(Ae(),_e(),qn(),Hr(),bt(),pa(),St.iOS?(Et(),Pt(),on()):se()),St.ie>=11&&(Pt(),bt()),St.ie&&(se(),ft(),ma()),b&&(Ee(),me(),et(),an(),st(),tn(),vn(),bt())};return fm(e)?Ns():ac(),{refreshContentEditable:Tu,isHidden:zo}},JT=ao.DOM,WA=function(e,n){var a=T.fromDom(e.getBody()),i=Vo(as(a)),c=T.fromTag("style");O(c,"type","text/css"),Di(c,T.fromText(n)),Di(i,c),e.on("remove",function(){Uo(c)})},Tz=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},ZT=function(e){return wa(e,function(n){return ke(n)===!1})},RM=function(e){var n=e.settings;return ZT({block_elements:n.block_elements,boolean_attributes:n.boolean_attributes,custom_elements:n.custom_elements,extended_valid_elements:n.extended_valid_elements,invalid_elements:n.invalid_elements,invalid_styles:n.invalid_styles,move_caret_before_on_enter_elements:n.move_caret_before_on_enter_elements,non_empty_elements:n.non_empty_elements,schema:n.schema,self_closing_elements:n.self_closing_elements,short_ended_elements:n.short_ended_elements,special:n.special,text_block_elements:n.text_block_elements,text_inline_elements:n.text_inline_elements,valid_children:n.valid_children,valid_classes:n.valid_classes,valid_elements:n.valid_elements,valid_styles:n.valid_styles,verify_html:n.verify_html,whitespace_elements:n.whitespace_elements,padd_empty_block_inline_children:n.format_empty_lines})},MM=function(e){var n=e.settings,a=e.editorUpload.blobCache;return ZT({allow_conditional_comments:n.allow_conditional_comments,allow_html_data_urls:n.allow_html_data_urls,allow_svg_data_urls:n.allow_svg_data_urls,allow_html_in_named_anchor:n.allow_html_in_named_anchor,allow_script_urls:n.allow_script_urls,allow_unsafe_link_target:n.allow_unsafe_link_target,convert_fonts_to_spans:n.convert_fonts_to_spans,fix_list_elements:n.fix_list_elements,font_size_legacy_values:n.font_size_legacy_values,forced_root_block:n.forced_root_block,forced_root_block_attrs:n.forced_root_block_attrs,padd_empty_with_br:n.padd_empty_with_br,preserve_cdata:n.preserve_cdata,remove_trailing_brs:n.remove_trailing_brs,inline_styles:n.inline_styles,root_name:Tz(e),validate:!0,blob_cache:a,document:e.getDoc(),images_dataimg_filter:n.images_dataimg_filter})},kz=function(e){var n=e.settings;return kn(kn(kn({},MM(e)),RM(e)),ZT({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,element_format:n.element_format,entities:n.entities,entity_encoding:n.entity_encoding,indent:n.indent,indent_after:n.indent_after,indent_before:n.indent_before}))},Ez=function(e){var n=cT(MM(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",function(a,i){for(var c=a.length,f,g,b=e.dom,C="data-mce-"+i;c--;)if(f=a[c],g=f.attr(i),g&&!f.attr(C)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;i==="style"?(g=b.serializeStyle(b.parseStyle(g),f.name),g.length||(g=null),f.attr(C,g),f.attr(i,g)):i==="tabindex"?(f.attr(C,g),f.attr(i,null)):f.attr(C,e.convertURL(g,i,f.name))}}),n.addNodeFilter("script",function(a){for(var i=a.length;i--;){var c=a[i],f=c.attr("type")||"no/type";f.indexOf("mce-")!==0&&c.attr("type","mce-"+f)}}),e.settings.preserve_cdata&&n.addNodeFilter("#cdata",function(a){for(var i=a.length;i--;){var c=a[i];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode(c.value)+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){for(var i=a.length,c=e.schema.getNonEmptyElements();i--;){var f=a[i];f.isEmpty(c)&&f.getAll("br").length===0&&(f.append(new Wc("br",1)).shortEnded=!0)}}),n},Oz=function(e){e.settings.auto_focus&&Ru.setEditorTimeout(e,function(){var n;e.settings.auto_focus===!0?n=e:n=e.editorManager.get(e.settings.auto_focus),n.destroyed||n.focus()},100)},Az=function(e){var n=e.dom.getRoot();!e.inline&&(!td(e)||e.selection.getStart(!0)===n)&&qu(n).each(function(a){var i=a.getNode(),c=ii(i)?qu(i).getOr(a):a;St.browser.isIE()?pO(e,c.toRange()):e.selection.setRng(c.toRange())})},Dz=function(e){e.bindPendingEventDelegates(),e.initialized=!0,RS(e),e.focus(!0),Az(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),Oz(e)},BM=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},_z=function(e,n,a){var i=[new Zi(function(c,f){return BM(e).loadAll(n,c,f)})];return e.inline?i:i.concat([new Zi(function(c,f){return e.ui.styleSheetLoader.loadAll(a,c,f)})])},PM=function(e){var n=BM(e),a=ZC(e),i=e.contentCSS,c=function(){n.unloadAll(i),e.inline||e.ui.styleSheetLoader.unloadAll(a)},f=function(){e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){var g="";je.each(e.contentStyles,function(C){g+=C+`\r
`}),e.dom.addStyle(g)}var b=Zi.all(_z(e,i,a)).then(f).catch(f);return e.settings.content_style&&WA(e,e.settings.content_style),b},Rz=function(e){var n=e.settings,a=e.getDoc(),i=e.getBody();wf(e),!n.browser_spellcheck&&!n.gecko_spellcheck&&(a.body.spellcheck=!1,JT.setAttrib(i,"spellcheck","false")),e.quirks=xz(e),_S(e);var c=Ml(e);c!==void 0&&(i.dir=c),n.protect&&e.on("BeforeSetContent",function(f){je.each(n.protect,function(g){f.content=f.content.replace(g,function(b){return"<!--mce:protected "+escape(b)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.on("compositionstart compositionend",function(f){e.composing=f.type==="compositionstart"})},Mz=function(e){fm(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},jA=function(e){e.removed!==!0&&(Mz(e),Dz(e))},QT=function(e,n){var a=e.settings,i=e.getElement(),c=e.getDoc();a.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline&&(c.open(),c.write(e.iframeHTML),c.close()),e.inline&&(JT.addClass(i,"mce-content-body"),e.contentDocument=c=document,e.contentWindow=window,e.bodyElement=i,e.contentAreaContainer=i);var f=e.getBody();f.disabled=!0,e.readonly=!!a.readonly,e.readonly||(e.inline&&JT.getStyle(f,"position",!0)==="static"&&(f.style.position="relative"),f.contentEditable=e.getParam("content_editable_state",!0)),f.disabled=!1,e.editorUpload=EN(e),e.schema=yc(RM(e)),e.dom=ao(c,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:a.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:nb(e),referrerPolicy:rb(e),onSetAttrib:function(C){e.fire("SetAttrib",C)}}),e.parser=Ez(e),e.serializer=i_(kz(e),e),e.selection=jD(e.dom,e.getWin(),e.serializer,e),e.annotator=Ob(e),e.formatter=O_(e),e.undoManager=Of(e),e._nodeChangeDispatcher=new yM(e),e._selectionOverrides=Sz(e),VI(e),CM(e),fm(e)||HA(e);var g=tz(e);HI(e,g),_R(e),B_(e);var b=h5(e);Rz(e),b.fold(function(){PM(e).then(function(){return jA(e)})},function(C){e.setProgressState(!0),PM(e).then(function(){C().then(function(D){e.setProgressState(!1),jA(e)},function(D){e.notificationManager.open({type:"error",text:String(D)}),jA(e)})})})},q2=ao.DOM,Bz=function(e,n){if(document.domain!==window.location.hostname&&St.browser.isIE()){var a=$u("mce");e[a]=function(){QT(e)};var i='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+a+"(true);})()";return q2.setAttrib(n,"src",i),!0}return!1},Pz=function(e,n,a,i){var c=T.fromTag("iframe");return $(c,i),$(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),zd(c,"tox-edit-area__iframe"),c},Nz=function(e){var n=KC(e)+"<html><head>";Py(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var a=vE(e),i=dE(e),c=e.translate(iS(e));return Q1(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Q1(e)+'" />'),n+="</head>"+('<body id="'+a+'" class="mce-content-body '+i+'" data-id="'+e.id+'" aria-label="'+c+'">')+"<br></body></html>",n},NM=function(e,n){var a=e.translate("Rich Text Area"),i=Pz(e.id,a,n.height,fE(e)).dom;i.onload=function(){i.onload=null,e.fire("load")};var c=Bz(e,i);return e.contentAreaContainer=n.iframeContainer,e.iframeElement=i,e.iframeHTML=Nz(e),q2.add(n.iframeContainer,i),c},Iz=function(e,n){var a=NM(e,n);n.editorContainer&&(q2.get(n.editorContainer).style.display=e.orgDisplay,e.hidden=q2.isHidden(n.editorContainer)),e.getElement().style.display="none",q2.setAttrib(e.id,"aria-hidden","true"),a||QT(e)},GA=ao.DOM,qA=function(e,n,a){var i=jc.get(a),c=jc.urls[a]||e.documentBaseUrl.replace(/\/$/,"");if(a=je.trim(a),i&&je.inArray(n,a)===-1){if(je.each(jc.dependencies(a),function(g){qA(e,n,g)}),e.plugins[a])return;try{var f=new i(e,c,e.$);e.plugins[a]=f,f.init&&(f.init(e,c),n.push(a))}catch(g){x_(e,a,g)}}},KA=function(e){return e.replace(/^\-/,"")},$z=function(e){var n=[];je.each(ub(e).split(/[ ,]/),function(a){qA(e,n,KA(a))})},zz=function(e){var n=je.trim(vf(e)),a=e.ui.registry.getAll().icons,i=kn(kn({},vT.get("default").icons),vT.get(n).icons);Zt(i,function(c,f){fr(a,f)||e.ui.registry.addIcon(f,c)})},Fz=function(e){var n=og(e);if(Tt(n)){e.settings.theme=KA(n);var a=dd.get(n);e.theme=new a(e,dd.urls[n]),e.theme.init&&e.theme.init(e,dd.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},IM=function(e){return e.theme.renderUI()},Lz=function(e){var n=e.getElement(),a=og(e),i=a(e,n);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:n.offsetHeight,i},$M=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},zM=function(e){var n=GA.create("div");return GA.insertAfter(n,e),$M(n)},Hz=function(e){var n=e.getElement();return e.inline?$M(null):zM(n)},Vz=function(e){var n=e.getElement();return e.orgDisplay=n.style.display,Tt(og(e))?IM(e):ht(og(e))?Lz(e):Hz(e)},FM=function(e,n){var a={show:Q.from(n.show).getOr(We),hide:Q.from(n.hide).getOr(We),disable:Q.from(n.disable).getOr(We),isDisabled:Q.from(n.isDisabled).getOr(wt),enable:function(){e.mode.isReadOnly()||Q.from(n.enable).map(Aa)}};e.ui=kn(kn({},e.ui),a)},LM=function(e){e.fire("ScriptsLoaded"),zz(e),Fz(e),$z(e);var n=Vz(e);FM(e,Q.from(n.api).getOr({}));var a={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer};return e.editorContainer=a.editorContainer?a.editorContainer:null,SN(e),e.inline?QT(e):Iz(e,a)},Fp=ao.DOM,HM=function(e){return e.charAt(0)==="-"},VM=function(e,n){var a=ab(n),i=eu(n);if(vs.hasCode(a)===!1&&a!=="en"){var c=i!==""?i:n.editorManager.baseURL+"/langs/"+a+".js";e.add(c,We,void 0,function(){E2(n,c,a)})}},UM=function(e,n,a,i){var c=og(n);if(Tt(c)){if(!HM(c)&&!fr(dd.urls,c)){var f=nS(n);f?dd.load(c,n.documentBaseURI.toAbsolute(f)):dd.load(c,"themes/"+c+"/theme"+a+".js")}e.loadQueue(function(){dd.waitFor(c,i)})}else i()},Uz=function(e){return Q.from(tb(e)).filter(function(n){return n.length>0}).map(function(n){return{url:n,name:Q.none()}})},WM=function(e,n,a){return Q.from(n).filter(function(i){return i.length>0&&!vT.has(i)}).map(function(i){return{url:e.editorManager.baseURL+"/icons/"+i+"/icons"+a+".js",name:Q.some(i)}})},Wz=function(e,n,a){var i=WM(n,"default",a),c=Uz(n).orThunk(function(){return WM(n,vf(n),"")});pt(wr([i,c]),function(f){e.add(f.url,We,void 0,function(){wN(n,f.url,f.name.getOrUndefined())})})},jz=function(e,n){je.each(EE(e),function(a,i){jc.load(i,a,We,void 0,function(){gT(e,a,i)}),e.settings.plugins+=" "+i}),je.each(ub(e).split(/[ ,]/),function(a){if(a=je.trim(a),a&&!jc.urls[a])if(HM(a)){a=a.substr(1,a.length);var i=jc.dependencies(a);je.each(i,function(f){var g={prefix:"plugins/",resource:f,suffix:"/plugin"+n+".js"},b=jc.createUrl(g,f);jc.load(b.resource,b,We,void 0,function(){gT(e,b.prefix+b.resource+b.suffix,b.resource)})})}else{var c={prefix:"plugins/",resource:a,suffix:"/plugin"+n+".js"};jc.load(a,c,We,void 0,function(){gT(e,c.prefix+c.resource+c.suffix,a)})}})},Gz=function(e,n){var a=ev.ScriptLoader;UM(a,e,n,function(){VM(a,e),Wz(a,e,n),jz(e,n),a.loadQueue(function(){e.removed||LM(e)},e,function(){e.removed||LM(e)})})},qz=function(e,n){return Qc.forElement(e,{contentCssCors:kE(n),referrerPolicy:rb(n)})},Kz=function(e){var n=e.id;vs.setCode(ab(e));var a=function(){Fp.unbind(window,"ready",a),e.render()};if(!Hm.Event.domLoaded){Fp.bind(window,"ready",a);return}if(e.getElement()&&St.contentEditable){var i=T.fromDom(e.getElement()),c=En(i);e.on("remove",function(){lr(i.dom.attributes,function(g){return Xe(i,g.name)}),$(i,c)}),e.ui.styleSheetLoader=qz(i,e),wE(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var f=e.getElement().form||Fp.getParent(n,"form");f&&(e.formElement=f,rS(e)&&!vu(e.getElement())&&(Fp.insertAfter(Fp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(g){e.fire(g.type,g)},Fp.bind(f,"submit reset",e.formEventDelegate),e.on("reset",function(){e.resetContent()}),aS(e)&&!f.submit.nodeType&&!f.submit.length&&!f._mceOldSubmit&&(f._mceOldSubmit=f.submit,f.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),f._mceOldSubmit(f)})),e.windowManager=z4(e),e.notificationManager=mv(e),Ly(e)&&e.on("GetContent",function(g){g.save&&(g.content=Fp.encode(g.content))}),CE(e)&&e.on("submit",function(){e.initialized&&e.save()}),ib(e)&&(e._beforeUnload=function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Gz(e,e.suffix)}},Xz=function(e,n){return FD(e,n)},Yz={"font-size":"size","font-family":"face"},Jz=function(e,n,a){var i=function(f){return du(f,e).orThunk(function(){return ca(f)==="font"?Ir(Yz,e).bind(function(g){return oe(f,g)}):Q.none()})},c=function(f){return Yn(T.fromDom(n),f)};return YO(T.fromDom(a),function(f){return i(f)},c)},ek=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},jM=function(e,n){return Q.from(ao.DOM.getStyle(n,e,!0))},XA=function(e){return function(n,a){return Q.from(a).map(T.fromDom).filter(co).bind(function(i){return Jz(e,n,i.dom).or(jM(e,i.dom))}).getOr("")}},Zz=XA("font-size"),GM=ja(ek,XA("font-family")),qM=function(e){return qu(e.getBody()).map(function(n){var a=n.container();return un(a)?a.parentNode:a})},Qz=function(e){return Q.from(e.selection.getRng()).bind(function(n){var a=e.getBody(),i=n.startContainer===a&&n.startOffset===0;return i?Q.none():Q.from(e.selection.getStart(!0))})},eF=function(e,n){return Qz(e).orThunk(Mt(qM,e)).map(T.fromDom).filter(co).bind(n)},YA=function(e,n){return eF(e,ve(Q.some,n))},tk=function(e,n){if(/^[0-9.]+$/.test(n)){var a=parseInt(n,10);if(a>=1&&a<=7){var i=qh(e),c=Wd(e);return c?c[a-1]||n:i[a-1]||n}else return n}else return n},tF=function(e){var n=e.split(/\s*,\s*/);return $n(n,function(a){return a.indexOf(" ")!==-1&&!(xr(a,'"')||xr(a,"'"))?"'"+a+"'":a}).join(",")},JA=function(e,n){var a=tk(e,n);e.formatter.toggle("fontname",{value:tF(a)}),e.nodeChanged()},nF=function(e){return YA(e,function(n){return GM(e.getBody(),n.dom)}).getOr("")},rF=function(e,n){e.formatter.toggle("fontsize",{value:tk(e,n)}),e.nodeChanged()},aF=function(e){return YA(e,function(n){return Zz(e.getBody(),n.dom)}).getOr("")},KM=function(e){return YA(e,function(n){var a=T.fromDom(e.getBody()),i=YO(n,function(f){return du(f,"line-height")},Mt(Yn,a)),c=function(){var f=parseFloat(Cr(n,"line-height")),g=parseFloat(Cr(n,"font-size"));return String(f/g)};return i.getOrThunk(c)}).getOr("")},oF=function(e,n){e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},iF=function(e){if(typeof e!="string"){var n=je.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},uF=function(e,n){var a=iF(n);$D(e,a.content,a.details)},nk=je.each,sF=je.map,_c=je.inArray,ah=function(){function e(n){this.commands={state:{},exec:{},value:{}},this.editor=n,this.setupCommands(n)}return e.prototype.execCommand=function(n,a,i,c){var f,g=!1,b=this;if(!b.editor.removed){if(n.toLowerCase()!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(n)&&(!c||!c.skip_focus)?b.editor.focus():Iw(b.editor)),c=b.editor.fire("BeforeExecCommand",{command:n,ui:a,value:i}),c.isDefaultPrevented())return!1;var C=n.toLowerCase();if(f=b.commands.exec[C])return f(C,a,i),b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0;if(nk(this.editor.plugins,function(D){if(D.execCommand&&D.execCommand(n,a,i))return b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),g=!0,!1}),g)return g;if(b.editor.theme&&b.editor.theme.execCommand&&b.editor.theme.execCommand(n,a,i))return b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0;try{g=b.editor.getDoc().execCommand(n,a,i)}catch{}return g?(b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0):!1}},e.prototype.queryCommandState=function(n){var a;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(n=n.toLowerCase(),a=this.commands.state[n])return a(n);try{return this.editor.getDoc().queryCommandState(n)}catch{}return!1}},e.prototype.queryCommandValue=function(n){var a;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(n=n.toLowerCase(),a=this.commands.value[n])return a(n);try{return this.editor.getDoc().queryCommandValue(n)}catch{}}},e.prototype.addCommands=function(n,a){a===void 0&&(a="exec");var i=this;nk(n,function(c,f){nk(f.toLowerCase().split(","),function(g){i.commands[a][g]=c})})},e.prototype.addCommand=function(n,a,i){var c=this;n=n.toLowerCase(),this.commands.exec[n]=function(f,g,b,C){return a.call(i||c.editor,g,b,C)}},e.prototype.queryCommandSupported=function(n){if(n=n.toLowerCase(),this.commands.exec[n])return!0;try{return this.editor.getDoc().queryCommandSupported(n)}catch{}return!1},e.prototype.addQueryStateHandler=function(n,a,i){var c=this;n=n.toLowerCase(),this.commands.state[n]=function(){return a.call(i||c.editor)}},e.prototype.addQueryValueHandler=function(n,a,i){var c=this;n=n.toLowerCase(),this.commands.value[n]=function(){return a.call(i||c.editor)}},e.prototype.hasCustomCommand=function(n){return n=n.toLowerCase(),!!this.commands.exec[n]},e.prototype.execNativeCommand=function(n,a,i){return a===void 0&&(a=!1),i===void 0&&(i=null),this.editor.getDoc().execCommand(n,a,i)},e.prototype.isFormatMatch=function(n){return this.editor.formatter.match(n)},e.prototype.toggleFormat=function(n,a){this.editor.formatter.toggle(n,a),this.editor.nodeChanged()},e.prototype.storeSelection=function(n){this.selectionBookmark=this.editor.selection.getBookmark(n)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(n){var a=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":We,"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},mceFocus:function(c,f,g){Lb(n,g)},"Cut,Copy,Paste":function(c){var f=n.getDoc(),g;try{a.execNativeCommand(c)}catch{g=!0}if(c==="paste"&&!f.queryCommandEnabled(c)&&(g=!0),g||!f.queryCommandSupported(c)){var b=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");St.mac&&(b=b.replace(/Ctrl\+/g,"⌘+")),n.notificationManager.open({text:b,type:"error"})}},unlink:function(){if(n.selection.isCollapsed()){var c=n.dom.getParent(n.selection.getStart(),"a");c&&n.dom.remove(c,!0);return}n.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(c){var f=c.substring(7);f==="full"&&(f="justify"),nk("left,center,right,justify".split(","),function(g){f!==g&&n.formatter.remove("align"+g)}),f!=="none"&&a.toggleFormat("align"+f)},"InsertUnorderedList,InsertOrderedList":function(c){var f;a.execNativeCommand(c);var g=n.dom.getParent(n.selection.getNode(),"ol,ul");g&&(f=g.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(f.nodeName)&&(a.storeSelection(),n.dom.split(f,g),a.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(c){a.toggleFormat(c)},"ForeColor,HiliteColor":function(c,f,g){a.toggleFormat(c,{value:g})},FontName:function(c,f,g){JA(n,g)},FontSize:function(c,f,g){rF(n,g)},LineHeight:function(c,f,g){oF(n,g)},Lang:function(c,f,g){a.toggleFormat(c,{value:g.code,customValue:g.customCode})},RemoveFormat:function(c){n.formatter.remove(c)},mceBlockQuote:function(){a.toggleFormat("blockquote")},FormatBlock:function(c,f,g){return a.toggleFormat(g||"p")},mceCleanup:function(){var c=n.selection.getBookmark();n.setContent(n.getContent()),n.selection.moveToBookmark(c)},mceRemoveNode:function(c,f,g){var b=g||n.selection.getNode();b!==n.getBody()&&(a.storeSelection(),n.dom.remove(b,!0),a.restoreSelection())},mceSelectNodeDepth:function(c,f,g){var b=0;n.dom.getParent(n.selection.getNode(),function(C){if(C.nodeType===1&&b++===g)return n.selection.select(C),!1},n.getBody())},mceSelectNode:function(c,f,g){n.selection.select(g)},mceInsertContent:function(c,f,g){uF(n,g)},mceInsertRawHTML:function(c,f,g){n.selection.setContent("tiny_mce_marker");var b=n.getContent();n.setContent(b.replace(/tiny_mce_marker/g,function(){return g}))},mceInsertNewLine:function(c,f,g){cM(n,g)},mceToggleFormat:function(c,f,g){a.toggleFormat(g)},mceSetContent:function(c,f,g){n.setContent(g)},"Indent,Outdent":function(c){yA(n,c)},mceRepaint:We,InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(c,f,g){n.execCommand("mceInsertContent",!1,g.replace(/\{\$selection\}/g,n.selection.getContent({format:"text"})))},mceInsertLink:function(c,f,g){typeof g=="string"&&(g={href:g});var b=n.dom.getParent(n.selection.getNode(),"a");g.href=g.href.replace(/ /g,"%20"),(!b||!g.href)&&n.formatter.remove("link"),g.href&&n.formatter.apply("link",g,b)},selectAll:function(){var c=n.dom.getParent(n.selection.getStart(),Jc);if(c){var f=n.dom.createRng();f.selectNodeContents(c),n.selection.setRng(f)}},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(c,f,g){return aM(n,g),!0}});var i=function(c){return function(){var f=n.selection,g=f.isCollapsed()?[n.dom.getParent(f.getNode(),n.dom.isBlock)]:f.getSelectedBlocks(),b=sF(g,function(C){return!!n.formatter.matchNode(C,c)});return _c(b,!0)!==-1}};a.addCommands({JustifyLeft:i("alignleft"),JustifyCenter:i("aligncenter"),JustifyRight:i("alignright"),JustifyFull:i("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(c){return a.isFormatMatch(c)},mceBlockQuote:function(){return a.isFormatMatch("blockquote")},Outdent:function(){return ER(n)},"InsertUnorderedList,InsertOrderedList":function(c){var f=n.dom.getParent(n.selection.getNode(),"ul,ol");return f&&(c==="insertunorderedlist"&&f.tagName==="UL"||c==="insertorderedlist"&&f.tagName==="OL")}},"state"),a.addCommands({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}}),a.addQueryValueHandler("FontName",function(){return nF(n)},this),a.addQueryValueHandler("FontSize",function(){return aF(n)},this),a.addQueryValueHandler("LineHeight",function(){return KM(n)},this)},e}(),Lp="data-mce-contenteditable",cF=function(e,n,a){by(e,n)&&a===!1?py(e,n):a&&zd(e,n)},ZA=function(e,n,a){try{e.getDoc().execCommand(n,!1,String(a))}catch{}},rk=function(e,n){e.dom.contentEditable=n?"true":"false"},lF=function(e){pt(bu(e,'*[contenteditable="true"]'),function(n){O(n,Lp,"true"),rk(n,!1)})},fF=function(e){pt(bu(e,"*["+Lp+'="true"]'),function(n){Xe(n,Lp),rk(n,!0)})},XM=function(e){Q.from(e.selection.getNode()).each(function(n){n.removeAttribute("data-mce-selected")})},T0=function(e){e.selection.setRng(e.selection.getRng())},vF=function(e,n){var a=T.fromDom(e.getBody());cF(a,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),XM(e),e.readonly=!0,rk(a,!1),lF(a)):(e.readonly=!1,rk(a,!0),fF(a),ZA(e,"StyleWithCSS",!1),ZA(e,"enableInlineTableEditing",!1),ZA(e,"enableObjectResizing",!1),sx(e)&&e.focus(),T0(e),e.nodeChanged())},Hp=function(e){return e.readonly},YM=function(e){e.parser.addAttributeFilter("contenteditable",function(n){Hp(e)&&pt(n,function(a){a.attr(Lp,a.attr("contenteditable")),a.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Lp,function(n){Hp(e)&&pt(n,function(a){a.attr("contenteditable",a.attr(Lp))})}),e.serializer.addTempAttr(Lp)},bv=function(e){e.serializer?YM(e):e.on("PreInit",function(){YM(e)})},dF=function(e){return e.type==="click"},mF=function(e,n){var a=function(i){return Yn(i,T.fromDom(e.getBody()))};return Zo(n,"a",a).bind(function(i){return oe(i,"href")})},JM=function(e,n){if(dF(n)&&!Jn.metaKeyPressed(n)){var a=T.fromDom(n.target);mF(e,a).each(function(i){if(n.preventDefault(),/^#/.test(i)){var c=e.dom.select(i+',[name="'+_r(i,"#")+'"]');c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},gF=function(e){e.on("ShowCaret",function(n){Hp(e)&&n.preventDefault()}),e.on("ObjectSelected",function(n){Hp(e)&&n.preventDefault()})},ZM=je.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),ak=function(){function e(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||wt}return e.isNative=function(n){return!!ZM[n.toLowerCase()]},e.prototype.fire=function(n,a){var i=n.toLowerCase(),c=ut(i,a||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);var f=this.bindings[i];if(f)for(var g=0,b=f.length;g<b;g++){var C=f[g];if(!C.removed){if(C.once&&this.off(i,C.func),c.isImmediatePropagationStopped())return c;if(C.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c},e.prototype.on=function(n,a,i,c){if(a===!1&&(a=wt),a){var f={func:a,removed:!1};c&&je.extend(f,c);for(var g=n.toLowerCase().split(" "),b=g.length;b--;){var C=g[b],D=this.bindings[C];D||(D=[],this.toggleEvent(C,!0)),i?D=Xo([f],D,!0):D=Xo(Xo([],D,!0),[f],!1),this.bindings[C]=D}}return this},e.prototype.off=function(n,a){var i=this;if(n)for(var c=n.toLowerCase().split(" "),f=c.length;f--;){var g=c[f],b=this.bindings[g];if(!g)return Zt(this.bindings,function(D,I){i.toggleEvent(I,!1),delete i.bindings[I]}),this;if(b){if(!a)b.length=0;else{var C=Ra(b,function(D){return D.func===a});b=C.fail,this.bindings[g]=b,pt(C.pass,function(D){D.removed=!0})}b.length||(this.toggleEvent(n,!1),delete this.bindings[g])}}else Zt(this.bindings,function(D,I){i.toggleEvent(I,!1)}),this.bindings={};return this},e.prototype.once=function(n,a,i){return this.on(n,a,i,{once:!0})},e.prototype.has=function(n){return n=n.toLowerCase(),!(!this.bindings[n]||this.bindings[n].length===0)},e}(),Vp=function(e){return e._eventDispatcher||(e._eventDispatcher=new ak({scope:e,toggleEvent:function(n,a){ak.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,a)}})),e._eventDispatcher},ok={fire:function(e,n,a){var i=this;if(i.removed&&e!=="remove"&&e!=="detach")return n;var c=Vp(i).fire(e,n);if(a!==!1&&i.parent)for(var f=i.parent();f&&!c.isPropagationStopped();)f.fire(e,c,!1),f=f.parent();return c},on:function(e,n,a){return Vp(this).on(e,n,a)},off:function(e,n){return Vp(this).off(e,n)},once:function(e,n){return Vp(this).once(e,n)},hasEventListeners:function(e){return Vp(this).has(e)}},ik=ao.DOM,Up,uk=function(e,n){if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;var a=ob(e);return a?(e.eventRoot||(e.eventRoot=ik.select(a)[0]),e.eventRoot):e.getBody()},hF=function(e){return!e.hidden&&!Hp(e)},QA=function(e,n,a){hF(e)?e.fire(n,a):Hp(e)&&JM(e,a)},e3=function(e,n){var a;if(e.delegates||(e.delegates={}),!(e.delegates[n]||e.removed)){var i=uk(e,n);if(ob(e)){if(Up||(Up={},e.editorManager.on("removeEditor",function(){e.editorManager.activeEditor||Up&&(Zt(Up,function(c,f){e.dom.unbind(uk(e,f))}),Up=null)})),Up[n])return;a=function(c){for(var f=c.target,g=e.editorManager.get(),b=g.length;b--;){var C=g[b].getBody();(C===f||ik.isChildOf(f,C))&&QA(g[b],n,c)}},Up[n]=a,ik.bind(i,n,a)}else a=function(c){QA(e,n,c)},ik.bind(i,n,a),e.delegates[n]=a}},QM=kn(kn({},ok),{bindPendingEventDelegates:function(){var e=this;je.each(e._pendingNativeEvents,function(n){e3(e,n)})},toggleNativeEvent:function(e,n){var a=this;e==="focus"||e==="blur"||a.removed||(n?a.initialized?e3(a,e):a._pendingNativeEvents?a._pendingNativeEvents.push(e):a._pendingNativeEvents=[e]:a.initialized&&(a.dom.unbind(uk(a,e),e,a.delegates[e]),delete a.delegates[e]))},unbindAllNativeEvents:function(){var e=this,n=e.getBody(),a=e.dom;e.delegates&&(Zt(e.delegates,function(i,c){e.dom.unbind(uk(e,c),c,i)}),delete e.delegates),!e.inline&&n&&a&&(n.onload=null,a.unbind(e.getWin()),a.unbind(e.getDoc())),a&&(a.unbind(n),a.unbind(e.getContainer()))}}),eB=["design","readonly"],tB=function(e,n,a,i){var c=a[n.get()],f=a[i];try{f.activate()}catch(g){console.error("problem while activating editor mode "+i+":",g);return}c.deactivate(),c.editorReadOnly!==f.editorReadOnly&&vF(e,f.editorReadOnly),n.set(i),yw(e,i)},pF=function(e,n,a,i){if(i!==a.get()){if(!fr(n,i))throw new Error("Editor mode '"+i+"' is invalid");e.initialized?tB(e,a,n,i):e.on("init",function(){return tB(e,a,n,i)})}},bF=function(e,n,a){var i;if(Nt(eB,n))throw new Error("Cannot override default mode "+n);return kn(kn({},e),(i={},i[n]=kn(kn({},a),{deactivate:function(){try{a.deactivate()}catch(c){console.error("problem while deactivating editor mode "+n+":",c)}}}),i))},yF=function(e){var n=fs("design"),a=fs({design:{activate:We,deactivate:We,editorReadOnly:!1},readonly:{activate:We,deactivate:We,editorReadOnly:!0}});return bv(e),gF(e),{isReadOnly:function(){return Hp(e)},set:function(i){return pF(e,a.get(),n,i)},get:function(){return n.get()},register:function(i,c){a.set(bF(a.get(),i,c))}}},sk=je.each,K2=je.explode,nB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},rB=je.makeMap("alt,ctrl,shift,meta,access"),wF=function(e){var n,a={};sk(K2(e.toLowerCase(),"+"),function(c){c in rB?a[c]=!0:/^[0-9]{2,}$/.test(c)?a.keyCode=parseInt(c,10):(a.charCode=c.charCodeAt(0),a.keyCode=nB[c]||c.toUpperCase().charCodeAt(0))});var i=[a.keyCode];for(n in rB)a[n]?i.push(n):a[n]=!1;return a.id=i.join(","),a.access&&(a.alt=!0,St.mac?a.ctrl=!0:a.shift=!0),a.meta&&(St.mac?a.meta=!0:(a.ctrl=!0,a.meta=!1)),a},ck=function(){function e(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;var a=this;n.on("keyup keypress keydown",function(i){(a.hasModifier(i)||a.isFunctionKey(i))&&!i.isDefaultPrevented()&&(sk(a.shortcuts,function(c){if(a.matchShortcut(i,c))return a.pendingPatterns=c.subpatterns.slice(0),i.type==="keydown"&&a.executeShortcutAction(c),!0}),a.matchShortcut(i,a.pendingPatterns[0])&&(a.pendingPatterns.length===1&&i.type==="keydown"&&a.executeShortcutAction(a.pendingPatterns[0]),a.pendingPatterns.shift()))})}return e.prototype.add=function(n,a,i,c){var f=this,g=f.normalizeCommandFunc(i);return sk(K2(je.trim(n)),function(b){var C=f.createShortcut(b,a,g,c);f.shortcuts[C.id]=C}),!0},e.prototype.remove=function(n){var a=this.createShortcut(n);return this.shortcuts[a.id]?(delete this.shortcuts[a.id],!0):!1},e.prototype.normalizeCommandFunc=function(n){var a=this,i=n;return typeof i=="string"?function(){a.editor.execCommand(i,!1,null)}:je.isArray(i)?function(){a.editor.execCommand(i[0],i[1],i[2])}:i},e.prototype.createShortcut=function(n,a,i,c){var f=je.map(K2(n,">"),wF);return f[f.length-1]=je.extend(f[f.length-1],{func:i,scope:c||this.editor}),je.extend(f[0],{desc:this.editor.translate(a),subpatterns:f.slice(1)})},e.prototype.hasModifier=function(n){return n.altKey||n.ctrlKey||n.metaKey},e.prototype.isFunctionKey=function(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123},e.prototype.matchShortcut=function(n,a){return!a||a.ctrl!==n.ctrlKey||a.meta!==n.metaKey||a.alt!==n.altKey||a.shift!==n.shiftKey?!1:n.keyCode===a.keyCode||n.charCode&&n.charCode===a.charCode?(n.preventDefault(),!0):!1},e.prototype.executeShortcutAction=function(n){return n.func?n.func.call(n.scope):null},e}(),aB=function(){var e={},n={},a={},i={},c={},f={},g={},b=function(D,I){return function(z,F){return D[z.toLowerCase()]=kn(kn({},F),{type:I})}},C=function(D,I){return i[D.toLowerCase()]=I};return{addButton:b(e,"button"),addGroupToolbarButton:b(e,"grouptoolbarbutton"),addToggleButton:b(e,"togglebutton"),addMenuButton:b(e,"menubutton"),addSplitButton:b(e,"splitbutton"),addMenuItem:b(n,"menuitem"),addNestedMenuItem:b(n,"nestedmenuitem"),addToggleMenuItem:b(n,"togglemenuitem"),addAutocompleter:b(a,"autocompleter"),addContextMenu:b(c,"contextmenu"),addContextToolbar:b(f,"contexttoolbar"),addContextForm:b(f,"contextform"),addSidebar:b(g,"sidebar"),addIcon:C,getAll:function(){return{buttons:e,menuItems:n,icons:i,popups:a,contextMenus:c,contextToolbars:f,sidebars:g}}}},CF=function(){var e=aB();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},Wp=ao.DOM,oB=je.extend,SF=je.each,iB=je.resolve,xF=St.ie,lk=function(){function e(n,a,i){var c=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=i,this.documentBaseUrl=i.documentBaseURL,oB(this,QM),this.settings=b_(this,n,this.documentBaseUrl,i.defaultSettings,a),this.settings.suffix&&(i.suffix=this.settings.suffix),this.suffix=i.suffix,this.settings.base_url&&i._setBaseUrl(this.settings.base_url),this.baseUri=i.baseURI,this.settings.referrer_policy&&(ev.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),ao.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),As.languageLoad=this.settings.language_load,As.baseURL=i.baseURL,this.id=n,this.setDirty(!1),this.documentBaseURI=new ud(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new ck(this),this.editorCommands=new ah(this),this.settings.cache_suffix&&(St.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:CF(),styleSheetLoader:void 0,show:We,hide:We,enable:We,disable:We,isDisabled:wt};var f=this,g=yF(f);this.mode=g,this.setMode=g.set,i.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=br.overrideDefaults(function(){return{context:c.inline?c.getBody():c.getDoc(),element:c.getBody()}})}return e.prototype.render=function(){Kz(this)},e.prototype.focus=function(n){this.execCommand("mceFocus",!1,n)},e.prototype.hasFocus=function(){return Uc(this)},e.prototype.execCallback=function(n){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var c=this,f=c.settings[n],g;if(f)return c.callbackLookup&&(g=c.callbackLookup[n])&&(f=g.func,g=g.scope),typeof f=="string"&&(g=f.replace(/\.\w+$/,""),g=g?iB(g):0,f=iB(f),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[n]={func:f,scope:g}),f.apply(g||c,a)},e.prototype.translate=function(n){return vs.translate(n)},e.prototype.getParam=function(n,a,i){return gN(this,n,a,i)},e.prototype.hasPlugin=function(n,a){var i=Nt(ub(this).split(/[ ,]/),n);return i?a?jc.get(n)!==void 0:!0:!1},e.prototype.nodeChanged=function(n){this._nodeChangeDispatcher.nodeChanged(n)},e.prototype.addCommand=function(n,a,i){this.editorCommands.addCommand(n,a,i)},e.prototype.addQueryStateHandler=function(n,a,i){this.editorCommands.addQueryStateHandler(n,a,i)},e.prototype.addQueryValueHandler=function(n,a,i){this.editorCommands.addQueryValueHandler(n,a,i)},e.prototype.addShortcut=function(n,a,i,c){this.shortcuts.add(n,a,i,c)},e.prototype.execCommand=function(n,a,i,c){return this.editorCommands.execCommand(n,a,i,c)},e.prototype.queryCommandState=function(n){return this.editorCommands.queryCommandState(n)},e.prototype.queryCommandValue=function(n){return this.editorCommands.queryCommandValue(n)},e.prototype.queryCommandSupported=function(n){return this.editorCommands.queryCommandSupported(n)},e.prototype.show=function(){var n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Wp.show(n.getContainer()),Wp.hide(n.id)),n.load(),n.fire("show"))},e.prototype.hide=function(){var n=this,a=n.getDoc();n.hidden||(xF&&a&&!n.inline&&a.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Wp.hide(n.getContainer()),Wp.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(n,a){this.fire("ProgressState",{state:n,time:a})},e.prototype.load=function(n){var a=this,i=a.getElement(),c;if(a.removed)return"";if(i){n=n||{},n.load=!0;var f=vu(i)?i.value:i.innerHTML;return c=a.setContent(f,n),n.element=i,n.no_events||a.fire("LoadContent",n),n.element=i=null,c}},e.prototype.save=function(n){var a=this,i=a.getElement(),c,f;if(!(!i||!a.initialized||a.removed))return n=n||{},n.save=!0,n.element=i,c=n.content=a.getContent(n),n.no_events||a.fire("SaveContent",n),n.format==="raw"&&a.fire("RawSaveContent",n),c=n.content,vu(i)?i.value=c:((n.is_removing||!a.inline)&&(i.innerHTML=c),(f=Wp.getParent(a.id,"form"))&&SF(f.elements,function(g){if(g.name===a.id)return g.value=c,!1})),n.element=i=null,n.set_dirty!==!1&&a.setDirty(!1),c},e.prototype.setContent=function(n,a){return P4(this,n,a)},e.prototype.getContent=function(n){return q5(this,n)},e.prototype.insertContent=function(n,a){a&&(n=oB({content:n},a)),this.execCommand("mceInsertContent",!1,n)},e.prototype.resetContent=function(n){n===void 0?P4(this,this.startContent,{format:"raw"}):P4(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(n){var a=!this.isNotDirty;this.isNotDirty=!n,n&&n!==a&&this.fire("dirty")},e.prototype.getContainer=function(){var n=this;return n.container||(n.container=Wp.get(n.editorContainer||n.id+"_parent")),n.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=Wp.get(this.id)),this.targetElm},e.prototype.getWin=function(){var n=this,a;return n.contentWindow||(a=n.iframeElement,a&&(n.contentWindow=a.contentWindow)),n.contentWindow},e.prototype.getDoc=function(){var n=this,a;return n.contentDocument||(a=n.getWin(),a&&(n.contentDocument=a.document)),n.contentDocument},e.prototype.getBody=function(){var n=this.getDoc();return this.bodyElement||(n?n.body:null)},e.prototype.convertURL=function(n,a,i){var c=this,f=c.settings;return f.urlconverter_callback?c.execCallback("urlconverter_callback",n,i,!0,a):!f.convert_urls||i&&i.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:f.relative_urls?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,f.remove_script_host),n)},e.prototype.addVisual=function(n){Xz(this,n)},e.prototype.remove=function(){Y5(this)},e.prototype.destroy=function(n){s_(this,n)},e.prototype.uploadImages=function(n){return this.editorUpload.uploadImages(n)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),Bf=ao.DOM,TF=je.explode,li=je.each,t3=je.extend,hd=0,n3=!1,X2,oh=[],Ps=[],r3=function(e){return e!=="length"},a3=function(e){var n=e.type;li(ih.get(),function(a){switch(n){case"scroll":a.fire("ScrollWindow",e);break;case"resize":a.fire("ResizeWindow",e);break}})},o3=function(e){e!==n3&&(e?br(window).on("resize scroll",a3):br(window).off("resize scroll",a3),n3=e)},uB=function(e){var n=Ps;delete oh[e.id];for(var a=0;a<oh.length;a++)if(oh[a]===e){oh.splice(a,1);break}return Ps=bn(Ps,function(i){return e!==i}),ih.activeEditor===e&&(ih.activeEditor=Ps.length>0?Ps[0]:null),ih.focusedEditor===e&&(ih.focusedEditor=null),n.length!==Ps.length},kF=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(uB(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e},EF=document.compatMode!=="CSS1Compat",ih=kn(kn({},ok),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:br,majorVersion:"5",minorVersion:"10.7",releaseDate:"2022-12-06",editors:oh,i18n:vs,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e=this,n,a,i="";a=ud.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));var c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,i=c.suffix;else{for(var f=document.getElementsByTagName("script"),g=0;g<f.length;g++){var b=f[g].src||"";if(b!==""){var C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(i=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}}if(!n&&document.currentScript){var b=document.currentScript.src;b.indexOf(".min")!==-1&&(i=".min"),n=b.substring(0,b.lastIndexOf("/"))}}e.baseURL=new ud(a).toAbsolute(n),e.documentBaseURL=a,e.baseURI=new ud(e.baseURL),e.suffix=i,nx(e)},overrideDefaults:function(e){var n=e.base_url;n&&this._setBaseUrl(n);var a=e.suffix;e.suffix&&(this.suffix=a),this.defaultSettings=e;var i=e.plugin_base_urls;i!==void 0&&Zt(i,function(c,f){As.PluginManager.urls[f]=c})},init:function(e){var n=this,a,i=je.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=function(z,F){return z.inline&&F.tagName.toLowerCase()in i},f=function(z){var F=z.id;return F||(F=Ir(z,"name").filter(function(q){return!Bf.get(q)}).getOrThunk(Bf.uniqueId),z.setAttribute("id",F)),F},g=function(z){var F=e[z];if(F)return F.apply(n,[])},b=function(z,F){return F.constructor===RegExp?F.test(z.className):Bf.hasClass(z,F)},C=function(z){var F=[];if(St.browser.isIE()&&St.browser.version.major<11)return O2("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(EF)return O2("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(z.types)return li(z.types,function(X){F=F.concat(Bf.select(X.selector))}),F;if(z.selector)return Bf.select(z.selector);if(z.target)return[z.target];switch(z.mode){case"exact":var q=z.elements||"";q.length>0&&li(TF(q),function(X){var J=Bf.get(X);J?F.push(J):li(document.forms,function(ee){li(ee.elements,function(ce){ce.name===X&&(X="mce_editor_"+hd++,Bf.setAttrib(ce,"id",X),F.push(ce))})})});break;case"textareas":case"specific_textareas":li(Bf.select("textarea"),function(X){z.editor_deselector&&b(X,z.editor_deselector)||(!z.editor_selector||b(X,z.editor_selector))&&F.push(X)});break}return F},D=function(z){a=z},I=function(){var z=0,F=[],q,X=function(J,ee,ce){var se=new lk(J,ee,n);F.push(se),se.on("init",function(){++z===q.length&&D(F)}),se.targetElm=se.targetElm||ce,se.render()};if(Bf.unbind(window,"ready",I),g("onpageload"),q=br.unique(C(e)),e.types){li(e.types,function(J){je.each(q,function(ee){return Bf.is(ee,J.selector)?(X(f(ee),t3({},e,J),ee),!1):!0})});return}je.each(q,function(J){kF(n.get(J.id))}),q=je.grep(q,function(J){return!n.get(J.id)}),q.length===0?D([]):li(q,function(J){c(e,J)?O2("Could not initialize inline editor on invalid inline target element",J):X(f(J),e,J)})};return n.settings=e,Bf.bind(window,"ready",I),new Zi(function(z){a?z(a):D=function(F){z(F)}})},get:function(e){return arguments.length===0?Ps.slice(0):Tt(e)?ya(Ps,function(n){return n.id===e}).getOr(null):$t(e)&&Ps[e]?Ps[e]:null},add:function(e){var n=this,a=oh[e.id];return a===e||(n.get(e.id)===null&&(r3(e.id)&&(oh[e.id]=e),oh.push(e),Ps.push(e)),o3(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),X2||(X2=function(i){var c=n.fire("BeforeUnload");if(c.returnValue)return i.preventDefault(),i.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",X2))),e},createEditor:function(e,n){return this.add(new lk(e,n,this))},remove:function(e){var n=this,a,i;if(!e){for(a=Ps.length-1;a>=0;a--)n.remove(Ps[a]);return}if(Tt(e)){li(Bf.select(e),function(c){i=n.get(c.id),i&&n.remove(i)});return}return i=e,Z(n.get(i.id))?null:(uB(i)&&n.fire("RemoveEditor",{editor:i}),Ps.length===0&&window.removeEventListener("beforeunload",X2),i.remove(),o3(Ps.length>0),i)},execCommand:function(e,n,a){var i=this,c=i.get(a);switch(e){case"mceAddEditor":return i.get(a)||new lk(a,i.settings,i).render(),!0;case"mceRemoveEditor":return c&&c.remove(),!0;case"mceToggleEditor":return c?(c.isHidden()?c.show():c.hide(),!0):(i.execCommand("mceAddEditor",!1,a),!0)}return i.activeEditor?i.activeEditor.execCommand(e,n,a):!1},triggerSave:function(){li(Ps,function(e){e.save()})},addI18n:function(e,n){vs.add(e,n)},translate:function(e){return vs.translate(e)},setActive:function(e){var n=this.activeEditor;this.activeEditor!==e&&(n&&n.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new ud(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ud(this.baseURL)}});ih.setup();var sB=Math.min,jp=Math.max,fk=Math.round,cB=function(e,n,a){var i=n.x,c=n.y,f=e.w,g=e.h,b=n.w,C=n.h,D=(a||"").split("");return D[0]==="b"&&(c+=C),D[1]==="r"&&(i+=b),D[0]==="c"&&(c+=fk(C/2)),D[1]==="c"&&(i+=fk(b/2)),D[3]==="b"&&(c-=g),D[4]==="r"&&(i-=f),D[3]==="c"&&(c-=fk(g/2)),D[4]==="c"&&(i-=fk(f/2)),Gp(i,c,f,g)},OF=function(e,n,a,i){var c,f;for(f=0;f<i.length;f++)if(c=cB(e,n,i[f]),c.x>=a.x&&c.x+c.w<=a.w+a.x&&c.y>=a.y&&c.y+c.h<=a.h+a.y)return i[f];return null},AF=function(e,n,a){return Gp(e.x-n,e.y-a,e.w+n*2,e.h+a*2)},DF=function(e,n){var a=jp(e.x,n.x),i=jp(e.y,n.y),c=sB(e.x+e.w,n.x+n.w),f=sB(e.y+e.h,n.y+n.h);return c-a<0||f-i<0?null:Gp(a,i,c-a,f-i)},_F=function(e,n,a){var i=e.x,c=e.y,f=e.x+e.w,g=e.y+e.h,b=n.x+n.w,C=n.y+n.h,D=jp(0,n.x-i),I=jp(0,n.y-c),z=jp(0,f-b),F=jp(0,g-C);return i+=D,c+=I,a&&(f+=D,g+=I,i-=z,c-=F),f-=z,g-=F,Gp(i,c,f-i,g-c)},Gp=function(e,n,a,i){return{x:e,y:n,w:a,h:i}},RF=function(e){return Gp(e.left,e.top,e.width,e.height)},MF={inflate:AF,relativePosition:cB,findBestRelativePosition:OF,intersect:DF,clamp:_F,create:Gp,fromClientRect:RF},BF=function(e,n,a){a===void 0&&(a=1e3);var i=!1,c=null,f=function(D){return function(){for(var I=[],z=0;z<arguments.length;z++)I[z]=arguments[z];i||(i=!0,c!==null&&(clearTimeout(c),c=null),D.apply(null,I))}},g=f(e),b=f(n),C=function(){for(var D=[],I=0;I<arguments.length;I++)D[I]=arguments[I];!i&&c===null&&(c=setTimeout(function(){return b.apply(null,D)},a))};return{start:C,resolve:g,reject:b}},i3=function(){var e={},n={},a=function(c,f){var g='Script at URL "'+f+'" failed to load',b='Script at URL "'+f+"\" did not call `tinymce.Resource.add('"+c+"', data)` within 1 second";if(e[c]!==void 0)return e[c];var C=new Zi(function(D,I){var z=BF(D,I);n[c]=z.resolve,ev.ScriptLoader.loadScript(f,function(){return z.start(b)},function(){return z.reject(g)})});return e[c]=C,C},i=function(c,f){n[c]!==void 0&&(n[c](f),delete n[c]),e[c]=Zi.resolve(f)};return{load:a,add:i}},Y2=i3(),yv=je.each,k0=je.extend,vk,J2,u3=function(){};u3.extend=vk=function(e){var n=this,a=n.prototype,i=function(){var b,C,D,I=this;if(!J2&&(I.init&&I.init.apply(I,arguments),C=I.Mixins,C))for(b=C.length;b--;)D=C[b],D.init&&D.init.apply(I,arguments)},c=function(){return this},f=function(b,C){return function(){var D=this,I=D._super;D._super=a[b];var z=C.apply(D,arguments);return D._super=I,z}};J2=!0;var g=new n;return J2=!1,e.Mixins&&(yv(e.Mixins,function(b){for(var C in b)C!=="init"&&(e[C]=b[C])}),a.Mixins&&(e.Mixins=a.Mixins.concat(e.Mixins))),e.Methods&&yv(e.Methods.split(","),function(b){e[b]=c}),e.Properties&&yv(e.Properties.split(","),function(b){var C="_"+b;e[b]=function(D){var I=this;return D!==void 0?(I[C]=D,I):I[C]}}),e.Statics&&yv(e.Statics,function(b,C){i[C]=b}),e.Defaults&&a.Defaults&&(e.Defaults=k0({},a.Defaults,e.Defaults)),Zt(e,function(b,C){typeof b=="function"&&a[C]?g[C]=f(C,b):g[C]=b}),i.prototype=g,i.constructor=i,i.extend=vk,i};var Z2=Math.min,dk=Math.max,uh=Math.round,lB=function(e){var n={},a=0,i=0,c=0,f=function(z,F,q){var X,J,ee;X=0,J=0,ee=0,z=z/255,F=F/255,q=q/255;var ce=Z2(z,Z2(F,q)),se=dk(z,dk(F,q));if(ce===se)return ee=ce,{h:0,s:0,v:ee*100};var Ae=z===ce?F-q:q===ce?z-F:q-z;return X=z===ce?3:q===ce?1:5,X=60*(X-Ae/(se-ce)),J=(se-ce)/se,ee=se,{h:uh(X),s:uh(J*100),v:uh(ee*100)}},g=function(z,F,q){if(z=(parseInt(z,10)||0)%360,F=parseInt(F,10)/100,q=parseInt(q,10)/100,F=dk(0,Z2(F,1)),q=dk(0,Z2(q,1)),F===0){a=i=c=uh(255*q);return}var X=z/60,J=q*F,ee=J*(1-Math.abs(X%2-1)),ce=q-J;switch(Math.floor(X)){case 0:a=J,i=ee,c=0;break;case 1:a=ee,i=J,c=0;break;case 2:a=0,i=J,c=ee;break;case 3:a=0,i=ee,c=J;break;case 4:a=ee,i=0,c=J;break;case 5:a=J,i=0,c=ee;break;default:a=i=c=0}a=uh(255*(a+ce)),i=uh(255*(i+ce)),c=uh(255*(c+ce))},b=function(){var z=function(F){return F=parseInt(F,10).toString(16),F.length>1?F:"0"+F};return"#"+z(a)+z(i)+z(c)},C=function(){return{r:a,g:i,b:c}},D=function(){return f(a,i,c)},I=function(z){var F;return typeof z=="object"?"r"in z?(a=z.r,i=z.g,c=z.b):"v"in z&&g(z.h,z.s,z.v):(F=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(z))?(a=parseInt(F[1],10),i=parseInt(F[2],10),c=parseInt(F[3],10)):(F=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(z))?(a=parseInt(F[1],16),i=parseInt(F[2],16),c=parseInt(F[3],16)):(F=/#([0-F])([0-F])([0-F])/gi.exec(z))&&(a=parseInt(F[1]+F[1],16),i=parseInt(F[2]+F[2],16),c=parseInt(F[3]+F[3],16)),a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,c=c<0?0:c>255?255:c,n};return e&&I(e),n.toRgb=C,n.toHsv=D,n.toHex=b,n.parse=I,n},PF=function(e){var n=JSON.stringify(e);return Tt(n)?n.replace(/[\u0080-\uFFFF]/g,function(a){var i=a.charCodeAt(0).toString(16);return"\\u"+"0000".substring(i.length)+i}):n},s3={serialize:PF,parse:function(e){try{return JSON.parse(e)}catch{}}},NF={callbacks:{},count:0,send:function(e){var n=this,a=ao.DOM,i=e.count!==void 0?e.count:n.count,c="tinymce_jsonp_"+i;n.callbacks[i]=function(f){a.remove(c),delete n.callbacks[i],e.callback(f)},a.add(a.doc.body,"script",{id:c,src:e.url,type:"text/javascript"}),n.count++}},mk=kn(kn({},ok),{send:function(e){var n,a=0,i=function(){!e.async||n.readyState===4||a++>1e4?(e.success&&a<1e4&&n.status===200?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,a>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):Ru.setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",mk.fire("beforeInitialize",{settings:e}),n=new XMLHttpRequest,n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&je.each(e.requestheaders,function(c){n.setRequestHeader(c.key,c.value)}),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n=mk.fire("beforeSend",{xhr:n,settings:e}).xhr,n.send(e.data),!e.async)return i();Ru.setTimeout(i,10)}}),fB=je.extend,IF=function(){function e(n){this.settings=fB({},n),this.count=0}return e.sendRPC=function(n){return new e().send(n)},e.prototype.send=function(n){var a=n.error,i=n.success,c=fB(this.settings,n);c.success=function(f,g){f=s3.parse(f),typeof f>"u"&&(f={error:"JSON Parse error."}),f.error?a.call(c.error_scope||c.scope,f.error,g):i.call(c.success_scope||c.scope,f.result)},c.error=function(f,g){a&&a.call(c.error_scope||c.scope,f,g)},c.data=s3.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),c.content_type="application/json",mk.send(c)},e}(),vB=function(){return function(){var e={},n=[],a={getItem:function(i){var c=e[i];return c||null},setItem:function(i,c){n.push(i),e[i]=String(c)},key:function(i){return n[i]},removeItem:function(i){n=n.filter(function(c){return c===i}),delete e[i]},clear:function(){n=[],e={}},length:0};return Object.defineProperty(a,"length",{get:function(){return n.length},configurable:!1,enumerable:!1}),a}()},E0;try{var c3="__storage_test__";E0=window.localStorage,E0.setItem(c3,c3),E0.removeItem(c3)}catch{E0=vB()}var $F=E0,zF={geom:{Rect:MF},util:{Promise:Zi,Delay:Ru,Tools:je,VK:Jn,URI:ud,Class:u3,EventDispatcher:ak,Observable:ok,I18n:vs,XHR:mk,JSON:s3,JSONRequest:IF,JSONP:NF,LocalStorage:$F,Color:lB,ImageUploader:E_},dom:{EventUtils:Hm,Sizzle:za,DomQuery:br,TreeWalker:Ta,TextSeeker:Sy,DOMUtils:ao,ScriptLoader:ev,RangeUtils:op,Serializer:i_,StyleSheetLoader:hC,ControlSelection:Sw,BookmarkManager:nd,Selection:jD,Event:Hm.Event},html:{Styles:al,Entities:bc,Node:Wc,Schema:yc,SaxParser:Ng,DomParser:cT,Writer:Cx,Serializer:sm},Env:St,AddOnManager:As,Annotator:Ob,Formatter:O_,UndoManager:Of,EditorCommands:ah,WindowManager:z4,NotificationManager:mv,EditorObservable:QM,Shortcuts:ck,Editor:lk,FocusManager:YS,EditorManager:ih,DOM:ao.DOM,ScriptLoader:ev.ScriptLoader,PluginManager:jc,ThemeManager:dd,IconManager:vT,Resource:Y2,trim:je.trim,isArray:je.isArray,is:je.is,toArray:je.toArray,makeMap:je.makeMap,each:je.each,map:je.map,grep:je.grep,inArray:je.inArray,extend:je.extend,create:je.create,walk:je.walk,createNS:je.createNS,resolve:je.resolve,explode:je.explode,_addCacheSuffix:je._addCacheSuffix,isOpera:St.opera,isWebKit:St.webkit,isIE:St.ie,isGecko:St.gecko,isMac:St.mac},dB=je.extend(ih,zF),FF=function(e){try{le.exports=e}catch{}},LF=function(e){window.tinymce=e,window.tinyMCE=e};LF(dB),FF(dB)})()})(gG);(function(){var le=function(t){var r=typeof t;return t===null?"null":r==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":r==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":r},nt=function(t){return function(r){return le(r)===t}},ln=function(t){return function(r){return typeof r===t}},Gt=function(t){return function(r){return t===r}},dt=nt("string"),Qt=nt("object"),Sn=nt("array"),Mn=Gt(null),pn=ln("boolean"),Dr=Gt(void 0),Bn=function(t){return t==null},Ve=function(t){return!Bn(t)},Ft=ln("function"),xn=ln("number"),ze=function(t,r){if(Sn(t)){for(var o=0,s=t.length;o<s;++o)if(!r(t[o]))return!1;return!0}return!1},ge=function(){},Tt=function(t){return function(){return t()}},Ze=function(t,r){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return t(r.apply(null,o))}},qt=function(t,r){return function(o){return t(r(o))}},Z=function(t){return function(){return t}},Ne=function(t){return t},ke=function(t,r){return t===r};function Vt(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var s=[],v=0;v<arguments.length;v++)s[v]=arguments[v];var m=r.concat(s);return t.apply(null,m)}}var Kt=function(t){return function(r){return!t(r)}},ht=function(t){return function(){throw new Error(t)}},$t=Z(!1),We=Z(!0),ja=tinymce.util.Tools.resolve("tinymce.ThemeManager"),ve=function(){return ve=Object.assign||function(r){for(var o,s=1,v=arguments.length;s<v;s++){o=arguments[s];for(var m in o)Object.prototype.hasOwnProperty.call(o,m)&&(r[m]=o[m])}return r},ve.apply(this,arguments)};function Y(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,s=Object.getOwnPropertySymbols(t);v<s.length;v++)r.indexOf(s[v])<0&&Object.prototype.propertyIsEnumerable.call(t,s[v])&&(o[s[v]]=t[s[v]]);return o}function Pn(t,r,o){if(o||arguments.length===2)for(var s=0,v=r.length,m;s<v;s++)(m||!(s in r))&&(m||(m=Array.prototype.slice.call(r,0,s)),m[s]=r[s]);return t.concat(m||Array.prototype.slice.call(r))}var Ea=function(){return Mt},Mt=function(){var t=function(s){return s()},r=Ne,o={fold:function(s,v){return s()},isSome:$t,isNone:We,getOr:r,getOrThunk:t,getOrDie:function(s){throw new Error(s||"error: getOrDie called on none.")},getOrNull:Z(null),getOrUndefined:Z(void 0),or:r,orThunk:t,map:Ea,each:ge,bind:Ea,exists:$t,forall:We,filter:function(){return Ea()},toArray:function(){return[]},toString:Z("none()")};return o}(),Oa=function(t){var r=Z(t),o=function(){return v},s=function(m){return m(t)},v={fold:function(m,p){return p(t)},isSome:We,isNone:$t,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:o,orThunk:o,map:function(m){return Oa(m(t))},each:function(m){m(t)},bind:s,exists:s,forall:s,filter:function(m){return m(t)?v:Mt},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return v},Vr=function(t){return t==null?Mt:Oa(t)},R={some:Oa,none:Ea,from:Vr},Aa=Array.prototype.slice,wt=Array.prototype.indexOf,jt=Array.prototype.push,go=function(t,r){return wt.call(t,r)},Go=function(t,r){var o=go(t,r);return o===-1?R.none():R.some(o)},nr=function(t,r){return go(t,r)>-1},ba=function(t,r){for(var o=0,s=t.length;o<s;o++){var v=t[o];if(r(v,o))return!0}return!1},Q=function(t,r){for(var o=[],s=0;s<t;s++)o.push(r(s));return o},Ja=function(t,r){for(var o=[],s=0;s<t.length;s+=r){var v=Aa.call(t,s,s+r);o.push(v)}return o},gt=function(t,r){for(var o=t.length,s=new Array(o),v=0;v<o;v++){var m=t[v];s[v]=r(m,v)}return s},Lt=function(t,r){for(var o=0,s=t.length;o<s;o++){var v=t[o];r(v,o)}},Ro=function(t,r){for(var o=t.length-1;o>=0;o--){var s=t[o];r(s,o)}},Er=function(t,r){for(var o=[],s=[],v=0,m=t.length;v<m;v++){var p=t[v],S=r(p,v)?o:s;S.push(p)}return{pass:o,fail:s}},Nt=function(t,r){for(var o=[],s=0,v=t.length;s<v;s++){var m=t[s];r(m,s)&&o.push(m)}return o},Dn=function(t,r,o){return Ro(t,function(s,v){o=r(o,s,v)}),o},$n=function(t,r,o){return Lt(t,function(s,v){o=r(o,s,v)}),o},pt=function(t,r,o){for(var s=0,v=t.length;s<v;s++){var m=t[s];if(r(m,s))return R.some(m);if(o(m,s))break}return R.none()},lr=function(t,r){return pt(t,r,$t)},Ra=function(t,r){for(var o=0,s=t.length;o<s;o++){var v=t[o];if(r(v,o))return R.some(o)}return R.none()},bn=function(t){for(var r=[],o=0,s=t.length;o<s;++o){if(!Sn(t[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+t);jt.apply(r,t[o])}return r},Yr=function(t,r){return bn(gt(t,r))},ta=function(t,r){for(var o=0,s=t.length;o<s;++o){var v=t[o];if(r(v,o)!==!0)return!1}return!0},Nn=function(t){var r=Aa.call(t,0);return r.reverse(),r},ya=function(t,r){return Nt(t,function(o){return!nr(r,o)})},qo=function(t,r){for(var o={},s=0,v=t.length;s<v;s++){var m=t[s];o[String(m)]=r(m,s)}return o},xi=function(t){return[t]},fi=function(t,r){var o=Aa.call(t,0);return o.sort(r),o},ni=function(t,r){return r>=0&&r<t.length?R.some(t[r]):R.none()},io=function(t){return ni(t,0)},Ti=function(t){return ni(t,t.length-1)},Co=Ft(Array.from)?Array.from:function(t){return Aa.call(t)},ra=function(t,r){for(var o=0;o<t.length;o++){var s=r(t[o],o);if(s.isSome())return s}return R.none()},Qr=Object.keys,Ga=Object.hasOwnProperty,na=function(t,r){for(var o=Qr(t),s=0,v=o.length;s<v;s++){var m=o[s],p=t[m];r(p,m)}},Pr=function(t,r){return Ie(t,function(o,s){return{k:s,v:r(o,s)}})},Ie=function(t,r){var o={};return na(t,function(s,v){var m=r(s,v);o[m.k]=m.v}),o},Xt=function(t){return function(r,o){t[o]=r}},sn=function(t,r,o,s){var v={};return na(t,function(m,p){(r(m,p)?o:s)(m,p)}),v},Zt=function(t,r){var o={};return sn(t,r,Xt(o),ge),o},Or=function(t,r){var o=[];return na(t,function(s,v){o.push(r(s,v))}),o},Nr=function(t,r){for(var o=Qr(t),s=0,v=o.length;s<v;s++){var m=o[s],p=t[m];if(r(p,m,t))return R.some(p)}return R.none()},Ia=function(t){return Or(t,Ne)},yn=function(t,r){return Ar(t,r)?R.from(t[r]):R.none()},Ar=function(t,r){return Ga.call(t,r)},wa=function(t,r){return Ar(t,r)&&t[r]!==void 0&&t[r]!==null},Mo=function(t,r,o){return o===void 0&&(o=ke),t.exists(function(s){return o(s,r)})},ji=function(t,r,o){return o===void 0&&(o=ke),So(t,r,o).getOr(t.isNone()&&r.isNone())},Ir=function(t){for(var r=[],o=function(v){r.push(v)},s=0;s<t.length;s++)t[s].each(o);return r},fr=function(t){for(var r=[],o=0;o<t.length;o++){var s=t[o];if(s.isSome())r.push(s.getOrDie());else return R.none()}return R.some(r)},So=function(t,r,o){return t.isSome()&&r.isSome()?R.some(o(t.getOrDie(),r.getOrDie())):R.none()},vi=function(t,r,o,s){return t.isSome()&&r.isSome()&&o.isSome()?R.some(s(t.getOrDie(),r.getOrDie(),o.getOrDie())):R.none()},Lo=function(t,r){return t!=null?R.some(r(t)):R.none()},xo=function(t,r){return t?R.some(r):R.none()},Ko=function(t,r){return t+r},Gi=function(t,r){return t.substring(r)},di=function(t,r,o){return r===""||t.length>=r.length&&t.substr(o,o+r.length)===r},Ho=function(t,r){return mi(t,r)?Gi(t,r.length):t},qi=function(t,r){return kn(t,r)?t:Ko(t,r)},$r=function(t,r){return t.indexOf(r)!==-1},mi=function(t,r){return di(t,r,0)},kn=function(t,r){return di(t,r,t.length-r.length)},Ju=function(t){return function(r){return r.replace(t,"")}},Xo=Ju(/^\s+|\s+$/g),ki=function(t){return t.length>0},Yo=function(t){return!ki(t)},Fi=function(t){return t.style!==void 0&&Ft(t.style.getPropertyValue)},Lu=function(t,r){var o=r||document,s=o.createElement("div");if(s.innerHTML=t,!s.hasChildNodes()||s.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return ne(s.childNodes[0])},gi=function(t,r){var o=r||document,s=o.createElement(t);return ne(s)},Zu=function(t,r){var o=r||document,s=o.createTextNode(t);return ne(s)},ne=function(t){if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Ce=function(t,r,o){return R.from(t.dom.elementFromPoint(r,o)).map(ne)},ie={fromHtml:Lu,fromTag:gi,fromText:Zu,fromDom:ne,fromPoint:Ce};typeof window<"u"||Function("return this;")();var Re=9,_t=11,en=1,Wn=3,Kn=function(t){var r=t.dom.nodeName;return r.toLowerCase()},_r=function(t){return t.dom.nodeType},Ur=function(t){return function(r){return _r(r)===t}},xr=Ur(en),Ma=Ur(Wn),Ba=Ur(Re),Ki=Ur(_t),ho=function(t){var r=!1,o;return function(){for(var s=[],v=0;v<arguments.length;v++)s[v]=arguments[v];return r||(r=!0,o=t.apply(null,s)),o}},ri=function(t,r,o,s){var v=t.isiOS()&&/ipad/i.test(o)===!0,m=t.isiOS()&&!v,p=t.isiOS()||t.isAndroid(),S=p||s("(pointer:coarse)"),x=v||!m&&p&&s("(min-device-width:768px)"),E=m||p&&!x,M=r.isSafari()&&t.isiOS()&&/safari/i.test(o)===!1,P=!E&&!x&&!M;return{isiPad:Z(v),isiPhone:Z(m),isTablet:Z(x),isPhone:Z(E),isTouch:Z(S),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Z(M),isDesktop:Z(P)}},lu=function(t,r){for(var o=0;o<t.length;o++){var s=t[o];if(s.test(r))return s}},Pa=function(t,r){var o=lu(t,r);if(!o)return{major:0,minor:0};var s=function(v){return Number(r.replace(o,"$"+v))};return no(s(1),s(2))},$a=function(t,r){var o=String(r).toLowerCase();return t.length===0?lt():Pa(t,o)},lt=function(){return no(0,0)},no=function(t,r){return{major:t,minor:r}},Xi={nu:no,detect:$a,unknown:lt},Qu=function(t,r){return ra(r.brands,function(o){var s=o.brand.toLowerCase();return lr(t,function(v){var m;return s===((m=v.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(function(v){return{current:v.name,version:Xi.nu(parseInt(o.version,10),0)}})})},es=function(t,r){var o=String(r).toLowerCase();return lr(t,function(s){return s.search(o)})},Tr=function(t,r){return es(t,r).map(function(o){var s=Xi.detect(o.versionRegexes,r);return{current:o.name,version:s}})},Cs=function(t,r){return es(t,r).map(function(o){var s=Xi.detect(o.versionRegexes,r);return{current:o.name,version:s}})},Yi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qa=function(t){return function(r){return $r(r,t)}},ts=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return $r(t,"edge/")&&$r(t,"chrome")&&$r(t,"safari")&&$r(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Yi],search:function(t){return $r(t,"chrome")&&!$r(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return $r(t,"msie")||$r(t,"trident")}},{name:"Opera",versionRegexes:[Yi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qa("firefox")},{name:"Safari",versionRegexes:[Yi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return($r(t,"safari")||$r(t,"mobile/"))&&$r(t,"applewebkit")}}],ai=[{name:"Windows",search:qa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return $r(t,"iphone")||$r(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:qa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qa("linux"),versionRegexes:[]},{name:"Solaris",search:qa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],hi={browsers:Z(ts),oses:Z(ai)},ga="Edge",ns="Chrome",G="IE",de="Opera",De="Firefox",Ke="Safari",zt=function(){return nn({current:void 0,version:Xi.unknown()})},nn=function(t){var r=t.current,o=t.version,s=function(v){return function(){return r===v}};return{current:r,version:o,isEdge:s(ga),isChrome:s(ns),isIE:s(G),isOpera:s(de),isFirefox:s(De),isSafari:s(Ke)}},mn={unknown:zt,nu:nn,edge:Z(ga),chrome:Z(ns),ie:Z(G),opera:Z(de),firefox:Z(De),safari:Z(Ke)},vr="Windows",V="iOS",fe="Android",xe="Linux",Pe="OSX",Ye="Solaris",Yt="FreeBSD",wn="ChromeOS",zr=function(){return or({current:void 0,version:Xi.unknown()})},or=function(t){var r=t.current,o=t.version,s=function(v){return function(){return r===v}};return{current:r,version:o,isWindows:s(vr),isiOS:s(V),isAndroid:s(fe),isOSX:s(Pe),isLinux:s(xe),isSolaris:s(Ye),isFreeBSD:s(Yt),isChromeOS:s(wn)}},aa={unknown:zr,nu:or,windows:Z(vr),ios:Z(V),android:Z(fe),linux:Z(xe),osx:Z(Pe),solaris:Z(Ye),freebsd:Z(Yt),chromeos:Z(wn)},Da=function(t,r,o){var s=hi.browsers(),v=hi.oses(),m=r.bind(function(x){return Qu(s,x)}).orThunk(function(){return Tr(s,t)}).fold(mn.unknown,mn.nu),p=Cs(v,t).fold(aa.unknown,aa.nu),S=ri(p,m,t,o);return{browser:m,os:p,deviceType:S}},Eu={detect:Da},To=function(t){return window.matchMedia(t).matches},Tn=ho(function(){return Eu.detect(navigator.userAgent,R.from(navigator.userAgentData),To)}),St=function(){return Tn()},sa=function(t,r,o){return(t.compareDocumentPosition(r)&o)!==0},ko=function(t,r){return sa(t,r,Node.DOCUMENT_POSITION_CONTAINED_BY)},kr=function(t,r){var o=t.dom;if(o.nodeType!==en)return!1;var s=o;if(s.matches!==void 0)return s.matches(r);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(r);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(r);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")},Hs=function(t){return t.nodeType!==en&&t.nodeType!==Re&&t.nodeType!==_t||t.childElementCount===0},rs=function(t,r){var o=r===void 0?document:r.dom;return Hs(o)?[]:gt(o.querySelectorAll(t),ie.fromDom)},Rc=function(t,r){var o=r===void 0?document:r.dom;return Hs(o)?R.none():R.from(o.querySelector(t)).map(ie.fromDom)},qr=function(t,r){return t.dom===r.dom},Ei=function(t,r){var o=t.dom,s=r.dom;return o===s?!1:o.contains(s)},Mc=function(t,r){return ko(t.dom,r.dom)},Ou=function(t,r){return St().browser.isIE()?Mc(t,r):Ei(t,r)},uo=function(t){return ie.fromDom(t.dom.ownerDocument)},Vs=function(t){return Ba(t)?t:uo(t)},je=function(t){return ie.fromDom(Vs(t).dom.documentElement)},lc=function(t){return ie.fromDom(Vs(t).dom.defaultView)},so=function(t){return R.from(t.dom.parentNode).map(ie.fromDom)},pl=function(t){return so(t)},Ss=function(t){return R.from(t.dom.offsetParent).map(ie.fromDom)},B=function(t){return R.from(t.dom.nextSibling).map(ie.fromDom)},T=function(t){return gt(t.dom.childNodes,ie.fromDom)},w=function(t,r){var o=t.dom.childNodes;return R.from(o[r]).map(ie.fromDom)},A=function(t){return w(t,0)},L=function(t,r){return{element:t,offset:r}},te=function(t,r){var o=T(t);return o.length>0&&r<o.length?L(o[r],0):L(t,r)},Te=function(t){return Ki(t)&&Ve(t.dom.host)},tt=Ft(Element.prototype.attachShadow)&&Ft(Node.prototype.getRootNode),dn=Z(tt),Fn=tt?function(t){return ie.fromDom(t.dom.getRootNode())}:Vs,Rt=function(t){return Te(t)?t:ie.fromDom(Vs(t).dom.body)},fn=function(t){return ir(t).isSome()},ir=function(t){var r=Fn(t);return Te(r)?R.some(r):R.none()},rr=function(t){return ie.fromDom(t.dom.host)},Yn=function(t){if(dn()&&Ve(t.target)){var r=ie.fromDom(t.target);if(xr(r)&&La(r)&&t.composed&&t.composedPath){var o=t.composedPath();if(o)return io(o)}}return R.from(t.target)},La=function(t){return Ve(t.dom.shadowRoot)},jn=function(t){var r=Ma(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;var o=r.ownerDocument;return ir(ie.fromDom(r)).fold(function(){return o.body.contains(r)},qt(jn,rr))},Ca=function(){return ca(ie.fromDom(document))},ca=function(t){var r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return ie.fromDom(r)},Oi=function(t,r,o){if(dt(o)||pn(o)||xn(o))t.setAttribute(r,o+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",o,":: Element ",t),new Error("Attribute value was not simple")},hr=function(t,r,o){Oi(t.dom,r,o)},Us=function(t,r){var o=t.dom;na(r,function(s,v){Oi(o,v,s)})},co=function(t,r){var o=t.dom.getAttribute(r);return o===null?void 0:o},Eo=function(t,r){return R.from(co(t,r))},t1=function(t,r){var o=t.dom;return o&&o.hasAttribute?o.hasAttribute(r):!1},Ji=function(t,r){t.dom.removeAttribute(r)},mh=function(t,r,o){if(!dt(o))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",o,":: Element ",t),new Error("CSS value must be a string: "+o);Fi(t)&&t.style.setProperty(r,o)},Yc=function(t,r){Fi(t)&&t.style.removeProperty(r)},Zn=function(t,r,o){var s=t.dom;mh(s,r,o)},Ws=function(t,r){var o=t.dom;na(r,function(s,v){mh(o,v,s)})},Bo=function(t,r){var o=t.dom;na(r,function(s,v){s.fold(function(){Yc(o,v)},function(m){mh(o,v,m)})})},Po=function(t,r){var o=t.dom,s=window.getComputedStyle(o),v=s.getPropertyValue(r);return v===""&&!jn(t)?Ai(o,r):v},Ai=function(t,r){return Fi(t)?t.style.getPropertyValue(r):""},oi=function(t,r){var o=t.dom,s=Ai(o,r);return R.from(s).filter(function(v){return v.length>0})},If=function(t){var r={},o=t.dom;if(Fi(o))for(var s=0;s<o.style.length;s++){var v=o.style.item(s);r[v]=o.style[v]}return r},fc=function(t,r,o){var s=ie.fromTag(t);Zn(s,r,o);var v=oi(s,r);return v.isSome()},la=function(t,r){var o=t.dom;Yc(o,r),Mo(Eo(t,"style").map(Xo),"")&&Ji(t,"style")},ro=function(t){return t.dom.offsetWidth},Hu=function(t,r){var o=function(S,x){if(!xn(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);var E=S.dom;Fi(E)&&(E.style[t]=x+"px")},s=function(S){var x=r(S);if(x<=0||x===null){var E=Po(S,t);return parseFloat(E)||0}return x},v=s,m=function(S,x){return $n(x,function(E,M){var P=Po(S,M),H=P===void 0?0:parseInt(P,10);return isNaN(H)?E:E+H},0)},p=function(S,x,E){var M=m(S,E),P=x>M?x-M:0;return P};return{set:o,get:s,getOuter:v,aggregate:m,max:p}},bl=Hu("height",function(t){var r=t.dom;return jn(t)?r.getBoundingClientRect().height:r.offsetHeight}),pi=function(t){return bl.get(t)},js=function(t){return bl.getOuter(t)},n1=function(t,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],s=bl.max(t,r,o);Zn(t,"max-height",s+"px")},$f=function(t,r){var o=function(s,v){return $f(t+s,r+v)};return{left:t,top:r,translate:o}},Ha=$f,Bc=function(t){var r=t.getBoundingClientRect();return Ha(r.left,r.top)},Kl=function(t,r){return t!==void 0?t:r!==void 0?r:0},as=function(t){var r=t.dom.ownerDocument,o=r.body,s=r.defaultView,v=r.documentElement;if(o===t.dom)return Ha(o.offsetLeft,o.offsetTop);var m=Kl(s==null?void 0:s.pageYOffset,v.scrollTop),p=Kl(s==null?void 0:s.pageXOffset,v.scrollLeft),S=Kl(v.clientTop,o.clientTop),x=Kl(v.clientLeft,o.clientLeft);return Vo(t).translate(p-x,m-S)},Vo=function(t){var r=t.dom,o=r.ownerDocument,s=o.body;return s===r?Ha(s.offsetLeft,s.offsetTop):jn(t)?Bc(r):Ha(0,0)},Xl=Hu("width",function(t){return t.dom.offsetWidth}),yl=function(t,r){return Xl.set(t,r)},Au=function(t){return Xl.get(t)},os=function(t){return Xl.getOuter(t)},fu=function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],s=Xl.max(t,r,o);Zn(t,"max-width",s+"px")},kv=function(t,r,o,s,v,m,p){return{target:t,x:r,y:o,stop:s,prevent:v,kill:m,raw:p}},Pc=function(t){var r=ie.fromDom(Yn(t).getOr(t.target)),o=function(){return t.stopPropagation()},s=function(){return t.preventDefault()},v=Ze(s,o);return kv(r,t.clientX,t.clientY,o,s,v,t)},Di=function(t,r){return function(o){t(o)&&r(Pc(o))}},yd=function(t,r,o,s,v){var m=Di(o,s);return t.dom.addEventListener(r,m,v),{unbind:Vt(Ff,t,r,m,v)}},r1=function(t,r,o,s){return yd(t,r,o,s,!1)},zf=function(t,r,o,s){return yd(t,r,o,s,!0)},Ff=function(t,r,o,s){t.dom.removeEventListener(r,o,s)},Uo=function(t,r){var o=so(t);o.each(function(s){s.dom.insertBefore(r.dom,t.dom)})},Lf=function(t,r){var o=B(t);o.fold(function(){var s=so(t);s.each(function(v){Du(v,r)})},function(s){Uo(s,r)})},Hf=function(t,r){var o=A(t);o.fold(function(){Du(t,r)},function(s){t.dom.insertBefore(r.dom,s.dom)})},Du=function(t,r){t.dom.appendChild(r.dom)},wl=function(t,r,o){w(t,o).fold(function(){Du(t,r)},function(s){Uo(s,r)})},Vf=function(t,r){Lt(r,function(o){Uo(t,o)})},Cl=function(t,r){Lt(r,function(o){Du(t,o)})},po=function(t){t.dom.textContent="",Lt(T(t),function(r){xs(r)})},xs=function(t){var r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},xm=function(t){var r=T(t);r.length>0&&Vf(t,r),xs(t)},Gs=function(t){var r=t!==void 0?t.dom:document,o=r.body.scrollLeft||r.documentElement.scrollLeft,s=r.body.scrollTop||r.documentElement.scrollTop;return Ha(o,s)},Tm=function(t,r,o){var s=o!==void 0?o.dom:document,v=s.defaultView;v&&v.scrollTo(t,r)},a1=function(t){var r=t===void 0?window:t;return St().browser.isFirefox()?R.none():R.from(r.visualViewport)},gh=function(t,r,o,s){return{x:t,y:r,width:o,height:s,right:t+o,bottom:r+s}},Uf=function(t){var r=t===void 0?window:t,o=r.document,s=Gs(ie.fromDom(o));return a1(r).fold(function(){var v=r.document.documentElement,m=v.clientWidth,p=v.clientHeight;return gh(s.left,s.top,m,p)},function(v){return gh(Math.max(v.pageLeft,s.left),Math.max(v.pageTop,s.top),v.width,v.height)})},Wf=function(t,r){var o=t.view(r);return o.fold(Z([]),function(s){var v=t.owner(s),m=Wf(t,v);return[s].concat(m)})},Yl=function(t,r){var o=r.owner(t),s=Wf(r,o);return R.some(s)},Qn=function(t){var r,o=t.dom===document?R.none():R.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement);return o.map(ie.fromDom)},vc=function(t){return uo(t)},is=Object.freeze({__proto__:null,view:Qn,owner:vc}),_u=function(t){var r=ie.fromDom(document),o=Gs(r),s=Yl(t,is);return s.fold(Vt(as,t),function(v){var m=Vo(t),p=Dn(v,function(S,x){var E=Vo(x);return{left:S.left+E.left,top:S.top+E.top}},{left:0,top:0});return Ha(p.left+m.left+o.left,p.top+m.top+o.top)})},dc=function(t,r,o){return{point:t,width:r,height:o}},Jo=function(t,r,o,s){return{x:t,y:r,width:o,height:s}},_i=function(t,r,o,s){return{x:t,y:r,width:o,height:s,right:t+o,bottom:r+s}},ii=function(t){var r=as(t),o=os(t),s=js(t);return _i(r.left,r.top,o,s)},Jl=function(t){var r=_u(t),o=os(t),s=js(t);return _i(r.left,r.top,o,s)},vu=function(){return Uf(window)},un=function(t){var r=function(P){return un(t)},o=function(P){return un(t)},s=function(P){return un(P(t))},v=function(P){return un(t)},m=function(P){P(t)},p=function(P){return P(t)},S=function(P,H){return H(t)},x=function(P){return P(t)},E=function(P){return P(t)},M=function(){return R.some(t)};return{isValue:We,isError:$t,getOr:Z(t),getOrThunk:Z(t),getOrDie:Z(t),or:r,orThunk:o,fold:S,map:s,mapError:v,each:m,bind:p,exists:x,forall:E,toOptional:M}},jf=function(t){var r=function(E){return E()},o=function(){return ht(String(t))()},s=Ne,v=function(E){return E()},m=function(E){return jf(t)},p=function(E){return jf(E(t))},S=function(E){return jf(t)},x=function(E,M){return E(t)};return{isValue:$t,isError:We,getOr:Ne,getOrThunk:r,getOrDie:o,or:s,orThunk:v,fold:x,map:m,mapError:p,each:ge,bind:S,exists:$t,forall:We,toOptional:R.none}},hh=function(t,r){return t.fold(function(){return jf(r)},un)},pr={value:un,error:jf,fromOption:hh},Va;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Va||(Va={}));var km=function(t,r,o){return t.stype===Va.Error?r(t.serror):o(t.svalue)},Jc=function(t){var r=[],o=[];return Lt(t,function(s){km(s,function(v){return o.push(v)},function(v){return r.push(v)})}),{values:r,errors:o}},lo=function(t,r){return t.stype===Va.Error?{stype:Va.Error,serror:r(t.serror)}:t},Em=function(t,r){return t.stype===Va.Value?{stype:Va.Value,svalue:r(t.svalue)}:t},Ts=function(t,r){return t.stype===Va.Value?r(t.svalue):t},wd=function(t,r){return t.stype===Va.Error?r(t.serror):t},wr=function(t){return{stype:Va.Value,svalue:t}},Vu=function(t){return{stype:Va.Error,serror:t}},N0=function(t){return km(t,pr.error,pr.value)},I0=function(t){return t.fold(Vu,wr)},bo={fromResult:I0,toResult:N0,svalue:wr,partition:Jc,serror:Vu,bind:Ts,bindError:wd,map:Em,mapError:lo,fold:km},Om=function(t,r,o,s){return{tag:"field",key:t,newKey:r,presence:o,prop:s}},O=function(t,r){return{tag:"custom",newKey:t,instantiator:r}},$=function(t,r,o){switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return o(t.newKey,t.instantiator)}},U=function(t,r){return r},oe=function(t,r){var o=Qt(t)&&Qt(r);return o?Xe(t,r):r},Oe=function(t){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(r.length===0)throw new Error("Can't merge zero objects");for(var s={},v=0;v<r.length;v++){var m=r[v];for(var p in m)Ar(m,p)&&(s[p]=t(s[p],m[p]))}return s}},Xe=Oe(oe),En=Oe(U),ur=function(){return{tag:"required",process:{}}},jr=function(t){return{tag:"defaultedThunk",process:t}},Cr=function(t){return jr(Z(t))},Ka=function(){return{tag:"option",process:{}}},du=function(t){return{tag:"mergeWithThunk",process:t}},No=function(t){return du(Z(t))},Tk=function(t,r){return t.length>0?bo.svalue(Xe(r,En.apply(void 0,t))):bo.svalue(r)},fC=function(t){return Ze(bo.serror,bn)(t)},vC=function(t,r){var o=bo.partition(t);return o.errors.length>0?fC(o.errors):Tk(o.values,r)},kk=function(t){var r=bo.partition(t);return r.errors.length>0?fC(r.errors):bo.svalue(r.values)},Sl={consolidateObj:vC,consolidateArr:kk},ph=function(t){return Qt(t)&&Qr(t).length>100?" removed due to size":JSON.stringify(t,null,2)},ks=function(t){var r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Z("... (only showing first ten failures)")}]):t;return gt(r,function(o){return"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()})},Am=function(t,r){return bo.serror([{path:t,getErrorInfo:r}])},$0=function(t,r,o){return Am(t,function(){return'Could not find valid *required* value for "'+r+'" in '+ph(o)})},bh=function(t,r){return Am(t,function(){return'Choice schema did not contain choice key: "'+r+'"'})},o1=function(t,r,o){return Am(t,function(){return'The chosen schema: "'+o+'" did not exist in branches: '+ph(r)})},dC=function(t,r){return Am(t,function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"})},Ek=function(t,r){return Am(t,Z(r))},xl=function(t){var r=function(s,v){return bo.bindError(t(v),function(m){return Ek(s,m)})},o=Z("val");return{extract:r,toString:o}},yh=xl(bo.svalue),Ok=function(t,r,o,s){return yn(r,o).fold(function(){return $0(t,o,r)},s)},z0=function(t,r,o,s){var v=yn(t,r).getOrThunk(function(){return o(t)});return s(v)},Ak=function(t,r,o){return o(yn(t,r))},Dk=function(t,r,o,s){var v=yn(t,r).map(function(m){return m===!0?o(t):m});return s(v)},Dm=function(t,r,o,s,v){var m=function(S){return v.extract(r.concat([s]),S)},p=function(S){return S.fold(function(){return bo.svalue(R.none())},function(x){var E=v.extract(r.concat([s]),x);return bo.map(E,R.some)})};switch(t.tag){case"required":return Ok(r,o,s,m);case"defaultedThunk":return z0(o,s,t.process,m);case"option":return Ak(o,s,p);case"defaultedOptionThunk":return Dk(o,s,t.process,p);case"mergeWithThunk":return z0(o,s,Z({}),function(S){var x=Xe(t.process(o),S);return m(x)})}},wh=function(t,r,o){for(var s={},v=[],m=0,p=o;m<p.length;m++){var S=p[m];$(S,function(x,E,M,P){var H=Dm(M,t,r,x,P);bo.fold(H,function(W){v.push.apply(v,W)},function(W){s[E]=W})},function(x,E){s[x]=E(r)})}return v.length>0?bo.serror(v):bo.svalue(s)},mC=function(t){var r=function(s,v){return t().extract(s,v)},o=function(){return t().toString()};return{extract:r,toString:o}},gC=function(t){return Qr(Zt(t,Ve))},qs=function(t){var r=In(t),o=Dn(t,function(v,m){return $(m,function(p){var S;return Xe(v,(S={},S[p]=!0,S))},Z(v))},{}),s=function(v,m){var p=pn(m)?[]:gC(m),S=Nt(p,function(x){return!wa(o,x)});return S.length===0?r.extract(v,m):dC(v,S)};return{extract:s,toString:r.toString}},In=function(t){var r=function(s,v){return wh(s,v,t)},o=function(){var s=gt(t,function(v){return $(v,function(m,p,S,x){return m+" -> "+x.toString()},function(m,p){return"state("+m+")"})});return`obj{
`+s.join(`
`)+"}"};return{extract:r,toString:o}},Gf=function(t){var r=function(s,v){var m=gt(v,function(p,S){return t.extract(s.concat(["["+S+"]"]),p)});return Sl.consolidateArr(m)},o=function(){return"array("+t.toString()+")"};return{extract:r,toString:o}},Ch=function(t){var r=function(s,v){for(var m=[],p=0,S=t;p<S.length;p++){var x=S[p],E=x.extract(s,v);if(E.stype===Va.Value)return E;m.push(E)}return Sl.consolidateArr(m)},o=function(){return"oneOf("+gt(t,function(s){return s.toString()}).join(", ")+")"};return{extract:r,toString:o}},Ev=function(t,r){var o=function(m,p){return Gf(xl(t)).extract(m,p)},s=function(m,p){var S=Qr(p),x=o(m,S);return bo.bind(x,function(E){var M=gt(E,function(P){return Om(P,P,ur(),r)});return In(M).extract(m,p)})},v=function(){return"setOf("+r.toString()+")"};return{extract:s,toString:v}},_m=function(t,r){var o=ho(r),s=function(m,p){return o().extract(m,p)},v=function(){return o().toString()};return{extract:s,toString:v}},F0=Ze(Gf,In),Zc=Z(yh),Cd=function(t,r){return xl(function(o){var s=typeof o;return t(o)?bo.svalue(o):bo.serror("Expected type: "+r+" but got: "+s)})},Rm=Cd(xn,"number"),Zo=Cd(dt,"string"),Zi=Cd(pn,"boolean"),Sh=Cd(Ft,"function"),Zl=function(t){if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(r){return Zl(t[r])});default:return!1}},xh=xl(function(t){return Zl(t)?bo.svalue(t):bo.serror("Expected value to be acceptable for sending via postMessage")}),i1=function(t,r,o,s){var v=yn(o,s);return v.fold(function(){return o1(t,o,s)},function(m){return m.extract(t.concat(["branch: "+s]),r)})},u1=function(t,r){var o=function(v,m){var p=yn(m,t);return p.fold(function(){return bh(v,t)},function(S){return i1(v,m,r,S)})},s=function(){return"chooseOn("+t+"). Possible values: "+Qr(r)};return{extract:o,toString:s}},_k=function(){return Gf(yh)},Mm=function(t){return xl(function(r){return t(r).fold(bo.serror,bo.svalue)})},Ru=function(t,r){return Ev(function(o){return bo.fromResult(t(o))},r)},hC=function(t,r,o){var s=r.extract([t],o);return bo.mapError(s,function(v){return{input:o,errors:v}})},Oo=function(t,r,o){return bo.toResult(hC(t,r,o))},Qc=function(t){return t.fold(function(r){throw new Error(Ov(r))},Ne)},Ta=function(t,r,o){return Qc(Oo(t,r,o))},Ov=function(t){return`Errors: 
`+ks(t.errors).join(`
`)+`

Input object: `+ph(t.input)},Nc=function(t,r){return u1(t,Pr(r,In))},Rk=function(t,r){return _m(t,r)},Ri=Om,us=O,pC=function(t){return Mm(function(r){return nr(t,r)?pr.value(r):pr.error('Unsupported value: "'+r+'", choose one of "'+t.join(", ")+'".')})},rt=function(t){return Ri(t,t,ur(),Zc())},Es=function(t,r){return Ri(t,t,ur(),r)},qf=function(t){return Es(t,Rm)},er=function(t){return Es(t,Zo)},mc=function(t,r){return Ri(t,t,ur(),pC(r))},Mk=function(t){return Es(t,Zi)},Uu=function(t){return Es(t,Sh)},Bm=function(t,r){return Ri(t,t,Ka(),xl(function(o){return bo.serror("The field: "+t+" is forbidden. "+r)}))},Ql=function(t,r){return Ri(t,t,ur(),In(r))},el=function(t,r){return Ri(t,t,ur(),F0(r))},Mu=function(t,r){return Ri(t,t,ur(),Gf(r))},fa=function(t){return Ri(t,t,Ka(),Zc())},Tl=function(t,r){return Ri(t,t,Ka(),r)},Sd=function(t){return Tl(t,Rm)},Za=function(t){return Tl(t,Zo)},Av=function(t){return Tl(t,Sh)},Ks=function(t,r){return Tl(t,Gf(r))},Xs=function(t,r){return Tl(t,In(r))},Bk=function(t,r){return Tl(t,qs(r))},Se=function(t,r){return Ri(t,t,Cr(r),Zc())},ss=function(t,r,o){return Ri(t,t,Cr(r),o)},kl=function(t,r){return ss(t,r,Rm)},Pm=function(t,r){return ss(t,r,Zo)},gc=function(t,r,o){return ss(t,r,pC(o))},Ua=function(t,r){return ss(t,r,Zi)},Qa=function(t,r){return ss(t,r,Sh)},Os=function(t,r){return ss(t,r,xh)},Kf=function(t,r,o){return ss(t,r,Gf(o))},L0=function(t,r,o){return ss(t,r,In(o))},Hn=function(t){var r=t,o=function(){return r},s=function(v){r=v};return{get:o,set:s}},s1=function(t){if(!Sn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");var r=[],o={};return Lt(t,function(s,v){var m=Qr(s);if(m.length!==1)throw new Error("one and only one name per case");var p=m[0],S=s[p];if(o[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn(S))throw new Error("case arguments must be an array");r.push(p),o[p]=function(){for(var x=[],E=0;E<arguments.length;E++)x[E]=arguments[E];var M=x.length;if(M!==S.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+S.length+" ("+S+"), got "+M);var P=function(H){var W=Qr(H);if(r.length!==W.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+W.join(","));var K=ta(r,function(ue){return nr(W,ue)});if(!K)throw new Error("Not all branches were specified when using match. Specified: "+W.join(", ")+`
Required: `+r.join(", "));return H[p].apply(null,x)};return{fold:function(){for(var H=[],W=0;W<arguments.length;W++)H[W]=arguments[W];if(H.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+H.length);var K=H[v];return K.apply(null,x)},match:P,log:function(H){console.log(H,{constructors:r,constructor:p,params:x})}}}}),o},hc={generate:s1};hc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var bC=function(t){var r=[],o=[];return Lt(t,function(s){s.fold(function(v){r.push(v)},function(v){o.push(v)})}),{errors:r,values:o}},Th=function(t,r){var o={};return na(t,function(s,v){nr(r,v)||(o[v]=s)}),o},kh=function(t,r){var o;return o={},o[t]=r,o},H0=function(t){var r={};return Lt(t,function(o){r[o.key]=o.value}),r},V0=function(t,r){return Th(t,r)},ef=function(t,r){return kh(t,r)},Xf=function(t){return H0(t)},Pk=function(t,r){return t.length===0?pr.value(r):pr.value(Xe(r,En.apply(void 0,t)))},U0=function(t){return pr.error(bn(t))},Nk=function(t,r){var o=bC(t);return o.errors.length>0?U0(o.errors):Pk(o.values,r)},yC=function(t){return Ft(t)?t:$t},Eh=function(t,r,o){for(var s=t.dom,v=yC(o);s.parentNode;){s=s.parentNode;var m=ie.fromDom(s),p=r(m);if(p.isSome())return p;if(v(m))break}return R.none()},Nm=function(t,r,o){var s=r(t),v=yC(o);return s.orThunk(function(){return v(t)?R.none():Eh(t,r,v)})},wC=function(t,r){return qr(t.element,r.event.target)},tf={can:We,abort:$t,run:ge},Im=function(t){if(!wa(t,"can")&&!wa(t,"abort")&&!wa(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return ve(ve({},tf),t)},W0=function(t,r){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return $n(t,function(v,m){return v&&r(m).apply(void 0,o)},!0)}},CC=function(t,r){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return $n(t,function(v,m){return v||r(m).apply(void 0,o)},!1)}},Ik=function(t){return Ft(t)?{can:We,abort:$t,run:t}:t},$k=function(t){var r=W0(t,function(v){return v.can}),o=CC(t,function(v){return v.abort}),s=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];Lt(t,function(p){p.run.apply(void 0,v)})};return{can:r,abort:o,run:s}},bi=Z,nf=bi("touchstart"),tl=bi("touchmove"),Dv=bi("touchend"),SC=bi("touchcancel"),nl=bi("mousedown"),xd=bi("mousemove"),j0=bi("mouseout"),G0=bi("mouseup"),Yf=bi("mouseover"),Ic=bi("focusin"),mu=bi("focusout"),c1=bi("keydown"),q0=bi("keyup"),Td=bi("input"),$m=bi("change"),zm=bi("click"),zk=bi("transitioncancel"),Fm=bi("transitionend"),K0=bi("transitionstart"),Fk=bi("selectstart"),Io=function(t){return Z("alloy."+t)},l1={tap:Io("tap")},_v=Io("focus"),X0=Io("blur.post"),Y0=Io("paste.post"),$c=Io("receive"),pc=Io("execute"),kd=Io("focus.item"),Rv=l1.tap,f1=Io("longpress"),Oh=Io("sandbox.close"),J0=Io("typeahead.cancel"),Ed=Io("system.init"),v1=Io("system.touchmove"),Lk=Io("system.touchend"),Z0=Io("system.scroll"),bc=Io("system.resize"),Ys=Io("system.attached"),Lm=Io("system.detached"),rl=Io("system.dismissRequested"),Bu=Io("system.repositionRequested"),d1=Io("focusmanager.shifted"),Jf=Io("slotcontainer.visibility"),xC=Io("change.tab"),gu=Io("dismiss.tab"),Q0=Io("highlight"),m1=Io("dehighlight"),oa=function(t,r){al(t,t.element,r,{})},Vn=function(t,r,o){al(t,t.element,r,o)},yc=function(t){oa(t,pc())},g1=function(t,r,o){al(t,r,o,{})},al=function(t,r,o,s){var v=ve({target:r},s);t.getSystem().triggerEvent(o,r,v)},TC=function(t,r,o,s){t.getSystem().triggerEvent(o,r,s.event)},Wa=function(t){return Xf(t)},ey=function(t,r){return{key:t,value:Im({abort:r})}},h1=function(t,r){return{key:t,value:Im({can:r})}},p1=function(t){return{key:t,value:Im({run:function(r,o){o.event.prevent()}})}},ut=function(t,r){return{key:t,value:Im({run:r})}},ty=function(t,r,o){return{key:t,value:Im({run:function(s,v){r.apply(void 0,[s,v].concat(o))}})}},ny=function(t){return function(r){return ut(t,r)}},Mv=function(t){return function(r){return{key:t,value:Im({run:function(o,s){wC(o,s)&&r(o,s)}})}}},Ah=function(t,r){return ut(t,function(o,s){o.getSystem().getByUid(r).each(function(v){TC(v,v.element,t,s)})})},Od=function(t,r,o){var s=r.partUids[o];return Ah(t,s)},Bv=function(t,r){return ut(t,function(o,s){var v=s.event,m=o.getSystem().getByDom(v.target).getOrThunk(function(){var p=Nm(v.target,function(S){return o.getSystem().getByDom(S).toOptional()},$t);return p.getOr(o)});r(o,m,s)})},Ad=function(t){return ut(t,function(r,o){o.cut()})},Hm=function(t){return ut(t,function(r,o){o.stop()})},ui=function(t,r){return Mv(t)(r)},dr=Mv(Ys()),wc=Mv(Lm()),kC=Mv(Ed()),Js=ny(pc()),ry=function(t,r){var o=r||document,s=o.createElement("div");return s.innerHTML=t,T(ie.fromDom(s))},rf=function(t){return t.dom.innerHTML},Zf=function(t,r){var o=uo(t),s=o.dom,v=ie.fromDom(s.createDocumentFragment()),m=ry(r,s);Cl(v,m),po(t),Du(t,v)},Qf=function(t){var r=ie.fromTag("div"),o=ie.fromDom(t.dom.cloneNode(!0));return Du(r,o),rf(r)},Cc=function(t,r){return ie.fromDom(t.dom.cloneNode(r))},Pv=function(t){return Cc(t,!1)},Li=function(t){if(Te(t))return"#shadow-root";var r=Pv(t);return Qf(r)},cs=function(t){return Li(t)},af=function(t,r,o){return qr(r,t.element)&&!qr(r,o)},Nv=Wa([h1(_v(),function(t,r){var o=r.event,s=o.originator,v=o.target;return af(t,s,v)?(console.warn(_v()+` did not get interpreted by the desired target. 
Originator: `+cs(s)+`
Target: `+cs(v)+`
Check the `+_v()+" event handlers"),!1):!0})]),Vm=Object.freeze({__proto__:null,events:Nv}),Dd=0,gn=function(t){var r=new Date,o=r.getTime(),s=Math.floor(Math.random()*1e9);return Dd++,t+"_"+s+Dd+String(o)},Qi=Z("alloy-id-"),El=Z("data-alloy-id"),of=Qi(),Dh=El(),EC=function(t,r){var o=gn(of+t);return b1(r,o),o},b1=function(t,r){Object.defineProperty(t.dom,Dh,{value:r,writable:!0})},Iv=function(t){var r=xr(t)?t.dom[Dh]:null;return R.from(r)},$v=function(t){return gn(t)},Um=Ne,_h=function(t){var r=function(v){return"The component must be in a context to execute: "+v+(t?`
`+cs(t().element)+" is not in context.":"")},o=function(v){return function(){throw new Error(r(v))}},s=function(v){return function(){console.warn(r(v))}};return{debugInfo:Z("fake"),triggerEvent:s("triggerEvent"),triggerFocus:s("triggerFocus"),triggerEscape:s("triggerEscape"),broadcast:s("broadcast"),broadcastOn:s("broadcastOn"),broadcastEvent:s("broadcastEvent"),build:o("build"),addToWorld:o("addToWorld"),removeFromWorld:o("removeFromWorld"),addToGui:o("addToGui"),removeFromGui:o("removeFromGui"),getByUid:o("getByUid"),getByDom:o("getByDom"),isConnected:$t}},Hk=_h(),Sc=function(t,r,o){var s=o.toString(),v=s.indexOf(")")+1,m=s.indexOf("("),p=s.substring(m+1,v-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:r,parameters:ay(p.slice(0,1).concat(p.slice(3)))}},t},ay=function(t){return gt(t,function(r){return kn(r,"/*")?r.substring(0,r.length-2):r})},_d=function(t,r){var o=t.toString(),s=o.indexOf(")")+1,v=o.indexOf("("),m=o.substring(v+1,s-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:r,parameters:ay(m)}},t},zv=function(t,r){var o=r.toString(),s=o.indexOf(")")+1,v=o.indexOf("("),m=o.substring(v+1,s-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ay(m.slice(1))}},t},oy=gn("alloy-premade"),Fv=function(t){return ef(oy,t)},OC=function(t){return yn(t,oy)},Ao=function(t){return zv(function(r){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return t.apply(void 0,Pn([r.getApis(),r],o,!1))},t)},hu={init:function(){return Pu({readState:Z("No State required")})}},Pu=function(t){return t},AC=function(t,r){var o=gt(r,function(v){return Xs(v.name(),[rt("config"),Se("state",hu)])}),s=Oo("component.behaviours",In(o),t.behaviours).fold(function(v){throw new Error(Ov(v)+`
Complete spec:
`+JSON.stringify(t,null,2))},Ne);return{list:r,data:Pr(s,function(v){var m=v.map(function(p){return{config:p.config,state:p.state.init(p.config)}});return Z(m)})}},y1=function(t){return t.list},Vk=function(t){return t.data},DC=function(t,r){var o={};return na(t,function(s,v){na(s,function(m,p){var S=yn(o,p).getOr([]);o[p]=S.concat([r(v,m)])})}),o},ol=function(t){return{classes:Dr(t.classes)?[]:t.classes,attributes:Dr(t.attributes)?{}:t.attributes,styles:Dr(t.styles)?{}:t.styles}},Uk=function(t,r){return ve(ve({},t),{attributes:ve(ve({},t.attributes),r.attributes),styles:ve(ve({},t.styles),r.styles),classes:t.classes.concat(r.classes)})},Wm=function(t,r,o,s){var v=ve({},r);Lt(o,function(M){v[M.name()]=M.exhibit(t,s)});var m=DC(v,function(M,P){return{name:M,modification:P}}),p=function(M){return Dn(M,function(P,H){return ve(ve({},H.modification),P)},{})},S=Dn(m.classes,function(M,P){return P.modification.concat(M)},[]),x=p(m.attributes),E=p(m.styles);return ol({classes:S,attributes:x,styles:E})},w1=function(t,r,o,s){try{var v=fi(o,function(m,p){var S=m[r],x=p[r],E=s.indexOf(S),M=s.indexOf(x);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(s,null,2));if(M===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(s,null,2));return E<M?-1:M<E?1:0});return pr.value(v)}catch(m){return pr.error([m])}},Wk=function(t,r){return{handler:t,purpose:r}},_C=function(t,r){return{cHandler:t,purpose:r}},iy=function(t,r){return _C(Vt.apply(void 0,[t.handler].concat(r)),t.purpose)},uy=function(t){return t.cHandler},sy=function(t,r){return{name:t,handler:r}},jk=function(t,r){var o={};return Lt(t,function(s){o[s.name()]=s.handlers(r)}),o},Lv=function(t,r,o){var s=ve(ve({},o),jk(r,t));return DC(s,sy)},Hv=function(t,r,o,s){var v=Lv(t,o,s);return RC(v,r)},za=function(t){var r=Ik(t);return function(o,s){for(var v=[],m=2;m<arguments.length;m++)v[m-2]=arguments[m];var p=[o,s].concat(v);r.abort.apply(void 0,p)?s.stop():r.can.apply(void 0,p)&&r.run.apply(void 0,p)}},C1=function(t,r){return pr.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(gt(r,function(o){return o.name}),null,2)])},Ol=function(t,r,o){var s=r[o];return s?w1("Event: "+o,"name",t,s).map(function(v){var m=gt(v,function(p){return p.handler});return $k(m)}):C1(o,t)},RC=function(t,r){var o=Or(t,function(s,v){var m=s.length===1?pr.value(s[0].handler):Ol(s,r,v);return m.map(function(p){var S=za(p),x=s.length>1?Nt(r[v],function(E){return ba(s,function(M){return M.name===E})}).join(" > "):s[0].name;return ef(v,Wk(S,x))})});return Nk(o,{})},Al,uf="alloy.base.behaviour",Vv=In([Ri("dom","dom",ur(),In([rt("tag"),Se("styles",{}),Se("classes",[]),Se("attributes",{}),fa("value"),fa("innerHtml")])),rt("components"),rt("uid"),Se("events",{}),Se("apis",{}),Ri("eventOrder","eventOrder",No((Al={},Al[pc()]=["disabling",uf,"toggling","typeaheadevents"],Al[_v()]=[uf,"focusing","keying"],Al[Ed()]=[uf,"disabling","toggling","representing"],Al[Td()]=[uf,"representing","streaming","invalidating"],Al[Lm()]=[uf,"representing","item-events","tooltipping"],Al[nl()]=["focusing",uf,"item-type-events"],Al[nf()]=["focusing",uf,"item-type-events"],Al[Yf()]=["item-type-events","tooltipping"],Al[$c()]=["receiving","reflecting","tooltipping"],Al)),Zc()),fa("domModification")]),S1=function(t){return Oo("custom.definition",Vv,t)},Rh=function(t){return ve(ve({},t.dom),{uid:t.uid,domChildren:gt(t.components,function(r){return r.element})})},x1=function(t){return t.domModification.fold(function(){return ol({})},ol)},T1=function(t){return t.events},Rd=function(t,r){var o=co(t,r);return o===void 0||o===""?[]:o.split(" ")},Gk=function(t,r,o){var s=Rd(t,r),v=s.concat([o]);return hr(t,r,v.join(" ")),!0},k1=function(t,r,o){var s=Nt(Rd(t,r),function(v){return v!==o});return s.length>0?hr(t,r,s.join(" ")):Ji(t,r),!1},jm=function(t){return t.dom.classList!==void 0},Mh=function(t){return Rd(t,"class")},Bh=function(t,r){return Gk(t,"class",r)},cy=function(t,r){return k1(t,"class",r)},Mi=function(t,r){jm(t)?t.dom.classList.add(r):Bh(t,r)},Md=function(t){var r=jm(t)?t.dom.classList:Mh(t);r.length===0&&Ji(t,"class")},yi=function(t,r){if(jm(t)){var o=t.dom.classList;o.remove(r)}else cy(t,r);Md(t)},ls=function(t,r){return jm(t)&&t.dom.classList.contains(r)},Bd=function(t,r){Lt(r,function(o){Mi(t,o)})},xc=function(t,r){Lt(r,function(o){yi(t,o)})},E1=function(t,r){return ta(r,function(o){return ls(t,o)})},sf=function(t){return t.dom.value},Gm=function(t,r){if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},qm=function(t){var r=ie.fromTag(t.tag);Us(r,t.attributes),Bd(r,t.classes),Ws(r,t.styles),t.innerHtml.each(function(s){return Zf(r,s)});var o=t.domChildren;if(Cl(r,o),t.value.each(function(s){Gm(r,s)}),!t.uid)debugger;return b1(r,t.uid),r},MC=function(t){var r=yn(t,"behaviours").getOr({});return Yr(Qr(r),function(o){var s=r[o];return Ve(s)?[s.me]:[]})},BC=function(t,r){return AC(t,r)},qk=function(t){var r=MC(t);return BC(t,r)},Kk=function(t,r,o){var s=Rh(t),v=x1(t),m={"alloy.base.modification":v},p=r.length>0?Wm(o,m,r,s):v;return Uk(s,p)},Xk=function(t,r,o){var s={"alloy.base.behaviour":T1(t)};return Hv(o,t.eventOrder,r,s).getOrDie()},PC=function(t){var r=function(){return we},o=Hn(Hk),s=Qc(S1(t)),v=qk(t),m=y1(v),p=Vk(v),S=Kk(s,m,p),x=qm(S),E=Xk(s,m,p),M=Hn(s.components),P=function(Le){o.set(Le)},H=function(){o.set(_h(r))},W=function(){var Le=T(x),Fe=Yr(Le,function(ye){return o.get().getByDom(ye).fold(function(){return[]},xi)});M.set(Fe)},K=function(Le){var Fe=p,ye=Ft(Fe[Le.name()])?Fe[Le.name()]:function(){throw new Error("Could not find "+Le.name()+" in "+JSON.stringify(t,null,2))};return ye()},ue=function(Le){return Ft(p[Le.name()])},be=function(){return s.apis},ae=function(Le){return p[Le]().map(function(Fe){return Fe.state.readState()}).getOr("not enabled")},we={uid:t.uid,getSystem:o.get,config:K,hasConfigured:ue,spec:t,readState:ae,getApis:be,connect:P,disconnect:H,element:x,syncComponents:W,components:M.get,events:E};return we},O1=function(t){var r=yn(t,"components").getOr([]);return gt(r,fo)},A1=function(t){var r=Um(t),o=r.events,s=Y(r,["events"]),v=O1(s),m=ve(ve({},s),{events:ve(ve({},Vm),o),components:v});return pr.value(PC(m))},pu=function(t){var r=ie.fromText(t);return D1({element:r})},D1=function(t){var r=Ta("external.component",qs([rt("element"),fa("uid")]),t),o=Hn(_h()),s=function(S){o.set(S)},v=function(){o.set(_h(function(){return p}))},m=r.uid.getOrThunk(function(){return $v("external")});b1(r.element,m);var p={uid:m,getSystem:o.get,config:R.none,hasConfigured:$t,connect:s,disconnect:v,getApis:function(){return{}},element:r.element,spec:t,readState:Z("No state"),syncComponents:ge,components:Z([]),events:{}};return Fv(p)},ly=$v,zc=function(t){return Ar(t,"uid")},fo=function(t){return OC(t).getOrThunk(function(){var r=zc(t)?t:ve({uid:ly("")},t);return A1(r).getOrDie()})},Tc=Fv;function Uv(t,r,o,s,v){return t(o,s)?R.some(o):Ft(v)&&v(o)?R.none():r(o,s,v)}var fy=function(t,r,o){for(var s=t.dom,v=Ft(o)?o:$t;s.parentNode;){s=s.parentNode;var m=ie.fromDom(s);if(r(m))return R.some(m);if(v(m))break}return R.none()},_1=function(t,r,o){var s=function(v,m){return m(v)};return Uv(s,fy,t,r,o)},NC=function(t,r){var o=function(v){return r(ie.fromDom(v))},s=lr(t.dom.childNodes,o);return s.map(ie.fromDom)},br=function(t,r){var o=function(s){for(var v=0;v<s.childNodes.length;v++){var m=ie.fromDom(s.childNodes[v]);if(r(m))return R.some(m);var p=o(s.childNodes[v]);if(p.isSome())return p}return R.none()};return o(t.dom)},Km=function(t,r,o){return _1(t,r,o).isSome()},R1=function(t,r,o){return fy(t,function(s){return kr(s,r)},o)},vy=function(t,r){return NC(t,function(o){return kr(o,r)})},Bi=function(t,r){return Rc(r,t)},Fc=function(t,r,o){var s=function(v,m){return kr(v,m)};return Uv(s,R1,t,r,o)},IC=function(t){var r=_1(t,function(o){if(!xr(o))return!1;var s=co(o,"id");return s!==void 0&&s.indexOf("aria-owns")>-1});return r.bind(function(o){var s=co(o,"id"),v=Fn(o);return Bi(v,'[aria-owns="'+s+'"]')})},Pd=function(){var t=gn("aria-owns"),r=function(s){hr(s,"aria-owns",t)},o=function(s){Ji(s,"aria-owns")};return{id:t,link:r,unlink:o}},ao=function(t,r){return IC(r).exists(function(o){return Nd(t,o)})},Nd=function(t,r){return Km(r,function(o){return qr(o,t.element)},$t)||ao(t,r)},M1="unknown",Xm;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Xm||(Xm={}));var dy=Hn({}),$C=function(t,r){var o=[],s=new Date().getTime();return{logEventCut:function(v,m,p){o.push({outcome:"cut",target:m,purpose:p})},logEventStopped:function(v,m,p){o.push({outcome:"stopped",target:m,purpose:p})},logNoParent:function(v,m,p){o.push({outcome:"no-parent",target:m,purpose:p})},logEventNoHandlers:function(v,m){o.push({outcome:"no-handlers-left",target:m})},logEventResponse:function(v,m,p){o.push({outcome:"response",purpose:p,target:m})},write:function(){var v=new Date().getTime();nr(["mousemove","mouseover","mouseout",Ed()],t)||console.log(t,{event:t,time:v-s,target:r.dom,sequence:gt(o,function(m){return nr(["cut","stopped","response"],m.outcome)?"{"+m.purpose+"} "+m.outcome+" at ("+cs(m.target)+")":m.outcome})})}}},Ph=function(t,r,o){var s=yn(dy.get(),t).orThunk(function(){var p=Qr(dy.get());return ra(p,function(S){return t.indexOf(S)>-1?R.some(dy.get()[S]):R.none()})}).getOr(Xm.NORMAL);switch(s){case Xm.NORMAL:return o(Yk());case Xm.LOGGING:{var v=$C(t,r),m=o(v);return v.write(),m}case Xm.STOP:return!0}},zC=["alloy/data/Fields","alloy/debugging/Debugging"],ev=function(){var t=new Error;if(t.stack!==void 0){var r=t.stack.split(`
`);return lr(r,function(o){return o.indexOf("alloy")>0&&!ba(zC,function(s){return o.indexOf(s)>-1})}).getOr(M1)}else return M1},fs={logEventCut:ge,logEventStopped:ge,logNoParent:ge,logEventNoHandlers:ge,logEventResponse:ge,write:ge},my=function(t,r,o){return Ph(t,r,o)},Yk=Z(fs),Dl=Z([rt("menu"),rt("selectedMenu")]),tv=Z([rt("item"),rt("selectedItem")]);Z(In(tv().concat(Dl())));var B1=Z(In(tv())),Jk=Ql("initSize",[rt("numColumns"),rt("numRows")]),Zk=function(){return Es("markers",B1())},Id=function(){return Ql("markers",[rt("backgroundMenu")].concat(Dl()).concat(tv()))},$d=function(t){return Ql("markers",gt(t,rt))},P1=function(t,r,o){return ev(),Ri(r,r,o,Mm(function(s){return pr.value(function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];return s.apply(void 0,v)})}))},va=function(t){return P1("onHandler",t,Cr(ge))},Pi=function(t){return P1("onKeyboardHandler",t,Cr(R.none))},vs=function(t){return P1("onHandler",t,ur())},As=function(t){return P1("onKeyboardHandler",t,ur())},Xa=function(t,r){return us(t,Z(r))},Wv=function(t){return us(t,Ne)},N1=Z(Jk),Hi=function(t,r,o,s,v,m,p,S){return S===void 0&&(S=!1),{x:t,y:r,bubble:o,direction:s,placement:v,restriction:m,label:p+"-"+v,alwaysFit:S}},cf=hc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Qk=function(t,r,o,s,v,m,p,S,x){return t.fold(r,o,s,v,m,p,S,x)},eE=function(t,r,o,s){return t.fold(r,r,s,s,r,s,o,o)},I1=function(t,r,o,s){return t.fold(r,s,r,s,o,o,r,s)},$1=cf.southeast,gy=cf.southwest,hy=cf.northeast,zd=cf.northwest,Nh=cf.south,py=cf.north,by=cf.east,Ym=cf.west,bu=function(t,r,o,s){var v=t+r;return v>s?o:v<o?s:v},Zs=function(t,r,o){return Math.min(Math.max(t,r),o)},Ih=function(t,r){switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ni=function(t,r){return qo(["left","right","top","bottom"],function(o){return yn(r,o).map(function(s){return Ih(t,s)})})},z1=function(t,r,o){var s=function(x,E){return r[x].map(function(M){var P=x==="top"||x==="bottom",H=P?o.top:o.left,W=x==="left"||x==="top"?Math.max:Math.min,K=W(M,E)+H;return P?Zs(K,t.y,t.bottom):Zs(K,t.x,t.right)}).getOr(E)},v=s("left",t.x),m=s("top",t.y),p=s("right",t.right),S=s("bottom",t.bottom);return _i(v,m,p-v,S-m)},nv="layout",yy=function(t){return t.x},wy=function(t,r){return t.x+t.width/2-r.width/2},FC=function(t,r){return t.x+t.width-r.width},Cy=function(t,r){return t.y-r.height},$h=function(t){return t.y+t.height},F1=function(t,r){return t.y+t.height/2-r.height/2},LC=function(t){return t.x+t.width},tE=function(t,r){return t.x-r.width},Nu=function(t,r,o){return Hi(yy(t),$h(t),o.southeast(),$1(),"southeast",Ni(t,{left:1,top:3}),nv)},Vi=function(t,r,o){return Hi(FC(t,r),$h(t),o.southwest(),gy(),"southwest",Ni(t,{right:0,top:3}),nv)},ds=function(t,r,o){return Hi(yy(t),Cy(t,r),o.northeast(),hy(),"northeast",Ni(t,{left:1,bottom:2}),nv)},ms=function(t,r,o){return Hi(FC(t,r),Cy(t,r),o.northwest(),zd(),"northwest",Ni(t,{right:0,bottom:2}),nv)},Ds=function(t,r,o){return Hi(wy(t,r),Cy(t,r),o.north(),py(),"north",Ni(t,{bottom:2}),nv)},wi=function(t,r,o){return Hi(wy(t,r),$h(t),o.south(),Nh(),"south",Ni(t,{top:3}),nv)},L1=function(t,r,o){return Hi(LC(t),F1(t,r),o.east(),by(),"east",Ni(t,{left:0}),nv)},H1=function(t,r,o){return Hi(tE(t,r),F1(t,r),o.west(),Ym(),"west",Ni(t,{right:1}),nv)},Sy=function(){return[Nu,Vi,ds,ms,wi,Ds,L1,H1]},Fd=function(){return[Vi,Nu,ms,ds,wi,Ds,L1,H1]},jv=function(){return[ds,ms,Nu,Vi,Ds,wi]},V1=function(){return[ms,ds,Vi,Nu,Ds,wi]},U1=function(){return[Nu,Vi,ds,ms,wi,Ds]},W1=function(){return[Vi,Nu,ms,ds,wi,Ds]},Jm=function(t,r){return r.universal?t:Nt(t,function(o){return nr(r.channels,o)})},Zm=function(t){return Wa([ut($c(),function(r,o){var s=t.channels,v=Qr(s),m=o,p=Jm(v,m);Lt(p,function(S){var x=s[S],E=x.schema,M=Ta("channel["+S+`] data
Receiver: `+cs(r.element),E,m.data);x.onReceive(r,M)})})])},HC=Object.freeze({__proto__:null,events:Zm}),lf=[Es("channels",Ru(pr.value,qs([vs("onReceive"),Se("schema",Zc())])))],Ld=function(t,r,o){return Js(function(s){o(s,t,r)})},yo=function(t,r,o){return kC(function(s,v){o(s,t,r)})},nE=function(t,r,o,s,v,m){var p=qs(t),S=Xs(r,[Bk("config",t)]);return VC(p,S,r,o,s,v,m)},rE=function(t,r,o,s,v,m){var p=t,S=Xs(r,[Tl("config",t)]);return VC(p,S,r,o,s,v,m)},j1=function(t,r,o){var s=function(v){for(var m=[],p=1;p<arguments.length;p++)m[p-1]=arguments[p];var S=[v].concat(m);return v.config({name:Z(t)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+o)},function(x){var E=Array.prototype.slice.call(S,1);return r.apply(void 0,[v,x.config,x.state].concat(E))})};return Sc(s,o,r)},aE=function(t){return{key:t,value:void 0}},VC=function(t,r,o,s,v,m,p){var S=function(P){return wa(P,o)?P[o]():R.none()},x=Pr(v,function(P,H){return j1(o,P,H)}),E=Pr(m,function(P,H){return _d(P,H)}),M=ve(ve(ve({},E),x),{revoke:Vt(aE,o),config:function(P){var H=Ta(o+"-config",t,P);return{key:o,value:{config:H,me:M,configAsRaw:ho(function(){return Ta(o+"-config",t,P)}),initialConfig:P,state:p}}},schema:Z(r),exhibit:function(P,H){return So(S(P),yn(s,"exhibit"),function(W,K){return K(H,W.config,W.state)}).getOrThunk(function(){return ol({})})},name:Z(o),handlers:function(P){return S(P).map(function(H){var W=yn(s,"events").getOr(function(){return{}});return W(H.config,H.state)}).getOr({})}});return M},Bt=function(t){return Xf(t)},oE=qs([rt("fields"),rt("name"),Se("active",{}),Se("apis",{}),Se("state",hu),Se("extra",{})]),Ii=function(t){var r=Ta("Creating behaviour: "+t.name,oE,t);return nE(r.fields,r.name,r.active,r.apis,r.extra,r.state)},xy=qs([rt("branchKey"),rt("branches"),rt("name"),Se("active",{}),Se("apis",{}),Se("state",hu),Se("extra",{})]),Hd=function(t){var r=Ta("Creating behaviour: "+t.name,xy,t);return rE(Nc(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},UC=Z(void 0),Wu=Ii({fields:lf,name:"receiving",active:HC}),zh=function(t,r){return ol({classes:[],styles:r.useFixed()?{}:{position:"relative"}})},G1=Object.freeze({__proto__:null,exhibit:zh}),Fh=function(){return ie.fromDom(document)},_l=function(t){return t.dom.focus()},Lh=function(t){return t.dom.blur()},Hh=function(t){var r=Fn(t).dom;return t.dom===r.activeElement},gs=function(t){return t===void 0&&(t=Fh()),R.from(t.dom.activeElement).map(ie.fromDom)},Rl=function(t){return gs(Fn(t)).filter(function(r){return t.dom.contains(r.dom)})},WC=function(t,r){var o=Fn(r),s=gs(o).bind(function(m){var p=function(S){return qr(m,S)};return p(r)?R.some(r):br(r,p)}),v=t(r);return s.each(function(m){gs(o).filter(function(p){return qr(p,m)}).fold(function(){_l(m)},ge)}),v},ju=function(t,r,o,s,v){var m=function(p){return p+"px"};return{position:t,left:r.map(m),top:o.map(m),right:s.map(m),bottom:v.map(m)}},ff=function(t){return ve(ve({},t),{position:R.some(t.position)})},Gv=function(t,r){Bo(t,ff(r))},Vh=hc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ue=function(t,r,o,s,v,m){var p=r.rect,S=p.x-o,x=p.y-s,E=p.width,M=p.height,P=v-(S+E),H=m-(x+M),W=R.some(S),K=R.some(x),ue=R.some(P),be=R.some(H),ae=R.none();return Qk(r.direction,function(){return ju(t,W,K,ae,ae)},function(){return ju(t,ae,K,ue,ae)},function(){return ju(t,W,ae,ae,be)},function(){return ju(t,ae,ae,ue,be)},function(){return ju(t,W,K,ae,ae)},function(){return ju(t,W,ae,ae,be)},function(){return ju(t,W,K,ae,ae)},function(){return ju(t,ae,K,ue,ae)})},rv=function(t,r){return t.fold(function(){var o=r.rect;return ju("absolute",R.some(o.x),R.some(o.y),R.none(),R.none())},function(o,s,v,m){return Ue("absolute",r,o,s,v,m)},function(o,s,v,m){return Ue("fixed",r,o,s,v,m)})},Qm=function(t,r){var o=Vt(_u,r),s=t.fold(o,o,function(){var p=Gs();return _u(r).translate(-p.left,-p.top)}),v=os(r),m=js(r);return _i(s.left,s.top,v,m)},iE=function(t,r){return r.fold(function(){return t.fold(vu,vu,_i)},function(o){return t.fold(o,o,function(){var s=o(),v=q1(t,s.x,s.y);return _i(v.left,v.top,s.width,s.height)})})},q1=function(t,r,o){var s=Ha(r,o),v=function(){var m=Gs();return s.translate(-m.left,-m.top)};return t.fold(Z(s),Z(s),v)},il=function(t,r,o,s){return t.fold(r,o,s)};Vh.none;var K1=Vh.relative,Ty=Vh.fixed,ky=function(t,r){return{anchorBox:t,origin:r}},X1=function(t,r){return ky(t,r)},Ey="data-alloy-placement",Oy=function(t,r){hr(t,Ey,r)},Ay=function(t){return Eo(t,Ey)},Dy=function(t){return Ji(t,Ey)},Vd=hc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),jC=function(t,r){var o=r.x,s=r.y,v=r.right,m=r.bottom,p=t.x,S=t.y,x=t.right,E=t.bottom,M=t.width,P=t.height,H=p>=o&&p<=v,W=S>=s&&S<=m,K=H&&W,ue=x<=v&&x>=o,be=E<=m&&E>=s,ae=ue&&be,we=Math.min(M,p>=o?v-p:x-o),Le=Math.min(P,S>=s?m-S:E-s);return{originInBounds:K,sizeInBounds:ae,visibleW:we,visibleH:Le}},uE=function(t,r){var o=r.x,s=r.y,v=r.right,m=r.bottom,p=t.x,S=t.y,x=t.width,E=t.height,M=Math.max(o,v-x),P=Math.max(s,m-E),H=Zs(p,o,M),W=Zs(S,s,P),K=Math.min(H+x,v)-H,ue=Math.min(W+E,m)-W;return _i(H,W,K,ue)},sE=function(t,r,o){var s=Z(r.bottom-o.y),v=Z(o.bottom-r.y),m=eE(t,v,v,s),p=Z(r.right-o.x),S=Z(o.right-r.x),x=I1(t,S,S,p);return{maxWidth:x,maxHeight:m}},eg=function(t,r,o,s){var v=t.bubble,m=v.offset,p=z1(s,t.restriction,m),S=t.x+m.left,x=t.y+m.top,E=_i(S,x,r,o),M=jC(E,p),P=M.originInBounds,H=M.sizeInBounds,W=M.visibleW,K=M.visibleH,ue=P&&H,be=ue?E:uE(E,p),ae=be.width>0&&be.height>0,we=sE(t.direction,be,s),Le=we.maxWidth,Fe=we.maxHeight,ye={rect:be,maxHeight:Fe,maxWidth:Le,direction:t.direction,placement:t.placement,classes:{on:v.classesOn,off:v.classesOff},layout:t.label,testY:x};return ue||t.alwaysFit?Vd.fit(ye):Vd.nofit(ye,W,K,ae)},tg=function(t,r,o,s,v,m){var p=s.width,S=s.height,x=function(M,P,H,W,K){var ue=M(o,s,v,t,m),be=eg(ue,p,S,m);return be.fold(Z(be),function(ae,we,Le,Fe){var ye=K===Fe?Le>W||we>H:!K&&Fe;return ye?be:Vd.nofit(P,H,W,K)})},E=$n(r,function(M,P){var H=Vt(x,P);return M.fold(Z(M),H)},Vd.nofit({rect:o,maxHeight:s.height,maxWidth:s.width,direction:$1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:o.y},-1,-1,!1));return E.fold(Ne,Ne)},Y1=function(t){var r=Hn(R.none()),o=function(){return r.get().each(t)},s=function(){o(),r.set(R.none())},v=function(){return r.get().isSome()},m=function(){return r.get()},p=function(S){o(),r.set(R.some(S))};return{clear:s,isSet:v,get:m,set:p}},_y=function(){return Y1(function(t){return t.destroy()})},ng=function(){return Y1(function(t){return t.unbind()})},Ry=function(){var t=_y(),r=function(o){return t.get().each(o)};return ve(ve({},t),{run:r})},Wo=function(){var t=Y1(ge),r=function(o){return t.get().each(o)};return ve(ve({},t),{on:r})},Uh=We,Qo=function(t,r,o){return r1(t,r,Uh,o)},J1=function(t,r,o){return zf(t,r,Uh,o)},Ud=Pc,My=["top","bottom","right","left"],Wh="data-alloy-transition-timer",By=function(t,r){return E1(t,r.classes)},GC=function(t,r,o){return o.exists(function(s){var v=t.mode;return v==="all"?!0:s[v]!==r[v]})},cE=function(t,r){var o=function(s){return parseFloat(s).toFixed(3)};return Nr(r,function(s,v){var m=t[v].map(o),p=s.map(o);return!ji(m,p)}).isSome()},qC=function(t){var r=function(m){var p=Po(t,m),S=dt(p)?p.split(/\s*,\s*/):[];return Nt(S,ki)},o=function(m){if(dt(m)&&/^[\d.]+/.test(m)){var p=parseFloat(m);return kn(m,"ms")?p:p*1e3}else return 0},s=r("transition-delay"),v=r("transition-duration");return $n(v,function(m,p,S){var x=o(s[S])+o(p);return Math.max(m,x)},0)},lE=function(t,r){var o=ng(),s=ng(),v,m=function(M){var P,H=(P=M.raw.pseudoElement)!==null&&P!==void 0?P:"";return qr(M.target,t)&&Yo(H)&&nr(My,M.raw.propertyName)},p=function(M){if(Bn(M)||m(M)){o.clear(),s.clear();var P=M==null?void 0:M.raw.type;(Bn(P)||P===Fm())&&(clearTimeout(v),Ji(t,Wh),xc(t,r.classes))}},S=function(){o.set(Qo(t,Fm(),p)),s.set(Qo(t,zk(),p))};if("ontransitionstart"in t.dom)var x=Qo(t,K0(),function(M){m(M)&&(x.unbind(),S())});else S();var E=qC(t);requestAnimationFrame(function(){v=setTimeout(p,E+17),hr(t,Wh,v)})},Z1=function(t,r){Bd(t,r.classes),Eo(t,Wh).each(function(o){clearTimeout(parseInt(o,10)),Ji(t,Wh)}),lE(t,r)},jh=function(t,r,o,s,v,m){var p=GC(s,v,m);if(p||By(t,s)){Zn(t,"position",o.position);var S=Qm(r,t),x=rv(r,ve(ve({},v),{rect:S})),E=qo(My,function(M){return x[M]});cE(o,E)&&(Bo(t,E),p&&Z1(t,s),ro(t))}else xc(t,s.classes)},fE=function(t){return{width:os(t),height:js(t)}},KC=function(t,r,o,s){la(r,"max-height"),la(r,"max-width");var v=fE(r);return tg(r,s.preference,t,v,o,s.bounds)},Py=function(t,r){var o=r.classes;xc(t,o.off),Bd(t,o.on)},vE=function(t,r,o){var s=o.maxHeightFunction;s(t,r.maxHeight)},dE=function(t,r,o){var s=o.maxWidthFunction;s(t,r.maxWidth)},Q1=function(t,r,o){var s=rv(o.origin,r);o.transition.each(function(v){jh(t,o.origin,s,v,r,o.lastPlacement)}),Gv(t,s)},Ny=function(t,r){Oy(t,r.placement)},yu=function(t,r){n1(t,Math.floor(r))},rg=Z(function(t,r){yu(t,r),Ws(t,{"overflow-x":"hidden","overflow-y":"auto"})}),ag=Z(function(t,r){yu(t,r)}),XC=function(t,r,o){return t[r]===void 0?o:t[r]},mE=function(t,r,o,s,v,m,p,S){var x=XC(p,"maxHeightFunction",rg()),E=XC(p,"maxWidthFunction",ge),M=t.anchorBox,P=t.origin,H={bounds:iE(P,m),origin:P,preference:s,maxHeightFunction:x,maxWidthFunction:E,lastPlacement:v,transition:S};return Gh(M,r,o,H)},Gh=function(t,r,o,s){var v=KC(t,r,o,s);return Q1(r,v,s),Ny(r,v),Py(r,v),vE(r,v,s),dE(r,v,s),{layout:v.layout,placement:v.placement}},qh=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Wd=function(t,r,o,s){s===void 0&&(s=1);var v=t*s,m=r*s,p=function(x){return yn(o,x).getOr([])},S=function(x,E,M){var P=ya(qh,M);return{offset:Ha(x,E),classesOn:Yr(M,p),classesOff:Yr(P,p)}};return{southeast:function(){return S(-t,r,["top","alignLeft"])},southwest:function(){return S(t,r,["top","alignRight"])},south:function(){return S(-t/2,r,["top","alignCentre"])},northeast:function(){return S(-t,-r,["bottom","alignLeft"])},northwest:function(){return S(t,-r,["bottom","alignRight"])},north:function(){return S(-t/2,-r,["bottom","alignCentre"])},east:function(){return S(t,-r/2,["valignCentre","left"])},west:function(){return S(-t,-r/2,["valignCentre","right"])},insetNortheast:function(){return S(v,m,["top","alignLeft","inset"])},insetNorthwest:function(){return S(-v,m,["top","alignRight","inset"])},insetNorth:function(){return S(-v/2,m,["top","alignCentre","inset"])},insetSoutheast:function(){return S(v,-m,["bottom","alignLeft","inset"])},insetSouthwest:function(){return S(-v,-m,["bottom","alignRight","inset"])},insetSouth:function(){return S(-v/2,-m,["bottom","alignCentre","inset"])},insetEast:function(){return S(-v,-m/2,["valignCentre","right","inset"])},insetWest:function(){return S(v,-m/2,["valignCentre","left","inset"])}}},eb=function(){return Wd(0,0,{})},Kh=Ne,Iy=function(t,r){return function(o){return gE(o)==="rtl"?r:t}},gE=function(t){return Po(t,"direction")==="rtl"?"rtl":"ltr"},vf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(vf||(vf={}));var tb="data-alloy-vertical-dir",hE=function(t){return Km(t,function(r){return xr(r)&&co(r,"data-alloy-vertical-dir")===vf.BottomToTop})},qv=function(){return Xs("layouts",[rt("onLtr"),rt("onRtl"),fa("onBottomLtr"),fa("onBottomRtl")])},Kv=function(t,r,o,s,v,m,p){var S=p.map(hE).getOr(!1),x=r.layouts.map(function(W){return W.onLtr(t)}),E=r.layouts.map(function(W){return W.onRtl(t)}),M=S?r.layouts.bind(function(W){return W.onBottomLtr.map(function(K){return K(t)})}).or(x).getOr(v):x.getOr(o),P=S?r.layouts.bind(function(W){return W.onBottomRtl.map(function(K){return K(t)})}).or(E).getOr(m):E.getOr(s),H=Iy(M,P);return H(t)},pE=function(t,r,o){var s=r.hotspot,v=Qm(o,s.element),m=Kv(t.element,r,U1(),W1(),jv(),V1(),R.some(r.hotspot.element));return R.some(Kh({anchorBox:v,bubble:r.bubble.getOr(eb()),overrides:r.overrides,layouts:m,placer:R.none()}))},nb=[rt("hotspot"),fa("bubble"),Se("overrides",{}),qv(),Xa("placement",pE)],rb=function(t,r,o){var s=q1(o,r.x,r.y),v=_i(s.left,s.top,r.width,r.height),m=Kv(t.element,r,Sy(),Fd(),Sy(),Fd(),R.none());return R.some(Kh({anchorBox:v,bubble:r.bubble,overrides:r.overrides,layouts:m,placer:R.none()}))},ab=[rt("x"),rt("y"),Se("height",0),Se("width",0),Se("bubble",eb()),Se("overrides",{}),qv(),Xa("placement",rb)],eu=hc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),YC=function(t){return t.fold(Ne,function(r,o,s){return r.translate(-o,-s)})},$y=function(t){return t.fold(Ne,Ne)},JC=function(t){return $n(t,function(r,o){return r.translate(o.left,o.top)},Ha(0,0))},ZC=function(t){var r=gt(t,YC);return JC(r)},Ml=function(t){var r=gt(t,$y);return JC(r)},av=eu.screen,QC=eu.absolute,eS=function(t,r,o){var s=lc(o.root).dom,v=function(m){var p=uo(m),S=uo(t.element);return qr(p,S)};return R.from(s.frameElement).map(ie.fromDom).filter(v).map(as)},zy=function(t,r,o){var s=uo(t.element),v=Gs(s),m=eS(t,r,o).getOr(v);return QC(m,v.left,v.top)},ob=function(t,r,o,s){var v=av(Ha(t,r));return R.some(dc(v,o,s))},tS=function(t,r,o,s,v){return t.map(function(m){var p=[r,m.point],S=il(s,function(){return Ml(p)},function(){return Ml(p)},function(){return ZC(p)}),x=Jo(S.left,S.top,m.width,m.height),E=o.showAbove?jv():U1(),M=o.showAbove?V1():W1(),P=Kv(v,o,E,M,E,M,R.none());return Kh({anchorBox:x,bubble:o.bubble.getOr(eb()),overrides:o.overrides,layouts:P,placer:R.none()})})},og=function(t,r,o){var s=zy(t,o,r);return r.node.filter(jn).bind(function(v){var m=v.dom.getBoundingClientRect(),p=ob(m.left,m.top,m.width,m.height),S=r.node.getOr(t.element);return tS(p,s,r,o,S)})},bE=[rt("node"),rt("root"),fa("bubble"),qv(),Se("overrides",{}),Se("showAbove",!1),Xa("placement",og)],Xh="\uFEFF",yE=" ",ig=function(t,r,o,s){return{start:t,soffset:r,finish:o,foffset:s}},jd={create:ig},Fy=hc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nS=function(t,r,o,s){return t.fold(r,o,s)},wE=function(t){return t.fold(Ne,Ne,Ne)},rS=Fy.before,aS=Fy.on,Ly=Fy.after,CE={before:rS,on:aS,after:Ly,cata:nS,getStart:wE},ib=hc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),SE=function(t){return ib.exact(t.start,t.soffset,t.finish,t.foffset)},Yh=function(t){return t.match({domRange:function(r){return ie.fromDom(r.startContainer)},relative:function(r,o){return CE.getStart(r)},exact:function(r,o,s,v){return r}})},xE=ib.domRange,TE=ib.relative,kE=ib.exact,ub=function(t){var r=Yh(t);return lc(r)},EE=jd.create,ug={domRange:xE,relative:TE,exact:kE,exactFromRange:SE,getWin:ub,range:EE},oS=function(t,r){r.fold(function(o){t.setStartBefore(o.dom)},function(o,s){t.setStart(o.dom,s)},function(o){t.setStartAfter(o.dom)})},OE=function(t,r){r.fold(function(o){t.setEndBefore(o.dom)},function(o,s){t.setEnd(o.dom,s)},function(o){t.setEndAfter(o.dom)})},Hy=function(t,r,o){var s=t.document.createRange();return oS(s,r),OE(s,o),s},iS=function(t,r,o,s,v){var m=t.document.createRange();return m.setStart(r.dom,o),m.setEnd(s.dom,v),m},Vy=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},uS=function(t){var r=t.getClientRects(),o=r.length>0?r[0]:t.getBoundingClientRect();return o.width>0||o.height>0?R.some(o).map(Vy):R.none()},sS=function(t){var r=t.getBoundingClientRect();return r.width>0||r.height>0?R.some(r).map(Vy):R.none()},sg=hc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Uy=function(t,r,o){return r(ie.fromDom(o.startContainer),o.startOffset,ie.fromDom(o.endContainer),o.endOffset)},Wy=function(t,r){return r.match({domRange:function(o){return{ltr:Z(o),rtl:R.none}},relative:function(o,s){return{ltr:ho(function(){return Hy(t,o,s)}),rtl:ho(function(){return R.some(Hy(t,s,o))})}},exact:function(o,s,v,m){return{ltr:ho(function(){return iS(t,o,s,v,m)}),rtl:ho(function(){return R.some(iS(t,v,m,o,s))})}}})},AE=function(t,r){var o=r.ltr();if(o.collapsed){var s=r.rtl().filter(function(v){return v.collapsed===!1});return s.map(function(v){return sg.rtl(ie.fromDom(v.endContainer),v.endOffset,ie.fromDom(v.startContainer),v.startOffset)}).getOrThunk(function(){return Uy(t,sg.ltr,o)})}else return Uy(t,sg.ltr,o)},DE=function(t,r){var o=Wy(t,r);return AE(t,o)},jy=function(t,r){var o=DE(t,r);return o.match({ltr:function(s,v,m,p){var S=t.document.createRange();return S.setStart(s.dom,v),S.setEnd(m.dom,p),S},rtl:function(s,v,m,p){var S=t.document.createRange();return S.setStart(m.dom,p),S.setEnd(s.dom,v),S}})};sg.ltr,sg.rtl;var _E=function(t,r){var o=function(m){if(!t(m))throw new Error("Can only get "+r+" value of a "+r+" node");return s(m).getOr("")},s=function(m){return t(m)?R.from(m.dom.nodeValue):R.none()},v=function(m,p){if(!t(m))throw new Error("Can only set raw "+r+" value of a "+r+" node");m.dom.nodeValue=p};return{get:o,getOption:s,set:v}},cS=_E(Ma,"text"),Xv=function(t){return cS.get(t)},cg=function(t){return cS.getOption(t)},lS=function(t){return Kn(t)==="img"?1:cg(t).fold(function(){return T(t).length},function(r){return r.length})},RE=function(t){return cg(t).filter(function(r){return r.trim().length!==0||r.indexOf(yE)>-1}).isSome()},fS=["img","br"],ME=function(t){var r=RE(t);return r||nr(fS,Kn(t))},Gy=function(t){return lg(t,ME)},lg=function(t,r){var o=function(s){for(var v=T(s),m=v.length-1;m>=0;m--){var p=v[m];if(r(p))return R.some(p);var S=o(p);if(S.isSome())return S}return R.none()};return o(t)},Gu=function(t,r){return rs(r,t)},qy=function(t,r,o,s){var v=uo(t),m=v.dom.createRange();return m.setStart(t.dom,r),m.setEnd(o.dom,s),m},fg=function(t,r,o,s){var v=qy(t,r,o,s),m=qr(t,o)&&r===s;return v.collapsed&&!m},Gd=function(t){return R.from(t.getSelection())},sb=function(t){if(t.rangeCount>0){var r=t.getRangeAt(0),o=t.getRangeAt(t.rangeCount-1);return R.some(jd.create(ie.fromDom(r.startContainer),r.startOffset,ie.fromDom(o.endContainer),o.endOffset))}else return R.none()},BE=function(t){if(t.anchorNode===null||t.focusNode===null)return sb(t);var r=ie.fromDom(t.anchorNode),o=ie.fromDom(t.focusNode);return fg(r,t.anchorOffset,o,t.focusOffset)?R.some(jd.create(r,t.anchorOffset,o,t.focusOffset)):sb(t)},vS=function(t){return Gd(t).filter(function(r){return r.rangeCount>0}).bind(BE)},Ky=function(t,r){var o=jy(t,r);return uS(o)},_s=function(t,r){var o=jy(t,r);return sS(o)},Jh=function(t,r){return{element:t,offset:r}},PE=function(t,r){var o=T(t);if(o.length===0)return Jh(t,r);if(r<o.length)return Jh(o[r],0);var s=o[o.length-1],v=Ma(s)?Xv(s).length:T(s).length;return Jh(s,v)},qd=function(t,r){return Ma(t)?Jh(t,r):PE(t,r)},Yv=function(t,r){var o=r.getSelection.getOrThunk(function(){return function(){return vS(t)}});return o().map(function(s){var v=qd(s.start,s.soffset),m=qd(s.finish,s.foffset);return ug.range(v.element,v.offset,m.element,m.offset)})},vg=function(t,r,o){var s=lc(r.root).dom,v=zy(t,o,r),m=Yv(s,r).bind(function(x){var E=_s(s,ug.exactFromRange(x)).orThunk(function(){var M=ie.fromText(Xh);Uo(x.start,M);var P=Ky(s,ug.exact(M,0,M,1));return xs(M),P});return E.bind(function(M){return ob(M.left,M.top,M.width,M.height)})}),p=Yv(s,r).bind(function(x){return xr(x.start)?R.some(x.start):pl(x.start)}),S=p.getOr(t.element);return tS(m,v,r,o,S)},Jv=[fa("getSelection"),rt("root"),fa("bubble"),qv(),Se("overrides",{}),Se("showAbove",!1),Xa("placement",vg)],Bl="link-layout",Pl=function(t){return t.x+t.width},cb=function(t,r){return t.x-r.width},lb=function(t,r){return t.y-r.height+t.height},Xy=function(t){return t.y},dg=function(t,r,o){return Hi(Pl(t),Xy(t),o.southeast(),$1(),"southeast",Ni(t,{left:0,top:2}),Bl)},mg=function(t,r,o){return Hi(cb(t,r),Xy(t),o.southwest(),gy(),"southwest",Ni(t,{right:1,top:2}),Bl)},gg=function(t,r,o){return Hi(Pl(t),lb(t,r),o.northeast(),hy(),"northeast",Ni(t,{left:0,bottom:3}),Bl)},Iu=function(t,r,o){return Hi(cb(t,r),lb(t,r),o.northwest(),zd(),"northwest",Ni(t,{right:1,bottom:3}),Bl)},hg=function(){return[dg,mg,gg,Iu]},pg=function(){return[mg,dg,Iu,gg]},fb=function(t,r,o){var s=Qm(o,r.item.element),v=Kv(t.element,r,hg(),pg(),hg(),pg(),R.none());return R.some(Kh({anchorBox:s,bubble:eb(),overrides:r.overrides,layouts:v,placer:R.none()}))},NE=[rt("item"),qv(),Se("overrides",{}),Xa("placement",fb)],Yy=Nc("type",{selection:Jv,node:bE,hotspot:nb,submenu:NE,makeshift:ab}),vb=[Mu("classes",Zo),gc("mode","all",["all","layout","placement"])],wu=[Se("useFixed",$t),fa("getBounds")],IE=[Es("anchor",Yy),Xs("transition",vb)],df=function(){var t=document.documentElement;return Ty(0,0,t.clientWidth,t.clientHeight)},db=function(t){var r=as(t.element),o=t.element.dom.getBoundingClientRect();return K1(r.left,r.top,o.width,o.height)},Jy=function(t,r,o,s,v,m,p){var S=X1(o.anchorBox,r);return mE(S,v.element,o.bubble,o.layouts,m,s,o.overrides,p)},bg=function(t,r,o,s,v){Zy(t,r,o,s,v,R.none())},Zy=function(t,r,o,s,v,m){var p=m.map(ii);return Zh(t,r,o,s,v,p)},Zh=function(t,r,o,s,v,m){var p=Ta("placement.info",In(IE),v),S=p.anchor,x=s.element,E=o.get(s.uid);WC(function(){Zn(x,"position","fixed");var M=oi(x,"visibility");Zn(x,"visibility","hidden");var P=r.useFixed()?df():db(t),H=S.placement,W=m.map(Z).or(r.getBounds);H(t,S,P).each(function(K){var ue=K.placer.getOr(Jy),be=ue(t,P,K,W,s,E,p.transition);o.set(s.uid,be)}),M.fold(function(){la(x,"visibility")},function(K){Zn(x,"visibility",K)}),oi(x,"left").isNone()&&oi(x,"top").isNone()&&oi(x,"right").isNone()&&oi(x,"bottom").isNone()&&Mo(oi(x,"position"),"fixed")&&la(x,"position")},x)},$E=function(t,r,o){return r.useFixed()?"fixed":"absolute"},dS=function(t,r,o,s){var v=s.element;Lt(["position","left","right","top","bottom"],function(m){return la(v,m)}),Dy(v),o.clear(s.uid)},mS=Object.freeze({__proto__:null,position:bg,positionWithin:Zy,positionWithinBounds:Zh,getMode:$E,reset:dS}),zE=function(){var t={},r=function(v,m){t[v]=m},o=function(v){return yn(t,v)},s=function(v){Ve(v)?delete t[v]:t={}};return Pu({readState:function(){return t},clear:s,set:r,get:o})},yg=Object.freeze({__proto__:null,init:zE}),jo=Ii({fields:wu,name:"positioning",active:G1,apis:mS,state:yg}),mb=function(t){oa(t,Lm());var r=t.components();Lt(r,mb)},gb=function(t){var r=t.components();Lt(r,gb),oa(t,Ys())},Qy=function(t,r){Du(t.element,r.element)},gS=function(t){Lt(t.components(),function(r){return xs(r.element)}),po(t.element),t.syncComponents()},ew=function(t,r){var o=t.components();gS(t);var s=ya(o,r);Lt(s,function(v){mb(v),t.getSystem().removeFromWorld(v)}),Lt(r,function(v){v.getSystem().isConnected()?Qy(t,v):(t.getSystem().addToWorld(v),Qy(t,v),jn(t.element)&&gb(v)),t.syncComponents()})},Kd=function(t,r){hb(t,r,Du)},hb=function(t,r,o){t.getSystem().addToWorld(r),o(t.element,r.element),jn(t.element)&&gb(r),t.syncComponents()},Rs=function(t){mb(t),xs(t.element),t.getSystem().removeFromWorld(t)},Nl=function(t){var r=so(t.element).bind(function(o){return t.getSystem().getByDom(o).toOptional()});Rs(t),r.each(function(o){o.syncComponents()})},pb=function(t){var r=t.components();Lt(r,Rs),po(t.element),t.syncComponents()},ov=function(t,r){Il(t,r,Du)},ul=function(t,r){Il(t,r,Lf)},Il=function(t,r,o){o(t,r.element);var s=T(r.element);Lt(s,function(v){r.getByDom(v).each(gb)})},qu=function(t){var r=T(t.element);Lt(r,function(o){t.getByDom(o).each(mb)}),xs(t.element)},Lc=function(t,r,o,s){o.get().each(function(p){pb(t)});var v=r.getAttachPoint(t);Kd(v,t);var m=t.getSystem().build(s);return Kd(t,m),o.set(m),m},wg=function(t,r,o,s){var v=Lc(t,r,o,s);return r.onOpen(t,v),v},mf=function(t,r,o,s){return o.get().map(function(){return Lc(t,r,o,s)})},Xd=function(t,r,o,s,v){wS(t,r),wg(t,r,o,s),v(),CS(t,r)},hS=function(t,r,o){o.get().each(function(s){pb(t),Nl(t),r.onClose(t,s),o.clear()})},pS=function(t,r,o){return o.isOpen()},FE=function(t,r,o,s){return pS(t,r,o)&&o.get().exists(function(v){return r.isPartOf(t,v,s)})},LE=function(t,r,o){return o.get()},bS=function(t,r,o,s){oi(t.element,r).fold(function(){Ji(t.element,o)},function(v){hr(t.element,o,v)}),Zn(t.element,r,s)},yS=function(t,r,o){Eo(t.element,o).fold(function(){return la(t.element,r)},function(s){return Zn(t.element,r,s)})},wS=function(t,r,o){var s=r.getAttachPoint(t);Zn(t.element,"position",jo.getMode(s)),bS(t,"visibility",r.cloakVisibilityAttr,"hidden")},HE=function(t){return ba(["top","left","right","bottom"],function(r){return oi(t,r).isSome()})},CS=function(t,r,o){HE(t.element)||la(t.element,"position"),yS(t,"visibility",r.cloakVisibilityAttr)},VE=Object.freeze({__proto__:null,cloak:wS,decloak:CS,open:wg,openWhileCloaked:Xd,close:hS,isOpen:pS,isPartOf:FE,getState:LE,setContent:mf}),SS=function(t,r){return Wa([ut(Oh(),function(o,s){hS(o,t,r)})])},xS=Object.freeze({__proto__:null,events:SS}),tw=[va("onOpen"),va("onClose"),rt("isPartOf"),rt("getAttachPoint"),Se("cloakVisibilityAttr","data-precloak-visibility")],TS=function(){var t=Wo(),r=Z("not-implemented");return Pu({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})},UE=Object.freeze({__proto__:null,init:TS}),Kr=Ii({fields:tw,name:"sandboxing",active:xS,apis:VE,state:UE}),Yd=Z("dismiss.popups"),Cg=Z("reposition.popups"),nw=Z("mouse.released"),WE=qs([Se("isExtraPart",$t),Xs("fireEventInstead",[Se("event",rl())])]),Ms=function(t){var r,o=Ta("Dismissal",WE,t);return r={},r[Yd()]={schema:qs([rt("target")]),onReceive:function(s,v){if(Kr.isOpen(s)){var m=Kr.isPartOf(s,v.target)||o.isExtraPart(s,v.target);m||o.fireEventInstead.fold(function(){return Kr.close(s)},function(p){return oa(s,p.event)})}}},r},jE=qs([Xs("fireEventInstead",[Se("event",Bu())]),Uu("doReposition")]),Jd=function(t){var r,o=Ta("Reposition",jE,t);return r={},r[Cg()]={onReceive:function(s){Kr.isOpen(s)&&o.fireEventInstead.fold(function(){return o.doReposition(s)},function(v){return oa(s,v.event)})}},r},Zv=function(t,r,o){r.store.manager.onLoad(t,r,o)},bb=function(t,r,o){r.store.manager.onUnload(t,r,o)},yb=function(t,r,o,s){r.store.manager.setValue(t,r,o,s)},GE=function(t,r,o){return r.store.manager.getValue(t,r,o)},kS=function(t,r,o){return o},wb=Object.freeze({__proto__:null,onLoad:Zv,onUnload:bb,setValue:yb,getValue:GE,getState:kS}),rw=function(t,r){var o=t.resetOnDom?[dr(function(s,v){Zv(s,t,r)}),wc(function(s,v){bb(s,t,r)})]:[yo(t,r,Zv)];return Wa(o)},Sg=Object.freeze({__proto__:null,events:rw}),Cb=function(){var t=Hn(null),r=function(){return{mode:"memory",value:t.get()}},o=function(){return t.get()===null},s=function(){t.set(null)};return Pu({set:t.set,get:t.get,isNotSet:o,clear:s,readState:r})},qE=function(){var t=ge;return Pu({readState:t})},gf=function(){var t=Hn({}),r=Hn({}),o=function(){return{mode:"dataset",dataByValue:t.get(),dataByText:r.get()}},s=function(){t.set({}),r.set({})},v=function(p){return yn(t.get(),p).orThunk(function(){return yn(r.get(),p)})},m=function(p){var S=t.get(),x=r.get(),E={},M={};Lt(p,function(P){E[P.value]=P,yn(P,"meta").each(function(H){yn(H,"text").each(function(W){M[W]=P})})}),t.set(ve(ve({},S),E)),r.set(ve(ve({},x),M))};return Pu({readState:o,lookup:v,update:m,clear:s})},aw=function(t){return t.store.manager.state(t)},ow=Object.freeze({__proto__:null,memory:Cb,dataset:gf,manual:qE,init:aw}),xg=function(t,r,o,s){var v=r.store;o.update([s]),v.setValue(t,s),r.onSetValue(t,s)},iw=function(t,r,o){var s=r.store,v=s.getDataKey(t);return o.lookup(v).getOrThunk(function(){return s.getFallbackEntry(v)})},Qh=function(t,r,o){var s=r.store;s.initialValue.each(function(v){xg(t,r,o,v)})},ES=function(t,r,o){o.clear()},KE=[fa("initialValue"),rt("getFallbackEntry"),rt("getDataKey"),rt("setValue"),Xa("manager",{setValue:xg,getValue:iw,onLoad:Qh,onUnload:ES,state:gf})],hf=function(t,r,o){return r.store.getValue(t)},Qs=function(t,r,o,s){r.store.setValue(t,s),r.onSetValue(t,s)},Cu=function(t,r,o){r.store.initialValue.each(function(s){r.store.setValue(t,s)})},XE=[rt("getValue"),Se("setValue",ge),fa("initialValue"),Xa("manager",{setValue:Qs,getValue:hf,onLoad:Cu,onUnload:ge,state:hu.init})],uw=function(t,r,o,s){o.set(s),r.onSetValue(t,s)},Tg=function(t,r,o){return o.get()},sw=function(t,r,o){r.store.initialValue.each(function(s){o.isNotSet()&&o.set(s)})},ep=function(t,r,o){o.clear()},cw=[fa("initialValue"),Xa("manager",{setValue:uw,getValue:Tg,onLoad:sw,onUnload:ep,state:Cb})],YE=[ss("store",{mode:"memory"},Nc("mode",{memory:cw,manual:XE,dataset:KE})),va("onSetValue"),Se("resetOnDom",!1)],Ut=Ii({fields:YE,name:"representing",active:Sg,apis:wb,extra:{setValueFrom:function(t,r){var o=Ut.getValue(r);Ut.setValue(t,o)}},state:ow}),$i=function(t,r){return L0(t,{},gt(r,function(o){return Bm(o.name(),"Cannot configure "+o.name()+" for "+t)}).concat([us("dump",Ne)]))},kg=function(t){return t.dump},tu=function(t,r){return ve(ve({},Bt(r)),t.dump)},Hc={field:$i,augment:tu,get:kg},lw="placeholder",tp=hc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Sb=function(t){return Ar(t,"uiType")},xb=function(t,r,o,s){return t.exists(function(v){return v!==o.owner})?tp.single(!0,Z(o)):yn(s,o.name).fold(function(){throw new Error("Unknown placeholder component: "+o.name+`
Known: [`+Qr(s)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(o,null,2))},function(v){return v.replace()})},Tb=function(t,r,o,s){return Sb(o)&&o.uiType===lw?xb(t,r,o,s):tp.single(!1,Z(o))},Qv=function(t,r,o,s){var v=Tb(t,r,o,s);return v.fold(function(m,p){var S=Sb(o)?p(r,o.config,o.validated):p(r),x=yn(S,"components").getOr([]),E=Yr(x,function(M){return Qv(t,r,M,s)});return[ve(ve({},S),{components:E})]},function(m,p){if(Sb(o)){var S=p(r,o.config,o.validated),x=o.validated.preprocess.getOr(Ne);return x(S)}else return p(r)})},np=function(t,r,o,s){return Yr(o,function(v){return Qv(t,r,v,s)})},fw=function(t,r){var o=!1,s=function(){return o},v=function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+t);return o=!0,r},m=function(){return r.fold(function(p,S){return p},function(p,S){return p})};return{name:Z(t),required:m,used:s,replace:v}},vw=function(t,r,o,s){var v=Pr(s,function(p,S){return fw(S,p)}),m=np(t,r,o,v);return na(v,function(p){if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),m},dw=tp.single,JE=tp.multiple,OS=Z(lw),iv=hc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),pf=Se("factory",{sketch:Ne}),Zd=Se("schema",[]),Eg=rt("name"),mw=Ri("pname","pname",jr(function(t){return"<alloy."+gn(t.name)+">"}),Zc()),kb=us("schema",function(){return[fa("preprocess")]}),bf=Se("defaults",Z({})),sl=Se("overrides",Z({})),ed=In([pf,Zd,Eg,mw,bf,sl]),td=In([pf,Zd,Eg,bf,sl]),Qd=In([pf,Zd,Eg,mw,bf,sl]),Og=In([pf,kb,Eg,rt("unit"),mw,bf,sl]),gw=function(t){return t.fold(R.some,R.none,R.some,R.some)},hw=function(t){var r=function(o){return o.name};return t.fold(r,r,r,r)},pw=function(t){return t.fold(Ne,Ne,Ne,Ne)},Eb=function(t,r){return function(o){var s=Ta("Converting part type",r,o);return t(s)}},Su=Eb(iv.required,ed),kc=Eb(iv.external,td),Vc=Eb(iv.optional,Qd),yf=Eb(iv.group,Og),Ag=Z("entirety"),Ob=Object.freeze({__proto__:null,required:Su,external:kc,optional:Vc,group:yf,asNamedPart:gw,name:hw,asCommon:pw,original:Ag}),nd=function(t,r,o,s){return Xe(r.defaults(t,o,s),o,{uid:t.partUids[r.name]},r.overrides(t,o,s))},em=function(t,r,o){var s={},v={};return Lt(o,function(m){m.fold(function(p){s[p.pname]=dw(!0,function(S,x,E){return p.factory.sketch(nd(S,p,x,E))})},function(p){var S=r.parts[p.name];v[p.name]=Z(p.factory.sketch(nd(r,p,S[Ag()]),S))},function(p){s[p.pname]=dw(!1,function(S,x,E){return p.factory.sketch(nd(S,p,x,E))})},function(p){s[p.pname]=JE(!0,function(S,x,E){var M=S[p.name];return gt(M,function(P){return p.factory.sketch(Xe(p.defaults(S,P,E),P,p.overrides(S,P)))})})})}),{internals:Z(s),externals:Z(v)}},tm=function(t,r){var o={};return Lt(r,function(s){gw(s).each(function(v){var m=ZE(t,v.pname);o[v.name]=function(p){var S=Ta("Part: "+v.name+" in "+t,In(v.schema),p);return ve(ve({},m),{config:p,validated:S})}})}),o},ZE=function(t,r){return{uiType:OS(),owner:t,name:r}},bw=function(t,r,o){return{uiType:OS(),owner:t,name:r,config:o,validated:{}}},AS=function(t){return Yr(t,function(r){return r.fold(R.none,R.some,R.none,R.none).map(function(o){return Ql(o.name,o.schema.concat([Wv(Ag())]))}).toArray()})},DS=function(t){return gt(t,hw)},yw=function(t,r,o){return em(t,r,o)},ww=function(t,r,o){return vw(R.some(t),r,r.components,o)},Fa=function(t,r,o){var s=r.partUids[o];return t.getSystem().getByUid(s).toOptional()},wf=function(t,r,o){return Fa(t,r,o).getOrDie("Could not find part: "+o)},_S=function(t,r,o){var s={},v=r.partUids,m=t.getSystem();return Lt(o,function(p){s[p]=Z(m.getByUid(v[p]))}),s},RS=function(t,r){var o=t.getSystem();return Pr(r.partUids,function(s,v){return Z(o.getByUid(s))})},MS=function(t){return Qr(t.partUids)},Ab=function(t,r,o){var s={},v=r.partUids,m=t.getSystem();return Lt(o,function(p){s[p]=Z(m.getByUid(v[p]).getOrDie())}),s},Cw=function(t,r){var o=DS(r);return Xf(gt(o,function(s){return{key:s,value:t+"-"+s}}))},rp=function(t){return Ri("partUids","partUids",du(function(r){return Cw(r.uid,t)}),Zc())},Jn=Object.freeze({__proto__:null,generate:tm,generateOne:bw,schemas:AS,names:DS,substitutes:yw,components:ww,defaultUids:Cw,defaultUidsSchema:rp,getAllParts:RS,getAllPartNames:MS,getPart:Fa,getPartOrDie:wf,getParts:_S,getPartsOrDie:Ab}),QE=function(t,r){var o=t.length>0?[Ql("parts",t)]:[];return o.concat([rt("uid"),Se("dom",{}),Se("components",[]),Wv("originalSpec"),Se("debug.sketcher",{})]).concat(r)},Sw=function(t,r,o,s,v){var m=QE(s,v);return Ta(t+" [SpecSchema]",qs(m.concat(r)),o)},BS=function(t,r,o,s){var v=PS(s),m=Sw(t,r,v,[],[]);return o(m,v)},xw=function(t,r,o,s,v){var m=PS(v),p=AS(o),S=rp(o),x=Sw(t,r,m,p,[S]),E=yw(t,x,o),M=ww(t,x,E.internals());return s(x,M,m,E.externals())},eO=function(t){return Ar(t,"uid")},PS=function(t){return eO(t)?t:ve(ve({},t),{uid:$v("uid")})},Tw=function(t){return t.uid!==void 0},kw=qs([rt("name"),rt("factory"),rt("configFields"),Se("apis",{}),Se("extraApis",{})]),tO=qs([rt("name"),rt("factory"),rt("configFields"),rt("partFields"),Se("apis",{}),Se("extraApis",{})]),Ec=function(t){var r=Ta("Sketcher for "+t.name,kw,t),o=function(m){return BS(r.name,r.configFields,r.factory,m)},s=Pr(r.apis,Ao),v=Pr(r.extraApis,function(m,p){return _d(m,p)});return ve(ve({name:r.name,configFields:r.configFields,sketch:o},s),v)},hs=function(t){var r=Ta("Sketcher for "+t.name,tO,t),o=function(p){return xw(r.name,r.configFields,r.partFields,r.factory,p)},s=tm(r.name,r.partFields),v=Pr(r.apis,Ao),m=Pr(r.extraApis,function(p,S){return _d(p,S)});return ve(ve({name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:o,parts:s},v),m)},Cf=function(t){return Kn(t)==="input"&&co(t,"type")!=="radio"||Kn(t)==="textarea"},nO=function(t,r,o){return r.find(t)},rO=Object.freeze({__proto__:null,getCurrent:nO}),Ew=[rt("find")],Fr=Ii({fields:Ew,name:"composing",apis:rO}),aO=["input","button","textarea","select"],Db=function(t,r,o){var s=r.disabled()?Ow:rd;s(t,r)},_b=function(t,r){return r.useNative===!0&&nr(aO,Kn(t.element))},Rb=function(t){return t1(t.element,"disabled")},ap=function(t){hr(t.element,"disabled","disabled")},uv=function(t){Ji(t.element,"disabled")},op=function(t){return co(t.element,"aria-disabled")==="true"},oO=function(t){hr(t.element,"aria-disabled","true")},NS=function(t){hr(t.element,"aria-disabled","false")},Ow=function(t,r,o){r.disableClass.each(function(v){Mi(t.element,v)});var s=_b(t,r)?ap:oO;s(t),r.onDisabled(t)},rd=function(t,r,o){r.disableClass.each(function(v){yi(t.element,v)});var s=_b(t,r)?uv:NS;s(t),r.onEnabled(t)},Mb=function(t,r){return _b(t,r)?Rb(t):op(t)},IS=function(t,r,o,s){var v=s?Ow:rd;v(t,r)},iO=Object.freeze({__proto__:null,enable:rd,disable:Ow,isDisabled:Mb,onLoad:Db,set:IS}),uO=function(t,r){return ol({classes:r.disabled()?r.disableClass.toArray():[]})},sO=function(t,r){return Wa([ey(pc(),function(o,s){return Mb(o,t)}),yo(t,r,Db)])},nm=Object.freeze({__proto__:null,exhibit:uO,events:sO}),Aw=[Qa("disabled",$t),Se("useNative",!0),fa("disableClass"),va("onDisabled"),va("onEnabled")],Ln=Ii({fields:Aw,name:"disabling",active:nm,apis:iO}),$S=function(t,r,o,s){var v=Gu(t.element,"."+r.highlightClass);Lt(v,function(m){ba(s,function(p){return p.element===m})||(yi(m,r.highlightClass),t.getSystem().getByDom(m).each(function(p){r.onDehighlight(t,p),oa(p,m1())}))})},zS=function(t,r,o){return $S(t,r,o,[])},cO=function(t,r,o,s){Dw(t,r,o,s)&&(yi(s.element,r.highlightClass),r.onDehighlight(t,s),oa(s,m1()))},ip=function(t,r,o,s){$S(t,r,o,[s]),Dw(t,r,o,s)||(Mi(s.element,r.highlightClass),r.onHighlight(t,s),oa(s,Q0()))},Ku=function(t,r,o){Rw(t,r).each(function(s){ip(t,r,o,s)})},up=function(t,r,o){Mw(t,r).each(function(s){ip(t,r,o,s)})},lO=function(t,r,o,s){LS(t,r,o,s).fold(function(v){throw v},function(v){ip(t,r,o,v)})},FS=function(t,r,o,s){var v=HS(t,r),m=lr(v,s);m.each(function(p){ip(t,r,o,p)})},Dw=function(t,r,o,s){return ls(s.element,r.highlightClass)},_w=function(t,r,o){return Bi(t.element,"."+r.highlightClass).bind(function(s){return t.getSystem().getByDom(s).toOptional()})},LS=function(t,r,o,s){var v=Gu(t.element,"."+r.itemClass);return R.from(v[s]).fold(function(){return pr.error(new Error("No element found with index "+s))},t.getSystem().getByDom)},Rw=function(t,r,o){return Bi(t.element,"."+r.itemClass).bind(function(s){return t.getSystem().getByDom(s).toOptional()})},Mw=function(t,r,o){var s=Gu(t.element,"."+r.itemClass),v=s.length>0?R.some(s[s.length-1]):R.none();return v.bind(function(m){return t.getSystem().getByDom(m).toOptional()})},sv=function(t,r,o,s){var v=Gu(t.element,"."+r.itemClass),m=Ra(v,function(p){return ls(p,r.highlightClass)});return m.bind(function(p){var S=bu(p,s,0,v.length-1);return t.getSystem().getByDom(v[S]).toOptional()})},fO=function(t,r,o){return sv(t,r,o,-1)},vO=function(t,r,o){return sv(t,r,o,1)},HS=function(t,r,o){var s=Gu(t.element,"."+r.itemClass);return Ir(gt(s,function(v){return t.getSystem().getByDom(v).toOptional()}))},dO=Object.freeze({__proto__:null,dehighlightAll:zS,dehighlight:cO,highlight:ip,highlightFirst:Ku,highlightLast:up,highlightAt:lO,highlightBy:FS,isHighlighted:Dw,getHighlighted:_w,getFirst:Rw,getLast:Mw,getPrevious:fO,getNext:vO,getCandidates:HS}),sp=[rt("highlightClass"),rt("itemClass"),va("onHighlight"),va("onDehighlight")],ha=Ii({fields:sp,name:"highlighting",apis:dO}),Bb=[8],cv=[9],cl=[13],ad=[27],Bs=[32],Pb=[37],rm=[38],Dg=[39],od=[40],mO=function(t,r,o){var s=Nn(t.slice(0,r)),v=Nn(t.slice(r+1));return lr(s.concat(v),o)},VS=function(t,r,o){var s=Nn(t.slice(0,r));return lr(s,o)},gO=function(t,r,o){var s=t.slice(0,r),v=t.slice(r+1);return lr(v.concat(s),o)},hO=function(t,r,o){var s=t.slice(r+1);return lr(s,o)},Rr=function(t){return function(r){var o=r.raw;return nr(t,o.which)}},ll=function(t){return function(r){return ta(t,function(o){return o(r)})}},_g=function(t){var r=t.raw;return r.shiftKey===!0},US=function(t){var r=t.raw;return r.ctrlKey===!0},cp=Kt(_g),Xr=function(t,r){return{matches:t,classification:r}},WS=function(t,r){var o=lr(t,function(s){return s.matches(r)});return o.map(function(s){return s.classification})},jS=function(t,r,o){var s=r.exists(function(v){return o.exists(function(m){return qr(m,v)})});s||Vn(t,d1(),{prevFocus:r,newFocus:o})},lp=function(){var t=function(o){return Rl(o.element)},r=function(o,s){var v=t(o);o.getSystem().triggerFocus(s,o.element);var m=t(o);jS(o,v,m)};return{get:t,set:r}},GS=function(){var t=function(o){return ha.getHighlighted(o).map(function(s){return s.element})},r=function(o,s){var v=t(o);o.getSystem().getByDom(s).fold(ge,function(p){ha.highlight(o,p)});var m=t(o);jS(o,v,m)};return{get:t,set:r}},fp;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(fp||(fp={}));var am=function(t,r,o,s,v){var m=function(){return t.concat([Se("focusManager",lp()),ss("focusInside","onFocus",Mm(function(E){return nr(["onFocus","onEnterOrSpace","onApi"],E)?pr.value(E):pr.error("Invalid value for focusInside")})),Xa("handler",x),Xa("state",r),Xa("sendFocusIn",v)])},p=function(E,M,P,H,W){var K=P(E,M,H,W);return WS(K,M.event).bind(function(ue){return ue(E,M,H,W)})},S=function(E,M){var P=E.focusInside!==fp.OnFocusMode?R.none():v(E).map(function(K){return ut(_v(),function(ue,be){K(ue,E,M),be.stop()})}),H=function(K,ue){var be=Rr(Bs.concat(cl))(ue.event);E.focusInside===fp.OnEnterOrSpaceMode&&be&&wC(K,ue)&&v(E).each(function(ae){ae(K,E,M),ue.stop()})},W=[ut(c1(),function(K,ue){p(K,ue,o,E,M).fold(function(){H(K,ue)},function(be){ue.stop()})}),ut(q0(),function(K,ue){p(K,ue,s,E,M).each(function(be){ue.stop()})})];return Wa(P.toArray().concat(W))},x={schema:m,processKey:p,toEvents:S};return x},Bw=function(t){var r=[fa("onEscape"),fa("onEnter"),Se("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Se("firstTabstop",0),Se("useTabstopAt",We),fa("visibilitySelector")].concat([t]),o=function(ue,be){var ae=ue.visibilitySelector.bind(function(we){return Fc(be,we)}).getOr(be);return pi(ae)>0},s=function(ue,be){var ae=Gu(ue.element,be.selector),we=Nt(ae,function(Le){return o(be,Le)});return R.from(we[be.firstTabstop])},v=function(ue,be){return be.focusManager.get(ue).bind(function(ae){return Fc(ae,be.selector)})},m=function(ue,be){return o(ue,be)&&ue.useTabstopAt(be)},p=function(ue,be,ae){s(ue,be).each(function(we){be.focusManager.set(ue,we)})},S=function(ue,be,ae,we,Le){return Le(be,ae,function(Fe){return m(we,Fe)}).fold(function(){return we.cyclic?R.some(!0):R.none()},function(Fe){return we.focusManager.set(ue,Fe),R.some(!0)})},x=function(ue,be,ae,we){var Le=Gu(ue.element,ae.selector);return v(ue,ae).bind(function(Fe){var ye=Ra(Le,Vt(qr,Fe));return ye.bind(function(Be){return S(ue,Le,Be,ae,we)})})},E=function(ue,be,ae){var we=ae.cyclic?mO:VS;return x(ue,be,ae,we)},M=function(ue,be,ae){var we=ae.cyclic?gO:hO;return x(ue,be,ae,we)},P=function(ue,be,ae){return ae.onEnter.bind(function(we){return we(ue,be)})},H=function(ue,be,ae){return ae.onEscape.bind(function(we){return we(ue,be)})},W=Z([Xr(ll([_g,Rr(cv)]),E),Xr(Rr(cv),M),Xr(Rr(ad),H),Xr(ll([cp,Rr(cl)]),P)]),K=Z([]);return am(r,hu.init,W,K,function(){return R.some(p)})},Pw=Bw(us("cyclic",$t)),qS=Bw(us("cyclic",We)),KS=function(t,r,o){return g1(t,o,pc()),R.some(!0)},id=function(t,r,o){var s=Cf(o)&&Rr(Bs)(r.event);return s?R.none():KS(t,r,o)},om=function(t,r){return R.some(!0)},Nw=[Se("execute",id),Se("useSpace",!1),Se("useEnter",!0),Se("useControlEnter",!1),Se("useDown",!1)],XS=function(t,r,o){return o.execute(t,r,t.element)},Nb=function(t,r,o,s){var v=o.useSpace&&!Cf(t.element)?Bs:[],m=o.useEnter?cl:[],p=o.useDown?od:[],S=v.concat(m).concat(p);return[Xr(Rr(S),XS)].concat(o.useControlEnter?[Xr(ll([US,Rr(cl)]),XS)]:[])},pO=function(t,r,o,s){return o.useSpace&&!Cf(t.element)?[Xr(Rr(Bs),om)]:[]},Rg=am(Nw,hu.init,Nb,pO,function(){return R.none()}),Iw=function(){var t=Wo(),r=function(v,m){t.set({numRows:v,numColumns:m})},o=function(){return t.get().map(function(v){return v.numRows})},s=function(){return t.get().map(function(v){return v.numColumns})};return Pu({readState:function(){return t.get().map(function(v){return{numRows:String(v.numRows),numColumns:String(v.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:r,getNumRows:o,getNumColumns:s})},$w=function(t){return t.state(t)},YS=Object.freeze({__proto__:null,flatgrid:Iw,init:$w}),zw=function(t){return function(r,o,s,v){var m=t(r.element);return Lw(m,r,o,s,v)}},Ib=function(t,r){var o=Iy(t,r);return zw(o)},$b=function(t,r){var o=Iy(r,t);return zw(o)},Fw=function(t){return function(r,o,s,v){return Lw(t,r,o,s,v)}},Lw=function(t,r,o,s,v){var m=s.focusManager.get(r).bind(function(p){return t(r.element,p,s,v)});return m.map(function(p){return s.focusManager.set(r,p),!0})},JS=Fw,im=Fw,Mg=Fw,ZS=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},QS=function(t){return!ZS(t.dom)},zb=function(t,r){return Ra(t,r).map(function(o){return{index:o,candidates:t}})},ex=function(t,r,o){var s=function(p){return qr(p,r)},v=Gu(t,o),m=Nt(v,QS);return zb(m,s)},tx=function(t,r){return Ra(t,function(o){return qr(r,o)})},Hw=function(t,r,o,s){var v=Math.floor(r/o),m=r%o;return s(v,m).bind(function(p){var S=p.row*o+p.column;return S>=0&&S<t.length?R.some(t[S]):R.none()})},nx=function(t,r,o,s,v){return Hw(t,r,s,function(m,p){var S=m===o-1,x=S?t.length-m*s:s,E=bu(p,v,0,x-1);return R.some({row:m,column:E})})},rx=function(t,r,o,s,v){return Hw(t,r,s,function(m,p){var S=bu(m,v,0,o-1),x=S===o-1,E=x?t.length-S*s:s,M=Zs(p,0,E-1);return R.some({row:S,column:M})})},ax=function(t,r,o,s){return nx(t,r,o,s,1)},bO=function(t,r,o,s){return nx(t,r,o,s,-1)},ox=function(t,r,o,s){return rx(t,r,o,s,-1)},Vw=function(t,r,o,s){return rx(t,r,o,s,1)},Bg=[rt("selector"),Se("execute",id),Pi("onEscape"),Se("captureTab",!1),N1()],yO=function(t,r,o){Bi(t.element,r.selector).each(function(s){r.focusManager.set(t,s)})},ix=function(t,r){return r.focusManager.get(t).bind(function(o){return Fc(o,r.selector)})},ux=function(t,r,o,s){return ix(t,o).bind(function(v){return o.execute(t,r,v)})},Uc=function(t){return function(r,o,s,v){return ex(r,o,s.selector).bind(function(m){return t(m.candidates,m.index,v.getNumRows().getOr(s.initSize.numRows),v.getNumColumns().getOr(s.initSize.numColumns))})}},sx=function(t,r,o){return o.captureTab?R.some(!0):R.none()},cx=function(t,r,o){return o.onEscape(t,r)},Fb=Uc(bO),Lb=Uc(ax),Uw=Uc(ox),um=Uc(Vw),Pg=Z([Xr(Rr(Pb),Ib(Fb,Lb)),Xr(Rr(Dg),$b(Fb,Lb)),Xr(Rr(rm),JS(Uw)),Xr(Rr(od),im(um)),Xr(ll([_g,Rr(cv)]),sx),Xr(ll([cp,Rr(cv)]),sx),Xr(Rr(ad),cx),Xr(Rr(Bs.concat(cl)),ux)]),lx=Z([Xr(Rr(Bs),om)]),fx=am(Bg,Iw,Pg,lx,function(){return R.some(yO)}),Hb=function(t,r,o,s){var v=function(p){return Kn(p)==="button"&&co(p,"disabled")==="disabled"},m=function(p,S,x){var E=bu(S,s,0,x.length-1);return E===p?R.none():v(x[E])?m(p,E,x):R.from(x[E])};return ex(t,o,r).bind(function(p){var S=p.index,x=p.candidates;return m(S,S,x)})},wO=[rt("selector"),Se("getInitial",R.none),Se("execute",id),Pi("onEscape"),Se("executeOnMove",!1),Se("allowVertical",!0)],Vb=function(t,r){return r.focusManager.get(t).bind(function(o){return Fc(o,r.selector)})},vp=function(t,r,o){return Vb(t,o).bind(function(s){return o.execute(t,r,s)})},Ub=function(t,r,o){r.getInitial(t).orThunk(function(){return Bi(t.element,r.selector)}).each(function(s){r.focusManager.set(t,s)})},vx=function(t,r,o){return Hb(t,o.selector,r,-1)},Wb=function(t,r,o){return Hb(t,o.selector,r,1)},Wc=function(t){return function(r,o,s,v){return t(r,o,s,v).bind(function(){return s.executeOnMove?vp(r,o,s):R.some(!0)})}},CO=function(t,r,o){return o.onEscape(t,r)},jb=function(t,r,o,s){var v=Pb.concat(o.allowVertical?rm:[]),m=Dg.concat(o.allowVertical?od:[]);return[Xr(Rr(v),Wc(Ib(vx,Wb))),Xr(Rr(m),Wc($b(vx,Wb))),Xr(Rr(cl),vp),Xr(Rr(Bs),vp),Xr(Rr(ad),CO)]},dx=Z([Xr(Rr(Bs),om)]),dp=am(wO,hu.init,jb,dx,function(){return R.some(Ub)}),mp=function(t,r,o){return R.from(t[r]).bind(function(s){return R.from(s[o]).map(function(v){return{rowIndex:r,columnIndex:o,cell:v}})})},Ww=function(t,r,o,s){var v=t[r],m=v.length,p=bu(o,s,0,m-1);return mp(t,r,p)},mx=function(t,r,o,s){var v=bu(o,s,0,t.length-1),m=t[v].length,p=Zs(r,0,m-1);return mp(t,v,p)},gx=function(t,r,o,s){var v=t[r],m=v.length,p=Zs(o+s,0,m-1);return mp(t,r,p)},hx=function(t,r,o,s){var v=Zs(o+s,0,t.length-1),m=t[v].length,p=Zs(r,0,m-1);return mp(t,v,p)},Gb=function(t,r,o){return Ww(t,r,o,1)},ud=function(t,r,o){return Ww(t,r,o,-1)},SO=function(t,r,o){return mx(t,o,r,-1)},xO=function(t,r,o){return mx(t,o,r,1)},TO=function(t,r,o){return gx(t,r,o,-1)},sd=function(t,r,o){return gx(t,r,o,1)},kO=function(t,r,o){return hx(t,o,r,-1)},jw=function(t,r,o){return hx(t,o,r,1)},EO=[Ql("selectors",[rt("row"),rt("cell")]),Se("cycles",!0),Se("previousSelector",R.none),Se("execute",id)],Ng=function(t,r,o){var s=r.previousSelector(t).orThunk(function(){var v=r.selectors;return Bi(t.element,v.cell)});s.each(function(v){r.focusManager.set(t,v)})},Gw=function(t,r,o){return Rl(t.element).bind(function(s){return o.execute(t,r,s)})},px=function(t,r){return gt(t,function(o){return Gu(o,r.selectors.cell)})},qb=function(t,r){return function(o,s,v){var m=v.cycles?t:r;return Fc(s,v.selectors.row).bind(function(p){var S=Gu(p,v.selectors.cell);return tx(S,s).bind(function(x){var E=Gu(o,v.selectors.row);return tx(E,p).bind(function(M){var P=px(E,v);return m(P,M,x).map(function(H){return H.cell})})})})}},bx=qb(ud,TO),yx=qb(Gb,sd),OO=qb(SO,kO),Kb=qb(xO,jw),Xb=Z([Xr(Rr(Pb),Ib(bx,yx)),Xr(Rr(Dg),$b(bx,yx)),Xr(Rr(rm),JS(OO)),Xr(Rr(od),im(Kb)),Xr(Rr(Bs.concat(cl)),Gw)]),qw=Z([Xr(Rr(Bs),om)]),wx=am(EO,hu.init,Xb,qw,function(){return R.some(Ng)}),Cx=[rt("selector"),Se("execute",id),Se("moveOnTab",!1)],sm=function(t,r,o){return o.focusManager.get(t).bind(function(s){return o.execute(t,r,s)})},gp=function(t,r,o){Bi(t.element,r.selector).each(function(s){r.focusManager.set(t,s)})},Yb=function(t,r,o){return Hb(t,o.selector,r,-1)},hp=function(t,r,o){return Hb(t,o.selector,r,1)},Sx=function(t,r,o,s){return o.moveOnTab?Mg(Yb)(t,r,o,s):R.none()},lv=function(t,r,o,s){return o.moveOnTab?Mg(hp)(t,r,o,s):R.none()},AO=Z([Xr(Rr(rm),Mg(Yb)),Xr(Rr(od),Mg(hp)),Xr(ll([_g,Rr(cv)]),Sx),Xr(ll([cp,Rr(cv)]),lv),Xr(Rr(cl),sm),Xr(Rr(Bs),sm)]),Sf=Z([Xr(Rr(Bs),om)]),xx=am(Cx,hu.init,AO,Sf,function(){return R.some(gp)}),Jb=[Pi("onSpace"),Pi("onEnter"),Pi("onShiftEnter"),Pi("onLeft"),Pi("onRight"),Pi("onTab"),Pi("onShiftTab"),Pi("onUp"),Pi("onDown"),Pi("onEscape"),Se("stopSpaceKeyup",!1),fa("focusIn")],Kw=function(t,r,o){return[Xr(Rr(Bs),o.onSpace),Xr(ll([cp,Rr(cl)]),o.onEnter),Xr(ll([_g,Rr(cl)]),o.onShiftEnter),Xr(ll([_g,Rr(cv)]),o.onShiftTab),Xr(ll([cp,Rr(cv)]),o.onTab),Xr(Rr(rm),o.onUp),Xr(Rr(od),o.onDown),Xr(Rr(Pb),o.onLeft),Xr(Rr(Dg),o.onRight),Xr(Rr(Bs),o.onSpace),Xr(Rr(ad),o.onEscape)]},DO=function(t,r,o){return o.stopSpaceKeyup?[Xr(Rr(Bs),om)]:[]},cd=am(Jb,hu.init,Kw,DO,function(t){return t.focusIn}),Tx=Pw.schema(),kx=qS.schema(),_O=dp.schema(),Xw=fx.schema(),Ig=wx.schema(),$g=Rg.schema(),Ex=xx.schema(),Yw=cd.schema(),fl=Object.freeze({__proto__:null,acyclic:Tx,cyclic:kx,flow:_O,flatgrid:Xw,matrix:Ig,execution:$g,menu:Ex,special:Yw}),ld=function(t){return wa(t,"setGridSize")},Gn=Hd({branchKey:"mode",branches:fl,name:"keying",active:{events:function(t,r){var o=t.handler;return o.toEvents(t,r)}},apis:{focusIn:function(t,r,o){r.sendFocusIn(r).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(s){s(t,r,o)})},setGridSize:function(t,r,o,s,v){ld(o)?o.setGridSize(s,v):console.error("Layout does not support setGridSize")}},state:YS}),Jw=function(t,r,o,s){WC(function(){var v=gt(s,t.getSystem().build);ew(t,v)},t.element)},xf=function(t,r,o,s){var v=t.getSystem().build(s);hb(t,v,o)},Ox=function(t,r,o,s){xf(t,r,Du,s)},RO=function(t,r,o,s){xf(t,r,Hf,s)},Ax=function(t,r,o,s){var v=pp(t),m=lr(v,function(p){return qr(s.element,p.element)});m.each(Nl)},pp=function(t,r){return t.components()},$l=function(t,r,o,s,v){var m=pp(t);return R.from(m[s]).map(function(p){return Ax(t,r,o,p),v.each(function(S){xf(t,r,function(x,E){wl(x,E,s)},S)}),p})},Zb=function(t,r,o,s,v){var m=pp(t);return Ra(m,s).bind(function(p){return $l(t,r,o,p,v)})},Dx=Object.freeze({__proto__:null,append:Ox,prepend:RO,remove:Ax,replaceAt:$l,replaceBy:Zb,set:Jw,contents:pp}),sr=Ii({fields:[],name:"replacing",apis:Dx}),Zw=function(t,r){var o=Wa(r);return Ii({fields:[rt("enabled")],name:t,active:{events:Z(o)}})},mr=function(t,r){var o=Zw(t,r);return{key:t,value:{config:{},me:o,configAsRaw:Z({}),initialConfig:{},state:hu}}},Qw=function(t,r){r.ignore||(_l(t.element),r.onFocus(t))},_x=function(t,r){r.ignore||Lh(t.element)},Rx=function(t){return Hh(t.element)},zg=Object.freeze({__proto__:null,focus:Qw,blur:_x,isFocused:Rx}),Fg=function(t,r){var o=r.ignore?{}:{attributes:{tabindex:"-1"}};return ol(o)},Lg=function(t){return Wa([ut(_v(),function(r,o){Qw(r,t),o.stop()})].concat(t.stopMousedown?[ut(nl(),function(r,o){o.event.prevent()})]:[]))},Hg=Object.freeze({__proto__:null,exhibit:Fg,events:Lg}),MO=[va("onFocus"),Se("stopMousedown",!1),Se("ignore",!1)],tr=Ii({fields:MO,name:"focusing",active:Hg,apis:zg}),Mx=function(t){var r=function(){var o=Hn(t),s=function(){return o.get()},v=function(S){return o.set(S)},m=function(){return o.set(t)},p=function(){return o.get()};return{get:s,set:v,clear:m,readState:p}};return{init:r}},e2=function(t,r,o){var s=r.aria;s.update(t,s,o.get())},bp=function(t,r,o){r.toggleClass.each(function(s){o.get()?Mi(t.element,s):yi(t.element,s)})},fd=function(t,r,o){t2(t,r,o,!o.get())},Bx=function(t,r,o){o.set(!0),bp(t,r,o),e2(t,r,o)},Qb=function(t,r,o){o.set(!1),bp(t,r,o),e2(t,r,o)},t2=function(t,r,o,s){var v=s?Bx:Qb;v(t,r,o)},BO=function(t,r,o){return o.get()},Px=function(t,r,o){t2(t,r,o,r.selected)},PO=Object.freeze({__proto__:null,onLoad:Px,toggle:fd,isOn:BO,on:Bx,off:Qb,set:t2}),e0=function(){return ol({})},NO=function(t,r){var o=Ld(t,r,fd),s=yo(t,r,Px);return Wa(bn([t.toggleOnExecute?[o]:[],[s]]))},t0=Object.freeze({__proto__:null,exhibit:e0,events:NO}),Nx=function(t,r,o){hr(t.element,"aria-pressed",o),r.syncWithExpanded&&$x(t,r,o)},Ix=function(t,r,o){hr(t.element,"aria-selected",o)},IO=function(t,r,o){hr(t.element,"aria-checked",o)},$x=function(t,r,o){hr(t.element,"aria-expanded",o)},n2=[Se("selected",!1),fa("toggleClass"),Se("toggleOnExecute",!0),ss("aria",{mode:"none"},Nc("mode",{pressed:[Se("syncWithExpanded",!1),Xa("update",Nx)],checked:[Xa("update",IO)],expanded:[Xa("update",$x)],selected:[Xa("update",Ix)],none:[Xa("update",ge)]}))],Jr=Ii({fields:n2,name:"toggling",active:t0,apis:PO,state:Mx(!1)}),zx=function(){var t=function(r,o){o.stop(),yc(r)};return[ut(zm(),t),ut(Rv(),t),Ad(nf()),Ad(nl())]},n0=function(t){var r=function(o){return Js(function(s,v){o(s),v.stop()})};return Wa(bn([t.map(r).toArray(),zx()]))},r2="alloy.item-hover",Fx="alloy.item-focus",a2=function(t){(Rl(t.element).isNone()||tr.isFocused(t))&&(tr.isFocused(t)||tr.focus(t),Vn(t,r2,{item:t}))},yp=function(t){Vn(t,Fx,{item:t})},r0=Z(r2),u=Z(Fx),l=function(t){return{dom:t.dom,domModification:ve(ve({},t.domModification),{attributes:ve(ve(ve({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Hc.augment(t.itemBehaviours,[t.toggling.fold(Jr.revoke,function(r){return Jr.config(ve({aria:{mode:"checked"}},r))}),tr.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(r){yp(r)}}),Gn.config({mode:"execution"}),Ut.config({store:{mode:"memory",initialValue:t.data}}),mr("item-type-events",Pn(Pn([],zx(),!0),[ut(Yf(),a2),ut(kd(),tr.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}},d=[rt("data"),rt("components"),rt("dom"),Se("hasSubmenu",!1),fa("toggling"),Hc.field("itemBehaviours",[Jr,tr,Gn,Ut]),Se("ignoreFocus",!1),Se("domModification",{}),Xa("builder",l),Se("eventOrder",{})],h=function(t){return{dom:t.dom,components:t.components,events:Wa([Hm(kd())])}},y=[rt("dom"),rt("components"),Xa("builder",h)],k=Z("item-widget"),_=Z([Su({name:"widget",overrides:function(t){return{behaviours:Bt([Ut.config({store:{mode:"manual",getValue:function(r){return t.data},setValue:ge}})])}}})]),N=function(t){var r=yw(k(),t,_()),o=ww(k(),t,r.internals()),s=function(m){return Fa(m,t,"widget").map(function(p){return Gn.focusIn(p),p})},v=function(m,p){return Cf(p.event.target)?R.none():function(){return t.autofocus&&p.setSource(m.element),R.none()}()};return{dom:t.dom,components:o,domModification:t.domModification,events:Wa([Js(function(m,p){s(m).each(function(S){p.stop()})}),ut(Yf(),a2),ut(kd(),function(m,p){t.autofocus?s(m):tr.focus(m)})]),behaviours:Hc.augment(t.widgetBehaviours,[Ut.config({store:{mode:"memory",initialValue:t.data}}),tr.config({ignore:t.ignoreFocus,onFocus:function(m){yp(m)}}),Gn.config({mode:"special",focusIn:t.autofocus?function(m){s(m)}:UC(),onLeft:v,onRight:v,onEscape:function(m,p){return!tr.isFocused(m)&&!t.autofocus?(tr.focus(m),R.some(!0)):(t.autofocus&&p.setSource(m.element),R.none())}})])}},j=[rt("uid"),rt("data"),rt("components"),rt("dom"),Se("autofocus",!1),Se("ignoreFocus",!1),Hc.field("widgetBehaviours",[Ut,tr,Gn]),Se("domModification",{}),rp(_()),Xa("builder",N)],re=Nc("type",{widget:j,item:d,separator:y}),he=function(t,r){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}},Ge=function(t,r){return{mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}},yt=function(t,r){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}},at=Z([yf({factory:{sketch:function(t){var r=Ta("menu.spec item",re,t);return r.builder(r)}},name:"items",unit:"item",defaults:function(t,r){return Ar(r,"uid")?r:ve(ve({},r),{uid:$v("item")})},overrides:function(t,r){return{type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),qe=Z([rt("value"),rt("items"),rt("dom"),rt("components"),Se("eventOrder",{}),$i("menuBehaviours",[ha,Ut,Fr,Gn]),ss("movement",{mode:"menu",moveOnTab:!0},Nc("mode",{grid:[N1(),Xa("config",he)],matrix:[Xa("config",Ge),rt("rowSelector")],menu:[Se("moveOnTab",!0),Xa("config",yt)]})),Zk(),Se("fakeFocus",!1),Se("focusManager",lp()),va("onHighlight")]),Dt=Z("alloy.menu-focus"),It=function(t,r,o,s){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:tu(t.menuBehaviours,[ha.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Ut.config({store:{mode:"memory",initialValue:t.value}}),Fr.config({find:R.some}),Gn.config(t.movement.config(t,t.movement))]),events:Wa([ut(u(),function(v,m){var p=m.event;v.getSystem().getByDom(p.target).each(function(S){ha.highlight(v,S),m.stop(),Vn(v,Dt(),{menu:v,item:S})})}),ut(r0(),function(v,m){var p=m.event.item;ha.highlight(v,p)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}},_n=hs({name:"Menu",configFields:qe(),partFields:at(),factory:It}),ia=function(t){return Ie(t,function(r,o){return{k:r,v:o}})},An=function(t,r,o,s){return yn(o,s).bind(function(v){return yn(t,v).bind(function(m){var p=An(t,r,o,m);return R.some([m].concat(p))})}).getOr([])},ar=function(t,r){var o={};na(t,function(p,S){Lt(p,function(x){o[x]=S})});var s=r,v=ia(r),m=Pr(v,function(p,S){return[S].concat(An(o,s,v,S))});return Pr(o,function(p){return yn(m,p).getOr([p])})},Lr=function(){var t=Hn({}),r=Hn({}),o=Hn({}),s=Wo(),v=Hn({}),m=function(){t.set({}),r.set({}),o.set({}),s.clear()},p=function(){return s.get().isNone()},S=function(ye,Be){var Qe;r.set(ve(ve({},r.get()),(Qe={},Qe[ye]={type:"prepared",menu:Be},Qe)))},x=function(ye,Be,Qe,Wt){s.set(ye),t.set(Qe),r.set(Be),v.set(Wt);var it=ar(Wt,Qe);o.set(it)},E=function(ye){return Nr(t.get(),function(Be,Qe){return Be===ye})},M=function(ye,Be,Qe){return ue(ye).bind(function(Wt){return E(ye).bind(function(it){return Be(it).map(function(Jt){return{triggeredMenu:Wt,triggeringItem:Jt,triggeringPath:Qe}})})})},P=function(ye,Be){var Qe=Nt(ae(ye).toArray(),function(Wt){return ue(Wt).isSome()});return yn(o.get(),ye).bind(function(Wt){var it=Nn(Qe.concat(Wt)),Jt=Yr(it,function(ct,Je){return M(ct,Be,it.slice(0,Je+1)).fold(function(){return Mo(s.get(),ct)?[]:[R.none()]},function(At){return[R.some(At)]})});return fr(Jt)})},H=function(ye){return yn(t.get(),ye).map(function(Be){var Qe=yn(o.get(),ye).getOr([]);return[Be].concat(Qe)})},W=function(ye){return yn(o.get(),ye).bind(function(Be){return Be.length>1?R.some(Be.slice(1)):R.none()})},K=function(ye){return yn(o.get(),ye)},ue=function(ye){return be(ye).bind(Mr)},be=function(ye){return yn(r.get(),ye)},ae=function(ye){return yn(t.get(),ye)},we=function(ye){var Be=v.get();return ya(Qr(Be),ye)},Le=function(){return s.get().bind(ue)},Fe=function(){return r.get()};return{setMenuBuilt:S,setContents:x,expand:H,refresh:K,collapse:W,lookupMenu:be,lookupItem:ae,otherMenus:we,getPrimary:Le,getMenus:Fe,clear:m,isClear:p,getTriggeringPath:P}},Mr=function(t){return t.type==="prepared"?R.some(t.menu):R.none()},ei={init:Lr,extractPreparedMenu:Mr},nu=function(t,r){var o=Wo(),s=function(ot,cn,On){return Pr(On,function(Wr,xa){var oo=function(){return _n.sketch(ve(ve({},Wr),{value:xa,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?GS():lp()}))};return xa===cn?{type:"prepared",menu:ot.getSystem().build(oo())}:{type:"notbuilt",nbMenu:oo}})},v=ei.init(),m=function(ot){var cn=s(ot,t.data.primary,t.data.menus),On=x();return v.setContents(t.data.primary,cn,t.data.expansions,On),v.getPrimary()},p=function(ot){return Ut.getValue(ot).value},S=function(ot,cn,On){return ra(cn,function(Wr){if(!Wr.getSystem().isConnected())return R.none();var xa=ha.getCandidates(Wr);return lr(xa,function(oo){return p(oo)===On})})},x=function(ot){return Pr(t.data.menus,function(cn,On){return Yr(cn.items,function(Wr){return Wr.type==="separator"?[]:[Wr.data.value]})})},E=function(ot,cn){ha.highlight(ot,cn),ha.getHighlighted(cn).orThunk(function(){return ha.getFirst(cn)}).each(function(On){g1(ot,On.element,kd())})},M=function(ot,cn){return Ir(gt(cn,function(On){return ot.lookupMenu(On).bind(function(Wr){return Wr.type==="prepared"?R.some(Wr.menu):R.none()})}))},P=function(ot,cn,On){var Wr=M(cn,cn.otherMenus(On));Lt(Wr,function(xa){xc(xa.element,[t.markers.backgroundMenu]),t.stayInDom||sr.remove(ot,xa)})},H=function(ot){return o.get().getOrThunk(function(){var cn={},On=Gu(ot.element,"."+t.markers.item),Wr=Nt(On,function(xa){return co(xa,"aria-haspopup")==="true"});return Lt(Wr,function(xa){ot.getSystem().getByDom(xa).each(function(oo){var Fo=p(oo);cn[Fo]=oo})}),o.set(cn),cn})},W=function(ot,cn){var On=H(ot);na(On,function(Wr,xa){var oo=nr(cn,xa);hr(Wr.element,"aria-expanded",oo)})},K=function(ot,cn,On){return R.from(On[0]).bind(function(Wr){return cn.lookupMenu(Wr).bind(function(xa){if(xa.type==="notbuilt")return R.none();var oo=xa.menu,Fo=M(cn,On.slice(1));return Lt(Fo,function(qc){Mi(qc.element,t.markers.backgroundMenu)}),jn(oo.element)||sr.append(ot,Tc(oo)),xc(oo.element,[t.markers.backgroundMenu]),E(ot,oo),P(ot,cn,On),R.some(oo)})})},ue;(function(ot){ot[ot.HighlightSubmenu=0]="HighlightSubmenu",ot[ot.HighlightParent=1]="HighlightParent"})(ue||(ue={}));var be=function(ot,cn,On){if(On.type==="notbuilt"){var Wr=ot.getSystem().build(On.nbMenu());return v.setMenuBuilt(cn,Wr),Wr}else return On.menu},ae=function(ot,cn,On){if(On===void 0&&(On=ue.HighlightSubmenu),cn.hasConfigured(Ln)&&Ln.isDisabled(cn))return R.some(cn);var Wr=p(cn);return v.expand(Wr).bind(function(xa){return W(ot,xa),R.from(xa[0]).bind(function(oo){return v.lookupMenu(oo).bind(function(Fo){var qc=be(ot,oo,Fo);return jn(qc.element)||sr.append(ot,Tc(qc)),t.onOpenSubmenu(ot,cn,qc,Nn(xa)),On===ue.HighlightSubmenu?(ha.highlightFirst(qc),K(ot,v,xa)):(ha.dehighlightAll(qc),R.some(cn))})})})},we=function(ot,cn){var On=p(cn);return v.collapse(On).bind(function(Wr){return W(ot,Wr),K(ot,v,Wr).map(function(xa){return t.onCollapseMenu(ot,cn,xa),xa})})},Le=function(ot,cn){var On=p(cn);return v.refresh(On).bind(function(Wr){return W(ot,Wr),K(ot,v,Wr)})},Fe=function(ot,cn){return Cf(cn.element)?R.none():ae(ot,cn,ue.HighlightSubmenu)},ye=function(ot,cn){return Cf(cn.element)?R.none():we(ot,cn)},Be=function(ot,cn){return we(ot,cn).orThunk(function(){return t.onEscape(ot,cn).map(function(){return ot})})},Qe=function(ot){return function(cn,On){return Fc(On.getSource(),"."+t.markers.item).bind(function(Wr){return cn.getSystem().getByDom(Wr).toOptional().bind(function(xa){return ot(cn,xa).map(We)})})}},Wt=Wa([ut(Dt(),function(ot,cn){var On=cn.event.item;v.lookupItem(p(On)).each(function(){var Wr=cn.event.menu;ha.highlight(ot,Wr);var xa=p(cn.event.item);v.refresh(xa).each(function(oo){return P(ot,v,oo)})})}),Js(function(ot,cn){var On=cn.event.target;ot.getSystem().getByDom(On).each(function(Wr){var xa=p(Wr);xa.indexOf("collapse-item")===0&&we(ot,Wr),ae(ot,Wr,ue.HighlightSubmenu).fold(function(){t.onExecute(ot,Wr)},ge)})}),dr(function(ot,cn){m(ot).each(function(On){sr.append(ot,Tc(On)),t.onOpenMenu(ot,On),t.highlightImmediately&&E(ot,On)})})].concat(t.navigateOnHover?[ut(r0(),function(ot,cn){var On=cn.event.item;Le(ot,On),ae(ot,On,ue.HighlightParent),t.onHover(ot,On)})]:[])),it=function(ot){return ha.getHighlighted(ot).bind(ha.getHighlighted)},Jt=function(ot){it(ot).each(function(cn){we(ot,cn)})},ct=function(ot){v.getPrimary().each(function(cn){E(ot,cn)})},Je=function(ot){return R.from(ot.components()[0]).filter(function(cn){return co(cn.element,"role")==="menu"})},At=function(ot){var cn=v.getPrimary().bind(function(On){return it(ot).bind(function(Wr){var xa=p(Wr),oo=Ia(v.getMenus()),Fo=Ir(gt(oo,ei.extractPreparedMenu));return v.getTriggeringPath(xa,function(qc){return S(ot,Fo,qc)})}).map(function(Wr){return{primary:On,triggeringPath:Wr}})});cn.fold(function(){Je(ot).each(function(On){t.onRepositionMenu(ot,On,[])})},function(On){var Wr=On.primary,xa=On.triggeringPath;t.onRepositionMenu(ot,Wr,xa)})},hn={collapseMenu:Jt,highlightPrimary:ct,repositionMenus:At};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:tu(t.tmenuBehaviours,[Gn.config({mode:"special",onRight:Qe(Fe),onLeft:Qe(ye),onEscape:Qe(Be),focusIn:function(ot,cn){v.getPrimary().each(function(On){g1(ot,On.element,kd())})}}),ha.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Fr.config({find:function(ot){return ha.getHighlighted(ot)}}),sr.config({})]),eventOrder:t.eventOrder,apis:hn,events:Wt}},ru=Z("collapse-item"),Zr=function(t,r,o){return{primary:t,menus:r,expansions:o}},cr=function(t,r){return{primary:t,menus:ef(t,r),expansions:{}}},Gr=function(t){return{value:gn(ru()),meta:{text:t}}},Na=Ec({name:"TieredMenu",configFields:[As("onExecute"),As("onEscape"),vs("onOpenMenu"),vs("onOpenSubmenu"),va("onRepositionMenu"),va("onCollapseMenu"),Se("highlightImmediately",!0),Ql("data",[rt("primary"),rt("menus"),rt("expansions")]),Se("fakeFocus",!1),va("onHighlight"),va("onHover"),Id(),rt("dom"),Se("navigateOnHover",!0),Se("stayInDom",!1),$i("tmenuBehaviours",[Gn,ha,Fr,sr]),Se("eventOrder",{})],apis:{collapseMenu:function(t,r){t.collapseMenu(r)},highlightPrimary:function(t,r){t.highlightPrimary(r)},repositionMenus:function(t,r){t.repositionMenus(r)}},factory:nu,extraApis:{tieredData:Zr,singleData:cr,collapseItem:Gr}}),$o=function(t,r,o,s,v){var m=function(){return t.lazySink(r)},p=s.type==="horizontal"?{layouts:{onLtr:function(){return U1()},onRtl:function(){return W1()}}}:{},S=function(E){return E.length===2},x=function(E){return S(E)?p:{}};return Na.sketch({dom:{tag:"div"},data:s.data,markers:s.menu.markers,highlightImmediately:s.menu.highlightImmediately,onEscape:function(){return Kr.close(r),t.onEscape.map(function(E){return E(r)}),R.some(!0)},onExecute:function(){return R.some(!0)},onOpenMenu:function(E,M){jo.positionWithinBounds(m().getOrDie(),M,o,v())},onOpenSubmenu:function(E,M,P,H){var W=m().getOrDie();jo.position(W,P,{anchor:ve({type:"submenu",item:M},x(H))})},onRepositionMenu:function(E,M,P){var H=m().getOrDie();jo.positionWithinBounds(H,M,o,v()),Lt(P,function(W){var K=x(W.triggeringPath);jo.position(H,W.triggeredMenu,{anchor:ve({type:"submenu",item:W.triggeringItem},K)})})}})},fv=function(t,r){var o=function(W,K){var ue=t.getRelated(W);return ue.exists(function(be){return Nd(be,K)})},s=function(W,K){Kr.setContent(W,K)},v=function(W,K,ue){m(W,K,ue,R.none())},m=function(W,K,ue,be){p(W,K,ue,function(){return be.map(function(ae){return ii(ae)})})},p=function(W,K,ue,be){var ae=t.lazySink(W).getOrDie();Kr.openWhileCloaked(W,K,function(){return jo.positionWithinBounds(ae,W,ue,be())}),Ut.setValue(W,R.some({mode:"position",config:ue,getBounds:be}))},S=function(W,K,ue){x(W,K,ue,R.none)},x=function(W,K,ue,be){var ae=$o(t,W,K,ue,be);Kr.open(W,ae),Ut.setValue(W,R.some({mode:"menu",menu:ae}))},E=function(W){Kr.isOpen(W)&&(Ut.setValue(W,R.none()),Kr.close(W))},M=function(W){return Kr.getState(W)},P=function(W){Kr.isOpen(W)&&Ut.getValue(W).each(function(K){switch(K.mode){case"menu":Kr.getState(W).each(Na.repositionMenus);break;case"position":var ue=t.lazySink(W).getOrDie();jo.positionWithinBounds(ue,W,K.config,K.getBounds());break}})},H={setContent:s,showAt:v,showWithin:m,showWithinBounds:p,showMenuAt:S,showMenuWithinBounds:x,hide:E,getContent:M,reposition:P,isOpen:Kr.isOpen};return{uid:t.uid,dom:t.dom,behaviours:tu(t.inlineBehaviours,[Kr.config({isPartOf:function(W,K,ue){return Nd(K,ue)||o(W,ue)},getAttachPoint:function(W){return t.lazySink(W).getOrDie()},onOpen:function(W){t.onShow(W)},onClose:function(W){t.onHide(W)}}),Ut.config({store:{mode:"memory",initialValue:R.none()}}),Wu.config({channels:ve(ve({},Ms(ve({isExtraPart:r.isExtraPart},t.fireDismissalEventInstead.map(function(W){return{fireEventInstead:{event:W.event}}}).getOr({})))),Jd(ve(ve({},t.fireRepositionEventInstead.map(function(W){return{fireEventInstead:{event:W.event}}}).getOr({})),{doReposition:P})))})]),eventOrder:t.eventOrder,apis:H}},_a=Ec({name:"InlineView",configFields:[rt("lazySink"),va("onShow"),va("onHide"),Av("onEscape"),$i("inlineBehaviours",[Kr,Ut,Wu]),Xs("fireDismissalEventInstead",[Se("event",rl())]),Xs("fireRepositionEventInstead",[Se("event",Bu())]),Se("getRelated",R.none),Se("isExtraPart",$t),Se("eventOrder",R.none)],factory:fv,apis:{showAt:function(t,r,o,s){t.showAt(r,o,s)},showWithin:function(t,r,o,s,v){t.showWithin(r,o,s,v)},showWithinBounds:function(t,r,o,s,v){t.showWithinBounds(r,o,s,v)},showMenuAt:function(t,r,o,s){t.showMenuAt(r,o,s)},showMenuWithinBounds:function(t,r,o,s,v){t.showMenuWithinBounds(r,o,s,v)},hide:function(t,r){t.hide(r)},isOpen:function(t,r){return t.isOpen(r)},getContent:function(t,r){return t.getContent(r)},setContent:function(t,r,o){t.setContent(r,o)},reposition:function(t,r){t.reposition(r)}}}),ec="layout-inset",au=function(t){return t.x},wp=function(t,r){return t.x+t.width/2-r.width/2},vv=function(t,r){return t.x+t.width-r.width},zl=function(t){return t.y},Oc=function(t,r){return t.y+t.height-r.height},Tf=function(t,r){return t.y+t.height/2-r.height/2},a0=function(t,r,o){return Hi(vv(t,r),Oc(t,r),o.insetSouthwest(),zd(),"southwest",Ni(t,{right:0,bottom:3}),ec)},Vg=function(t,r,o){return Hi(au(t),Oc(t,r),o.insetSoutheast(),hy(),"southeast",Ni(t,{left:1,bottom:3}),ec)},Ug=function(t,r,o){return Hi(vv(t,r),zl(t),o.insetNorthwest(),gy(),"northwest",Ni(t,{right:0,top:2}),ec)},Wg=function(t,r,o){return Hi(au(t),zl(t),o.insetNortheast(),$1(),"northeast",Ni(t,{left:1,top:2}),ec)},Fl=function(t,r,o){return Hi(wp(t,r),zl(t),o.insetNorth(),Nh(),"north",Ni(t,{top:2}),ec)},jg=function(t,r,o){return Hi(wp(t,r),Oc(t,r),o.insetSouth(),py(),"south",Ni(t,{bottom:3}),ec)},Gg=function(t,r,o){return Hi(vv(t,r),Tf(t,r),o.insetEast(),Ym(),"east",Ni(t,{right:0}),ec)},o2=function(t,r,o){return Hi(au(t),Tf(t,r),o.insetWest(),by(),"west",Ni(t,{left:1}),ec)},qg=function(t){switch(t){case"north":return Fl;case"northeast":return Wg;case"northwest":return Ug;case"south":return jg;case"southeast":return Vg;case"southwest":return a0;case"east":return Gg;case"west":return o2}},S3=function(t,r,o,s,v){var m=Ay(s).map(qg).getOr(Fl);return m(t,r,o,s,v)},$O=function(t){switch(t){case"north":return jg;case"northeast":return Vg;case"northwest":return a0;case"south":return Fl;case"southeast":return Wg;case"southwest":return Ug;case"east":return o2;case"west":return Gg}},VB=function(t,r,o,s,v){var m=Ay(s).map($O).getOr(Fl);return m(t,r,o,s,v)},Kg=tinymce.util.Tools.resolve("tinymce.util.Delay"),UB=function(t){var r=n0(t.action),o=t.dom.tag,s=function(m){return yn(t.dom,"attributes").bind(function(p){return yn(p,m)})},v=function(){if(o==="button"){var m=s("type").getOr("button"),p=s("role").map(function(x){return{role:x}}).getOr({});return ve({type:m},p)}else{var S=s("role").getOr("button");return{role:S}}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:Hc.augment(t.buttonBehaviours,[tr.config({}),Gn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:v()},eventOrder:t.eventOrder}},tc=Ec({name:"Button",factory:UB,configFields:[Se("uid",void 0),rt("dom"),Se("components",[]),Hc.field("buttonBehaviours",[tr,Gn]),fa("action"),fa("role"),Se("eventOrder",{})]}),Sa=function(t){var r=Tw(t)&&wa(t,"uid")?t.uid:$v("memento"),o=function(m){return m.getSystem().getByUid(r).getOrDie()},s=function(m){return m.getSystem().getByUid(r).toOptional()},v=function(){return ve(ve({},t),{uid:r})};return{get:o,getOpt:s,asSpec:v}},kf=tinymce.util.Tools.resolve("tinymce.util.I18n"),zO={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},x3="temporary-placeholder",o0=function(t){return function(){return yn(t,x3).getOr("!not found!")}},FO=function(t,r){var o=t.toLowerCase();if(kf.isRtl()){var s=qi(o,"-rtl");return Ar(r,s)?s:o}else return o},T3=function(t,r){return yn(r,FO(t,r))},k3=function(t,r){var o=r();return T3(t,o).getOrThunk(o0(o))},WB=function(t,r,o){var s=r();return T3(t,s).or(o).getOrThunk(o0(s))},jB=function(t){return kf.isRtl()?Ar(zO,t):!1},LO=function(){return mr("add-focusable",[dr(function(t){vy(t.element,"svg").each(function(r){return hr(r,"focusable","false")})})])},HO=function(t,r,o,s){var v,m,p=jB(r)?["tox-icon--flip"]:[],S=yn(o,FO(r,o)).or(s).getOrThunk(o0(o));return{dom:{tag:t.tag,attributes:(v=t.attributes)!==null&&v!==void 0?v:{},classes:t.classes.concat(p),innerHtml:S},behaviours:Bt(Pn(Pn([],(m=t.behaviours)!==null&&m!==void 0?m:[],!0),[LO()],!1))}},dv=function(t,r,o,s){return s===void 0&&(s=R.none()),HO(r,t,o(),s)},GB=function(t,r,o){var s=o(),v=lr(t,function(m){return Ar(s,FO(m,s))});return HO(r,v.getOr(x3),s,R.none())},Lx={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},qB=function(t){var r=Sa({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Bt([sr.config({})])}),o=function(W){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+W+"%"}}}},s=function(W){return{dom:{tag:"div",classes:["tox-text"],innerHtml:W+"%"}}},v=Sa({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},s(0)],behaviours:Bt([sr.config({})])}),m=function(W,K){W.getSystem().isConnected()&&v.getOpt(W).each(function(ue){sr.set(ue,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(K)]},s(K)])})},p=function(W,K){if(W.getSystem().isConnected()){var ue=r.get(W);sr.set(ue,[pu(K)])}},S={updateProgress:m,updateText:p},x=bn([t.icon.toArray(),t.level.toArray(),t.level.bind(function(W){return R.from(Lx[W])}).toArray()]),E=Sa(tc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[dv("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(W){t.onAction(W)}})),M=GB(x,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),P={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Bt([sr.config({})])},H=[M,P];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(W){return["tox-notification","tox-notification--in","tox-notification--"+W]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Bt([tr.config({}),mr("notification-events",[ut(Ic(),function(W){E.getOpt(W).each(tr.focus)})])]),components:H.concat(t.progress?[v.asSpec()]:[]).concat(t.closeButton?[E.asSpec()]:[]),apis:S}},VO=Ec({name:"Notification",factory:qB,configFields:[fa("level"),rt("progress"),rt("icon"),rt("onAction"),rt("text"),rt("iconProvider"),rt("translationProvider"),Ua("closeButton",!0)],apis:{updateProgress:function(t,r,o){t.updateProgress(r,o)},updateText:function(t,r,o){t.updateText(r,o)}}});function UO(t,r,o){var s=r.backstage.shared,v=function(E){switch(E){case"bc-bc":return jg;case"tc-tc":return Fl;case"tc-bc":return Ds;case"bc-tc":default:return wi}},m=function(E){E.length>0&&Lt(E,function(M,P){P===0?M.moveRel(null,"banner"):M.moveRel(E[P-1].getEl(),"bc-tc")})},p=function(E,M){var P=!E.closeButton&&E.timeout&&(E.timeout>0||E.timeout<0),H=function(){M(),_a.hide(K)},W=fo(VO.sketch({text:E.text,level:nr(["success","error","warning","warn","info"],E.type)?E.type:void 0,progress:E.progressBar===!0,icon:R.from(E.icon),closeButton:!P,onAction:H,iconProvider:s.providers.icons,translationProvider:s.providers.translate})),K=fo(_a.sketch(ve({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:s.getSink,fireDismissalEventInstead:{}},s.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));o.add(K),E.timeout>0&&Kg.setTimeout(function(){H()},E.timeout);var ue=function(){var be=ii(ie.fromDom(t.getContentAreaContainer())),ae=vu(),we=Zs(ae.x,be.x,be.right),Le=Zs(ae.y,be.y,be.bottom),Fe=Math.max(be.right,ae.right),ye=Math.max(be.bottom,ae.bottom);return R.some(_i(we,Le,Fe-we,ye-Le))};return{close:H,moveTo:function(be,ae){_a.showAt(K,Tc(W),{anchor:{type:"makeshift",x:be,y:ae}})},moveRel:function(be,ae){var we=Tc(W),Le={maxHeightFunction:ag()};if(ae!=="banner"&&Ve(be)){var Fe=v(ae),ye={type:"node",root:Ca(),node:R.some(ie.fromDom(be)),overrides:Le,layouts:{onRtl:function(){return[Fe]},onLtr:function(){return[Fe]}}};_a.showWithinBounds(K,we,{anchor:ye},ue)}else{var Be=ve(ve({},s.anchors.banner()),{overrides:Le});_a.showWithinBounds(K,we,{anchor:Be},ue)}},text:function(be){VO.updateText(W,be)},settings:E,getEl:function(){return W.element.dom},progressBar:{value:function(be){VO.updateProgress(W,be)}}}},S=function(E){E.close()},x=function(E){return E.settings};return{open:p,close:S,reposition:m,getArgs:x}}var KB=function(t,r){var o=null,s=function(){Mn(o)||(clearTimeout(o),o=null)},v=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];Mn(o)&&(o=setTimeout(function(){o=null,t.apply(null,m)},r))};return{cancel:s,throttle:v}},WO=function(t,r){var o=null,s=function(){Mn(o)||(clearTimeout(o),o=null)},v=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];s(),o=setTimeout(function(){o=null,t.apply(null,m)},r)};return{cancel:s,throttle:v}},XB=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),YB=function(t,r){return t.isBlock(r)||nr(["BR","IMG","HR","INPUT"],r.nodeName)||t.getContentEditable(r)==="false"},E3=function(t,r,o,s,v){var m=XB(t,function(p){return YB(t,p)});return R.from(m.backwards(r,o,s,v))},JB="[data-mce-autocompleter]",ZB=function(t,r){return Hx(ie.fromDom(t.selection.getNode())).getOrThunk(function(){var o=ie.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Du(o,ie.fromDom(r.extractContents())),r.insertNode(o.dom),so(o).each(function(s){return s.dom.normalize()}),Gy(o).map(function(s){t.selection.setCursorLocation(s.dom,lS(s))}),o})},Hx=function(t){return Fc(t,JB)},QB=function(t){return t.collapsed&&t.startContainer.nodeType===3},O3=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},A3=function(t){return t!==""&&`  \f
\r	\v`.indexOf(t)!==-1},jO=function(t,r){return t.substring(r.length)},GO=function(t,r,o){var s;for(s=r-1;s>=0;s--){var v=t.charAt(s);if(A3(v))return R.none();if(v===o)break}return R.some(s)},eP=function(t,r,o,s){if(s===void 0&&(s=0),!QB(r))return R.none();var v=function(p,S,x){return GO(x,S,o).getOr(S)},m=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return E3(t,r.startContainer,r.startOffset,v,m).bind(function(p){var S=r.cloneRange();if(S.setStart(p.container,p.offset),S.setEnd(r.endContainer,r.endOffset),S.collapsed)return R.none();var x=O3(S),E=x.lastIndexOf(o);return E!==0||jO(x,o).length<s?R.none():R.some({text:jO(x,o),range:S,triggerChar:o})})},qO=function(t,r,o,s){return s===void 0&&(s=0),Hx(ie.fromDom(r.startContainer)).fold(function(){return eP(t,r,o,s)},function(v){var m=t.createRng();m.selectNode(v.dom);var p=O3(m);return R.some({range:m,text:jO(p,o),triggerChar:o})})},tP=function(t,r){r.on("keypress compositionend",t.onKeypress.throttle),r.on("remove",t.onKeypress.cancel);var o=function(s,v){Vn(s,c1(),{raw:v})};r.on("keydown",function(s){var v=function(){return t.getView().bind(ha.getHighlighted)};s.which===8&&t.onKeypress.throttle(s),t.isActive()&&(s.which===27&&t.cancelIfNecessary(),t.isMenuOpen()?s.which===13?(v().each(yc),s.preventDefault()):s.which===40?(v().fold(function(){t.getView().each(ha.highlightFirst)},function(m){o(m,s)}),s.preventDefault(),s.stopImmediatePropagation()):(s.which===37||s.which===38||s.which===39)&&v().each(function(m){o(m,s),s.preventDefault(),s.stopImmediatePropagation()}):(s.which===13||s.which===38||s.which===40)&&t.cancelIfNecessary())}),r.on("NodeChange",function(s){t.isActive()&&!t.isProcessingAction()&&Hx(ie.fromDom(s.element)).isNone()&&t.cancelIfNecessary()})},D3={setup:tP},i2=tinymce.util.Tools.resolve("tinymce.util.Promise"),KO=function(t,r){return{container:t,offset:r}},nP=function(t){return t.nodeType===Wn},rP=function(t){return t.nodeType===en},_3=function(t){if(nP(t))return KO(t,t.data.length);var r=t.childNodes;return r.length>0?_3(r[r.length-1]):KO(t,r.length)},Vx=function(t,r){var o=t.childNodes;return o.length>0&&r<o.length?Vx(o[r],0):o.length>0&&rP(t)&&o.length===r?_3(o[o.length-1]):KO(t,r)},aP=function(t,r){return E3(t,r.container,r.offset,function(o,s){return s===0?-1:s},t.getRoot()).filter(function(o){var s=o.container.data.charAt(o.offset-1);return!A3(s)}).isSome()},oP=function(t){return function(r){var o=Vx(r.startContainer,r.startOffset);return!aP(t,o)}},iP=function(t,r,o){return ra(o.triggerChars,function(s){return qO(t,r,s)})},uP=function(t,r){var o=r(),s=t.selection.getRng();return iP(t.dom,s,o).bind(function(v){return R3(t,r,v)})},R3=function(t,r,o,s){s===void 0&&(s={});var v=r(),m=t.selection.getRng(),p=m.startContainer.nodeValue,S=Nt(v.lookupByChar(o.triggerChar),function(E){return o.text.length>=E.minChars&&E.matches.getOrThunk(function(){return oP(t.dom)})(o.range,p,o.text)});if(S.length===0)return R.none();var x=i2.all(gt(S,function(E){var M=E.fetch(o.text,E.maxResults,s);return M.then(function(P){return{matchText:o.text,items:P,columns:E.columns,onAction:E.onAction,highlightOn:E.highlightOn}})}));return R.some({lookupData:x,context:o})},M3=In([er("type"),Za("text")]),sP=function(t){return Oo("separatormenuitem",M3,t)},cP=In([Se("type","autocompleteitem"),Se("active",!1),Se("disabled",!1),Se("meta",{}),er("value"),Za("text"),Za("icon")]),lP=In([er("type"),er("ch"),kl("minChars",1),Se("columns",1),kl("maxResults",10),Av("matches"),Uu("fetch"),Uu("onAction"),Kf("highlightOn",[],Zo)]),fP=function(t){return Oo("Autocompleter.Separator",M3,t)},vP=function(t){return Oo("Autocompleter.Item",cP,t)},XO=function(t){return Oo("Autocompleter",lP,t)},u2=[Ua("disabled",!1),Za("tooltip"),Za("icon"),Za("text"),Qa("onSetup",function(){return ge})],dP=In([er("type"),Uu("onAction")].concat(u2)),B3=function(t){return Oo("toolbarbutton",dP,t)},s2=[Ua("active",!1)].concat(u2),mP=In(s2.concat([er("type"),Uu("onAction")])),Ux=function(t){return Oo("ToggleButton",mP,t)},P3=[Qa("predicate",$t),gc("scope","node",["node","editor"]),gc("position","selection",["node","selection","line"])],gP=u2.concat([Se("type","contextformbutton"),Se("primary",!1),Uu("onAction"),us("original",Ne)]),hP=s2.concat([Se("type","contextformbutton"),Se("primary",!1),Uu("onAction"),us("original",Ne)]),pP=u2.concat([Se("type","contextformbutton")]),bP=s2.concat([Se("type","contextformtogglebutton")]),N3=Nc("type",{contextformbutton:gP,contextformtogglebutton:hP}),yP=In([Se("type","contextform"),Qa("initValue",Z("")),Za("label"),Mu("commands",N3),Tl("launch",Nc("type",{contextformbutton:pP,contextformtogglebutton:bP}))].concat(P3)),YO=function(t){return Oo("ContextForm",yP,t)},JO=In([Se("type","contexttoolbar"),er("items")].concat(P3)),I3=function(t){return Oo("ContextToolbar",JO,t)},ZO=function(t){var r={};return Lt(t,function(o){r[o]={}}),Qr(r)},QO=function(t){var r=t.ui.registry.getAll().popups,o=Pr(r,function(p){return XO(p).fold(function(S){throw new Error(Ov(S))},Ne)}),s=ZO(Or(o,function(p){return p.ch})),v=Ia(o),m=function(p){return Nt(v,function(S){return S.ch===p})};return{dataset:o,triggerChars:s,lookupByChar:m}},Wx;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(Wx||(Wx={}));var Xu=Wx,c2="tox-menu-nav__js",e4="tox-collection__item",t4="tox-swatch",wP={normal:c2,color:t4},$3="tox-collection__item--enabled",i0="tox-collection__group-heading",n4="tox-collection__item-icon",r4="tox-collection__item-label",CP="tox-collection__item-accessory",a4="tox-collection__item-caret",z3="tox-collection__item-checkmark",Cp="tox-collection__item--active",F3="tox-collection__item-container",o4="tox-collection__item-container--column",jx="tox-collection__item-container--row",SP="tox-collection__item-container--align-right",L3="tox-collection__item-container--align-left",H3="tox-collection__item-container--valign-top",xP="tox-collection__item-container--valign-middle",TP="tox-collection__item-container--valign-bottom",V3=function(t){return yn(wP,t).getOr(c2)},kP=function(t){return t==="color"?"tox-swatches":"tox-menu"},i4=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:kP(t),tieredMenu:"tox-tiered-menu"}},u0=function(t){var r=i4(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:V3(t)}},EP=function(t,r,o){var s=i4(o);return{tag:"div",classes:bn([[s.menu,"tox-menu-"+r+"-column"],t?[s.hasIcons]:[]])}},OP=[_n.parts.items({})],Sp=function(t,r,o){var s=i4(o),v={tag:"div",classes:bn([[s.tieredMenu]])};return{dom:v,markers:u0(o)}},Gx=function(t,r){return function(o){var s=Ja(o,r);return gt(s,function(v){return{dom:t,components:v}})}},U3=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[_n.parts.items({preprocess:t!=="auto"?Gx({tag:"div",classes:["tox-swatches__row"]},t):Ne})]}]}},AP=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[_n.parts.items({preprocess:Gx({tag:"div",classes:["tox-collection__group"]},t)})]}},W3=function(t,r){var o=[],s=[];return Lt(t,function(v,m){r(v,m)?(s.length>0&&o.push(s),s=[],Ar(v.dom,"innerHtml")&&s.push(v)):s.push(v)}),s.length>0&&o.push(s),gt(o,function(v){return{dom:{tag:"div",classes:["tox-collection__group"]},components:v}})},l2=function(t,r,o){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[_n.parts.items({preprocess:function(s){return t!=="auto"&&t>1?Gx({tag:"div",classes:["tox-collection__group"]},t)(s):W3(s,function(v,m){return r[m].type==="separator"})}})]}},u4=function(t,r){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[_n.parts.items({preprocess:function(o){return W3(o,function(s,v){return t[v].type==="separator"})}})]}},f2=function(t){return ba(t,function(r){return"icon"in r&&r.icon!==void 0})},vd=function(t){return console.error(Ov(t)),console.log(t),R.none()},j3=function(t,r,o,s,v){var m=u4(o);return{value:t,dom:m.dom,components:m.components,items:o}},s4=function(t,r,o,s,v){if(v==="color"){var m=U3(s);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"&&s==="auto"){var m=l2(s,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"&&s===1){var m=l2(1,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"){var m=l2(s,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="listpreview"&&s!=="auto"){var m=AP(s);return{value:t,dom:m.dom,components:m.components,items:o}}return{value:t,dom:EP(r,s,v),components:OP,items:o}},c4=[er("type"),er("src"),Za("alt"),Kf("classes",[],Zo)],DP=In(c4),G3=[er("type"),er("text"),Za("name"),Kf("classes",["tox-collection__item-label"],Zo)],q3=In(G3),s0=mC(function(){return u1("type",{cardimage:DP,cardtext:q3,cardcontainer:_P})}),_P=In([er("type"),Pm("direction","horizontal"),Pm("align","left"),Pm("valign","middle"),Mu("items",s0)]),Xg=[Ua("disabled",!1),Za("text"),Za("shortcut"),Ri("value","value",jr(function(){return gn("menuitem-value")}),Zc()),Se("meta",{})],c0=In([er("type"),Za("label"),Mu("items",s0),Qa("onSetup",function(){return ge}),Qa("onAction",ge)].concat(Xg)),RP=function(t){return Oo("cardmenuitem",c0,t)},K3=In([er("type"),Ua("active",!1),Za("icon")].concat(Xg)),X3=function(t){return Oo("choicemenuitem",K3,t)},l4=[er("type"),er("fancytype"),Qa("onAction",ge)],f4=[Se("initData",{})].concat(l4),Y3=[L0("initData",{},[Ua("allowCustomColors",!0),Ks("colors",Zc())])].concat(l4),MP=Nc("fancytype",{inserttable:f4,colorswatch:Y3}),BP=function(t){return Oo("fancymenuitem",MP,t)},qx=In([er("type"),Qa("onSetup",function(){return ge}),Qa("onAction",ge),Za("icon")].concat(Xg)),PP=function(t){return Oo("menuitem",qx,t)},J3=In([er("type"),Uu("getSubmenuItems"),Qa("onSetup",function(){return ge}),Za("icon")].concat(Xg)),l0=function(t){return Oo("nestedmenuitem",J3,t)},NP=In([er("type"),Za("icon"),Ua("active",!1),Qa("onSetup",function(){return ge}),Uu("onAction")].concat(Xg)),IP=function(t){return Oo("togglemenuitem",NP,t)},v4=function(t,r,o){var s=Gu(t.element,"."+o);if(s.length>0){var v=Ra(s,function(m){var p=m.dom.getBoundingClientRect().top,S=s[0].dom.getBoundingClientRect().top;return Math.abs(p-S)>r}).getOr(s.length);return R.some({numColumns:v,numRows:Math.ceil(s.length/v)})}else return R.none()},d4=function(t,r){return Bt([mr(t,r)])},Z3=function(t){return d4(gn("unnamed-events"),t)},Kx={namedEvents:d4,unnamedEvents:Z3},Q3=gn("tooltip.exclusive"),v2=gn("tooltip.show"),d2=gn("tooltip.hide"),eD=function(t,r,o){t.getSystem().broadcastOn([Q3],{})},Xx=function(t,r,o,s){o.getTooltip().each(function(v){v.getSystem().isConnected()&&sr.set(v,s)})},$P=Object.freeze({__proto__:null,hideAllExclusive:eD,setComponents:Xx}),zP=function(t,r){var o=function(v){r.getTooltip().each(function(m){Nl(m),t.onHide(v,m),r.clearTooltip()}),r.clearTimer()},s=function(v){if(!r.isShowing()){eD(v);var m=t.lazySink(v).getOrDie(),p=v.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Wa(t.mode==="normal"?[ut(Yf(),function(S){oa(v,v2)}),ut(j0(),function(S){oa(v,d2)})]:[]),behaviours:Bt([sr.config({})])});r.setTooltip(p),Kd(m,p),t.onShow(v,p),jo.position(m,p,{anchor:t.anchor(v)})}};return Wa(bn([[ut(v2,function(v){r.resetTimer(function(){s(v)},t.delay)}),ut(d2,function(v){r.resetTimer(function(){o(v)},t.delay)}),ut($c(),function(v,m){var p=m;p.universal||nr(p.channels,Q3)&&o(v)}),wc(function(v){o(v)})],t.mode==="normal"?[ut(Ic(),function(v){oa(v,v2)}),ut(X0(),function(v){oa(v,d2)}),ut(Yf(),function(v){oa(v,v2)}),ut(j0(),function(v){oa(v,d2)})]:[ut(Q0(),function(v,m){oa(v,v2)}),ut(m1(),function(v){oa(v,d2)})]]))},m4=Object.freeze({__proto__:null,events:zP}),tD=[rt("lazySink"),rt("tooltipDom"),Se("exclusive",!0),Se("tooltipComponents",[]),Se("delay",300),gc("mode","normal",["normal","follow-highlight"]),Se("anchor",function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:Z([wi,Ds,Nu,ds,Vi,ms]),onRtl:Z([wi,Ds,Nu,ds,Vi,ms])}}}),va("onHide"),va("onShow")],FP=function(){var t=Wo(),r=Wo(),o=function(){t.on(clearTimeout)},s=function(m,p){o(),t.set(setTimeout(m,p))},v=Z("not-implemented");return Pu({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:o,resetTimer:s,readState:v})},nD=Object.freeze({__proto__:null,init:FP}),g4=Ii({fields:tD,name:"tooltipping",active:m4,state:nD,apis:$P}),rD=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},f0=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),LP=tinymce.util.Tools.resolve("tinymce.EditorManager"),HP=function(t){var r=t.getParam("skin"),o=t.getParam("skin_url");if(r!==!1){var s=r||"oxide";o?o=t.documentBaseURI.toAbsolute(o):o=LP.baseURL+"/skins/ui/"+s}return o},VP=function(t){return t.getParam("readonly",!1,"boolean")},UP=function(t){return t.getParam("skin")===!1},Yx=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},Jx=function(t){return t.getParam("width",f0.DOM.getStyle(t.getElement(),"width"))},h4=function(t){return R.from(t.getParam("min_width")).filter(xn)},aD=function(t){return R.from(t.getParam("min_height")).filter(xn)},Zx=function(t){return R.from(t.getParam("max_width")).filter(xn)},oD=function(t){return R.from(t.getParam("max_height")).filter(xn)},WP=function(t){return R.from(t.getParam("style_formats")).filter(Sn)},jP=function(t){return t.getParam("style_formats_merge",!1,"boolean")},iD=function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},uD=function(t){return t.getParam("content_langs",void 0,"array")},sD=function(t){return t.getParam("removed_menuitems","")},p4=function(t){return t.getParam("menubar",!0,"boolean")!==!1},b4=function(t){var r=t.getParam("toolbar",!0),o=r===!0,s=dt(r),v=Sn(r)&&r.length>0;return!Qx(t)&&(v||s||o)},cD=function(t){var r=Q(9,function(s){return t.getParam("toolbar"+(s+1),!1,"string")}),o=Nt(r,function(s){return typeof s=="string"});return o.length>0?R.some(o):R.none()},Qx=function(t){return cD(t).fold(function(){var r=t.getParam("toolbar",[],"string[]");return r.length>0},We)},vl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(vl||(vl={}));var m2=function(t){return t.getParam("toolbar_mode","","string")},xp;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(xp||(xp={}));var GP=function(t){return t.getParam("toolbar_groups",{},"object")},lD=function(t){return t.getParam("toolbar_location",xp.auto,"string")},fD=function(t){return lD(t)===xp.bottom},qP=function(t){return t.getParam("fixed_toolbar_container","","string")},vD=function(t){return t.getParam("fixed_toolbar_container_target")},KP=function(t){return t.getParam("toolbar_persist",!1,"boolean")},dD=function(t){if(!t.inline)return R.none();var r=qP(t);if(r.length>0)return Bi(Ca(),r);var o=vD(t);return Ve(o)?R.some(ie.fromDom(o)):R.none()},eT=function(t){return t.inline&&dD(t).isSome()},mD=function(t){var r=dD(t);return r.getOrThunk(function(){return Rt(Fn(ie.fromDom(t.getElement())))})},gD=function(t){return t.inline&&!p4(t)&&!b4(t)&&!Qx(t)},tT=function(t){var r=t.getParam("toolbar_sticky",!1,"boolean");return(r||t.inline)&&!eT(t)&&!gD(t)},nT=function(t){return t.getParam("toolbar_sticky_offset",0,"number")},hD=function(t){return t.getParam("draggable_modal",!1,"boolean")},XP=function(t){var r=t.getParam("menu");return r?Pr(r,function(o){return ve(ve({},o),{items:o.items})}):{}},YP=function(t){return t.getParam("menubar")},JP=function(t){return t.getParam("toolbar",!0)},ZP=function(t){return t.getParam("file_picker_callback")},QP=function(t){return t.getParam("file_picker_types")},y4=function(t){return t.getParam("file_browser_callback_types")},pD=function(t){return t.getParam("typeahead_urls")===!1},bD=function(t){return t.getParam("anchor_top","#top")},e5=function(t){return t.getParam("anchor_bottom","#bottom")},yD=function(t){var r=t.getParam("file_picker_validator_handler",void 0,"function");return r===void 0?t.getParam("filepicker_validator_handler",void 0,"function"):r},w4="silver.readonly",t5=In([Mk("readonly")]),v0=function(t,r){var o=t.outerContainer,s=o.element;r&&(t.mothership.broadcastOn([Yd()],{target:s}),t.uiMothership.broadcastOn([Yd()],{target:s})),t.mothership.broadcastOn([w4],{readonly:r}),t.uiMothership.broadcastOn([w4],{readonly:r})},wD=function(t,r){t.on("init",function(){t.mode.isReadOnly()&&v0(r,!0)}),t.on("SwitchMode",function(){return v0(r,t.mode.isReadOnly())}),VP(t)&&t.setMode("readonly")},Ui=function(){var t;return Wu.config({channels:(t={},t[w4]={schema:t5,onReceive:function(r,o){Ln.set(r,o.readonly)}},t)})},n5=function(t){return Ln.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},r5=function(t){return Ln.config({disabled:t})},a5=function(t){return Ln.config({disabled:t,disableClass:"tox-tbtn--disabled"})},o5=function(t){return Ln.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Ef={item:n5,button:r5,splitButton:a5,toolbarButton:o5},d0=function(t,r){var o=t.getApi(r);return function(s){s(o)}},Tp=function(t,r){return dr(function(o){var s=d0(t,o);s(function(v){var m=t.onSetup(v);Ft(m)&&r.set(m)})})},kp=function(t,r){return wc(function(o){return d0(t,o)(r.get())})},rT,i5=function(t,r){return Js(function(o,s){d0(t,o)(t.onAction),!t.triggersSubmenu&&r===Xu.CLOSE_ON_EXECUTE&&(oa(o,Oh()),s.stop())})},u5=(rT={},rT[pc()]=["disabling","alloy.base.behaviour","toggling","item-events"],rT),cm=Ir,Yg=function(t,r,o,s){var v=Hn(ge);return{type:"item",dom:r.dom,components:cm(r.optComponents),data:t.data,eventOrder:u5,hasSubmenu:t.triggersSubmenu,itemBehaviours:Bt([mr("item-events",[i5(t,o),Tp(t,v),kp(t,v)]),Ef.item(function(){return t.disabled||s.isDisabled()}),Ui(),sr.config({})].concat(t.itemBehaviours))}},lm=function(t){return{value:t.value,meta:ve({text:t.text.getOr("")},t.meta)}},aT=tinymce.util.Tools.resolve("tinymce.Env"),s5=function(t){var r={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},o={meta:"Ctrl",access:"Shift+Alt"},s=aT.mac?r:o,v=t.split("+"),m=gt(v,function(p){var S=p.toLowerCase().trim();return Ar(s,S)?s[S]:p});return aT.mac?m.join(""):m.join("+")},C4=function(t,r,o){return o===void 0&&(o=[n4]),dv(t,{tag:"div",classes:o},r)},CD=function(t){return{dom:{tag:"div",classes:[r4]},components:[pu(kf.translate(t))]}},SD=function(t,r){return{dom:{tag:"div",classes:r,innerHtml:t}}},c5=function(t,r){return{dom:{tag:"div",classes:[r4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[pu(kf.translate(r))]}]}},l5=function(t){return{dom:{tag:"div",classes:[CP],innerHtml:s5(t)}}},xD=function(t){return C4("checkmark",t,[z3])},f5=function(t){return C4("chevron-right",t,[a4])},v5=function(t){return C4("chevron-down",t,[a4])},d5=function(t,r){var o=t.direction==="vertical"?o4:jx,s=t.align==="left"?L3:SP,v=function(){switch(t.valign){case"top":return H3;case"middle":return xP;case"bottom":return TP}};return{dom:{tag:"div",classes:[F3,o,s,v()]},components:r}},m5=function(t,r,o){return{dom:{tag:"img",classes:r,attributes:{src:t,alt:o.getOr("")}}}},g5=function(t,r,o){var s="custom",v="remove",m=t.ariaLabel,p=t.value,S=t.iconContent.map(function(E){return WB(E,r.icons,o)}),x=function(){var E=t4,M=S.getOr(""),P=m.map(function(W){return{title:r.translate(W)}}).getOr({}),H={tag:"div",attributes:P,classes:[E]};return p===s?ve(ve({},H),{tag:"button",classes:Pn(Pn([],H.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:M}):p===v?ve(ve({},H),{classes:Pn(Pn([],H.classes,!0),["tox-swatch--remove"],!1),innerHtml:M}):ve(ve({},H),{attributes:ve(ve({},H.attributes),{"data-mce-color":p}),styles:{"background-color":p}})};return{dom:x(),optComponents:[]}},TD=function(t){var r=t.map(function(o){return{attributes:{title:kf.translate(o)}}}).getOr({});return ve({tag:"div",classes:[c2,e4]},r)},kD=function(t,r,o,s){var v={tag:"div",classes:[n4]},m=function(H){return dv(H,v,r.icons,s)},p=function(){return R.some({dom:v})},S=o?t.iconContent.map(m).orThunk(p):R.none(),x=t.checkMark,E=R.from(t.meta).fold(function(){return CD},function(H){return Ar(H,"style")?Vt(c5,H.style):CD}),M=t.htmlContent.fold(function(){return t.textContent.map(E)},function(H){return R.some(SD(H,[r4]))}),P={dom:TD(t.ariaLabel),optComponents:[S,M,t.shortcutContent.map(l5),x,t.caret]};return P},g2=function(t,r,o,s){return s===void 0&&(s=R.none()),t.presets==="color"?g5(t,r,s):kD(t,r,o,s)},ED=function(t,r){return yn(t,"tooltipWorker").map(function(o){return[g4.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(s){return{type:"submenu",item:s,overrides:{maxHeightFunction:ag}}},mode:"follow-highlight",onShow:function(s,v){o(function(m){g4.setComponents(s,[D1({element:ie.fromDom(m)})])})}})]}).getOr([])},fm=function(t){return f0.DOM.encode(t)},OD=function(t,r){var o=kf.translate(t),s=fm(o);if(r.length>0){var v=new RegExp(rD(r),"gi");return s.replace(v,function(m){return'<span class="tox-autocompleter-highlight">'+m+"</span>"})}else return s},h5=function(t,r,o,s,v,m,p,S){S===void 0&&(S=!0);var x=g2({presets:s,textContent:R.none(),htmlContent:o?t.text.map(function(E){return OD(E,r)}):R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:R.none(),checkMark:R.none(),caret:R.none(),value:t.value},p.providers,S,t.icon);return Yg({data:lm(t),disabled:t.disabled,getApi:Z({}),onAction:function(E){return v(t.value,t.meta)},onSetup:Z(ge),triggersSubmenu:!1,itemBehaviours:ED(t.meta,p)},x,m,p.providers)},oT=function(t,r){return gt(t,function(o){switch(o.type){case"cardcontainer":return d5(o,oT(o.items,r));case"cardimage":return m5(o.src,o.classes,o.alt);case"cardtext":var s=o.name.exists(function(m){return nr(r.cardText.highlightOn,m)}),v=s?R.from(r.cardText.matchText).getOr(""):"";return SD(OD(o.text,v),o.classes)}})},xu=function(t,r,o,s){var v=function(p){return{isDisabled:function(){return Ln.isDisabled(p)},setDisabled:function(S){Ln.set(p,S),Lt(Gu(p.element,"*"),function(x){p.getSystem().getByDom(x).each(function(E){E.hasConfigured(Ln)&&Ln.set(E,S)})})}}},m={dom:TD(t.label),optComponents:[R.some({dom:{tag:"div",classes:[F3,jx]},components:oT(t.items,s)})]};return Yg({data:lm(ve({text:R.none()},t)),disabled:t.disabled,getApi:v,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:R.from(s.itemBehaviours).getOr([])},m,r,o.providers)},p5=function(t,r,o,s,v,m,p,S){S===void 0&&(S=!0);var x=function(M){return{setActive:function(P){Jr.set(M,P)},isActive:function(){return Jr.isOn(M)},isDisabled:function(){return Ln.isDisabled(M)},setDisabled:function(P){return Ln.set(M,P)}}},E=g2({presets:o,textContent:r?t.text:R.none(),htmlContent:R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:R.none(),checkMark:r?R.some(xD(p.icons)):R.none(),caret:R.none(),value:t.value},p,S);return Xe(Yg({data:lm(t),disabled:t.disabled,getApi:x,onAction:function(M){return s(t.value)},onSetup:function(M){return M.setActive(v),ge},triggersSubmenu:!1,itemBehaviours:[]},E,m,p),{toggling:{toggleClass:$3,toggleOnExecute:!1,selected:t.active}})},AD=tm(k(),_()),DD=function(t){return{value:t}},_D=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,RD=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,MD=function(t){return _D.test(t)||RD.test(t)},b5=function(t){return Ho(t,"#").toUpperCase()},y5=function(t){return MD(t)?R.some({value:b5(t)}):R.none()},w5=function(t){var r=t.value.replace(_D,function(o,s,v,m){return s+s+v+v+m+m});return{value:r}},C5=function(t){var r=w5(t),o=RD.exec(r.value);return o===null?["FFFFFF","FF","FF","FF"]:o},S4=function(t){var r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},h2=function(t){var r=S4(t.red)+S4(t.green)+S4(t.blue);return DD(r)},BD=Math.min,PD=Math.max,iT=Math.round,S5=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,x5=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Jg=function(t,r,o,s){return{red:t,green:r,blue:o,alpha:s}},x4=function(t){var r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},ND=function(t){var r,o,s,v=(t.hue||0)%360,m=t.saturation/100,p=t.value/100;if(m=PD(0,BD(m,1)),p=PD(0,BD(p,1)),m===0)return r=o=s=iT(255*p),Jg(r,o,s,1);var S=v/60,x=p*m,E=x*(1-Math.abs(S%2-1)),M=p-x;switch(Math.floor(S)){case 0:r=x,o=E,s=0;break;case 1:r=E,o=x,s=0;break;case 2:r=0,o=x,s=E;break;case 3:r=0,o=E,s=x;break;case 4:r=E,o=0,s=x;break;case 5:r=x,o=0,s=E;break;default:r=o=s=0}return r=iT(255*(r+M)),o=iT(255*(o+M)),s=iT(255*(s+M)),Jg(r,o,s,1)},p2=function(t){var r=C5(t),o=parseInt(r[1],16),s=parseInt(r[2],16),v=parseInt(r[3],16);return Jg(o,s,v,1)},ID=function(t,r,o,s){var v=parseInt(t,10),m=parseInt(r,10),p=parseInt(o,10),S=parseFloat(s);return Jg(v,m,p,S)},$D=function(t){if(t==="transparent")return R.some(Jg(0,0,0,0));var r=S5.exec(t);if(r!==null)return R.some(ID(r[1],r[2],r[3],"1"));var o=x5.exec(t);return o!==null?R.some(ID(o[1],o[2],o[3],o[4])):R.none()},zD=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},FD=Jg(255,0,0,1),T5=function(t){return t.fire("SkinLoaded")},LD=function(t,r){return t.fire("SkinLoadError",r)},k5=function(t){return t.fire("ResizeEditor")},T4=function(t,r){return t.fire("ResizeContent",r)},E5=function(t,r){return t.fire("ScrollContent",r)},HD=function(t,r){return t.fire("TextColorChange",r)},b2=function(t,r,o){return{hue:t,saturation:r,value:o}},k4=function(t){var r=0,o=0,s=0,v=t.red/255,m=t.green/255,p=t.blue/255,S=Math.min(v,Math.min(m,p)),x=Math.max(v,Math.max(m,p));if(S===x)return s=S,b2(0,0,s*100);var E=v===S?m-p:p===S?v-m:p-v;return r=v===S?3:p===S?1:5,r=60*(r-E/(x-S)),o=(x-S)/x,s=x,b2(Math.round(r),Math.round(o*100),Math.round(s*100))},O5=function(t){return k4(p2(t))},VD=function(t){return h2(ND(t))},UD=function(t){return y5(t).orThunk(function(){return $D(t).map(h2)}).getOrThunk(function(){var r=document.createElement("canvas");r.height=1,r.width=1;var o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var s=o.getImageData(0,0,1,1).data,v=s[0],m=s[1],p=s[2],S=s[3];return h2(Jg(v,m,p,S))})},uT=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),E4="tinymce-custom-colors";function WD(t){t===void 0&&(t=10);var r=uT.getItem(E4),o=dt(r)?JSON.parse(r):[],s=function(x){var E=t-x.length;return E<0?x.slice(0,t):x},v=s(o),m=function(x){Go(v,x).each(p),v.unshift(x),v.length>t&&v.pop(),uT.setItem(E4,JSON.stringify(v))},p=function(x){v.splice(x,1)},S=function(){return v.slice(0)};return{add:m,state:S}}var ou="choiceitem",jD=[{type:ou,text:"Light Green",value:"#BFEDD2"},{type:ou,text:"Light Yellow",value:"#FBEEB8"},{type:ou,text:"Light Red",value:"#F8CAC6"},{type:ou,text:"Light Purple",value:"#ECCAFA"},{type:ou,text:"Light Blue",value:"#C2E0F4"},{type:ou,text:"Green",value:"#2DC26B"},{type:ou,text:"Yellow",value:"#F1C40F"},{type:ou,text:"Red",value:"#E03E2D"},{type:ou,text:"Purple",value:"#B96AD9"},{type:ou,text:"Blue",value:"#3598DB"},{type:ou,text:"Dark Turquoise",value:"#169179"},{type:ou,text:"Orange",value:"#E67E23"},{type:ou,text:"Dark Red",value:"#BA372A"},{type:ou,text:"Dark Purple",value:"#843FA1"},{type:ou,text:"Dark Blue",value:"#236FA1"},{type:ou,text:"Light Gray",value:"#ECF0F1"},{type:ou,text:"Medium Gray",value:"#CED4D9"},{type:ou,text:"Gray",value:"#95A5A6"},{type:ou,text:"Dark Gray",value:"#7E8C8D"},{type:ou,text:"Navy Blue",value:"#34495E"},{type:ou,text:"Black",value:"#000000"},{type:ou,text:"White",value:"#ffffff"}],GD=WD(10),A5=function(t){for(var r=[],o=0;o<t.length;o+=2)r.push({text:t[o+1],value:"#"+UD(t[o]).value,type:"choiceitem"});return r},D5=function(t,r){return t.getParam("color_cols",r,"number")},qD=function(t){return t.getParam("custom_colors")!==!1},_5=function(t){return t.getParam("color_map")},O4=function(t){var r=_5(t);return r!==void 0?A5(r):jD},A4=function(){return gt(GD.state(),function(t){return{type:ou,text:t,value:t}})},D4=function(t){GD.add(t)},_4="#000000",KD=function(t,r){var o;return t.dom.getParents(t.selection.getStart(),function(s){var v;(v=s.style[r==="forecolor"?"color":"background-color"])&&(o=o||v)}),R.from(o)},R5=function(t,r,o){t.undoManager.transact(function(){t.focus(),t.formatter.apply(r,{value:o}),t.nodeChanged()})},M5=function(t,r){t.undoManager.transact(function(){t.focus(),t.formatter.remove(r,{value:null},null,!0),t.nodeChanged()})},R4=function(t){t.addCommand("mceApplyTextcolor",function(r,o){R5(t,r,o)}),t.addCommand("mceRemoveTextcolor",function(r){M5(t,r)})},B5=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},XD=function(t){var r=O4(t),o=B5(r.length);return D5(t,o)},YD=function(t){var r="choiceitem",o={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},s={type:r,text:"Custom color",icon:"color-picker",value:"custom"};return t?[o,s]:[o]},y2=function(t,r,o,s){if(o==="custom"){var v=e_(t);v(function(m){m.each(function(p){D4(p),t.execCommand("mceApplyTextcolor",r,p),s(p)})},_4)}else o==="remove"?(s(""),t.execCommand("mceRemoveTextcolor",r)):(s(o),t.execCommand("mceApplyTextcolor",r,o))},JD=function(t,r){return t.concat(A4().concat(YD(r)))},M4=function(t,r){return function(o){o(JD(t,r))}},ZD=function(t,r,o){var s=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(s,o)},m0=function(t,r,o,s,v){t.ui.registry.addSplitButton(r,{tooltip:s,presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:function(m){var p=KD(t,o);return p.bind(function(S){return $D(S).map(function(x){var E=h2(x).value;return $r(m.toLowerCase(),E)})}).getOr(!1)},columns:XD(t),fetch:M4(O4(t),qD(t)),onAction:function(m){y2(t,o,v.get(),ge)},onItemAction:function(m,p){y2(t,o,p,function(S){v.set(S),HD(t,{name:r,color:S})})},onSetup:function(m){ZD(m,r,v.get());var p=function(S){S.name===r&&ZD(m,S.name,S.color)};return t.on("TextColorChange",p),function(){t.off("TextColorChange",p)}}})},QD=function(t,r,o,s){t.ui.registry.addNestedMenuItem(r,{text:s,icon:r==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(v){y2(t,o,v.value,ge)}}]}})},e_=function(t){return function(r,o){var s=!1,v=function(S){var x=S.getData(),E=x.colorpicker;s?(r(R.from(E)),S.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},m=function(S,x){x.name==="hex-valid"&&(s=x.value)},p={colorpicker:o};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:m,onSubmit:v,onClose:ge,onCancel:function(){r(R.none())}})}},P5=function(t){R4(t);var r=Hn(_4),o=Hn(_4);m0(t,"forecolor","forecolor","Text color",r),m0(t,"backcolor","hilitecolor","Background color",o),QD(t,"forecolor","forecolor","Text color"),QD(t,"backcolor","hilitecolor","Background color")},B4=function(t,r,o,s,v,m,p,S){var x=f2(r),E=v!=="color"?"normal":"color",M=N5(r,o,s,E,m,p,S);return s4(t,x,M,s,v)},N5=function(t,r,o,s,v,m,p){return Ir(gt(t,function(S){return S.type==="choiceitem"?X3(S).fold(vd,function(x){return R.some(p5(x,o===1,s,r,m(S.value),v,p,f2(t)))}):R.none()}))},sT=function(t,r){var o=u0(r);if(t===1)return{mode:"menu",moveOnTab:!0};if(t==="auto")return{mode:"grid",selector:"."+o.item,initSize:{numColumns:1,numRows:1}};var s=r==="color"?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+s}},t_=function(t,r){return t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?"."+t4:"."+e4}}},n_=function(t,r){var o=r_(t,r),s=r.colorinput.getColorCols(),v="color",m=B4(gn("menu-value"),o,function(S){t.onAction({value:S})},s,v,Xu.CLOSE_ON_EXECUTE,$t,r.shared.providers),p=ve(ve({},m),{markers:u0(v),movement:sT(s,v)});return{type:"widget",data:{value:gn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[AD.widget(_n.sketch(p))]}},r_=function(t,r){var o=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(function(){return JD(r.colorinput.getColors(),o)},function(s){return s.concat(YD(o))})},a_=gn("cell-over"),cT=gn("cell-execute"),I5=function(t,r,o){var s,v=function(S){return Vn(S,a_,{row:t,col:r})},m=function(S){return Vn(S,cT,{row:t,col:r})},p=function(S,x){x.stop(),m(S)};return fo({dom:{tag:"div",attributes:(s={role:"button"},s["aria-labelledby"]=o,s)},behaviours:Bt([mr("insert-table-picker-cell",[ut(Yf(),tr.focus),ut(pc(),m),ut(zm(),p),ut(Rv(),p)]),Jr.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),tr.config({onFocus:v})])})},$5=function(t,r,o){for(var s=[],v=0;v<r;v++){for(var m=[],p=0;p<o;p++)m.push(I5(v,p,t));s.push(m)}return s},z5=function(t,r,o,s,v){for(var m=0;m<s;m++)for(var p=0;p<v;p++)Jr.set(t[m][p],m<=r&&p<=o)},F5=function(t){return Yr(t,function(r){return gt(r,Tc)})},o_=function(t,r){return pu(r+"x"+t)},L5=function(t){var r=10,o=10,s=gn("size-label"),v=$5(s,r,o),m=o_(0,0),p=Sa({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:s}},components:[m],behaviours:Bt([sr.config({})])});return{type:"widget",data:{value:gn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[AD.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:F5(v).concat(p.asSpec()),behaviours:Bt([mr("insert-table-picker",[dr(function(S){sr.set(p.get(S),[m])}),Bv(a_,function(S,x,E){var M=E.event,P=M.row,H=M.col;z5(v,P,H,r,o),sr.set(p.get(S),[o_(P+1,H+1)])}),Bv(cT,function(S,x,E){var M=E.event,P=M.row,H=M.col;t.onAction({numRows:P+1,numColumns:H+1}),oa(S,Oh())})]),Gn.config({initSize:{numRows:r,numColumns:o},mode:"flatgrid",selector:'[role="button"]'})])})]}},H5={inserttable:L5,colorswatch:n_},V5=function(t,r){return yn(H5,t.fancytype).map(function(o){return o(t,r)})},U5=function(t,r,o,s,v){s===void 0&&(s=!0),v===void 0&&(v=!1);var m=v?v5(o.icons):f5(o.icons),p=function(x){return{isDisabled:function(){return Ln.isDisabled(x)},setDisabled:function(E){return Ln.set(x,E)}}},S=g2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.some(m),checkMark:R.none(),shortcutContent:t.shortcut},o,s);return Yg({data:lm(t),getApi:p,disabled:t.disabled,onAction:ge,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},S,r,o)},W5=function(t,r,o,s){s===void 0&&(s=!0);var v=function(p){return{isDisabled:function(){return Ln.isDisabled(p)},setDisabled:function(S){return Ln.set(p,S)}}},m=g2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.none(),checkMark:R.none(),shortcutContent:t.shortcut},o,s);return Yg({data:lm(t),getApi:v,disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,r,o)},j5=function(t){var r=t.text.fold(function(){return{}},function(o){return{innerHtml:o}});return{type:"separator",dom:ve({tag:"div",classes:[e4,i0]},r),components:[]}},G5=function(t,r,o,s){s===void 0&&(s=!0);var v=function(p){return{setActive:function(S){Jr.set(p,S)},isActive:function(){return Jr.isOn(p)},isDisabled:function(){return Ln.isDisabled(p)},setDisabled:function(S){return Ln.set(p,S)}}},m=g2({iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,checkMark:R.some(xD(o.icons)),caret:R.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},o,s);return Xe(Yg({data:lm(t),disabled:t.disabled,getApi:v,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,r,o),{toggling:{toggleClass:$3,toggleOnExecute:!1,selected:t.active}})},i_=h5,u_=j5,q5=W5,P4=U5,lT=G5,K5=V5,fT=xu,w2;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(w2||(w2={}));var X5=function(t,r,o,s,v){var m=o.shared.providers,p=function(S){return v?ve(ve({},S),{shortcut:R.none(),icon:S.text.isSome()?R.none():S.icon}):S};switch(t.type){case"menuitem":return PP(t).fold(vd,function(S){return R.some(q5(p(S),r,m,s))});case"nestedmenuitem":return l0(t).fold(vd,function(S){return R.some(P4(p(S),r,m,s,v))});case"togglemenuitem":return IP(t).fold(vd,function(S){return R.some(lT(p(S),r,m,s))});case"separator":return sP(t).fold(vd,function(S){return R.some(u_(S))});case"fancymenuitem":return BP(t).fold(vd,function(S){return K5(p(S),o)});default:return console.error("Unknown item in general menu",t),R.none()}},Y5=function(t,r,o,s,v,m,p){var S=s===1,x=!S||f2(t);return Ir(gt(t,function(E){switch(E.type){case"separator":return fP(E).fold(vd,function(M){return R.some(u_(M))});case"cardmenuitem":return RP(E).fold(vd,function(M){return R.some(fT(ve(ve({},M),{onAction:function(P){M.onAction(P),o(M.value,M.meta)}}),v,m,{itemBehaviours:ED(M.meta,m),cardText:{matchText:r,highlightOn:p}}))});case"autocompleteitem":default:return vP(E).fold(vd,function(M){return R.some(i_(M,r,S,"normal",o,v,m,x))})}}))},s_=function(t,r,o,s,v){var m=f2(r),p=Ir(gt(r,function(x){var E=function(P){return v?!Ar(P,"text"):m},M=function(P){return X5(P,o,s,E(P),v)};return x.type==="nestedmenuitem"&&x.getSubmenuItems().length<=0?M(ve(ve({},x),{disabled:!0})):M(x)})),S=v?j3:s4;return S(t,m,p,1,"normal")},c_=function(t){return Na.singleData(t.value,t)},J5=function(t,r,o,s){var v=o===w2.ContentFocus?GS():lp(),m=sT(r,s),p=u0(s);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:p.selectedItem,item:p.item},movement:m,fakeFocus:o===w2.ContentFocus,focusManager:v,menuBehaviours:Kx.unnamedEvents(r!=="auto"?[]:[dr(function(S,x){v4(S,4,p.item).each(function(E){var M=E.numColumns,P=E.numRows;Gn.setGridSize(S,P,M)})})])}},l_=function(t,r){var o=Wo(),s=Hn(!1),v=fo(_a.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Bt([mr("dismissAutocompleter",[ut(rl(),function(){return x()})])]),lazySink:r.getSink})),m=function(){return _a.isOpen(v)},p=function(){return o.get().isSome()},S=function(){p()&&_a.hide(v)},x=function(){if(p()){var ae=o.get().map(function(we){return we.element});Hx(ae.getOr(ie.fromDom(t.selection.getNode()))).each(xm),S(),o.clear(),s.set(!1)}},E=ho(function(){return QO(t)}),M=function(ae,we){var Le=ra(we,function(Fe){return R.from(Fe.columns)}).getOr(1);return Yr(we,function(Fe){var ye=Fe.items;return Y5(ye,Fe.matchText,function(Be,Qe){var Wt=t.selection.getRng();qO(t.dom,Wt,ae).fold(function(){return console.error("Lost context. Cursor probably moved")},function(it){var Jt=it.range,ct={hide:function(){x()},reload:function(Je){S(),K(Je)}};s.set(!0),Fe.onAction(ct,Jt,Be,Qe),s.set(!1)})},Le,Xu.BUBBLE_TO_SANDBOX,r,Fe.highlightOn)})},P=function(ae){if(!p()){var we=ZB(t,ae.range);o.set({triggerChar:ae.triggerChar,element:we,matchLength:ae.text.length}),s.set(!1)}},H=function(ae,we,Le,Fe){ae.matchLength=we.text.length;var ye=ra(Le,function(Be){return R.from(Be.columns)}).getOr(1);_a.showAt(v,_n.sketch(J5(s4("autocompleter-value",!0,Fe,ye,"normal"),ye,w2.ContentFocus,"normal")),{anchor:{type:"node",root:ie.fromDom(t.getBody()),node:R.from(ae.element)}}),_a.getContent(v).each(ha.highlightFirst)},W=function(ae){return o.get().map(function(we){return qO(t.dom,t.selection.getRng(),we.triggerChar).bind(function(Le){return R3(t,E,Le,ae)})}).getOrThunk(function(){return uP(t,E)})},K=function(ae){W(ae).fold(x,function(we){P(we.context),we.lookupData.then(function(Le){o.get().map(function(Fe){var ye=we.context;if(Fe.triggerChar===ye.triggerChar){var Be=M(ye.triggerChar,Le);Be.length>0?H(Fe,ye,Le,Be):ye.text.length-Fe.matchLength>=10?x():S()}})})})},ue=WO(function(ae){ae.which!==27&&K()},50),be={onKeypress:ue,cancelIfNecessary:x,isMenuOpen:m,isActive:p,isProcessingAction:s.get,getView:function(){return _a.getContent(v)}};t.hasPlugin("rtc")===!1&&D3.setup(be,t)},Z5={register:l_},C2=function(t,r,o){return Fc(t,r,o).isSome()},f_=function(t,r){var o=null,s=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];o=setTimeout(function(){t.apply(null,m),o=null},r)},v=function(){o!==null&&(clearTimeout(o),o=null)};return{cancel:v,schedule:s}},v_=5,Q5=400,d_=function(t){var r=t.raw;return r.touches===void 0||r.touches.length!==1?R.none():R.some(r.touches[0])},eN=function(t,r){var o=Math.abs(t.clientX-r.x),s=Math.abs(t.clientY-r.y);return o>v_||s>v_},N4=function(t){var r=Wo(),o=Hn(!1),s=f_(function(E){t.triggerEvent(f1(),E),o.set(!0)},Q5),v=function(E){return d_(E).each(function(M){s.cancel();var P={x:M.clientX,y:M.clientY,target:E.target};s.schedule(E),o.set(!1),r.set(P)}),R.none()},m=function(E){return s.cancel(),d_(E).each(function(M){r.on(function(P){eN(M,P)&&r.clear()})}),R.none()},p=function(E){s.cancel();var M=function(P){return qr(P.target,E.target)};return r.get().filter(M).map(function(P){return o.get()?(E.prevent(),!1):t.triggerEvent(Rv(),E)})},S=Xf([{key:nf(),value:v},{key:tl(),value:m},{key:Dv(),value:p}]),x=function(E,M){return yn(S,M).bind(function(P){return P(E)})};return{fireIfReady:x}},tN=function(t){var r=t.raw;return r.which===Bb[0]&&!nr(["input","textarea"],Kn(t.target))&&!C2(t.target,'[contenteditable="true"]')},I4=function(){return St().browser.isFirefox()},nN=function(t,r){return I4()?J1(t,"focus",r):Qo(t,"focusin",r)},rN=function(t,r){return I4()?J1(t,"blur",r):Qo(t,"focusout",r)},m_=function(t,r){var o=ve({stopBackspace:!0},r),s=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],v=N4(o),m=gt(s.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(W){return Qo(t,W,function(K){v.fireIfReady(K,W).each(function(be){be&&K.kill()});var ue=o.triggerEvent(W,K);ue&&K.kill()})}),p=Wo(),S=Qo(t,"paste",function(W){v.fireIfReady(W,"paste").each(function(ue){ue&&W.kill()});var K=o.triggerEvent("paste",W);K&&W.kill(),p.set(setTimeout(function(){o.triggerEvent(Y0(),W)},0))}),x=Qo(t,"keydown",function(W){var K=o.triggerEvent("keydown",W);K?W.kill():o.stopBackspace&&tN(W)&&W.prevent()}),E=nN(t,function(W){var K=o.triggerEvent("focusin",W);K&&W.kill()}),M=Wo(),P=rN(t,function(W){var K=o.triggerEvent("focusout",W);K&&W.kill(),M.set(setTimeout(function(){o.triggerEvent(X0(),W)},0))}),H=function(){Lt(m,function(W){W.unbind()}),x.unbind(),E.unbind(),P.unbind(),S.unbind(),p.on(clearTimeout),M.on(clearTimeout)};return{unbind:H}},g0=function(t,r){var o=yn(t,"target").getOr(r);return Hn(o)},aN=function(t,r){var o=Hn(!1),s=Hn(!1),v=function(){o.set(!0)},m=function(){s.set(!0)};return{stop:v,cut:m,isStopped:o.get,isCut:s.get,event:t,setSource:r.set,getSource:r.get}},oN=function(t){var r=Hn(!1),o=function(){r.set(!0)};return{stop:o,cut:ge,isStopped:r.get,isCut:$t,event:t,setSource:ht("Cannot set source of a broadcasted event"),getSource:ht("Cannot get source of a broadcasted event")}},S2=hc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),x2=function(t,r,o,s,v,m){var p=t(r,s),S=aN(o,v);return p.fold(function(){return m.logEventNoHandlers(r,s),S2.complete()},function(x){var E=x.descHandler,M=uy(E);return M(S),S.isStopped()?(m.logEventStopped(r,x.element,E.purpose),S2.stopped()):S.isCut()?(m.logEventCut(r,x.element,E.purpose),S2.complete()):so(x.element).fold(function(){return m.logNoParent(r,x.element,E.purpose),S2.complete()},function(P){return m.logEventResponse(r,x.element,E.purpose),S2.resume(P)})})},g_=function(t,r,o,s,v,m){return x2(t,r,o,s,v,m).fold(We,function(p){return g_(t,r,o,p,v,m)},$t)},iN=function(t,r,o,s,v){var m=g0(o,s);return x2(t,r,o,s,m,v)},h_=function(t,r,o){var s=oN(r);return Lt(t,function(v){var m=v.descHandler,p=uy(m);p(s)}),s.isStopped()},uN=function(t,r,o,s){return p_(t,r,o,o.target,s)},p_=function(t,r,o,s,v){var m=g0(o,s);return g_(t,r,o,s,m,v)},sN=function(t,r){return{element:t,descHandler:r}},cN=function(t,r){return{id:t,descHandler:r}},lN=function(){var t={},r=function(p,S,x){na(x,function(E,M){var P=t[M]!==void 0?t[M]:{};P[S]=iy(E,p),t[M]=P})},o=function(p,S){return Iv(S).bind(function(x){return yn(p,x)}).map(function(x){return sN(S,x)})},s=function(p){return yn(t,p).map(function(S){return Or(S,function(x,E){return cN(E,x)})}).getOr([])},v=function(p,S,x){return yn(t,S).bind(function(E){return Nm(x,function(M){return o(E,M)},p)})},m=function(p){na(t,function(S,x){Ar(S,p)&&delete S[p]})};return{registerId:r,unregisterId:m,filterByType:s,find:v}},fN=function(){var t=lN(),r={},o=function(E){var M=E.element;return Iv(M).getOrThunk(function(){return EC("uid-",E.element)})},s=function(E,M){var P=r[M];if(P===E)m(E);else throw new Error('The tagId "'+M+'" is already used by: '+cs(P.element)+`
Cannot use it for: `+cs(E.element)+`
The conflicting element is`+(jn(P.element)?" ":" not ")+"already in the DOM")},v=function(E){var M=o(E);wa(r,M)&&s(E,M);var P=[E];t.registerId(P,M,E.events),r[M]=E},m=function(E){Iv(E.element).each(function(M){delete r[M],t.unregisterId(M)})},p=function(E){return t.filterByType(E)},S=function(E,M,P){return t.find(E,M,P)},x=function(E){return yn(r,E)};return{find:S,filter:p,register:v,unregister:m,getById:x}},vN=function(t){var r=t.dom,o=r.attributes,s=Y(r,["attributes"]);return{uid:t.uid,dom:ve({tag:"div",attributes:ve({role:"presentation"},o)},s),components:t.components,behaviours:kg(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},ps=Ec({name:"Container",factory:vN,configFields:[Se("components",[]),$i("containerBehaviours",[]),Se("events",{}),Se("domModification",{}),Se("eventOrder",{})]}),b_=function(t){var r=function(ae){return so(t.element).fold(We,function(we){return qr(ae,we)})},o=fN(),s=function(ae,we){return o.find(r,ae,we)},v=m_(t.element,{triggerEvent:function(ae,we){return my(ae,we.target,function(Le){return uN(s,ae,we,Le)})}}),m={debugInfo:Z("real"),triggerEvent:function(ae,we,Le){my(ae,we,function(Fe){return p_(s,ae,Le,we,Fe)})},triggerFocus:function(ae,we){Iv(ae).fold(function(){_l(ae)},function(Le){my(_v(),ae,function(Fe){return iN(s,_v(),{originator:we,kill:ge,prevent:ge,target:ae},ae,Fe),!1})})},triggerEscape:function(ae,we){m.triggerEvent("keydown",ae.element,we.event)},getByUid:function(ae){return ue(ae)},getByDom:function(ae){return be(ae)},build:fo,addToGui:function(ae){x(ae)},removeFromGui:function(ae){E(ae)},addToWorld:function(ae){p(ae)},removeFromWorld:function(ae){S(ae)},broadcast:function(ae){H(ae)},broadcastOn:function(ae,we){W(ae,we)},broadcastEvent:function(ae,we){K(ae,we)},isConnected:We},p=function(ae){ae.connect(m),Ma(ae.element)||(o.register(ae),Lt(ae.components(),p),m.triggerEvent(Ed(),ae.element,{target:ae.element}))},S=function(ae){Ma(ae.element)||(Lt(ae.components(),S),o.unregister(ae)),ae.disconnect()},x=function(ae){Kd(t,ae)},E=function(ae){Nl(ae)},M=function(){v.unbind(),xs(t.element)},P=function(ae){var we=o.filter($c());Lt(we,function(Le){var Fe=Le.descHandler,ye=uy(Fe);ye(ae)})},H=function(ae){P({universal:!0,data:ae})},W=function(ae,we){P({universal:!1,channels:ae,data:we})},K=function(ae,we){var Le=o.filter(ae);return h_(Le,we)},ue=function(ae){return o.getById(ae).fold(function(){return pr.error(new Error('Could not find component with uid: "'+ae+'" in system.'))},pr.value)},be=function(ae){var we=Iv(ae).getOr("not found");return ue(we)};return p(t),{root:t,element:t.element,destroy:M,add:x,remove:E,getByUid:ue,getByDom:be,addToWorld:p,removeFromWorld:S,broadcast:H,broadcastOn:W,broadcastEvent:K}},Ep=function(t,r){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:gt(t.items,r.interpreter)}},dN=Z([Se("prefix","form-field"),$i("fieldBehaviours",[Fr,Ut])]),mN=Z([Vc({schema:[rt("dom")],name:"label"}),Vc({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[rt("text")],name:"aria-descriptor"}),Su({factory:{sketch:function(t){var r=V0(t,["factory"]);return t.factory.sketch(r)}},schema:[rt("factory")],name:"field"})]),gN=function(t,r,o,s){var v=tu(t.fieldBehaviours,[Fr.config({find:function(S){return Fa(S,t,"field")}}),Ut.config({store:{mode:"manual",getValue:function(S){return Fr.getCurrent(S).bind(Ut.getValue)},setValue:function(S,x){Fr.getCurrent(S).each(function(E){Ut.setValue(E,x)})}}})]),m=Wa([dr(function(S,x){var E=_S(S,t,["label","field","aria-descriptor"]);E.field().each(function(M){var P=gn(t.prefix);E.label().each(function(H){hr(H.element,"for",P),hr(M.element,"id",P)}),E["aria-descriptor"]().each(function(H){var W=gn(t.prefix);hr(H.element,"id",W),hr(M.element,"aria-describedby",W)})})})]),p={getField:function(S){return Fa(S,t,"field")},getLabel:function(S){return Fa(S,t,"label")}};return{uid:t.uid,dom:t.dom,components:r,behaviours:v,events:m,apis:p}},da=hs({name:"FormField",configFields:dN(),partFields:mN(),factory:gN,apis:{getField:function(t,r){return t.getField(r)},getLabel:function(t,r){return t.getLabel(r)}}}),vT=function(t,r){return ol({attributes:Xf([{key:r.tabAttr,value:"true"}])})},y_=Object.freeze({__proto__:null,exhibit:vT}),w_=[Se("tabAttr","data-alloy-tabstop")],si=Ii({fields:w_,name:"tabstopping",active:y_}),hN=tinymce.util.Tools.resolve("tinymce.html.Entities"),T2=function(t,r,o,s){var v=bN(t,r,o,s);return da.sketch(v)},pN=function(t,r){return T2(t,r,[],[])},bN=function(t,r,o,s){return{dom:C_(o),components:t.toArray().concat([r]),fieldBehaviours:Bt(s)}},yN=function(){return C_([])},C_=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},vm=function(t,r){return da.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(t)}})},dl=gn("form-component-change"),k2=gn("form-close"),Op=gn("form-cancel"),mv=gn("form-action"),jc=gn("form-submit"),dd=gn("form-block"),$4=gn("form-unblock"),z4=gn("form-tabchange"),F4=gn("form-resize"),dT=function(t,r){var o,s=t.label.map(function(P){return vm(P,r)}),v=function(P){return function(H,W){Fc(W.event.target,"[data-collection-item-value]").each(function(K){P(H,W,K,co(K,"data-collection-item-value"))})}},m=function(P,H){var W=gt(H,function(be){var ae=kf.translate(be.text),we=t.columns===1?'<div class="tox-collection__item-label">'+ae+"</div>":"",Le='<div class="tox-collection__item-icon">'+be.icon+"</div>",Fe={_:" "," - ":" ","-":" "},ye=ae.replace(/\_| \- |\-/g,function(Qe){return Fe[Qe]}),Be=r.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+Be+'" tabindex="-1" data-collection-item-value="'+hN.encodeAllRaw(be.value)+'" title="'+ye+'" aria-label="'+ye+'">'+Le+we+"</div>"}),K=t.columns!=="auto"&&t.columns>1?Ja(W,t.columns):[W],ue=gt(K,function(be){return'<div class="tox-collection__group">'+be.join("")+"</div>"});Zf(P.element,ue.join(""))},p=v(function(P,H,W,K){H.stop(),r.isDisabled()||Vn(P,mv,{name:t.name,value:K})}),S=[ut(Yf(),v(function(P,H,W){_l(W)})),ut(zm(),p),ut(Rv(),p),ut(Ic(),v(function(P,H,W){Bi(P.element,"."+Cp).each(function(K){yi(K,Cp)}),Mi(W,Cp)})),ut(mu(),v(function(P){Bi(P.element,"."+Cp).each(function(H){yi(H,Cp)})})),Js(v(function(P,H,W,K){Vn(P,mv,{name:t.name,value:K})}))],x=function(P,H){return gt(Gu(P.element,".tox-collection__item"),H)},E=da.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ne},behaviours:Bt([Ln.config({disabled:r.isDisabled,onDisabled:function(P){x(P,function(H){Mi(H,"tox-collection__item--state-disabled"),hr(H,"aria-disabled",!0)})},onEnabled:function(P){x(P,function(H){yi(H,"tox-collection__item--state-disabled"),Ji(H,"aria-disabled")})}}),Ui(),sr.config({}),Ut.config({store:{mode:"memory",initialValue:[]},onSetValue:function(P,H){m(P,H),t.columns==="auto"&&v4(P,5,"tox-collection__item").each(function(W){var K=W.numRows,ue=W.numColumns;Gn.setGridSize(P,K,ue)}),oa(P,F4)}}),si.config({}),Gn.config(t_(t.columns,"normal")),mr("collection-events",S)]),eventOrder:(o={},o[pc()]=["disabling","alloy.base.behaviour","collection-events"],o)}),M=["tox-form__group--collection"];return T2(s,E,M,[])},S_=Z([fa("data"),Se("inputAttributes",{}),Se("inputStyles",{}),Se("tag","input"),Se("inputClasses",[]),va("onSetValue"),Se("styles",{}),Se("eventOrder",{}),$i("inputBehaviours",[Ut,tr]),Se("selectOnFocus",!0)]),mT=function(t){return Bt([tr.config({onFocus:t.selectOnFocus?function(r){var o=r.element,s=sf(o);o.dom.setSelectionRange(0,s.length)}:ge})])},L4=function(t){return ve(ve({},mT(t)),tu(t.inputBehaviours,[Ut.config({store:ve(ve({mode:"manual"},t.data.map(function(r){return{initialValue:r}}).getOr({})),{getValue:function(r){return sf(r.element)},setValue:function(r,o){var s=sf(r.element);s!==o&&Gm(r.element,o)}}),onSetValue:t.onSetValue})]))},gT=function(t){return{tag:t.tag,attributes:ve({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},wN=function(t,r){return{uid:t.uid,dom:gT(t),components:[],behaviours:L4(t),eventOrder:t.eventOrder}},E2=Ec({name:"Input",configFields:S_(),factory:wN}),x_={},O2={exports:x_};(function(t,r,o,s){(function(v,m){typeof r=="object"&&typeof o<"u"?o.exports=m():typeof t=="function"&&t.amd?t(m):(v=typeof globalThis<"u"?globalThis:v||self,v.EphoxContactWrapper=m())})(this,function(){var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xk<"u"?xk:typeof self<"u"?self:{},m={exports:{}};(function(E){(function(M){var P=setTimeout;function H(){}function W(ye,Be){return function(){ye.apply(Be,arguments)}}function K(ye){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof ye!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Fe(ye,this)}function ue(ye,Be){for(;ye._state===3;)ye=ye._value;if(ye._state===0){ye._deferreds.push(Be);return}ye._handled=!0,K._immediateFn(function(){var Qe=ye._state===1?Be.onFulfilled:Be.onRejected;if(Qe===null){(ye._state===1?be:ae)(Be.promise,ye._value);return}var Wt;try{Wt=Qe(ye._value)}catch(it){ae(Be.promise,it);return}be(Be.promise,Wt)})}function be(ye,Be){try{if(Be===ye)throw new TypeError("A promise cannot be resolved with itself.");if(Be&&(typeof Be=="object"||typeof Be=="function")){var Qe=Be.then;if(Be instanceof K){ye._state=3,ye._value=Be,we(ye);return}else if(typeof Qe=="function"){Fe(W(Qe,Be),ye);return}}ye._state=1,ye._value=Be,we(ye)}catch(Wt){ae(ye,Wt)}}function ae(ye,Be){ye._state=2,ye._value=Be,we(ye)}function we(ye){ye._state===2&&ye._deferreds.length===0&&K._immediateFn(function(){ye._handled||K._unhandledRejectionFn(ye._value)});for(var Be=0,Qe=ye._deferreds.length;Be<Qe;Be++)ue(ye,ye._deferreds[Be]);ye._deferreds=null}function Le(ye,Be,Qe){this.onFulfilled=typeof ye=="function"?ye:null,this.onRejected=typeof Be=="function"?Be:null,this.promise=Qe}function Fe(ye,Be){var Qe=!1;try{ye(function(Wt){Qe||(Qe=!0,be(Be,Wt))},function(Wt){Qe||(Qe=!0,ae(Be,Wt))})}catch(Wt){if(Qe)return;Qe=!0,ae(Be,Wt)}}K.prototype.catch=function(ye){return this.then(null,ye)},K.prototype.then=function(ye,Be){var Qe=new this.constructor(H);return ue(this,new Le(ye,Be,Qe)),Qe},K.all=function(ye){var Be=Array.prototype.slice.call(ye);return new K(function(Qe,Wt){if(Be.length===0)return Qe([]);var it=Be.length;function Jt(Je,At){try{if(At&&(typeof At=="object"||typeof At=="function")){var hn=At.then;if(typeof hn=="function"){hn.call(At,function(ot){Jt(Je,ot)},Wt);return}}Be[Je]=At,--it===0&&Qe(Be)}catch(ot){Wt(ot)}}for(var ct=0;ct<Be.length;ct++)Jt(ct,Be[ct])})},K.resolve=function(ye){return ye&&typeof ye=="object"&&ye.constructor===K?ye:new K(function(Be){Be(ye)})},K.reject=function(ye){return new K(function(Be,Qe){Qe(ye)})},K.race=function(ye){return new K(function(Be,Qe){for(var Wt=0,it=ye.length;Wt<it;Wt++)ye[Wt].then(Be,Qe)})},K._immediateFn=typeof setImmediate=="function"?function(ye){setImmediate(ye)}:function(ye){P(ye,0)},K._unhandledRejectionFn=function(Be){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",Be)},K._setImmediateFn=function(Be){K._immediateFn=Be},K._setUnhandledRejectionFn=function(Be){K._unhandledRejectionFn=Be},E.exports?E.exports=K:M.Promise||(M.Promise=K)})(v)})(m);var p=m.exports,S=function(){return typeof window<"u"?window:Function("return this;")()}(),x={boltExport:S.Promise||p};return x})})(void 0,x_,O2);var dm=O2.exports.boltExport,H4=function(t){var r=R.none(),o=[],s=function(E){return H4(function(M){v(function(P){M(E(P))})})},v=function(E){p()?x(E):o.push(E)},m=function(E){p()||(r=R.some(E),S(o),o=[])},p=function(){return r.isSome()},S=function(E){Lt(E,x)},x=function(E){r.each(function(M){setTimeout(function(){E(M)},0)})};return t(m),{get:v,map:s,isReady:p}},CN=function(t){return H4(function(r){r(t)})},T_={nu:H4,pure:CN},SN=function(t){setTimeout(function(){throw t},0)},Ap=function(t){var r=function(x){t().then(x,SN)},o=function(x){return Ap(function(){return t().then(x)})},s=function(x){return Ap(function(){return t().then(function(E){return x(E).toPromise()})})},v=function(x){return Ap(function(){return t().then(function(){return x.toPromise()})})},m=function(){return T_.nu(r)},p=function(){var x=null;return Ap(function(){return x===null&&(x=t()),x})},S=t;return{map:o,bind:s,anonBind:v,toLazy:m,toCached:p,toPromise:S,get:r}},xN=function(t){return Ap(function(){return new dm(t)})},TN=function(t){return Ap(function(){return dm.resolve(t)})},$u={nu:xN,pure:TN},kN=["input","textarea"],k_=function(t){var r=Kn(t);return nr(kN,r)},V4=function(t,r){var o=r.getRoot(t).getOr(t.element);yi(o,r.invalidClass),r.notify.each(function(s){k_(t.element)&&hr(t.element,"aria-invalid",!1),s.getContainer(t).each(function(v){Zf(v,s.validHtml)}),s.onValid(t)})},U4=function(t,r,o,s){var v=r.getRoot(t).getOr(t.element);Mi(v,r.invalidClass),r.notify.each(function(m){k_(t.element)&&hr(t.element,"aria-invalid",!0),m.getContainer(t).each(function(p){Zf(p,s)}),m.onInvalid(t,s)})},E_=function(t,r,o){return r.validator.fold(function(){return $u.pure(pr.value(!0))},function(s){return s.validate(t)})},W4=function(t,r,o){return r.notify.each(function(s){s.onValidate(t)}),E_(t,r).map(function(s){return t.getSystem().isConnected()?s.fold(function(v){return U4(t,r,o,v),pr.error(v)},function(v){return V4(t,r),pr.value(v)}):pr.error("No longer in system")})},EN=function(t,r){var o=r.getRoot(t).getOr(t.element);return ls(o,r.invalidClass)},ON=Object.freeze({__proto__:null,markValid:V4,markInvalid:U4,query:E_,run:W4,isInvalid:EN}),AN=function(t,r){return t.validator.map(function(o){return Wa([ut(o.onEvent,function(s){W4(s,t,r).get(Ne)})].concat(o.validateOnLoad?[dr(function(s){W4(s,t,r).get(ge)})]:[]))}).getOr({})},hT=Object.freeze({__proto__:null,events:AN}),nc=[rt("invalidClass"),Se("getRoot",R.none),Xs("notify",[Se("aria","alert"),Se("getContainer",R.none),Se("validHtml",""),va("onValid"),va("onInvalid"),va("onValidate")]),Xs("validator",[rt("validate"),Se("onEvent","input"),Se("validateOnLoad",!0)])],gv=Ii({fields:nc,name:"invalidating",active:hT,apis:ON,extra:{validation:function(t){return function(r){var o=Ut.getValue(r);return $u.pure(t(o))}}}}),DN=function(t,r,o,s){return o.getOrCreate(t,r,s)},_N=Object.freeze({__proto__:null,getCoupled:DN}),RN=[Es("others",Ru(pr.value,Zc()))],MN=function(){var t={},r=function(s,v,m){var p=Qr(v.others);if(p)return yn(t,m).getOrThunk(function(){var S=yn(v.others,m).getOrDie("No information found for coupled component: "+m),x=S(s),E=s.getSystem().build(x);return t[m]=E,E});throw new Error("Cannot find coupled component: "+m+". Known coupled components: "+JSON.stringify(p,null,2))},o=Z({});return Pu({readState:o,getOrCreate:r})},O_=Object.freeze({__proto__:null,init:MN}),ci=Ii({fields:RN,name:"coupling",apis:_N,state:O_}),A_=Z("sink"),D_=Z(Vc({name:A_(),overrides:Z({dom:{tag:"div"},behaviours:Bt([jo.config({useFixed:We})]),events:Wa([Ad(c1()),Ad(nl()),Ad(zm())])})})),Of;(function(t){t[t.HighlightFirst=0]="HighlightFirst",t[t.HighlightNone=1]="HighlightNone"})(Of||(Of={}));var __=function(t,r){var o=t.getHotspot(r).getOr(r),s="hotspot",v=t.getAnchorOverrides();return t.layouts.fold(function(){return{type:s,hotspot:o,overrides:v}},function(m){return{type:s,hotspot:o,overrides:v,layouts:m}})},R_=function(t,r,o){var s=t.fetch;return s(o).map(r)},M_=function(t,r,o,s,v,m,p){var S=R_(t,r,s),x=B_(s,t);return S.map(function(E){return E.bind(function(M){return R.from(Na.sketch(ve(ve({},m.menu()),{uid:$v(""),data:M,highlightImmediately:p===Of.HighlightFirst,onOpenMenu:function(P,H){var W=x().getOrDie();jo.position(W,H,{anchor:o}),Kr.decloak(v)},onOpenSubmenu:function(P,H,W){var K=x().getOrDie();jo.position(K,W,{anchor:{type:"submenu",item:H}}),Kr.decloak(v)},onRepositionMenu:function(P,H,W){var K=x().getOrDie();jo.position(K,H,{anchor:o}),Lt(W,function(ue){jo.position(K,ue.triggeredMenu,{anchor:{type:"submenu",item:ue.triggeringItem}})})},onEscape:function(){return tr.focus(s),Kr.close(v),R.some(!0)}})))})})},pT=function(t,r,o,s,v,m,p){var S=__(t,o),x=M_(t,r,S,o,s,v,p);return x.map(function(E){return E.fold(function(){Kr.isOpen(s)&&Kr.close(s)},function(M){Kr.cloak(s),Kr.open(s,M),m(s)}),s})},BN=function(t,r,o,s,v,m,p){return Kr.close(s),$u.pure(s)},h0=function(t,r,o,s,v,m){var p=ci.getCoupled(o,"sandbox"),S=Kr.isOpen(p),x=S?BN:pT;return x(t,r,o,p,s,v,m)},PN=function(t,r,o){var s=Fr.getCurrent(r).getOr(r),v=Au(t.element);o?Zn(s.element,"min-width",v+"px"):yl(s.element,v)},B_=function(t,r){return t.getSystem().getByUid(r.uid+"-"+A_()).map(function(o){return function(){return pr.value(o)}}).getOrThunk(function(){return r.lazySink.fold(function(){return function(){return pr.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(o){return function(){return o(t)}})})},P_=function(t){Kr.getState(t).each(function(r){Na.repositionMenus(r)})},j4=function(t,r,o){var s=Pd(),v=function(S,x){var E=__(t,r);s.link(r.element),t.matchWidth&&PN(E.hotspot,x,t.useMinWidth),t.onOpen(E,S,x),o!==void 0&&o.onOpen!==void 0&&o.onOpen(S,x)},m=function(S,x){s.unlink(r.element),o!==void 0&&o.onClose!==void 0&&o.onClose(S,x)},p=B_(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:s.id,role:"listbox"}},behaviours:Hc.augment(t.sandboxBehaviours,[Ut.config({store:{mode:"memory",initialValue:r}}),Kr.config({onOpen:v,onClose:m,isPartOf:function(S,x,E){return Nd(x,E)||Nd(r,E)},getAttachPoint:function(){return p().getOrDie()}}),Fr.config({find:function(S){return Kr.getState(S).bind(function(x){return Fr.getCurrent(x)})}}),Wu.config({channels:ve(ve({},Ms({isExtraPart:$t})),Jd({doReposition:P_}))})])}},Zg=function(t){var r=ci.getCoupled(t,"sandbox");P_(r)},G4=function(){return[Se("sandboxClasses",[]),Hc.field("sandboxBehaviours",[Fr,Wu,Kr,Ut])]},NN=Z([rt("dom"),rt("fetch"),va("onOpen"),Pi("onExecute"),Se("getHotspot",R.some),Se("getAnchorOverrides",Z({})),qv(),$i("dropdownBehaviours",[Jr,ci,Gn,tr]),rt("toggleClass"),Se("eventOrder",{}),fa("lazySink"),Se("matchWidth",!1),Se("useMinWidth",!1),fa("role")].concat(G4())),Qg=Z([kc({schema:[Id()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),D_()]),IN=function(t,r,o,s){var v,m=function(M){return yn(t.dom,"attributes").bind(function(P){return yn(P,M)})},p=function(M){Kr.getState(M).each(function(P){Na.highlightPrimary(P)})},S=function(M){var P=p;h0(t,Ne,M,s,P,Of.HighlightFirst).get(ge)},x={expand:function(M){Jr.isOn(M)||h0(t,Ne,M,s,ge,Of.HighlightNone).get(ge)},open:function(M){Jr.isOn(M)||h0(t,Ne,M,s,ge,Of.HighlightFirst).get(ge)},isOpen:Jr.isOn,close:function(M){Jr.isOn(M)&&h0(t,Ne,M,s,ge,Of.HighlightFirst).get(ge)},repositionMenus:function(M){Jr.isOn(M)&&Zg(M)}},E=function(M,P){return yc(M),R.some(!0)};return{uid:t.uid,dom:t.dom,components:r,behaviours:tu(t.dropdownBehaviours,[Jr.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ci.config({others:{sandbox:function(M){return j4(t,M,{onOpen:function(){return Jr.on(M)},onClose:function(){return Jr.off(M)}})}}}),Gn.config({mode:"special",onSpace:E,onEnter:E,onDown:function(M,P){if(Af.isOpen(M)){var H=ci.getCoupled(M,"sandbox");p(H)}else Af.open(M);return R.some(!0)},onEscape:function(M,P){return Af.isOpen(M)?(Af.close(M),R.some(!0)):R.none()}}),tr.config({})]),events:n0(R.some(S)),eventOrder:ve(ve({},t.eventOrder),(v={},v[pc()]=["disabling","toggling","alloy.base.behaviour"],v)),apis:x,domModification:{attributes:ve(ve({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(M){return{role:M}})),t.dom.tag==="button"?{type:m("type").getOr("button")}:{})}}},Af=hs({name:"Dropdown",configFields:NN(),partFields:Qg(),factory:IN,apis:{open:function(t,r){return t.open(r)},expand:function(t,r){return t.expand(r)},close:function(t,r){return t.close(r)},isOpen:function(t,r){return t.isOpen(r)},repositionMenus:function(t,r){return t.repositionMenus(r)}}}),Ll=function(){return ol({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},N_=function(){return Wa([ey(Fk(),We)])},I_=Object.freeze({__proto__:null,events:N_,exhibit:Ll}),A2=Ii({fields:[],name:"unselecting",active:I_}),$N=function(t,r){return Af.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Bt([Ef.button(r.providers.isDisabled),Ui(),A2.config({}),si.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:function(o){return $u.nu(function(s){return t.fetch(s)}).map(function(s){return R.from(c_(Xe(B4(gn("menu-value"),s,function(v){t.onItemAction(o,v)},t.columns,t.presets,Xu.CLOSE_ON_EXECUTE,$t,r.providers),{movement:sT(t.columns,t.presets)})))})},parts:{menu:Sp(!1,1,t.presets)}})},D2=gn("color-input-change"),$_=gn("color-swatch-change"),q4=gn("color-picker-cancel"),zN=function(t,r,o){var s=da.parts.field({factory:E2,inputClasses:["tox-textfield"],onSetValue:function(x){return gv.run(x).get(ge)},inputBehaviours:Bt([Ln.config({disabled:r.providers.isDisabled}),Ui(),si.config({}),gv.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(x){return so(x.element)},notify:{onValid:function(x){var E=Ut.getValue(x);Vn(x,D2,{color:E})}},validator:{validateOnLoad:!1,validate:function(x){var E=Ut.getValue(x);if(E.length===0)return $u.pure(pr.value(!0));var M=ie.fromTag("span");Zn(M,"background-color",E);var P=oi(M,"background-color").fold(function(){return pr.error("blah")},function(H){return pr.value(E)});return $u.pure(P)}}})]),selectOnFocus:!1}),v=t.label.map(function(x){return vm(x,r.providers)}),m=function(x,E){Vn(x,$_,{value:E})},p=function(x,E){S.getOpt(x).each(function(M){E==="custom"?o.colorPicker(function(P){P.fold(function(){return oa(M,q4)},function(H){m(M,H),D4(H)})},"#ffffff"):E==="remove"?m(M,""):m(M,E)})},S=Sa($N({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Vi,Nu,wi]},onLtr:function(){return[Nu,Vi,wi]}},components:[],fetch:M4(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:p},r));return da.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:v.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[s,S.asSpec()]}]),fieldBehaviours:Bt([mr("form-field-events",[ut(D2,function(x,E){S.getOpt(x).each(function(M){Zn(M.element,"background-color",E.event.color)}),Vn(x,dl,{name:t.name})}),ut($_,function(x,E){da.getField(x).each(function(M){Ut.setValue(M,E.event.value),Fr.getCurrent(x).each(tr.focus)})}),ut(q4,function(x,E){da.getField(x).each(function(M){Fr.getCurrent(x).each(tr.focus)})})])])})},FN=Vc({schema:[rt("dom")],name:"label"}),eh=function(t){return Vc({name:""+t+"-edge",overrides:function(r){var o=r.model.manager.edgeActions[t];return o.fold(function(){return{}},function(s){return{events:Wa([ty(nf(),function(v,m,p){return s(v,p)},[r]),ty(nl(),function(v,m,p){return s(v,p)},[r]),ty(xd(),function(v,m,p){p.mouseIsDown.get()&&s(v,p)},[r])])}})}})},K4=eh("top-left"),LN=eh("top"),HN=eh("top-right"),VN=eh("right"),UN=eh("bottom-right"),WN=eh("bottom"),jN=eh("bottom-left"),GN=eh("left"),z_=Su({name:"thumb",defaults:Z({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:Wa([Od(nf(),t,"spectrum"),Od(tl(),t,"spectrum"),Od(Dv(),t,"spectrum"),Od(nl(),t,"spectrum"),Od(xd(),t,"spectrum"),Od(G0(),t,"spectrum")])}}}),F_=Su({schema:[us("mouseIsDown",function(){return Hn(!1)})],name:"spectrum",overrides:function(t){var r=t.model,o=r.manager,s=function(v,m){return o.getValueFromEvent(m).map(function(p){return o.setValueFrom(v,t,p)})};return{behaviours:Bt([Gn.config({mode:"special",onLeft:function(v){return o.onLeft(v,t)},onRight:function(v){return o.onRight(v,t)},onUp:function(v){return o.onUp(v,t)},onDown:function(v){return o.onDown(v,t)}}),tr.config({})]),events:Wa([ut(nf(),s),ut(tl(),s),ut(nl(),s),ut(xd(),function(v,m){t.mouseIsDown.get()&&s(v,m)})])}}}),qN=[FN,GN,VN,LN,WN,K4,HN,jN,UN,z_,F_],KN="slider.change.value",_2=Z(KN),XN=function(t){return t.type.indexOf("touch")!==-1},X4=function(t){var r=t.event.raw;if(XN(r)){var o=r;return o.touches!==void 0&&o.touches.length===1?R.some(o.touches[0]).map(function(v){return Ha(v.clientX,v.clientY)}):R.none()}else{var s=r;return s.clientX!==void 0?R.some(s).map(function(v){return Ha(v.clientX,v.clientY)}):R.none()}},L_="top",H_="right",V_="bottom",bT="left",Dp=function(t){return t.model.minX},th=function(t){return t.model.minY},yT=function(t){return t.model.minX-1},wT=function(t){return t.model.minY-1},_p=function(t){return t.model.maxX},Rp=function(t){return t.model.maxY},Mp=function(t){return t.model.maxX+1},CT=function(t){return t.model.maxY+1},U_=function(t,r,o){return r(t)-o(t)},hv=function(t){return U_(t,_p,Dp)},Y4=function(t){return U_(t,Rp,th)},Bp=function(t){return hv(t)/2},J4=function(t){return Y4(t)/2},nh=function(t){return t.stepSize},W_=function(t){return t.snapToGrid},j_=function(t){return t.snapStart},G_=function(t){return t.rounded},R2=function(t,r){return t[r+"-edge"]!==void 0},q_=function(t){return R2(t,bT)},M2=function(t){return R2(t,H_)},K_=function(t){return R2(t,L_)},Gc=function(t){return R2(t,V_)},mm=function(t){return t.model.value.get()},X_=function(t){return{x:t}},Z4=function(t){return{y:t}},gm=function(t,r){return{x:t,y:r}},Df=function(t,r){Vn(t,_2(),{value:r})},YN=function(t,r){Df(t,gm(yT(r),wT(r)))},JN=function(t,r){Df(t,Z4(wT(r)))},ZN=function(t,r){Df(t,gm(Bp(r),wT(r)))},QN=function(t,r){Df(t,gm(Mp(r),wT(r)))},eI=function(t,r){Df(t,X_(Mp(r)))},tI=function(t,r){Df(t,gm(Mp(r),J4(r)))},Y_=function(t,r){Df(t,gm(Mp(r),CT(r)))},nI=function(t,r){Df(t,Z4(CT(r)))},rI=function(t,r){Df(t,gm(Bp(r),CT(r)))},aI=function(t,r){Df(t,gm(yT(r),CT(r)))},J_=function(t,r){Df(t,X_(yT(r)))},ST=function(t,r){Df(t,gm(yT(r),J4(r)))},Q4=function(t,r,o,s){return t<r?t:t>o?o:t===r?r-1:Math.max(r,t-s)},p0=function(t,r,o,s){return t>o?t:t<r?r:t===o?o+1:Math.min(o,t+s)},Pp=function(t,r,o){return Math.max(r,Math.min(o,t))},Z_=function(t,r,o,s,v){return v.fold(function(){var m=t-r,p=Math.round(m/s)*s;return Pp(r+p,r-1,o+1)},function(m){var p=(t-m)%s,S=Math.round(p/s),x=Math.floor((t-m)/s),E=Math.floor((o-m)/s),M=Math.min(E,x+S),P=m+M*s;return Math.max(m,P)})},Q_=function(t,r,o){return Math.min(o,Math.max(t,r))-r},eA=function(t){var r=t.min,o=t.max,s=t.range,v=t.value,m=t.step,p=t.snap,S=t.snapStart,x=t.rounded,E=t.hasMinEdge,M=t.hasMaxEdge,P=t.minBound,H=t.maxBound,W=t.screenRange,K=E?r-1:r,ue=M?o+1:o;if(v<P)return K;if(v>H)return ue;var be=Q_(v,P,H),ae=Pp(be/W*s+r,K,ue);return p&&ae>=r&&ae<=o?Z_(ae,r,o,m,S):x?Math.round(ae):ae},eR=function(t){var r=t.min,o=t.max,s=t.range,v=t.value,m=t.hasMinEdge,p=t.hasMaxEdge,S=t.maxBound,x=t.maxOffset,E=t.centerMinEdge,M=t.centerMaxEdge;return v<r?m?0:E:v>o?p?S:M:(v-r)/s*x},tA="top",B2="right",tR="bottom",nA="left",nR="width",rR="height",_f=function(t){return t.element.dom.getBoundingClientRect()},Hl=function(t,r){return t[r]},Yu=function(t){var r=_f(t);return Hl(r,nA)},rA=function(t){var r=_f(t);return Hl(r,B2)},xT=function(t){var r=_f(t);return Hl(r,tA)},aR=function(t){var r=_f(t);return Hl(r,tR)},aA=function(t){var r=_f(t);return Hl(r,nR)},oR=function(t){var r=_f(t);return Hl(r,rR)},iR=function(t,r,o){return(t+r)/2-o},uR=function(t,r){var o=_f(t),s=_f(r),v=Hl(o,nA),m=Hl(o,B2),p=Hl(s,nA);return iR(v,m,p)},oA=function(t,r){var o=_f(t),s=_f(r),v=Hl(o,tA),m=Hl(o,tR),p=Hl(s,tA);return iR(v,m,p)},Vl=function(t,r){Vn(t,_2(),{value:r})},b0=function(t){return{x:t}},TT=function(t,r,o){var s={min:Dp(r),max:_p(r),range:hv(r),value:o,step:nh(r),snap:W_(r),snapStart:j_(r),rounded:G_(r),hasMinEdge:q_(r),hasMaxEdge:M2(r),minBound:Yu(t),maxBound:rA(t),screenRange:aA(t)};return eA(s)},kT=function(t,r,o){var s=TT(t,r,o),v=b0(s);return Vl(t,v),s},iA=function(t,r){var o=Dp(r);Vl(t,b0(o))},oI=function(t,r){var o=_p(r);Vl(t,b0(o))},iI=function(t,r,o){var s=t>0?p0:Q4,v=s(mm(o).x,Dp(o),_p(o),nh(o));return Vl(r,b0(v)),R.some(v)},sR=function(t){return function(r,o){return iI(t,r,o).map(We)}},uI=function(t){var r=X4(t);return r.map(function(o){return o.left})},sI=function(t,r,o,s,v){var m=0,p=aA(t),S=s.bind(function(M){return R.some(uR(M,t))}).getOr(m),x=v.bind(function(M){return R.some(uR(M,t))}).getOr(p),E={min:Dp(r),max:_p(r),range:hv(r),value:o,hasMinEdge:q_(r),hasMaxEdge:M2(r),minBound:Yu(t),minOffset:m,maxBound:rA(t),maxOffset:p,centerMinEdge:S,centerMaxEdge:x};return eR(E)},P2=function(t,r,o,s,v,m){var p=sI(r,m,o,s,v);return Yu(r)-Yu(t)+p},cI=function(t,r,o,s){var v=mm(o),m=P2(t,s.getSpectrum(t),v.x,s.getLeftEdge(t),s.getRightEdge(t),o),p=Au(r.element)/2;Zn(r.element,"left",m-p+"px")},cR=sR(-1),lI=sR(1),md=R.none,ET=R.none,fI={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some(eI),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some(J_)},vI=Object.freeze({__proto__:null,setValueFrom:kT,setToMin:iA,setToMax:oI,findValueOfOffset:TT,getValueFromEvent:uI,findPositionOfValue:P2,setPositionFromValue:cI,onLeft:cR,onRight:lI,onUp:md,onDown:ET,edgeActions:fI}),N2=function(t,r){Vn(t,_2(),{value:r})},I2=function(t){return{y:t}},$2=function(t,r,o){var s={min:th(r),max:Rp(r),range:Y4(r),value:o,step:nh(r),snap:W_(r),snapStart:j_(r),rounded:G_(r),hasMinEdge:K_(r),hasMaxEdge:Gc(r),minBound:xT(t),maxBound:aR(t),screenRange:oR(t)};return eA(s)},lR=function(t,r,o){var s=$2(t,r,o),v=I2(s);return N2(t,v),s},z2=function(t,r){var o=th(r);N2(t,I2(o))},F2=function(t,r){var o=Rp(r);N2(t,I2(o))},dI=function(t,r,o){var s=t>0?p0:Q4,v=s(mm(o).y,th(o),Rp(o),nh(o));return N2(r,I2(v)),R.some(v)},fR=function(t){return function(r,o){return dI(t,r,o).map(We)}},mI=function(t){var r=X4(t);return r.map(function(o){return o.top})},gI=function(t,r,o,s,v){var m=0,p=oR(t),S=s.bind(function(M){return R.some(oA(M,t))}).getOr(m),x=v.bind(function(M){return R.some(oA(M,t))}).getOr(p),E={min:th(r),max:Rp(r),range:Y4(r),value:o,hasMinEdge:K_(r),hasMaxEdge:Gc(r),minBound:xT(t),minOffset:m,maxBound:aR(t),maxOffset:p,centerMinEdge:S,centerMaxEdge:x};return eR(E)},uA=function(t,r,o,s,v,m){var p=gI(r,m,o,s,v);return xT(r)-xT(t)+p},hI=function(t,r,o,s){var v=mm(o),m=uA(t,s.getSpectrum(t),v.y,s.getTopEdge(t),s.getBottomEdge(t),o),p=pi(r.element)/2;Zn(r.element,"top",m-p+"px")},pI=R.none,sA=R.none,Np=fR(-1),bI=fR(1),vR={"top-left":R.none(),top:R.some(JN),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some(nI),"bottom-left":R.none(),left:R.none()},yI=Object.freeze({__proto__:null,setValueFrom:lR,setToMin:z2,setToMax:F2,findValueOfOffset:$2,getValueFromEvent:mI,findPositionOfValue:uA,setPositionFromValue:hI,onLeft:pI,onRight:sA,onUp:Np,onDown:bI,edgeActions:vR}),OT=function(t,r){Vn(t,_2(),{value:r})},AT=function(t,r){return{x:t,y:r}},wI=function(t,r,o){var s=TT(t,r,o.left),v=$2(t,r,o.top),m=AT(s,v);return OT(t,m),m},CI=function(t,r,o,s){var v=t>0?p0:Q4,m=r?mm(s).x:v(mm(s).x,Dp(s),_p(s),nh(s)),p=r?v(mm(s).y,th(s),Rp(s),nh(s)):mm(s).y;return OT(o,AT(m,p)),R.some(m)},L2=function(t,r){return function(o,s){return CI(t,r,o,s).map(We)}},cA=function(t,r){var o=Dp(r),s=th(r);OT(t,AT(o,s))},SI=function(t,r){var o=_p(r),s=Rp(r);OT(t,AT(o,s))},dR=function(t){return X4(t)},lA=function(t,r,o,s){var v=mm(o),m=P2(t,s.getSpectrum(t),v.x,s.getLeftEdge(t),s.getRightEdge(t),o),p=uA(t,s.getSpectrum(t),v.y,s.getTopEdge(t),s.getBottomEdge(t),o),S=Au(r.element)/2,x=pi(r.element)/2;Zn(r.element,"left",m-S+"px"),Zn(r.element,"top",p-x+"px")},fA=L2(-1,!1),mR=L2(1,!1),xI=L2(-1,!0),TI=L2(1,!0),DT={"top-left":R.some(YN),top:R.some(ZN),"top-right":R.some(QN),right:R.some(tI),"bottom-right":R.some(Y_),bottom:R.some(rI),"bottom-left":R.some(aI),left:R.some(ST)},gR=Object.freeze({__proto__:null,setValueFrom:wI,setToMin:cA,setToMax:SI,getValueFromEvent:dR,setPositionFromValue:lA,onLeft:fA,onRight:mR,onUp:xI,onDown:TI,edgeActions:DT}),kI=[Se("stepSize",1),Se("onChange",ge),Se("onChoose",ge),Se("onInit",ge),Se("onDragStart",ge),Se("onDragEnd",ge),Se("snapToGrid",!1),Se("rounded",!0),fa("snapStart"),Es("model",Nc("mode",{x:[Se("minX",0),Se("maxX",100),us("value",function(t){return Hn(t.mode.minX)}),rt("getInitialValue"),Xa("manager",vI)],y:[Se("minY",0),Se("maxY",100),us("value",function(t){return Hn(t.mode.minY)}),rt("getInitialValue"),Xa("manager",yI)],xy:[Se("minX",0),Se("maxX",100),Se("minY",0),Se("maxY",100),us("value",function(t){return Hn({x:t.mode.minX,y:t.mode.minY})}),rt("getInitialValue"),Xa("manager",gR)]})),$i("sliderBehaviours",[Gn,Ut]),us("mouseIsDown",function(){return Hn(!1)})],EI=function(t,r,o,s){var v,m=function(ye){return wf(ye,t,"thumb")},p=function(ye){return wf(ye,t,"spectrum")},S=function(ye){return Fa(ye,t,"left-edge")},x=function(ye){return Fa(ye,t,"right-edge")},E=function(ye){return Fa(ye,t,"top-edge")},M=function(ye){return Fa(ye,t,"bottom-edge")},P=t.model,H=P.manager,W=function(ye,Be){H.setPositionFromValue(ye,Be,t,{getLeftEdge:S,getRightEdge:x,getTopEdge:E,getBottomEdge:M,getSpectrum:p})},K=function(ye,Be){P.value.set(Be);var Qe=m(ye);W(ye,Qe)},ue=function(ye,Be){K(ye,Be);var Qe=m(ye);return t.onChange(ye,Qe,Be),R.some(!0)},be=function(ye){H.setToMin(ye,t)},ae=function(ye){H.setToMax(ye,t)},we=function(ye){var Be=function(){Fa(ye,t,"thumb").each(function(Wt){var it=P.value.get();t.onChoose(ye,Wt,it)})},Qe=t.mouseIsDown.get();t.mouseIsDown.set(!1),Qe&&Be()},Le=function(ye,Be){Be.stop(),t.mouseIsDown.set(!0),t.onDragStart(ye,m(ye))},Fe=function(ye,Be){Be.stop(),t.onDragEnd(ye,m(ye)),we(ye)};return{uid:t.uid,dom:t.dom,components:r,behaviours:tu(t.sliderBehaviours,[Gn.config({mode:"special",focusIn:function(ye){return Fa(ye,t,"spectrum").map(Gn.focusIn).map(We)}}),Ut.config({store:{mode:"manual",getValue:function(ye){return P.value.get()}}}),Wu.config({channels:(v={},v[nw()]={onReceive:we},v)})]),events:Wa([ut(_2(),function(ye,Be){ue(ye,Be.event.value)}),dr(function(ye,Be){var Qe=P.getInitialValue();P.value.set(Qe);var Wt=m(ye);W(ye,Wt);var it=p(ye);t.onInit(ye,Wt,it,P.value.get())}),ut(nf(),Le),ut(Dv(),Fe),ut(nl(),Le),ut(G0(),Fe)]),apis:{resetToMin:be,resetToMax:ae,setValue:K,refresh:W},domModification:{styles:{position:"relative"}}}},Rf=hs({name:"Slider",configFields:kI,partFields:qN,factory:EI,apis:{setValue:function(t,r,o){t.setValue(r,o)},resetToMin:function(t,r){t.resetToMin(r)},resetToMax:function(t,r){t.resetToMax(r)},refresh:function(t,r){t.refresh(r)}}}),vA=gn("rgb-hex-update"),gd=gn("slider-update"),_T=gn("palette-update"),hR=function(t,r){var o=Rf.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),s=Rf.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return Rf.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:Z({y:0})},components:[o,s],sliderBehaviours:Bt([tr.config({})]),onChange:function(v,m,p){Vn(v,gd,{value:p})}})},dA="form",mA=[$i("formBehaviours",[Ut])],gA=function(t){return"<alloy.field."+t+">"},RT=function(t){var r=function(){var m=[],p=function(S,x){return m.push(S),bw(dA,gA(S),x)};return{field:p,record:Z(m)}}(),o=t(r),s=r.record(),v=gt(s,function(m){return Su({name:m,pname:gA(m)})});return xw(dA,mA,v,bR,o)},pR=function(t,r){return t.fold(function(){return pr.error(r)},pr.value)},bR=function(t,r){return{uid:t.uid,dom:t.dom,components:r,behaviours:tu(t.formBehaviours,[Ut.config({store:{mode:"manual",getValue:function(o){var s=RS(o,t);return Pr(s,function(v,m){return v().bind(function(p){var S=Fr.getCurrent(p);return pR(S,new Error("Cannot find a current component to extract the value from for form part '"+m+"': "+cs(p.element)))}).map(Ut.getValue)})},setValue:function(o,s){na(s,function(v,m){Fa(o,t,m).each(function(p){Fr.getCurrent(p).each(function(S){Ut.setValue(S,v)})})})}}})]),apis:{getField:function(o,s){return Fa(o,t,s).bind(Fr.getCurrent)}}}},y0={getField:Ao(function(t,r,o){return t.getField(r,o)}),sketch:RT},yR=gn("valid-input"),wR=gn("invalid-input"),CR=gn("validating-input"),MT="colorcustom.rgb.",SR=function(t,r,o,s){var v=function(H,W){return gv.config({invalidClass:r("invalid"),notify:{onValidate:function(K){Vn(K,CR,{type:H})},onValid:function(K){Vn(K,yR,{type:H,value:Ut.getValue(K)})},onInvalid:function(K){Vn(K,wR,{type:H,value:Ut.getValue(K)})}},validator:{validate:function(K){var ue=Ut.getValue(K),be=W(ue)?pr.value(!0):pr.error(t("aria.input.invalid"));return $u.pure(be)},validateOnLoad:!1}})},m=function(H,W,K,ue,be){var ae=t(MT+"range"),we=da.parts.label({dom:{tag:"label",innerHtml:K,attributes:{"aria-label":ue}}}),Le=da.parts.field({data:be,factory:E2,inputAttributes:ve({type:"text"},W==="hex"?{"aria-live":"polite"}:{}),inputClasses:[r("textfield")],inputBehaviours:Bt([v(W,H),si.config({})]),onSetValue:function(Qe){if(gv.isInvalid(Qe)){var Wt=gv.run(Qe);Wt.get(ge)}}}),Fe=[we,Le],ye=W!=="hex"?[da.parts["aria-descriptor"]({text:ae})]:[],Be=Fe.concat(ye);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Be}},p=function(H,W){var K=h2(W);return y0.getField(H,"hex").each(function(ue){tr.isFocused(ue)||Ut.setValue(H,{hex:K.value})}),K},S=function(H,W){var K=W.red,ue=W.green,be=W.blue;Ut.setValue(H,{red:K,green:ue,blue:be})},x=Sa({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),E=function(H,W){x.getOpt(H).each(function(K){Zn(K.element,"background-color","#"+W.value)})},M=function(){var H={red:Hn(R.some(255)),green:Hn(R.some(255)),blue:Hn(R.some(255)),hex:Hn(R.some("ffffff"))},W=function(Je,At){var hn=p2(At);S(Je,hn),ae(hn)},K=function(Je){return H[Je].get()},ue=function(Je,At){H[Je].set(At)},be=function(){return K("red").bind(function(Je){return K("green").bind(function(At){return K("blue").map(function(hn){return Jg(Je,At,hn,1)})})})},ae=function(Je){var At=Je.red,hn=Je.green,ot=Je.blue;ue("red",R.some(At)),ue("green",R.some(hn)),ue("blue",R.some(ot))},we=function(Je,At){var hn=At.event;hn.type!=="hex"?ue(hn.type,R.none()):s(Je)},Le=function(Je,At){o(Je);var hn=DD(At);ue("hex",R.some(At));var ot=p2(hn);S(Je,ot),ae(ot),Vn(Je,vA,{hex:hn}),E(Je,hn)},Fe=function(Je,At,hn){var ot=parseInt(hn,10);ue(At,R.some(ot)),be().each(function(cn){var On=p(Je,cn);Vn(Je,vA,{hex:On}),E(Je,On)})},ye=function(Je){return Je.type==="hex"},Be=function(Je,At){var hn=At.event;ye(hn)?Le(Je,hn.value):Fe(Je,hn.type,hn.value)},Qe=function(Je){return{label:t(MT+Je+".label"),description:t(MT+Je+".description")}},Wt=Qe("red"),it=Qe("green"),Jt=Qe("blue"),ct=Qe("hex");return Xe(y0.sketch(function(Je){return{dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Je.field("red",da.sketch(m(x4,"red",Wt.label,Wt.description,255))),Je.field("green",da.sketch(m(x4,"green",it.label,it.description,255))),Je.field("blue",da.sketch(m(x4,"blue",Jt.label,Jt.description,255))),Je.field("hex",da.sketch(m(MD,"hex",ct.label,ct.description,"ffffff"))),x.asSpec()],formBehaviours:Bt([gv.config({invalidClass:r("form-invalid")}),mr("rgb-form-events",[ut(yR,Be),ut(wR,we),ut(CR,we)])])}}),{apis:{updateHex:function(Je,At){Ut.setValue(Je,{hex:At.value}),W(Je,At),E(Je,At)}}})},P=Ec({factory:M,name:"RgbForm",configFields:[],apis:{updateHex:function(H,W,K){H.updateHex(W,K)}},extraApis:{}});return P},OI=function(t,r){var o=Rf.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),s=Rf.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:"<div class="+r("sv-palette-inner-thumb")+' role="presentation"></div>'}}),v=function(E,M){var P=E.width,H=E.height,W=E.getContext("2d");if(W!==null){W.fillStyle=M,W.fillRect(0,0,P,H);var K=W.createLinearGradient(0,0,P,0);K.addColorStop(0,"rgba(255,255,255,1)"),K.addColorStop(1,"rgba(255,255,255,0)"),W.fillStyle=K,W.fillRect(0,0,P,H);var ue=W.createLinearGradient(0,0,0,H);ue.addColorStop(0,"rgba(0,0,0,0)"),ue.addColorStop(1,"rgba(0,0,0,1)"),W.fillStyle=ue,W.fillRect(0,0,P,H)}},m=function(E,M){var P=E.components()[0].element.dom,H=b2(M,100,100),W=ND(H);v(P,zD(W))},p=function(E,M){var P=k4(p2(M));Rf.setValue(E,{x:P.saturation,y:100-P.value})},S=function(E){var M=Z({x:0,y:0}),P=function(K,ue,be){Vn(K,_T,{value:be})},H=function(K,ue,be,ae){v(be.element.dom,zD(FD))},W=Bt([Fr.config({find:R.some}),tr.config({})]);return Rf.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:M},rounded:!1,components:[o,s],onChange:P,onInit:H,sliderBehaviours:W})},x=Ec({factory:S,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(E,M,P){m(M,P)},setThumb:function(E,M,P){p(M,P)}},extraApis:{}});return x},AI=function(t,r){var o=function(v){var m=SR(t,r,v.onValidHex,v.onInvalidHex),p=OI(t,r),S=function(Be){return(100-Be)/100*360},x=function(Be){return 100-Be/360*100},E={paletteRgba:Hn(FD),paletteHue:Hn(0)},M=Sa(hR(t,r)),P=Sa(p.sketch({})),H=Sa(m.sketch({})),W=function(Be,Qe,Wt){P.getOpt(Be).each(function(it){p.setHue(it,Wt)})},K=function(Be,Qe){H.getOpt(Be).each(function(Wt){m.updateHex(Wt,Qe)})},ue=function(Be,Qe,Wt){M.getOpt(Be).each(function(it){Rf.setValue(it,{y:x(Wt)})})},be=function(Be,Qe){P.getOpt(Be).each(function(Wt){p.setThumb(Wt,Qe)})},ae=function(Be,Qe){var Wt=p2(Be);E.paletteRgba.set(Wt),E.paletteHue.set(Qe)},we=function(Be,Qe,Wt,it){ae(Qe,Wt),Lt(it,function(Jt){Jt(Be,Qe,Wt)})},Le=function(){var Be=[K];return function(Qe,Wt){var it=Wt.event.value,Jt=E.paletteHue.get(),ct=b2(Jt,it.x,100-it.y),Je=VD(ct);we(Qe,Je,Jt,Be)}},Fe=function(){var Be=[W,K];return function(Qe,Wt){var it=S(Wt.event.value.y),Jt=E.paletteRgba.get(),ct=k4(Jt),Je=b2(it,ct.saturation,ct.value),At=VD(Je);we(Qe,At,it,Be)}},ye=function(){var Be=[W,ue,be];return function(Qe,Wt){var it=Wt.event.hex,Jt=O5(it);we(Qe,it,Jt.hue,Be)}};return{uid:v.uid,dom:v.dom,components:[P.asSpec(),M.asSpec(),H.asSpec()],behaviours:Bt([mr("colour-picker-events",[ut(vA,ye()),ut(_T,Le()),ut(gd,Fe())]),Fr.config({find:function(Be){return H.getOpt(Be)}}),Gn.config({mode:"acyclic"})])}},s=Ec({name:"ColourPicker",configFields:[rt("dom"),Se("onValidHex",ge),Se("onInvalidHex",ge)],factory:o});return s},DI=function(){return Fr.config({find:R.some})},BT=function(t){return Fr.config({find:t.getOpt})},_I=function(t){return Fr.config({find:function(r){return w(r.element,t).bind(function(o){return r.getSystem().getByDom(o).toOptional()})}})},pv={self:DI,memento:BT,childAt:_I},xR={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},TR=function(t){return xR[t]},RI=function(t){return TR(t)},MI=function(t){var r=function(p){return"tox-"+p},o=AI(RI,r),s=function(p){Vn(p,mv,{name:"hex-valid",value:!0})},v=function(p){Vn(p,mv,{name:"hex-valid",value:!1})},m=Sa(o.sketch({dom:{tag:"div",classes:[r("color-picker-container")],attributes:{role:"presentation"}},onValidHex:s,onInvalidHex:v}));return{dom:{tag:"div"},components:[m.asSpec()],behaviours:Bt([Ut.config({store:{mode:"manual",getValue:function(p){var S=m.get(p),x=Fr.getCurrent(S),E=x.bind(function(M){var P=Ut.getValue(M);return P.hex});return E.map(function(M){return"#"+M}).getOr("")},setValue:function(p,S){var x=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,E=x.exec(S),M=m.get(p),P=Fr.getCurrent(M);P.fold(function(){console.log("Can not find form")},function(H){Ut.setValue(H,{hex:R.from(E[1]).getOr("")}),y0.getField(H,"hex").each(function(W){oa(W,Td())})})}}}),pv.self()])}},PT=tinymce.util.Tools.resolve("tinymce.Resource"),BI=function(t){return Ar(t,"init")},PI=function(t){var r=Wo(),o=Sa({dom:{tag:t.tag}}),s=Wo();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Bt([mr("custom-editor-events",[dr(function(v){o.getOpt(v).each(function(m){(BI(t)?t.init(m.element.dom):PT.load(t.scriptId,t.scriptUrl).then(function(p){return p(m.element.dom,t.settings)})).then(function(p){s.on(function(S){p.setValue(S)}),s.clear(),r.set(p)})})})]),Ut.config({store:{mode:"manual",getValue:function(){return r.get().fold(function(){return s.get().getOr("")},function(v){return v.getValue()})},setValue:function(v,m){r.get().fold(function(){s.set(m)},function(p){return p.setValue(m)})}}}),pv.self()]),components:[o.asSpec()]}},rh=tinymce.util.Tools.resolve("tinymce.util.Tools"),NI=In([Se("preprocess",Ne),Se("postprocess",Ne)]),NT=function(t,r){var o=Ta("RepresentingConfigs.memento processors",NI,r);return Ut.config({store:{mode:"manual",getValue:function(s){var v=t.get(s),m=Ut.getValue(v);return o.postprocess(m)},setValue:function(s,v){var m=o.preprocess(v),p=t.get(s);Ut.setValue(p,m)}}})},IT=function(t,r,o){return Ut.config(Xe({store:{mode:"manual",getValue:r,setValue:o}},t.map(function(s){return{store:{initialValue:s}}}).getOr({})))},hA=function(t,r,o){return IT(t,function(s){return r(s.element)},function(s,v){return o(s.element,v)})},II=function(t){return hA(t,sf,Gm)},$T=function(t){return hA(t,rf,Zf)},$I=function(t){return Ut.config({store:{mode:"memory",initialValue:t}})},hm={memento:NT,withElement:hA,withComp:IT,domValue:II,domHtml:$T,memory:$I},kR="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",zI=function(t,r){var o=rh.explode(r.getSetting("images_file_types",kR,"string")),s=function(v){return ba(o,function(m){return kn(v.name.toLowerCase(),"."+m.toLowerCase())})};return Nt(Co(t),s)},FI=function(t,r){var o=function(P,H){H.stop()},s=function(P){return function(H,W){Lt(P,function(K){K(H,W)})}},v=function(P,H){if(!Ln.isDisabled(P)){var W=H.event.raw;p(P,W.dataTransfer.files)}},m=function(P,H){var W=H.event.raw.target;p(P,W.files)},p=function(P,H){Ut.setValue(P,zI(H,r)),Vn(P,dl,{name:t.name})},S=Sa({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Bt([mr("input-file-events",[Ad(zm()),Ad(Rv())])])}),x=function(P){return{uid:P.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Bt([hm.memory([]),pv.self(),Ln.config({}),Jr.config({toggleClass:"dragenter",toggleOnExecute:!1}),mr("dropzone-events",[ut("dragenter",s([o,Jr.toggle])),ut("dragleave",s([o,Jr.toggle])),ut("dragover",o),ut("drop",s([o,v])),ut($m(),m)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:r.translate("Drop an image here")}},tc.sketch({dom:{tag:"button",innerHtml:r.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[S.asSpec()],action:function(H){var W=S.get(H);W.element.dom.click()},buttonBehaviours:Bt([si.config({}),Ef.button(r.isDisabled),Ui()])})]}]}},E=t.label.map(function(P){return vm(P,r)}),M=da.parts.field({factory:{sketch:x}});return T2(E,M,["tox-form__group--stretched"],[])},ER=function(t,r){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:gt(t.items,r.interpreter)}},zT=gn("alloy-fake-before-tabstop"),pA=gn("alloy-fake-after-tabstop"),bA=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Bt([tr.config({ignore:!0}),si.config({})])}},yA=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[bA([zT]),t,bA([pA])],behaviours:Bt([pv.childAt(1)])}},wA=function(t,r){Vn(t,c1(),{raw:{which:9,shiftKey:r}})},OR=function(t,r){var o=r.element;ls(o,zT)?wA(t,!0):ls(o,pA)&&wA(t,!1)},H2=function(t){return C2(t,["."+zT,"."+pA].join(","),$t)},LI=!(St().browser.isIE()||St().browser.isEdge()),HI=function(t){var r=Hn("");return{getValue:function(o){return r.get()},setValue:function(o,s){if(t)hr(o.element,"srcdoc",s);else{hr(o.element,"src","javascript:''");var v=o.element.dom.contentWindow.document;v.open(),v.write(s),v.close()}r.set(s)}}},AR=function(t,r){var o=LI&&t.sandboxed,s=ve(ve({},t.label.map(function(x){return{title:x}}).getOr({})),o?{sandbox:"allow-scripts allow-same-origin"}:{}),v=HI(o),m=t.label.map(function(x){return vm(x,r)}),p=function(x){return yA({uid:x.uid,dom:{tag:"iframe",attributes:s},behaviours:Bt([si.config({}),tr.config({}),hm.withComp(R.none(),v.getValue,v.setValue)])})},S=da.parts.field({factory:{sketch:p}});return T2(m,S,["tox-form__group--stretched"],[])},w0=function(t,r){return VI(document.createElement("canvas"),t,r)},DR=function(t){var r=w0(t.width,t.height),o=pm(r);return o.drawImage(t,0,0),r},pm=function(t){return t.getContext("2d")},VI=function(t,r,o){return t.width=r,t.height=o,t},V2=function(t){return t.naturalWidth||t.width},CA=function(t){return t.naturalHeight||t.height},UI=function(t){return new dm(function(r,o){var s=URL.createObjectURL(t),v=new Image,m=function(){v.removeEventListener("load",p),v.removeEventListener("error",S)},p=function(){m(),r(v)},S=function(){m(),o("Unable to load data of type "+t.type+": "+s)};v.addEventListener("load",p),v.addEventListener("error",S),v.src=s,v.complete&&setTimeout(p,0)})},WI=function(t){var r=t.split(","),o=/data:([^;]+)/.exec(r[0]);if(!o)return R.none();for(var s=o[1],v=r[1],m=1024,p=atob(v),S=p.length,x=Math.ceil(S/m),E=new Array(x),M=0;M<x;++M){for(var P=M*m,H=Math.min(P+m,S),W=new Array(H-P),K=P,ue=0;K<H;++ue,++K)W[ue]=p[K].charCodeAt(0);E[M]=new Uint8Array(W)}return R.some(new Blob(E,{type:s}))},jI=function(t){return new dm(function(r,o){WI(t).fold(function(){o("uri is not base64: "+t)},r)})},_R=function(t,r,o){return r=r||"image/png",Ft(HTMLCanvasElement.prototype.toBlob)?new dm(function(s,v){t.toBlob(function(m){m?s(m):v()},r,o)}):jI(t.toDataURL(r,o))},GI=function(t,r,o){return r=r||"image/png",t.toDataURL(r,o)},qI=function(t){return UI(t).then(function(r){KI(r);var o=w0(V2(r),CA(r)),s=pm(o);return s.drawImage(r,0,0),o})},RR=function(t){return new dm(function(r){var o=new FileReader;o.onloadend=function(){r(o.result)},o.readAsDataURL(t)})},KI=function(t){URL.revokeObjectURL(t.src)},MR=function(t,r,o){var s=r.type,v=Z(s),m=function(){return dm.resolve(r)},p=Z(o),S=function(){return o.split(",")[1]},x=function(H,W){return t.then(function(K){return _R(K,H,W)})},E=function(H,W){return t.then(function(K){return GI(K,H,W)})},M=function(H,W){return E(H,W).then(function(K){return K.split(",")[1]})},P=function(){return t.then(DR)};return{getType:v,toBlob:m,toDataURL:p,toBase64:S,toAdjustedBlob:x,toAdjustedDataURL:E,toAdjustedBase64:M,toCanvas:P}},BR=function(t){return RR(t).then(function(r){return MR(qI(t),t,r)})},Ip=function(t,r){return _R(t,r).then(function(o){return MR(dm.resolve(t),o,t.toDataURL())})},XI=function(t){return BR(t)},U2=function(t,r,o){var s=typeof t=="string"?parseFloat(t):t;return s>o?s=o:s<r&&(s=r),s},SA=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},xA=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],TA=function(t,r){for(var o=[],s=new Array(25),v,m=0;m<5;m++){for(var p=0;p<5;p++)o[p]=r[p+m*5];for(var p=0;p<5;p++){v=0;for(var S=0;S<5;S++)v+=t[p+S*5]*o[S];s[p+m*5]=v}}return s},PR=function(t,r){var o;return r=U2(r,-1,1),r*=100,r<0?o=127+r/100*127:(o=r%1,o===0?o=xA[r]:o=xA[Math.floor(r)]*(1-o)+xA[Math.floor(r)+1]*o,o=o*127+127),TA(t,[o/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])},NR=function(t,r){return r=U2(255*r,-255,255),TA(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])},IR=function(t,r,o,s){return r=U2(r,0,2),o=U2(o,0,2),s=U2(s,0,2),TA(t,[r,0,0,0,0,0,o,0,0,0,0,0,s,0,0,0,0,0,1,0,0,0,0,0,1])},kA=function(t,r){return t.toCanvas().then(function(o){return $R(o,t.getType(),r)})},$R=function(t,r,o){var s=pm(t),v=function(p,S){for(var x,E,M,P,H=p.data,W=S[0],K=S[1],ue=S[2],be=S[3],ae=S[4],we=S[5],Le=S[6],Fe=S[7],ye=S[8],Be=S[9],Qe=S[10],Wt=S[11],it=S[12],Jt=S[13],ct=S[14],Je=S[15],At=S[16],hn=S[17],ot=S[18],cn=S[19],On=0;On<H.length;On+=4)x=H[On],E=H[On+1],M=H[On+2],P=H[On+3],H[On]=x*W+E*K+M*ue+P*be+ae,H[On+1]=x*we+E*Le+M*Fe+P*ye+Be,H[On+2]=x*Qe+E*Wt+M*it+P*Jt+ct,H[On+3]=x*Je+E*At+M*hn+P*ot+cn;return p},m=v(s.getImageData(0,0,t.width,t.height),o);return s.putImageData(m,0,0),Ip(t,r)},zR=function(t,r){return t.toCanvas().then(function(o){return YI(o,t.getType(),r)})},YI=function(t,r,o){var s=pm(t),v=function(S,x,E){for(var M=function(At,hn,ot){return At>ot?At=ot:At<hn&&(At=hn),At},P=Math.round(Math.sqrt(E.length)),H=Math.floor(P/2),W=S.data,K=x.data,ue=S.width,be=S.height,ae=0;ae<be;ae++)for(var we=0;we<ue;we++){for(var Le=0,Fe=0,ye=0,Be=0;Be<P;Be++)for(var Qe=0;Qe<P;Qe++){var Wt=M(we+Qe-H,0,ue-1),it=M(ae+Be-H,0,be-1),Jt=(it*ue+Wt)*4,ct=E[Be*P+Qe];Le+=W[Jt]*ct,Fe+=W[Jt+1]*ct,ye+=W[Jt+2]*ct}var Je=(ae*ue+we)*4;K[Je]=M(Le,0,255),K[Je+1]=M(Fe,0,255),K[Je+2]=M(ye,0,255)}return x},m=s.getImageData(0,0,t.width,t.height),p=s.getImageData(0,0,t.width,t.height);return p=v(m,p,o),s.putImageData(p,0,0),Ip(t,r)},JI=function(t){var r=function(o,s,v){for(var m=pm(o),p=new Array(256),S=function(M,P){for(var H=M.data,W=0;W<H.length;W+=4)H[W]=P[H[W]],H[W+1]=P[H[W+1]],H[W+2]=P[H[W+2]];return M},x=0;x<p.length;x++)p[x]=t(x,v);var E=S(m.getImageData(0,0,o.width,o.height),p);return m.putImageData(E,0,0),Ip(o,s)};return function(o,s){return o.toCanvas().then(function(v){return r(v,o.getType(),s)})}},FR=function(t){return function(r,o){return kA(r,t(SA(),o))}},ZI=function(t){return function(r){return kA(r,t)}},QI=function(t){return function(r){return zR(r,t)}},e$=ZI([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),LR=FR(NR),t$=FR(PR),n$=function(t,r,o,s){return kA(t,IR(SA(),r,o,s))},r$=QI([0,-1,0,-1,5,-1,0,-1,0]),ea=JI(function(t,r){return Math.pow(t/255,1-r)*255}),$p=function(t,r,o){var s=V2(t),v=CA(t),m=r/s,p=o/v,S=!1;(m<.5||m>2)&&(m=m<.5?.5:2,S=!0),(p<.5||p>2)&&(p=p<.5?.5:2,S=!0);var x=HR(t,m,p);return S?x.then(function(E){return $p(E,r,o)}):x},HR=function(t,r,o){return new dm(function(s){var v=V2(t),m=CA(t),p=Math.floor(v*r),S=Math.floor(m*o),x=w0(p,S),E=pm(x);E.drawImage(t,0,0,v,m,0,0,p,S),s(x)})},EA=function(t,r){r===void 0&&(r=2);var o=Math.pow(10,r),s=Math.round(t*o);return Math.ceil(s/o)},VR=function(t,r){return t.toCanvas().then(function(o){return a$(o,t.getType(),r)})},a$=function(t,r,o){var s=o<0?360+o:o,v=s*Math.PI/180,m=t.width,p=t.height,S=Math.sin(v),x=Math.cos(v),E=EA(Math.abs(m*x)+Math.abs(p*S)),M=EA(Math.abs(m*S)+Math.abs(p*x)),P=w0(E,M),H=pm(P);return H.translate(E/2,M/2),H.rotate(v),H.drawImage(t,-m/2,-p/2),Ip(P,r)},o$=function(t,r){return t.toCanvas().then(function(o){return i$(o,t.getType(),r)})},i$=function(t,r,o){var s=w0(t.width,t.height),v=pm(s);return o==="v"?(v.scale(1,-1),v.drawImage(t,0,-s.height)):(v.scale(-1,1),v.drawImage(t,-s.width,0)),Ip(s,r)},UR=function(t,r,o,s,v){return t.toCanvas().then(function(m){return u$(m,t.getType(),r,o,s,v)})},u$=function(t,r,o,s,v,m){var p=w0(v,m),S=pm(p);return S.drawImage(t,-o,-s),Ip(p,r)},s$=function(t,r,o){return t.toCanvas().then(function(s){return $p(s,r,o).then(function(v){return Ip(v,t.getType())})})},c$=function(t){return e$(t)},l$=function(t){return r$(t)},f$=function(t,r){return ea(t,r)},v$=function(t,r,o,s){return n$(t,r,o,s)},d$=function(t,r){return LR(t,r)},m$=function(t,r){return t$(t,r)},WR=function(t,r){return o$(t,r)},g$=function(t,r,o,s,v){return UR(t,r,o,s,v)},h$=function(t,r,o){return s$(t,r,o)},OA=function(t,r){return VR(t,r)},jR=function(t,r,o){return dv(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:o},r)},FT=function(t,r){return jR(t,r,[])},GR=function(t,r){return jR(t,r,[sr.config({})])},AA=function(t,r,o){return{dom:{tag:"span",innerHtml:o.translate(t),classes:[r+"__select-label"]},behaviours:Bt([sr.config({})])}},DA,qR=gn("toolbar.button.execute"),KR=function(t){return Js(function(r,o){d0(t,r)(function(s){Vn(r,qR,{buttonApi:s}),t.onAction(s)})})},XR=(DA={},DA[pc()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],DA),zp=gn("update-menu-text"),YR=gn("update-menu-icon"),LT=function(t,r,o){var s=Hn(ge),v=t.text.map(function(P){return Sa(AA(P,r,o.providers))}),m=t.icon.map(function(P){return Sa(GR(P,o.providers.icons))}),p=function(P,H){var W=Ut.getValue(P);return tr.focus(W),Vn(W,"keydown",{raw:H.event.raw}),Af.close(W),R.some(!0)},S=t.role.fold(function(){return{}},function(P){return{role:P}}),x=t.tooltip.fold(function(){return{}},function(P){var H=o.providers.translate(P);return{title:H,"aria-label":H}}),E=dv("chevron-down",{tag:"div",classes:[r+"__select-chevron"]},o.providers.icons),M=Sa(Af.sketch(ve(ve(ve({},t.uid?{uid:t.uid}:{}),S),{dom:{tag:"button",classes:[r,r+"--select"].concat(gt(t.classes,function(P){return r+"--"+P})),attributes:ve({},x)},components:cm([m.map(function(P){return P.asSpec()}),v.map(function(P){return P.asSpec()}),R.some(E)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Bt(Pn(Pn([],t.dropdownBehaviours,!0),[Ef.button(function(){return t.disabled||o.providers.isDisabled()}),Ui(),A2.config({}),sr.config({}),mr("dropdown-events",[Tp(t,s),kp(t,s)]),mr("menubutton-update-display-text",[ut(zp,function(P,H){v.bind(function(W){return W.getOpt(P)}).each(function(W){sr.set(W,[pu(o.providers.translate(H.event.text))])})}),ut(YR,function(P,H){m.bind(function(W){return W.getOpt(P)}).each(function(W){sr.set(W,[GR(H.event.icon,o.providers.icons)])})})])],!1)),eventOrder:Xe(XR,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Bt([Gn.config({mode:"special",onLeft:p,onRight:p})]),lazySink:o.getSink,toggleClass:r+"--active",parts:{menu:Sp(!1,t.columns,t.presets)},fetch:function(P){return $u.nu(Vt(t.fetch,P))}})));return M.asSpec()},JR=function(t){return dt(t)},HT=function(t){return t.type==="separator"},p$=function(t){return Ar(t,"getSubmenuItems")},b$={type:"separator"},y$=function(t,r){var o=$n(t,function(s,v){return JR(v)?v===""?s:v==="|"?s.length>0&&!HT(s[s.length-1])?s.concat([b$]):s:Ar(r,v.toLowerCase())?s.concat([r[v.toLowerCase()]]):s:s.concat([v])},[]);return o.length>0&&HT(o[o.length-1])&&o.pop(),o},w$=function(t,r){var o=t.getSubmenuItems(),s=C0(o,r),v=Xe(s.menus,ef(t.value,s.items)),m=Xe(s.expansions,ef(t.value,t.value));return{item:t,menus:v,expansions:m}},C$=function(t,r){return p$(t)?w$(t,r):{item:t,menus:{},expansions:{}}},S$=function(t){if(HT(t))return t;var r=yn(t,"value").getOrThunk(function(){return gn("generated-menu-item")});return Xe({value:r},t)},C0=function(t,r){var o=y$(dt(t)?t.split(" "):t,r);return Dn(o,function(s,v){var m=S$(v),p=C$(m,r);return{menus:Xe(s.menus,p.menus),items:[p.item].concat(s.items),expansions:Xe(s.expansions,p.expansions)}},{menus:{},expansions:{},items:[]})},S0=function(t,r,o,s){var v=gn("primary-menu"),m=C0(t,o.shared.providers.menuItems());if(m.items.length===0)return R.none();var p=s_(v,m.items,r,o,s),S=Pr(m.menus,function(E,M){return s_(M,E,r,o,!1)}),x=Xe(S,ef(v,p));return R.from(Na.tieredData(v,x,m.expansions))},_A=function(t){return{isDisabled:function(){return Ln.isDisabled(t)},setDisabled:function(r){return Ln.set(t,r)},setActive:function(r){var o=t.element;r?(Mi(o,"tox-tbtn--enabled"),hr(o,"aria-pressed",!0)):(yi(o,"tox-tbtn--enabled"),Ji(o,"aria-pressed"))},isActive:function(){return ls(t.element,"tox-tbtn--enabled")}}},RA=function(t,r,o,s){return LT({text:t.text,icon:t.icon,tooltip:t.tooltip,role:s,fetch:function(v,m){t.fetch(function(p){m(S0(p,Xu.CLOSE_ON_EXECUTE,o,!1))})},onSetup:t.onSetup,getApi:_A,columns:1,presets:"normal",classes:[],dropdownBehaviours:[si.config({})]},r,o.shared)},x$=function(t,r,o){var s=function(m){return function(p){var S=!p.isActive();p.setActive(S),m.storage.set(S),o.shared.getSink().each(function(x){r().getOpt(x).each(function(E){_l(E.element),Vn(E,mv,{name:m.name,value:m.storage.get()})})})}},v=function(m){return function(p){p.setActive(m.storage.get())}};return function(m){m(gt(t,function(p){var S=p.text.fold(function(){return{}},function(x){return{text:x}});return ve(ve({type:p.type,active:!1},S),{onAction:s(p),onSetup:v(p)})}))}},ZR=function(t,r,o,s,v,m){o===void 0&&(o=[]);var p=r.fold(function(){return{}},function(E){return{action:E}}),S=ve({buttonBehaviours:Bt([Ef.button(function(){return t.disabled||m.isDisabled()}),Ui(),si.config({}),mr("button press",[p1("click"),p1("mousedown")])].concat(o)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},p),x=Xe(S,{dom:s});return Xe(x,{components:v})},QR=function(t,r,o,s){s===void 0&&(s=[]);var v=t.tooltip.map(function(x){return{"aria-label":o.translate(x),title:o.translate(x)}}).getOr({}),m={tag:"button",classes:["tox-tbtn"],attributes:v},p=t.icon.map(function(x){return FT(x,o.icons)}),S=cm([p]);return ZR(t,r,s,m,S,o)},MA=function(t,r,o,s){s===void 0&&(s=[]);var v=QR(t,R.some(r),o,s);return tc.sketch(v)},BA=function(t,r,o,s,v){s===void 0&&(s=[]),v===void 0&&(v=[]);var m=o.translate(t.text),p=t.icon?t.icon.map(function(P){return FT(P,o.icons)}):R.none(),S=p.isSome()?cm([p]):[],x=p.isSome()?{}:{innerHtml:m},E=Pn(Pn(Pn(Pn([],!t.primary&&!t.borderless?["tox-button","tox-button--secondary"]:["tox-button"],!0),p.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),v,!0),M=ve(ve({tag:"button",classes:E},x),{attributes:{title:m}});return ZR(t,r,s,M,S,o)},PA=function(t,r,o,s,v){s===void 0&&(s=[]),v===void 0&&(v=[]);var m=BA(t,R.some(r),o,s,v);return tc.sketch(m)},W2=function(t,r){return function(o){r==="custom"?Vn(o,mv,{name:t,value:{}}):r==="submit"?oa(o,jc):r==="cancel"?oa(o,Op):console.error("Unknown button type: ",r)}},VT=function(t,r){return r==="menu"},T$=function(t,r){return r==="custom"||r==="cancel"||r==="submit"},UT=function(t,r,o){if(VT(t,r)){var s=function(){return p},v=t,m=ve(ve({},t),{onSetup:function(E){return E.setDisabled(t.disabled),ge},fetch:x$(v.items,s,o)}),p=Sa(RA(m,"tox-tbtn",o,R.none()));return p.asSpec()}else if(T$(t,r)){var S=W2(t.name,r),x=ve(ve({},t),{borderless:!1});return PA(x,S,o.shared.providers,[])}else console.error("Unknown footer button type: ",r)},k$=function(t,r){var o=W2(t.name,"custom");return pN(R.none(),da.parts.field(ve({factory:tc},BA(t,R.some(o),r,[hm.memory(""),pv.self()]))))},E$=Z([Se("field1Name","field1"),Se("field2Name","field2"),vs("onLockedChange"),$d(["lockClass"]),Se("locked",!1),Hc.field("coupledFieldBehaviours",[Fr,Ut])]),NA=function(t,r,o){return Fa(t,r,o).bind(Fr.getCurrent)},WT=function(t,r){return Su({factory:da,name:t,overrides:function(o){return{fieldBehaviours:Bt([mr("coupled-input-behaviour",[ut(Td(),function(s){NA(s,o,r).each(function(v){Fa(s,o,"lock").each(function(m){Jr.isOn(m)&&o.onLockedChange(s,v,m)})})})])])}}})},eM=Z([WT("field1","field2"),WT("field2","field1"),Su({factory:tc,schema:[rt("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Bt([Jr.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),O$=function(t,r,o,s){return{uid:t.uid,dom:t.dom,components:r,behaviours:Hc.augment(t.coupledFieldBehaviours,[Fr.config({find:R.some}),Ut.config({store:{mode:"manual",getValue:function(v){var m,p=Ab(v,t,["field1","field2"]);return m={},m[t.field1Name]=Ut.getValue(p.field1()),m[t.field2Name]=Ut.getValue(p.field2()),m},setValue:function(v,m){var p=Ab(v,t,["field1","field2"]);wa(m,t.field1Name)&&Ut.setValue(p.field1(),m[t.field1Name]),wa(m,t.field2Name)&&Ut.setValue(p.field2(),m[t.field2Name])}}})]),apis:{getField1:function(v){return Fa(v,t,"field1")},getField2:function(v){return Fa(v,t,"field2")},getLock:function(v){return Fa(v,t,"lock")}}}},Ac=hs({name:"FormCoupledInputs",configFields:E$(),partFields:eM(),factory:O$,apis:{getField1:function(t,r){return t.getField1(r)},getField2:function(t,r){return t.getField2(r)},getLock:function(t,r){return t.getLock(r)}}}),A$=function(t){var r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},o=function(v){return v in r?r[v]:1},s=t.value.toFixed(o(t.unit));return s.indexOf(".")!==-1&&(s=s.replace(/\.?0*$/,"")),s+t.unit},IA=function(t){var r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,o=r.exec(t);if(o!==null){var s=parseFloat(o[1]),v=o[2];return pr.value({value:s,unit:v})}else return pr.error(t)},$A=function(t,r){var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},s=function(v){return Ar(o,v)};return t.unit===r?R.some(t.value):s(t.unit)&&s(r)?o[t.unit]===o[r]?R.some(t.value):R.some(t.value/o[t.unit]*o[r]):R.none()},zA=function(t){return R.none()},j2=function(t,r){return function(o){return $A(o,r).map(function(s){return{value:s*t,unit:r}})}},D$=function(t,r){var o=IA(t).toOptional(),s=IA(r).toOptional();return So(o,s,function(v,m){return $A(v,m.unit).map(function(p){return m.value/p}).map(function(p){return j2(p,m.unit)}).getOr(zA)}).getOr(zA)},tM=function(t,r){var o=zA,s=gn("ratio-event"),v=function(P){return dv(P,{tag:"span",classes:["tox-icon","tox-lock-icon__"+P]},r.icons)},m=Ac.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[v("lock"),v("unlock")],buttonBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||r.isDisabled()}}),Ui(),si.config({})])}),p=function(P){return{dom:{tag:"div",classes:["tox-form__group"]},components:P}},S=function(P){return da.parts.field({factory:E2,inputClasses:["tox-textfield"],inputBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||r.isDisabled()}}),Ui(),si.config({}),mr("size-input-events",[ut(Ic(),function(H,W){Vn(H,s,{isField1:P})}),ut($m(),function(H,W){Vn(H,dl,{name:t.name})})])]),selectOnFocus:!1})},x=function(P){return{dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(P)}}},E=Ac.parts.field1(p([da.parts.label(x("Width")),S(!0)])),M=Ac.parts.field2(p([da.parts.label(x("Height")),S(!1)]));return Ac.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[E,M,p([x("&nbsp;"),m])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(P,H,W){IA(Ut.getValue(P)).each(function(K){o(K).each(function(ue){Ut.setValue(H,A$(ue))})})},coupledFieldBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(P){Ac.getField1(P).bind(da.getField).each(Ln.disable),Ac.getField2(P).bind(da.getField).each(Ln.disable),Ac.getLock(P).each(Ln.disable)},onEnabled:function(P){Ac.getField1(P).bind(da.getField).each(Ln.enable),Ac.getField2(P).bind(da.getField).each(Ln.enable),Ac.getLock(P).each(Ln.enable)}}),Ui(),mr("size-input-events2",[ut(s,function(P,H){var W=H.event.isField1,K=W?Ac.getField1(P):Ac.getField2(P),ue=W?Ac.getField2(P):Ac.getField1(P),be=K.map(Ut.getValue).getOr(""),ae=ue.map(Ut.getValue).getOr("");o=D$(be,ae)})])])})},_$=Z(gn("undo")),R$=Z(gn("redo")),nM=Z(gn("zoom")),M$=Z(gn("back")),B$=Z(gn("apply")),P$=Z(gn("swap")),N$=Z(gn("transform")),I$=Z(gn("temp-transform")),rM=Z(gn("transform-apply")),bs={undo:_$,redo:R$,zoom:nM,back:M$,apply:B$,swap:P$,transform:N$,tempTransform:I$,transformApply:rM},$$=Z("save-state"),z$=Z("disable"),aM=Z("enable"),rc={formActionEvent:mv,saveState:$$,disable:z$,enable:aM},F$=function(t,r){var o=function(rn,yr,ka,_o){return Sa(PA({name:rn,text:rn,disabled:ka,primary:_o,icon:R.none(),borderless:!1},yr,r))},s=function(rn,yr,ka,_o){return Sa(MA({name:rn,icon:R.some(rn),tooltip:R.some(yr),disabled:_o,primary:!1,borderless:!1},ka,r))},v=function(rn,yr){rn.map(function(ka){var _o=ka.get(yr);_o.hasConfigured(Ln)&&Ln.disable(_o)})},m=function(rn,yr){rn.map(function(ka){var _o=ka.get(yr);_o.hasConfigured(Ln)&&Ln.enable(_o)})},p={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},S=ge,x=function(rn,yr,ka){Vn(rn,yr,ka)},E=function(rn){return oa(rn,rc.disable())},M=function(rn){return oa(rn,rc.enable())},P=function(rn,yr){E(rn),x(rn,bs.transform(),{transform:yr}),M(rn)},H=function(rn,yr){E(rn),x(rn,bs.tempTransform(),{transform:yr}),M(rn)},W=function(rn){return function(){Tv.getOpt(rn).each(function(yr){sr.set(yr,[vh])})}},K=function(rn,yr){E(rn),x(rn,bs.transformApply(),{transform:yr,swap:W(rn)}),M(rn)},ue=function(){return o("Back",function(rn){return x(rn,bs.back(),{swap:W(rn)})},!1,!1)},be=function(){return Sa({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Bt([Ln.config({})])})},ae=function(){return o("Apply",function(rn){return x(rn,bs.apply(),{swap:W(rn)})},!0,!0)},we=function(){return function(rn){var yr=t.getRect();return g$(rn,yr.x,yr.y,yr.w,yr.h)}},Le=[ue(),be(),o("Apply",function(rn){var yr=we();K(rn,yr),t.hideCrop()},!1,!0)],Fe=ps.sketch({dom:p,components:Le.map(function(rn){return rn.asSpec()}),containerBehaviours:Bt([mr("image-tools-crop-buttons-events",[ut(rc.disable(),function(rn,yr){v(Le,rn)}),ut(rc.enable(),function(rn,yr){m(Le,rn)})])])}),ye=Sa(tM({name:"size",label:R.none(),constrain:!0,disabled:!1},r)),Be=function(rn,yr){return function(ka){return h$(ka,rn,yr)}},Qe=[ue(),be(),ye,be(),o("Apply",function(rn){ye.getOpt(rn).each(function(yr){var ka=Ut.getValue(yr),_o=parseInt(ka.width,10),uc=parseInt(ka.height,10),Fs=Be(_o,uc);K(rn,Fs)})},!1,!0)],Wt=ps.sketch({dom:p,components:Qe.map(function(rn){return rn.asSpec()}),containerBehaviours:Bt([mr("image-tools-resize-buttons-events",[ut(rc.disable(),function(rn,yr){v(Qe,rn)}),ut(rc.enable(),function(rn,yr){m(Qe,rn)})])])}),it=function(rn,yr){return function(ka){return rn(ka,yr)}},Jt=it(WR,"h"),ct=it(WR,"v"),Je=it(OA,-90),At=it(OA,90),hn=function(rn,yr){H(rn,yr)},ot=[ue(),be(),s("flip-horizontally","Flip horizontally",function(rn){hn(rn,Jt)},!1),s("flip-vertically","Flip vertically",function(rn){hn(rn,ct)},!1),s("rotate-left","Rotate counterclockwise",function(rn){hn(rn,Je)},!1),s("rotate-right","Rotate clockwise",function(rn){hn(rn,At)},!1),be(),ae()],cn=ps.sketch({dom:p,components:ot.map(function(rn){return rn.asSpec()}),containerBehaviours:Bt([mr("image-tools-fliprotate-buttons-events",[ut(rc.disable(),function(rn,yr){v(ot,rn)}),ut(rc.enable(),function(rn,yr){m(ot,rn)})])])}),On=function(rn,yr,ka,_o,uc){var Fs=Rf.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(rn)}}),Kc=Rf.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),Gl=Rf.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Sa(Rf.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:ka,maxX:uc,getInitialValue:Z({x:_o})},components:[Fs,Kc,Gl],sliderBehaviours:Bt([tr.config({})]),onChoose:yr}))},Wr=function(rn,yr,ka,_o,uc){var Fs=function(Kc,Gl,R0){var uC=it(yr,R0.x/100);P(Kc,uC)};return On(rn,Fs,ka,_o,uc)},xa=function(rn,yr,ka,_o,uc){return[ue(),Wr(rn,yr,ka,_o,uc),ae()]},oo=function(rn,yr,ka,_o,uc){var Fs=xa(rn,yr,ka,_o,uc);return ps.sketch({dom:p,components:Fs.map(function(Kc){return Kc.asSpec()}),containerBehaviours:Bt([mr("image-tools-filter-panel-buttons-events",[ut(rc.disable(),function(Kc,Gl){v(Fs,Kc)}),ut(rc.enable(),function(Kc,Gl){m(Fs,Kc)})])])})},Fo=[ue(),be(),ae()],qc=ps.sketch({dom:p,components:Fo.map(function(rn){return rn.asSpec()})}),ws=oo("Brightness",d$,-100,0,100),Ck=oo("Contrast",m$,-100,0,100),su=oo("Gamma",f$,-100,0,100),Kp=function(rn,yr,ka){return function(_o){return v$(_o,rn,yr,ka)}},Xp=function(rn){var yr=function(ka,_o,uc){var Fs=aC.getOpt(ka),Kc=oC.getOpt(ka),Gl=Yp.getOpt(ka);Fs.each(function(R0){Kc.each(function(uC){Gl.each(function(M0){var _L=Ut.getValue(R0).x/100,RL=Ut.getValue(M0).x/100,Zp=Ut.getValue(uC).x/100,B0=Kp(_L,RL,Zp);P(ka,B0)})})})};return On(rn,yr,0,100,200)},aC=Xp("R"),Yp=Xp("G"),oC=Xp("B"),ic=[ue(),aC,Yp,oC,ae()],xv=ps.sketch({dom:p,components:ic.map(function(rn){return rn.asSpec()})}),zs=function(rn,yr,ka){return function(_o){var uc=function(){Tv.getOpt(_o).each(function(Fs){sr.set(Fs,[rn]),ka(Fs)})};x(_o,bs.swap(),{transform:yr,swap:uc})}},iC=function(rn){t.showCrop()},fh=function(rn){ye.getOpt(rn).each(function(yr){var ka=t.getMeasurements(),_o=ka.width,uc=ka.height;Ut.setValue(yr,{width:_o,height:uc})})},_0=R.some(l$),cu=R.some(c$),Sm=[s("crop","Crop",zs(Fe,R.none(),iC),!1),s("resize","Resize",zs(Wt,R.none(),fh),!1),s("orientation","Orientation",zs(cn,R.none(),S),!1),s("brightness","Brightness",zs(ws,R.none(),S),!1),s("sharpen","Sharpen",zs(qc,_0,S),!1),s("contrast","Contrast",zs(Ck,R.none(),S),!1),s("color-levels","Color levels",zs(xv,R.none(),S),!1),s("gamma","Gamma",zs(su,R.none(),S),!1),s("invert","Invert",zs(qc,cu,S),!1)],vh=ps.sketch({dom:p,components:Sm.map(function(rn){return rn.asSpec()})}),Jp=ps.sketch({dom:{tag:"div"},components:[vh],containerBehaviours:Bt([sr.config({})])}),Tv=Sa(Jp),dh=function(rn){return Tv.getOpt(rn).map(function(yr){var ka=yr.components()[0];return ka.components()[ka.components().length-1]})};return{memContainer:Tv,getApplyButton:dh}},oM=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ml=tinymce.util.Tools.resolve("tinymce.util.Observable"),x0=tinymce.util.Tools.resolve("tinymce.util.VK"),FA=function(t){var r=Math.max,o=t.documentElement,s=t.body,v=r(o.scrollWidth,s.scrollWidth),m=r(o.clientWidth,s.clientWidth),p=r(o.offsetWidth,s.offsetWidth),S=r(o.scrollHeight,s.scrollHeight),x=r(o.clientHeight,s.clientHeight),E=r(o.offsetHeight,s.offsetHeight);return{width:v<p?m:v,height:S<E?x:S}},iM=function(t){return Ve(t.changedTouches)},jT=function(t){if(iM(t))for(var r="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<r.length;o++)t[r[o]]=t.changedTouches[0][r[o]]};function GT(t,r){var o,s,v,m,p=[],S=[],x=(o=r.document)!==null&&o!==void 0?o:document,E=(s=r.root)!==null&&s!==void 0?s:x,M=ie.fromDom(x),P,H,W,K=ie.fromDom(E.getElementById((v=r.handle)!==null&&v!==void 0?v:t)),ue=function(Le){var Fe=Le.raw,ye=FA(x);jT(Fe),Le.prevent(),P=Fe.button,H=Fe.screenX,W=Fe.screenY;var Be=Po(K,"cursor");m=ie.fromTag("div",x),Ws(m,{position:"absolute",top:"0",left:"0",width:ye.width+"px",height:ye.height+"px","z-index":2147483647+"",opacity:"0.0001",cursor:Be}),Du(ca(M),m),S.push(Qo(M,"mousemove",be),Qo(M,"touchmove",be),Qo(M,"mouseup",ae),Qo(M,"touchend",ae)),r.start(Fe)},be=function(Le){var Fe=Le.raw;if(jT(Fe),Fe.button!==P)return ae(Le);Fe.deltaX=Fe.screenX-H,Fe.deltaY=Fe.screenY-W,Le.prevent(),r.drag(Fe)},ae=function(Le){jT(Le.raw),Lt(S,function(Fe){return Fe.unbind()}),S=[],xs(m),r.stop&&r.stop(Le.raw)},we=function(){Lt(S.concat(p),function(Le){return Le.unbind()}),S=[],p=[],Ve(m)&&xs(m)};return p.push(Qo(K,"mousedown",ue),Qo(K,"touchstart",ue)),{destroy:we}}var L$=0,qT=function(t,r,o,s,v){var m,p=[],S="tox-",x=S+"crid-"+L$++,E=ie.fromDom(s),M=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],P=["top","right","bottom","left"],H=function(it,Jt){return{x:Jt.x+it.x,y:Jt.y+it.y,w:Jt.w,h:Jt.h}},W=function(it,Jt){return{x:Jt.x-it.x,y:Jt.y-it.y,w:Jt.w,h:Jt.h}},K=function(){return W(o,t)},ue=function(it,Jt,ct,Je){var At=Jt.x+ct*it.deltaX,hn=Jt.y+Je*it.deltaY,ot=Math.max(20,Jt.w+ct*it.deltaW),cn=Math.max(20,Jt.h+Je*it.deltaH),On=t=oM.clamp({x:At,y:hn,w:ot,h:cn},o,it.name==="move");On=W(o,On),Wt.fire("updateRect",{rect:On}),ye(On)},be=function(){var it=function(At){var hn;return GT(x,{document:s.ownerDocument,root:Fn(E).dom,handle:x+"-"+At.name,start:function(){hn=t},drag:function(ot){ue(At,hn,ot.deltaX,ot.deltaY)}})},Jt=ie.fromTag("div");Us(Jt,{id:x,class:S+"croprect-container",role:"grid","aria-dropeffect":"execute"}),Du(E,Jt),Lt(P,function(At){Bi(E,"#"+x).each(function(hn){var ot=ie.fromTag("div");Us(ot,{id:x+"-"+At,class:S+"croprect-block","data-mce-bogus":"all"}),Zn(ot,"display","none"),Du(hn,ot)})}),Lt(M,function(At){Bi(E,"#"+x).each(function(hn){var ot=ie.fromTag("div");Us(ot,{id:x+"-"+At.name,"aria-label":At.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:At.label}),Bd(ot,[S+"croprect-handle",S+"croprect-handle-"+At.name]),Zn(ot,"display","none"),Du(hn,ot)})}),m=gt(M,it),we(t);var ct=function(At){hr(At.target,"aria-grabbed",At.raw.type==="focus"?"true":"false")},Je=function(At){var hn;Lt(M,function(cn){if(co(At.target,"id")===x+"-"+cn.name)return hn=cn,!1});var ot=function(cn,On,Wr,xa,oo){cn.stopPropagation(),cn.preventDefault(),ue(hn,Wr,xa,oo)};switch(At.raw.keyCode){case x0.LEFT:ot(At,hn,t,-10,0);break;case x0.RIGHT:ot(At,hn,t,10,0);break;case x0.UP:ot(At,hn,t,0,-10);break;case x0.DOWN:ot(At,hn,t,0,10);break;case x0.ENTER:case x0.SPACEBAR:At.prevent(),v();break}};p.push(Qo(E,"focusin",ct),Qo(E,"focusout",ct),Qo(E,"keydown",Je))},ae=function(it){var Jt=Pn(Pn([],gt(M,function(Je){return"#"+x+"-"+Je.name}),!0),gt(P,function(Je){return"#"+x+"-"+Je}),!0).join(","),ct=Gu(E,Jt);it?Lt(ct,function(Je){return la(Je,"display")}):Lt(ct,function(Je){return Zn(Je,"display","none")})},we=function(it){var Jt=function(ct,Je){Bi(E,"#"+x+"-"+ct).each(function(At){Ws(At,{left:Je.x+"px",top:Je.y+"px",width:Math.max(0,Je.w)+"px",height:Math.max(0,Je.h)+"px"})})};Lt(M,function(ct){Bi(E,"#"+x+"-"+ct.name).each(function(Je){Ws(Je,{left:it.w*ct.xMul+it.x+"px",top:it.h*ct.yMul+it.y+"px"})})}),Jt("top",{x:r.x,y:r.y,w:r.w,h:it.y-r.y}),Jt("right",{x:it.x+it.w,y:it.y,w:r.w-it.x-it.w+r.x,h:it.h}),Jt("bottom",{x:r.x,y:it.y+it.h,w:r.w,h:r.h-it.y-it.h+r.y}),Jt("left",{x:r.x,y:it.y,w:it.x-r.x,h:it.h}),Jt("move",it)},Le=function(it){t=it,we(t)},Fe=function(it){r=it,we(t)},ye=function(it){Le(H(o,it))},Be=function(it){o=it,we(t)},Qe=function(){Lt(m,function(it){return it.destroy()}),m=[],Lt(p,function(it){return it.unbind()}),p=[]};be();var Wt=ve(ve({},ml),{toggleVisibility:ae,setClampRect:Be,setRect:Le,getInnerRect:K,setInnerRect:ye,setViewPortRect:Fe,destroy:Qe});return Wt},H$={create:qT},G2=function(t){return new i2(function(r){var o=function(){t.removeEventListener("load",o),r(t)};t.complete?r(t):t.addEventListener("load",o)})},uM=function(t){var r=Sa({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=Hn(1),s=Ry(),v=Hn({x:0,y:0,w:1,h:1}),m=Hn({x:0,y:0,w:1,h:1}),p=function(be,ae){K.getOpt(be).each(function(we){var Le=o.get(),Fe=Au(we.element),ye=pi(we.element),Be=ae.dom.naturalWidth*Le,Qe=ae.dom.naturalHeight*Le,Wt=Math.max(0,Fe/2-Be/2),it=Math.max(0,ye/2-Qe/2),Jt={left:Wt.toString()+"px",top:it.toString()+"px",width:Be.toString()+"px",height:Qe.toString()+"px",position:"absolute"};Ws(ae,Jt),r.getOpt(we).each(function(ct){Ws(ct.element,Jt)}),s.run(function(ct){var Je=v.get();ct.setRect({x:Je.x*Le+Wt,y:Je.y*Le+it,w:Je.w*Le,h:Je.h*Le}),ct.setClampRect({x:Wt,y:it,w:Be,h:Qe}),ct.setViewPortRect({x:0,y:0,w:Fe,h:ye})})})},S=function(be,ae){K.getOpt(be).each(function(we){var Le=Au(we.element),Fe=pi(we.element),ye=ae.dom.naturalWidth,Be=ae.dom.naturalHeight,Qe=Math.min(Le/ye,Fe/Be);Qe>=1?o.set(1):o.set(Qe)})},x=function(be,ae){var we=ie.fromTag("img");return hr(we,"src",ae),G2(we.dom).then(function(){be.getSystem().isConnected()&&K.getOpt(be).map(function(Le){var Fe=D1({element:we});sr.replaceAt(Le,1,R.some(Fe));var ye=m.get(),Be={x:0,y:0,w:we.dom.naturalWidth,h:we.dom.naturalHeight};m.set(Be);var Qe=oM.inflate(Be,-20,-20);v.set(Qe),(ye.w!==Be.w||ye.h!==Be.h)&&S(Le,we),p(Le,we)})})},E=function(be,ae){var we=o.get(),Le=ae>0?Math.min(2,we+.1):Math.max(.1,we-.1);o.set(Le),K.getOpt(be).each(function(Fe){var ye=Fe.components()[1].element;p(Fe,ye)})},M=function(){s.run(function(be){be.toggleVisibility(!0)})},P=function(){s.run(function(be){be.toggleVisibility(!1)})},H=function(){return v.get()},W=ps.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[r.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:Bt([mr("image-panel-crop-events",[dr(function(be){K.getOpt(be).each(function(ae){var we=ae.element.dom,Le=H$.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},we,ge);Le.toggleVisibility(!1),Le.on("updateRect",function(Fe){var ye=Fe.rect,Be=o.get(),Qe={x:Math.round(ye.x/Be),y:Math.round(ye.y/Be),w:Math.round(ye.w/Be),h:Math.round(ye.h/Be)};v.set(Qe)}),s.set(Le)})}),wc(function(){s.clear()})])])}],containerBehaviours:Bt([sr.config({}),mr("image-panel-events",[dr(function(be){x(be,t)})])])}),K=Sa(W),ue=function(){var be=m.get();return{width:be.w,height:be.h}};return{memContainer:K,updateSrc:x,zoom:E,showCrop:M,hideCrop:P,getRect:H,getMeasurements:ue}},Dc=function(t,r,o,s,v){return MA({name:t,icon:R.some(r),disabled:o,tooltip:R.some(t),primary:!1,borderless:!1},s,v)},sM=function(t,r){r?Ln.enable(t):Ln.disable(t)},cM=function(t){var r=function(m,p,S){o.getOpt(m).each(function(x){sM(x,p)}),s.getOpt(m).each(function(x){sM(x,S)})},o=Sa(Dc("Undo","undo",!0,function(m){Vn(m,bs.undo(),{direction:1})},t)),s=Sa(Dc("Redo","redo",!0,function(m){Vn(m,bs.redo(),{direction:1})},t)),v=ps.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),s.asSpec(),Dc("Zoom in","zoom-in",!1,function(m){Vn(m,bs.zoom(),{direction:1})},t),Dc("Zoom out","zoom-out",!1,function(m){Vn(m,bs.zoom(),{direction:-1})},t)]});return{container:v,updateButtonUndoStates:r}};function V$(){var t=[],r=-1,o=function(S){var x=t.splice(++r);return t.push(S),{state:S,removed:x}},s=function(){if(m())return t[--r]},v=function(){if(p())return t[++r]},m=function(){return r>0},p=function(){return r!==-1&&r<t.length-1};return{data:t,add:o,undo:s,redo:v,canUndo:m,canRedo:p}}var U$=function(t){var r=Hn(t),o=Wo(),s=V$();s.add(t);var v=function(){return r.get()},m=function(we){r.set(we)},p=function(){return o.get().getOrThunk(r.get)},S=function(we){var Le=x(we);return P(),o.set(Le),Le.url},x=function(we){return{blob:we,url:URL.createObjectURL(we)}},E=function(we){URL.revokeObjectURL(we.url)},M=function(we){rh.each(we,E)},P=function(){o.on(E),o.clear()},H=function(we){var Le=x(we);m(Le);var Fe=s.add(Le).removed;return M(Fe),Le.url},W=function(we){var Le=x(we);return o.set(Le),Le.url},K=function(we){return o.get().fold(ge,function(Le){H(Le.blob),we()})},ue=function(){var we=s.undo();return m(we),we.url},be=function(){var we=s.redo();return m(we),we.url},ae=function(){var we=s.canUndo(),Le=s.canRedo();return{undoEnabled:we,redoEnabled:Le}};return{getBlobState:v,setBlobState:m,addBlobState:H,getTempState:p,updateTempState:S,addTempState:W,applyTempState:K,destroyTempState:P,undo:ue,redo:be,getHistoryStates:ae}},W$=function(t,r){var o=U$(t.currentState),s=function(ct,Je){var At=Je.event.direction;Qe.zoom(ct,At)},v=function(ct){var Je=o.getHistoryStates();Wt.updateButtonUndoStates(ct,Je.undoEnabled,Je.redoEnabled),Vn(ct,rc.formActionEvent,{name:rc.saveState(),value:Je.undoEnabled})},m=function(ct){Wt.updateButtonUndoStates(ct,!1,!1)},p=function(ct,Je){var At=o.undo();P(ct,At).then(function(hn){M(ct),v(ct)})},S=function(ct,Je){var At=o.redo();P(ct,At).then(function(hn){M(ct),v(ct)})},x=function(ct){return ct.toBlob()},E=function(ct){Vn(ct,rc.formActionEvent,{name:rc.disable(),value:{}})},M=function(ct){it.getApplyButton(ct).each(function(Je){Ln.enable(Je)}),Vn(ct,rc.formActionEvent,{name:rc.enable(),value:{}})},P=function(ct,Je){return E(ct),Qe.updateSrc(ct,Je)},H=function(ct,Je,At,hn,ot){E(ct),XI(Je).then(At).then(x).then(hn).then(function(cn){return P(ct,cn)}).then(function(){v(ct),ot(),M(ct)}).catch(function(cn){console.log(cn),ct.getSystem().isConnected()&&M(ct)})},W=function(ct,Je,At){var hn=o.getBlobState().blob,ot=function(cn){return o.updateTempState(cn)};H(ct,hn,Je,ot,At)},K=function(ct,Je){var At=o.getTempState().blob,hn=function(ot){return o.addTempState(ot)};H(ct,At,Je,hn,ge)},ue=function(ct,Je,At){var hn=o.getBlobState().blob,ot=function(cn){var On=o.addBlobState(cn);return ae(ct),On};H(ct,hn,Je,ot,At)},be=function(ct,Je){var At=function(){ae(ct);var hn=Je.event.swap;hn()};o.applyTempState(At)},ae=function(ct){var Je=o.getBlobState().url;return o.destroyTempState(),v(ct),Je},we=function(ct){var Je=ae(ct);P(ct,Je).then(function(At){M(ct)})},Le=function(ct,Je){we(ct);var At=Je.event.swap;At(),Qe.hideCrop()},Fe=function(ct,Je){return W(ct,Je.event.transform,ge)},ye=function(ct,Je){return K(ct,Je.event.transform)},Be=function(ct,Je){return ue(ct,Je.event.transform,Je.event.swap)},Qe=uM(t.currentState.url),Wt=cM(r),it=F$(Qe,r),Jt=function(ct,Je){m(ct);var At=Je.event.transform,hn=Je.event.swap;At.fold(function(){hn()},function(ot){W(ct,ot,hn)})};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[it.memContainer.asSpec(),Qe.memContainer.asSpec(),Wt.container],behaviours:Bt([Ut.config({store:{mode:"manual",getValue:function(){return o.getBlobState()}}}),mr("image-tools-events",[ut(bs.undo(),p),ut(bs.redo(),S),ut(bs.zoom(),s),ut(bs.back(),Le),ut(bs.apply(),be),ut(bs.transform(),Fe),ut(bs.tempTransform(),ye),ut(bs.transformApply(),Be),ut(bs.swap(),Jt)]),pv.self()])}},j$=function(t,r){var o={dom:{tag:"label",innerHtml:r.providers.translate(t.label),classes:["tox-label"]}},s=gt(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[o].concat(s),behaviours:Bt([pv.self(),sr.config({}),hm.domHtml(R.none()),Gn.config({mode:"acyclic"})])}},LA=function(t){return!Ar(t,"items")},lM="data-value",fM=function(t,r,o,s){return gt(o,function(v){return LA(v)?{type:"togglemenuitem",text:v.text,value:v.value,active:v.value===s,onAction:function(){Ut.setValue(t,v.value),Vn(t,dl,{name:r}),tr.focus(t)}}:{type:"nestedmenuitem",text:v.text,getSubmenuItems:function(){return fM(t,r,v.items,s)}}})},vM=function(t,r){return ra(t,function(o){return LA(o)?xo(o.value===r,o):vM(o.items,r)})},G$=function(t,r){var o=r.shared.providers,s=io(t.items).filter(LA),v=t.label.map(function(S){return vm(S,o)}),m=da.parts.field({dom:{},factory:{sketch:function(S){return LT({uid:S.uid,text:s.map(function(x){return x.text}),icon:R.none(),tooltip:t.label,role:R.none(),fetch:function(x,E){var M=fM(x,t.name,t.items,Ut.getValue(x));E(S0(M,Xu.CLOSE_ON_EXECUTE,r,!1))},onSetup:Z(ge),getApi:Z({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[si.config({}),Ut.config({store:{mode:"manual",initialValue:s.map(function(x){return x.value}).getOr(""),getValue:function(x){return co(x.element,lM)},setValue:function(x,E){vM(t.items,E).each(function(M){hr(x.element,lM,M.value),Vn(x,zp,{text:M.text})})}}})]},"tox-listbox",r.shared)}}}),p={dom:{tag:"div",classes:["tox-listboxfield"]},components:[m]};return da.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:bn([v.toArray(),[p]]),fieldBehaviours:Bt([Ln.config({disabled:Z(t.disabled),onDisabled:function(S){da.getField(S).each(Ln.disable)},onEnabled:function(S){da.getField(S).each(Ln.enable)}})])})},dM=function(t,r){return{dom:{tag:"div",classes:t.classes},components:gt(t.items,r.shared.interpreter)}},mM=function(t,r){var o=gt(t.options,function(v){return{dom:{tag:"option",value:v.value,innerHtml:v.text}}}),s=t.data.map(function(v){return ef("initialValue",v)}).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:o,behaviours:tu(t.selectBehaviours,[tr.config({}),Ut.config({store:ve({mode:"manual",getValue:function(v){return sf(v.element)},setValue:function(v,m){var p=lr(t.options,function(S){return S.value===m});p.isSome()&&Gm(v.element,m)}},s)})])}},gM=Ec({name:"HtmlSelect",configFields:[rt("options"),$i("selectBehaviours",[tr,Ut]),Se("selectClasses",[]),Se("selectAttributes",{}),fa("data")],factory:mM}),q$=function(t,r){var o=gt(t.items,function(S){return{text:r.translate(S.text),value:S.value}}),s=t.label.map(function(S){return vm(S,r)}),v=da.parts.field({dom:{},selectAttributes:{size:t.size},options:o,factory:gM,selectBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||r.isDisabled()}}),si.config({}),mr("selectbox-change",[ut($m(),function(S,x){Vn(S,dl,{name:t.name})})])])}),m=t.size>1?R.none():R.some(dv("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:bn([[v],m.toArray()])};return da.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:bn([s.toArray(),[p]]),fieldBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(S){da.getField(S).each(Ln.disable)},onEnabled:function(S){da.getField(S).each(Ln.enable)}}),Ui()])})},hM=function(t,r){var o=function(S){return{dom:{tag:"th",innerHtml:r.translate(S)}}},s=function(S){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:gt(S,o)}]}},v=function(S){return{dom:{tag:"td",innerHtml:r.translate(S)}}},m=function(S){return{dom:{tag:"tr"},components:gt(S,v)}},p=function(S){return{dom:{tag:"tbody"},components:gt(S,m)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[s(t.header),p(t.cells)],behaviours:Bt([si.config({}),tr.config({})])}},pM=function(t,r){var o=t.label.map(function(H){return vm(H,r)}),s=[Ln.config({disabled:function(){return t.disabled||r.isDisabled()}}),Ui(),Gn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:function(H){return oa(H,jc),R.some(!0)}}),mr("textfield-change",[ut(Td(),function(H,W){Vn(H,dl,{name:t.name})}),ut(Y0(),function(H,W){Vn(H,dl,{name:t.name})})]),si.config({})],v=t.validation.map(function(H){return gv.config({getRoot:function(W){return so(W.element)},invalidClass:"tox-invalid",validator:{validate:function(W){var K=Ut.getValue(W),ue=H.validator(K);return $u.pure(ue===!0?pr.value(K):pr.error(ue))},validateOnLoad:H.validateOnLoad}})}).toArray(),m=t.placeholder.fold(Z({}),function(H){return{placeholder:r.translate(H)}}),p=t.inputMode.fold(Z({}),function(H){return{inputmode:H}}),S=ve(ve({},m),p),x=da.parts.field({tag:t.multiline===!0?"textarea":"input",inputAttributes:S,inputClasses:[t.classname],inputBehaviours:Bt(bn([s,v])),selectOnFocus:!1,factory:E2}),E=t.flex?["tox-form__group--stretched"]:[],M=E.concat(t.maximized?["tox-form-group--maximize"]:[]),P=[Ln.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(H){da.getField(H).each(Ln.disable)},onEnabled:function(H){da.getField(H).each(Ln.enable)}}),Ui()];return T2(o,x,M,P)},K$=function(t,r){return pM({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:R.none(),maximized:t.maximized},r)},X$=function(t,r){return pM({name:t.name,multiline:!0,label:t.label,inputMode:R.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:R.none(),maximized:t.maximized},r)},Y$=function(t,r){var o=t.stream.streams,s=o.setup(t,r);return Wa([ut(t.event,s),wc(function(){return r.cancel()})].concat(t.cancelEvent.map(function(v){return[ut(v,function(){return r.cancel()})]}).getOr([])))},J$=Object.freeze({__proto__:null,events:Y$}),bM=function(t){var r=Hn(null),o=function(){return{timer:r.get()!==null?"set":"unset"}},s=function(m){r.set(m)},v=function(){var m=r.get();m!==null&&m.cancel()};return Pu({readState:o,setTimer:s,cancel:v})},Z$=function(t){return t.stream.streams.state(t)},Q$=Object.freeze({__proto__:null,throttle:bM,init:Z$}),ez=function(t,r){var o=t.stream,s=WO(t.onStream,o.delay);return r.setTimer(s),function(v,m){s.throttle(v,m),o.stopEvent&&m.stop()}},tz=[Es("stream",Nc("mode",{throttle:[rt("delay"),Se("stopEvent",!0),Xa("streams",{setup:ez,state:bM})]})),Se("event","input"),fa("cancelEvent"),vs("onStream")],yM=Ii({fields:tz,name:"streaming",active:J$,state:Q$}),KT=function(t,r,o){var s=Ut.getValue(o);Ut.setValue(r,s),CM(r)},wM=function(t,r){var o=t.element,s=sf(o),v=o.dom;co(o,"type")!=="number"&&r(v,s)},CM=function(t){wM(t,function(r,o){return r.setSelectionRange(o.length,o.length)})},SM=function(t,r){wM(t,function(o,s){return o.setSelectionRange(r,s.length)})},nz=function(t,r,o){if(t.selectsOver){var s=Ut.getValue(r),v=t.getDisplayText(s),m=Ut.getValue(o),p=t.getDisplayText(m);return p.indexOf(v)===0?R.some(function(){KT(t,r,o),SM(r,v.length)}):R.none()}else return R.none()},HA=Z("alloy.typeahead.itemexecute"),xM=function(t,r,o,s){var v=function(x,E,M){t.previewing.set(!1);var P=ci.getCoupled(x,"sandbox");if(Kr.isOpen(P))Fr.getCurrent(P).each(function(W){ha.getHighlighted(W).fold(function(){M(W)},function(){TC(P,W.element,"keydown",E)})});else{var H=function(W){Fr.getCurrent(W).each(M)};pT(t,p(x),x,P,s,H,Of.HighlightFirst).get(ge)}},m=mT(t),p=function(x){return function(E){return E.map(function(M){var P=Ia(M.menus),H=Yr(P,function(K){return Nt(K.items,function(ue){return ue.type==="item"})}),W=Ut.getState(x);return W.update(gt(H,function(K){return K.data})),M})}},S=[tr.config({}),Ut.config({onSetValue:t.onSetValue,store:ve({mode:"dataset",getDataKey:function(x){return sf(x.element)},getFallbackEntry:function(x){return{value:x,meta:{}}},setValue:function(x,E){Gm(x.element,t.model.getDisplayText(E))}},t.initialData.map(function(x){return ef("initialValue",x)}).getOr({}))}),yM.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(x,E){var M=ci.getCoupled(x,"sandbox"),P=tr.isFocused(x);if(P&&sf(x.element).length>=t.minChars){var H=Fr.getCurrent(M).bind(function(K){return ha.getHighlighted(K).map(Ut.getValue)});t.previewing.set(!0);var W=function(K){Fr.getCurrent(M).each(function(ue){H.fold(function(){t.model.selectsOver&&ha.highlightFirst(ue)},function(be){ha.highlightBy(ue,function(ae){var we=Ut.getValue(ae);return we.value===be.value}),ha.getHighlighted(ue).orThunk(function(){return ha.highlightFirst(ue),R.none()})})})};pT(t,p(x),x,M,s,W,Of.HighlightFirst).get(ge)}},cancelEvent:J0()}),Gn.config({mode:"special",onDown:function(x,E){return v(x,E,ha.highlightFirst),R.some(!0)},onEscape:function(x){var E=ci.getCoupled(x,"sandbox");return Kr.isOpen(E)?(Kr.close(E),R.some(!0)):R.none()},onUp:function(x,E){return v(x,E,ha.highlightLast),R.some(!0)},onEnter:function(x){var E=ci.getCoupled(x,"sandbox"),M=Kr.isOpen(E);if(M&&!t.previewing.get())return Fr.getCurrent(E).bind(function(H){return ha.getHighlighted(H)}).map(function(H){return Vn(x,HA(),{item:H}),!0});var P=Ut.getValue(x);return oa(x,J0()),t.onExecute(E,x,P),M&&Kr.close(E),R.some(!0)}}),Jr.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ci.config({others:{sandbox:function(x){return j4(t,x,{onOpen:function(){return Jr.on(x)},onClose:function(){return Jr.off(x)}})}}}),mr("typeaheadevents",[Js(function(x){var E=ge;h0(t,p(x),x,s,E,Of.HighlightFirst).get(ge)}),ut(HA(),function(x,E){var M=ci.getCoupled(x,"sandbox");KT(t.model,x,E.event.item),oa(x,J0()),t.onItemExecute(x,M,E.event.item,Ut.getValue(x)),Kr.close(M),CM(x)})].concat(t.dismissOnBlur?[ut(X0(),function(x){var E=ci.getCoupled(x,"sandbox");Rl(E.element).isNone()&&Kr.close(E)})]:[]))];return{uid:t.uid,dom:gT(Xe(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:ve(ve({},m),tu(t.typeaheadBehaviours,S)),eventOrder:t.eventOrder}},rz=Z([fa("lazySink"),rt("fetch"),Se("minChars",5),Se("responseTime",1e3),va("onOpen"),Se("getHotspot",R.some),Se("getAnchorOverrides",Z({})),Se("layouts",R.none()),Se("eventOrder",{}),L0("model",{},[Se("getDisplayText",function(t){return t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value}),Se("selectsOver",!0),Se("populateFromBrowse",!0)]),va("onSetValue"),Pi("onExecute"),va("onItemExecute"),Se("inputClasses",[]),Se("inputAttributes",{}),Se("inputStyles",{}),Se("matchWidth",!0),Se("useMinWidth",!1),Se("dismissOnBlur",!0),$d(["openClass"]),fa("initialData"),$i("typeaheadBehaviours",[tr,Ut,yM,Gn,Jr,ci]),us("previewing",function(){return Hn(!0)})].concat(S_()).concat(G4())),az=Z([kc({schema:[Id()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(r,o){t.previewing.get()?r.getSystem().getByUid(t.uid).each(function(s){nz(t.model,s,o).fold(function(){return ha.dehighlight(r,o)},function(v){return v()})}):r.getSystem().getByUid(t.uid).each(function(s){t.model.populateFromBrowse&&KT(t.model,s,o)}),t.previewing.set(!1)},onExecute:function(r,o){return r.getSystem().getByUid(t.uid).toOptional().map(function(s){return Vn(s,HA(),{item:o}),!0})},onHover:function(r,o){t.previewing.set(!1),r.getSystem().getByUid(t.uid).each(function(s){t.model.populateFromBrowse&&KT(t.model,s,o)})}}}})]),oz=hs({name:"Typeahead",configFields:rz(),partFields:az(),factory:xM}),Mf=function(t){var r=function(){return Mf(t.toCached())},o=function(x){return Mf(t.bind(function(E){return E.fold(function(M){return $u.pure(pr.error(M))},function(M){return x(M)})}))},s=function(x){return Mf(t.map(function(E){return E.bind(x)}))},v=function(x){return Mf(t.map(function(E){return E.map(x)}))},m=function(x){return Mf(t.map(function(E){return E.mapError(x)}))},p=function(x,E){return t.map(function(M){return M.fold(x,E)})},S=function(x,E){return Mf($u.nu(function(M){var P=!1,H=setTimeout(function(){P=!0,M(pr.error(E()))},x);t.get(function(W){P||(clearTimeout(H),M(W))})}))};return ve(ve({},t),{toCached:r,bindFuture:o,bindResult:s,mapResult:v,mapError:m,foldResult:p,withTimeout:S})},TM=function(t){return Mf($u.nu(t))},kM=function(t){return Mf($u.pure(pr.value(t)))},XT=function(t){return Mf($u.pure(pr.error(t)))},iz=function(t){return Mf($u.pure(t))},uz=function(t){return Mf(t.map(pr.value))},sz=function(t){return TM(function(r){t.then(function(o){r(pr.value(o))},function(o){r(pr.error(o))})})},cz={nu:TM,wrap:Mf,pure:kM,value:kM,error:XT,fromResult:iz,fromFuture:uz,fromPromise:sz},lz={type:"separator"},fz=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ge}},VA=function(t,r){return{type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:ge}},EM=function(t){return gt(t,fz)},vz=function(t,r){return Nt(r,function(o){return o.type===t})},OM=function(t,r){return EM(vz(t,r))},dz=function(t){return OM("header",t.targets)},mz=function(t){return OM("anchor",t.targets)},gz=function(t){return R.from(t.anchorTop).map(function(r){return VA("<top>",r)}).toArray()},hz=function(t){return R.from(t.anchorBottom).map(function(r){return VA("<bottom>",r)}).toArray()},pz=function(t){return gt(t,function(r){return VA(r,r)})},AM=function(t){return $n(t,function(r,o){var s=r.length===0||o.length===0;return s?r.concat(o):r.concat(lz,o)},[])},UA=function(t,r){var o=t.toLowerCase();return Nt(r,function(s){var v=s.meta!==void 0&&s.meta.text!==void 0?s.meta.text:s.text;return $r(v.toLowerCase(),o)||$r(s.value.toLowerCase(),o)})},bz=function(t,r,o){var s=Ut.getValue(r),v=s.meta.text!==void 0?s.meta.text:s.value,m=o.getLinkInformation();return m.fold(function(){return[]},function(p){var S=UA(v,pz(o.getHistory(t)));return t==="file"?AM([S,UA(v,dz(p)),UA(v,bn([gz(p),mz(p),hz(p)]))]):S})},DM=gn("aria-invalid"),yz=function(t,r,o){var s,v=r.shared.providers,m=function(ae){var we=Ut.getValue(ae);o.addToHistory(we.value,t.filetype)},p=da.parts.field({factory:oz,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":DM,type:"url"},minChars:0,responseTime:0,fetch:function(ae){var we=bz(t.filetype,ae,o),Le=S0(we,Xu.BUBBLE_TO_SANDBOX,r,!1);return $u.pure(Le)},getHotspot:function(ae){return W.getOpt(ae)},onSetValue:function(ae,we){ae.hasConfigured(gv)&&gv.run(ae).get(ge)},typeaheadBehaviours:Bt(bn([o.getValidationHandler().map(function(ae){return gv.config({getRoot:function(we){return so(we.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(we,Le){E.getOpt(we).each(function(Fe){hr(Fe.element,"title",v.translate(Le))})}},validator:{validate:function(we){var Le=Ut.getValue(we);return cz.nu(function(Fe){ae({type:t.filetype,url:Le.value},function(ye){if(ye.status==="invalid"){var Be=pr.error(ye.message);Fe(Be)}else{var Qe=pr.value(ye.message);Fe(Qe)}})})},validateOnLoad:!1}})}).toArray(),[Ln.config({disabled:function(){return t.disabled||v.isDisabled()}}),si.config({}),mr("urlinput-events",bn([t.filetype==="file"?[ut(Td(),function(ae){Vn(ae,dl,{name:t.name})})]:[],[ut($m(),function(ae){Vn(ae,dl,{name:t.name}),m(ae)}),ut(Y0(),function(ae){Vn(ae,dl,{name:t.name}),m(ae)})]]))]])),eventOrder:(s={},s[Td()]=["streaming","urlinput-events","invalidating"],s),model:{getDisplayText:function(ae){return ae.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:Sp(!1,1,"normal")},onExecute:function(ae,we,Le){Vn(we,jc,{})},onItemExecute:function(ae,we,Le,Fe){m(ae),Vn(ae,dl,{name:t.name})}}),S=t.label.map(function(ae){return vm(ae,v)}),x=function(ae,we,Le,Fe){return Le===void 0&&(Le=ae),Fe===void 0&&(Fe=ae),dv(Le,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ae],attributes:ve({title:v.translate(Fe),"aria-live":"polite"},we.fold(function(){return{}},function(ye){return{id:ye}}))},v.icons)},E=Sa(x("invalid",R.some(DM),"warning")),M=Sa({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[E.asSpec()]}),P=o.getUrlPicker(t.filetype),H=gn("browser.url.event"),W=Sa({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,M.asSpec()],behaviours:Bt([Ln.config({disabled:function(){return t.disabled||v.isDisabled()}})])}),K=Sa(PA({name:t.name,icon:R.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},function(ae){return oa(ae,H)},v,[],["tox-browse-url"])),ue=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:bn([[W.asSpec()],P.map(function(){return K.asSpec()}).toArray()])}},be=function(ae){Fr.getCurrent(ae).each(function(we){var Le=Ut.getValue(we),Fe=ve({fieldname:t.name},Le);P.each(function(ye){ye(Fe).get(function(Be){Ut.setValue(we,Be),Vn(ae,dl,{name:t.name})})})})};return da.sketch({dom:yN(),components:S.toArray().concat([ue()]),fieldBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||v.isDisabled()},onDisabled:function(ae){da.getField(ae).each(Ln.disable),K.getOpt(ae).each(Ln.disable)},onEnabled:function(ae){da.getField(ae).each(Ln.enable),K.getOpt(ae).each(Ln.enable)}}),Ui(),mr("url-input-events",[ut(H,be)])])})},wz=function(t,r){return ps.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[tc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:k3(t.icon,r.icons),attributes:{title:r.translate(t.iconTooltip)}},action:function(o){Vn(o,mv,{name:"alert-banner",value:t.url})},buttonBehaviours:Bt([LO()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},Cz=function(t,r){var o=Ut.config({store:{mode:"manual",getValue:function(x){var E=x.element.dom;return E.checked},setValue:function(x,E){var M=x.element.dom;M.checked=E}}}),s=function(x){return x.element.dom.click(),R.some(!0)},v=da.parts.field({factory:{sketch:Ne},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Bt([pv.self(),Ln.config({disabled:function(){return t.disabled||r.isDisabled()}}),si.config({}),tr.config({}),o,Gn.config({mode:"special",onEnter:s,onSpace:s,stopSpaceKeyup:!0}),mr("checkbox-events",[ut($m(),function(x,E){Vn(x,dl,{name:t.name})})])])}),m=da.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:r.translate(t.label)},behaviours:Bt([A2.config({})])}),p=function(x){var E=x==="checked"?"selected":"unselected";return dv(E,{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},r.icons)},S=Sa({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return da.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[v,S.asSpec(),m],fieldBehaviours:Bt([Ln.config({disabled:function(){return t.disabled||r.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(x){da.getField(x).each(Ln.disable)},onEnabled:function(x){da.getField(x).each(Ln.enable)}}),Ui()])})},_M=function(t){return t.presets==="presentation"?ps.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):ps.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Bt([si.config({}),tr.config({})])})},ti=function(t){return function(r,o,s){return yn(o,"name").fold(function(){return t(o,s)},function(v){return r.field(v,t(o,s))})}},YT=function(t){return function(r,o,s){var v=Xe(o,{source:"dynamic"});return ti(t)(r,v,s)}},Sz={bar:ti(function(t,r){return Ep(t,r.shared)}),collection:ti(function(t,r){return dT(t,r.shared.providers)}),alertbanner:ti(function(t,r){return wz(t,r.shared.providers)}),input:ti(function(t,r){return K$(t,r.shared.providers)}),textarea:ti(function(t,r){return X$(t,r.shared.providers)}),label:ti(function(t,r){return j$(t,r.shared)}),iframe:YT(function(t,r){return AR(t,r.shared.providers)}),button:ti(function(t,r){return k$(t,r.shared.providers)}),checkbox:ti(function(t,r){return Cz(t,r.shared.providers)}),colorinput:ti(function(t,r){return zN(t,r.shared,r.colorinput)}),colorpicker:ti(MI),dropzone:ti(function(t,r){return FI(t,r.shared.providers)}),grid:ti(function(t,r){return ER(t,r.shared)}),listbox:ti(function(t,r){return G$(t,r)}),selectbox:ti(function(t,r){return q$(t,r.shared.providers)}),sizeinput:ti(function(t,r){return tM(t,r.shared.providers)}),urlinput:ti(function(t,r){return yz(t,r,r.urlinput)}),customeditor:ti(PI),htmlpanel:ti(_M),imagetools:ti(function(t,r){return W$(t,r.shared.providers)}),table:ti(function(t,r){return hM(t,r.shared.providers)}),panel:ti(function(t,r){return dM(t,r)})},xz={field:function(t,r){return r}},JT=function(t,r,o){var s=Xe(o,{shared:{interpreter:function(v){return WA(t,v,s)}}});return WA(t,r,s)},WA=function(t,r,o){return yn(Sz,r.type).fold(function(){return console.error('Unknown factory type "'+r.type+'", defaulting to container: ',r),r},function(s){return s(t,r,o)})},Tz=function(t,r){var o=xz;return WA(o,t,r)},ZT={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},RM=function(t,r,o){var s=12,v={maxHeightFunction:ag()},m=function(){return{type:"node",root:Rt(t()),node:R.from(t()),bubble:Wd(s,s,ZT),layouts:{onRtl:function(){return[Wg]},onLtr:function(){return[Ug]}},overrides:v}},p=function(){return{type:"hotspot",hotspot:r(),bubble:Wd(-s,s,ZT),layouts:{onRtl:function(){return[Nu]},onLtr:function(){return[Vi]}},overrides:v}};return function(){return o()?m():p()}},MM=function(t,r,o){var s=function(){return{type:"node",root:Rt(t()),node:R.from(t()),layouts:{onRtl:function(){return[Fl]},onLtr:function(){return[Fl]}}}},v=function(){return{type:"hotspot",hotspot:r(),layouts:{onRtl:function(){return[wi]},onLtr:function(){return[wi]}}}};return function(){return o()?s():v()}},kz=function(t,r){return function(){return{type:"selection",root:r(),getSelection:function(){var o=t.selection.getRng();return R.some(ug.range(ie.fromDom(o.startContainer),o.startOffset,ie.fromDom(o.endContainer),o.endOffset))}}}},Ez=function(t){return function(r){return{type:"node",root:t(),node:r}}},Oz=function(t,r,o){var s=eT(t),v=function(){return ie.fromDom(t.getBody())},m=function(){return ie.fromDom(t.getContentAreaContainer())},p=function(){return s||!o()};return{inlineDialog:RM(m,r,p),banner:MM(m,r,p),cursor:kz(t,v),node:Ez(v)}},Az=function(t){return function(r,o){var s=e_(t);s(r,o)}},Dz=function(t){return function(){return qD(t)}},BM=function(t){return function(){return O4(t)}},_z=function(t){return function(){return XD(t)}},PM=function(t){return{colorPicker:Az(t),hasCustomColors:Dz(t),getColors:BM(t),getColorCols:_z(t)}},Rz=function(t){return function(){return hD(t)}},Mz=function(t){return{isDraggableModal:Rz(t)}},jA=function(t){var r=Hn(fD(t)?"bottom":"top");return{isPositionedAtTop:function(){return r.get()==="top"},getDockingMode:r.get,setDockingMode:r.set}},QT=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],q2=function(t){return Ar(t,"items")},Bz=function(t){return Ar(t,"block")},Pz=function(t){return Ar(t,"inline")},Nz=function(t){return Ar(t,"selector")},NM=function(t){return $n(t,function(r,o){if(q2(o)){var s=NM(o.items);return{customFormats:r.customFormats.concat(s.customFormats),formats:r.formats.concat([{title:o.title,items:s.formats}])}}else if(Pz(o)||Bz(o)||Nz(o)){var v=dt(o.name)?o.name:o.title.toLowerCase(),m="custom-"+v;return{customFormats:r.customFormats.concat([{name:m,format:o}]),formats:r.formats.concat([{title:o.title,format:m,icon:o.icon}])}}else return ve(ve({},r),{formats:r.formats.concat(o)})},{customFormats:[],formats:[]})},Iz=function(t,r){var o=NM(r),s=function(v){Lt(v,function(m){t.formatter.has(m.name)||t.formatter.register(m.name,m.format)})};return t.formatter?s(o.customFormats):t.on("init",function(){s(o.customFormats)}),o.formats},GA=function(t){return WP(t).map(function(r){var o=Iz(t,r);return jP(t)?QT.concat(o):o}).getOr(QT)},qA=function(t,r,o){var s={type:"formatter",isSelected:r(t.format),getStylePreview:o(t.format)};return Xe(t,s)},KA=function(t,r,o,s){var v=function(x){return qA(x,o,s)},m=function(x){var E={type:"submenu"};return Xe(x,E)},p=function(x){var E=dt(x.name)?x.name:gn(x.title),M="custom-"+E,P={type:"formatter",format:M,isSelected:o(M),getStylePreview:s(M)},H=Xe(x,P);return t.formatter.register(E,H),H},S=function(x){return gt(x,function(E){var M=Qr(E);if(wa(E,"items")){var P=S(E.items);return Xe(m(E),{getStyleItems:Z(P)})}else return wa(E,"format")?v(E):M.length===1&&nr(M,"title")?Xe(E,{type:"separator"}):p(E)})};return S(r)},$z=function(t){var r=function(P){return function(){return t.formatter.match(P)}},o=function(P){return function(){var H=t.formatter.get(P);return H!==void 0?R.some({tag:H.length>0&&(H[0].inline||H[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(P))}):R.none()}},s=function(P){var H=P.items;return H!==void 0&&H.length>0?Yr(H,s):[P.format]},v=Hn([]),m=Hn([]),p=Hn([]),S=Hn([]),x=Hn(!1);t.on("PreInit",function(P){var H=GA(t),W=KA(t,H,r,o);v.set(W),m.set(Yr(W,s))}),t.on("addStyleModifications",function(P){var H=KA(t,P.items,r,o);p.set(H),x.set(P.replace),S.set(Yr(H,s))});var E=function(){var P=x.get()?[]:v.get(),H=p.get();return P.concat(H)},M=function(){var P=x.get()?[]:m.get(),H=S.get();return P.concat(H)};return{getData:E,getFlattenedKeys:M}},zz=function(t){return Ve(t)&&t.nodeType===1},Fz=rh.trim,IM=function(t){return function(r){return!!(zz(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t))}},Lz=IM("true"),$M=IM("false"),zM=function(t,r,o,s,v){return{type:t,title:r,url:o,level:s,attach:v}},Hz=function(t){for(;t=t.parentNode;){var r=t.contentEditable;if(r&&r!=="inherit")return Lz(t)}return!1},Vz=function(t,r){return gt(Gu(ie.fromDom(r),t),function(o){return o.dom})},FM=function(t){return t.innerText||t.textContent},LM=function(t){return t.id?t.id:gn("h")},Fp=function(t){return t&&t.nodeName==="A"&&(t.id||t.name)!==void 0},HM=function(t){return Fp(t)&&UM(t)},VM=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},UM=function(t){return Hz(t)&&!$M(t)},Uz=function(t){return VM(t)&&UM(t)},WM=function(t){return VM(t)?parseInt(t.nodeName.substr(1),10):0},Wz=function(t){var r=LM(t),o=function(){t.id=r};return zM("header",FM(t),"#"+r,WM(t),o)},jz=function(t){var r=t.id||t.name,o=FM(t);return zM("anchor",o||"#"+r,"#"+r,0,ge)},Gz=function(t){return gt(Nt(t,Uz),Wz)},qz=function(t){return gt(Nt(t,HM),jz)},Kz=function(t){var r=Vz("h1,h2,h3,h4,h5,h6,a:not([href])",t);return r},Xz=function(t){return Fz(t.title).length>0},Yz=function(t){var r=Kz(t);return Nt(Gz(r).concat(qz(r)),Xz)},Jz={find:Yz},ek="tinymce-url-history",jM=5,XA=function(t){return dt(t)&&/^https?/.test(t)},Zz=function(t){return Sn(t)&&t.length<=jM&&ta(t,XA)},GM=function(t){return Qt(t)&&Nr(t,function(r){return!Zz(r)}).isNone()},qM=function(){var t=uT.getItem(ek);if(t===null)return{};var r;try{r=JSON.parse(t)}catch(o){if(o instanceof SyntaxError)return console.log("Local storage "+ek+" was not valid JSON",o),{};throw o}return GM(r)?r:(console.log("Local storage "+ek+" was not valid format",r),{})},Qz=function(t){if(!GM(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));uT.setItem(ek,JSON.stringify(t))},eF=function(t){var r=qM();return yn(r,t).getOr([])},YA=function(t,r){if(XA(t)){var o=qM(),s=yn(o,r).getOr([]),v=Nt(s,function(m){return m!==t});o[r]=[t].concat(v).slice(0,jM),Qz(o)}},tk=function(t){return!!t},tF=function(t){return Pr(rh.makeMap(t,/[, ]/),tk)},JA=function(t){return R.from(ZP(t)).filter(Ft)},nF=function(t){var r=R.some(QP(t)).filter(tk),o=R.some(y4(t)).filter(tk),s=r.or(o).map(tF);return JA(t).fold($t,function(v){return s.fold(We,function(m){return Qr(m).length>0?m:!1})})},rF=function(t,r){var o=nF(t);return pn(o)?o?JA(t):R.none():o[r]?JA(t):R.none()},aF=function(t,r){return rF(t,r).map(function(o){return function(s){return $u.nu(function(v){var m=function(S,x){if(!dt(S))throw new Error("Expected value to be string");if(x!==void 0&&!Qt(x))throw new Error("Expected meta to be a object");var E={value:S,meta:x};v(E)},p=ve({filetype:r,fieldname:s.fieldname},R.from(s.meta).getOr({}));o.call(t,m,s.value,p)})}})},KM=function(t){return R.from(t).filter(dt).getOrUndefined()},oF=function(t){return pD(t)?R.none():R.some({targets:Jz.find(t.getBody()),anchorTop:KM(bD(t)),anchorBottom:KM(e5(t))})},iF=function(t){return R.from(yD(t))},uF=function(t){return{getHistory:eF,addToHistory:YA,getLinkInformation:function(){return oF(t)},getValidationHandler:function(){return iF(t)},getUrlPicker:function(r){return aF(t,r)}}},nk=function(t,r,o){var s=Hn(!1),v=jA(r),m={shared:{providers:{icons:function(){return r.ui.registry.getAll().icons},menuItems:function(){return r.ui.registry.getAll().menuItems},translate:kf.translate,isDisabled:function(){return r.mode.isReadOnly()||r.ui.isDisabled()},getSetting:r.getParam.bind(r)},interpreter:function(p){return Tz(p,m)},anchors:Oz(r,o,v.isPositionedAtTop),header:v,getSink:function(){return pr.value(t)}},urlinput:uF(r),styleselect:$z(r),colorinput:PM(r),dialog:Mz(r),isContextMenuOpen:function(){return s.get()},setContextMenuState:function(p){return s.set(p)}};return m},sF=function(t,r,o){var s=function(Fe,ye){Lt([r,o],function(Be){Be.broadcastEvent(Fe,ye)})},v=function(Fe,ye){Lt([r,o],function(Be){Be.broadcastOn([Fe],ye)})},m=function(Fe){return v(Yd(),{target:Fe.target})},p=Fh(),S=Qo(p,"touchstart",m),x=Qo(p,"touchmove",function(Fe){return s(v1(),Fe)}),E=Qo(p,"touchend",function(Fe){return s(Lk(),Fe)}),M=Qo(p,"mousedown",m),P=Qo(p,"mouseup",function(Fe){Fe.raw.button===0&&v(nw(),{target:Fe.target})}),H=function(Fe){return v(Yd(),{target:ie.fromDom(Fe.target)})},W=function(Fe){Fe.button===0&&v(nw(),{target:ie.fromDom(Fe.target)})},K=function(){Lt(t.editorManager.get(),function(Fe){t!==Fe&&Fe.fire("DismissPopups",{relatedTarget:t})})},ue=function(Fe){return s(Z0(),Ud(Fe))},be=function(Fe){v(Cg(),{}),s(bc(),Ud(Fe))},ae=function(){return v(Cg(),{})},we=function(Fe){Fe.state&&v(Yd(),{target:ie.fromDom(t.getContainer())})},Le=function(Fe){v(Yd(),{target:ie.fromDom(Fe.relatedTarget.getContainer())})};t.on("PostRender",function(){t.on("click",H),t.on("tap",H),t.on("mouseup",W),t.on("mousedown",K),t.on("ScrollWindow",ue),t.on("ResizeWindow",be),t.on("ResizeEditor",ae),t.on("AfterProgressState",we),t.on("DismissPopups",Le)}),t.on("remove",function(){t.off("click",H),t.off("tap",H),t.off("mouseup",W),t.off("mousedown",K),t.off("ScrollWindow",ue),t.off("ResizeWindow",be),t.off("ResizeEditor",ae),t.off("AfterProgressState",we),t.off("DismissPopups",Le),M.unbind(),S.unbind(),x.unbind(),E.unbind(),P.unbind()}),t.on("detach",function(){qu(r),qu(o),r.destroy(),o.destroy()})},_c=Jn,ah=Ob,Lp=Z([Se("shell",!1),rt("makeItem"),Se("setupItem",ge),Hc.field("listBehaviours",[sr])]),cF=function(){return{behaviours:Bt([sr.config({})])}},ZA=Vc({name:"items",overrides:cF}),rk=Z([ZA]),lF=Z("CustomList"),fF=function(t,r,o,s){var v=function(S,x){p(S).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(E){var M=sr.contents(E),P=x.length,H=P-M.length,W=H>0?Q(H,function(){return t.makeItem()}):[],K=M.slice(P);Lt(K,function(be){return sr.remove(E,be)}),Lt(W,function(be){return sr.append(E,be)});var ue=sr.contents(E);Lt(ue,function(be,ae){t.setupItem(S,be,x[ae],ae)})})},m=t.shell?{behaviours:[sr.config({})],components:[]}:{behaviours:[],components:r},p=function(S){return t.shell?R.some(S):Fa(S,t,"items")};return{uid:t.uid,dom:t.dom,components:m.components,behaviours:tu(t.listBehaviours,m.behaviours),apis:{setItems:v}}},XM=hs({name:lF(),configFields:Lp(),partFields:rk(),factory:fF,apis:{setItems:function(t,r,o){t.setItems(r,o)}}}),T0=Z([rt("dom"),Se("shell",!0),$i("toolbarBehaviours",[sr])]),vF=function(){return{behaviours:Bt([sr.config({})])}},Hp=Z([Vc({name:"groups",overrides:vF})]),YM=function(t,r,o,s){var v=function(S,x){m(S).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(E){sr.set(E,x)})},m=function(S){return t.shell?R.some(S):Fa(S,t,"groups")},p=t.shell?{behaviours:[sr.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:tu(t.toolbarBehaviours,p.behaviours),apis:{setGroups:v},domModification:{attributes:{role:"group"}}}},bv=hs({name:"Toolbar",configFields:T0(),partFields:Hp(),factory:YM,apis:{setGroups:function(t,r,o){t.setGroups(r,o)}}}),dF=ge,mF=$t,JM=Z([]),gF=Object.freeze({__proto__:null,setup:dF,isDocked:mF,getBehaviours:JM}),ZM=function(t){var r=Mo(oi(t,"position"),"fixed"),o=r?R.none():Ss(t);return o.orThunk(function(){var s=ie.fromTag("span");return so(t).bind(function(v){Du(v,s);var m=Ss(s);return xs(s),m})})},ak=function(t){return ZM(t).map(as).getOrThunk(function(){return Ha(0,0)})},Vp=hc.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),ok=function(t,r){var o=t.element;Mi(o,r.transitionClass),yi(o,r.fadeOutClass),Mi(o,r.fadeInClass),r.onShow(t)},ik=function(t,r){var o=t.element;Mi(o,r.transitionClass),yi(o,r.fadeInClass),Mi(o,r.fadeOutClass),r.onHide(t)},Up=function(t,r){return t.y<r.bottom&&t.bottom>r.y},uk=function(t,r){return t.y>=r.y},hF=function(t,r){return t.bottom<=r.bottom},QA=function(t,r,o){return ta(t,function(s){switch(s){case"bottom":return hF(r,o);case"top":return uk(r,o)}})},e3=function(t,r){return r.getInitialPos().map(function(o){return _i(o.bounds.x,o.bounds.y,Au(t),pi(t))})},QM=function(t,r,o){o.setInitialPos({style:If(t),position:Po(t,"position")||"static",bounds:r})},eB=function(t,r,o){return o.getInitialPos().bind(function(s){switch(o.clearInitialPos(),s.position){case"static":return R.some(Vp.static());case"absolute":var v=ZM(t).map(ii).getOrThunk(function(){return ii(Ca())});return R.some(Vp.absolute(ju("absolute",yn(s.style,"left").map(function(m){return r.x-v.x}),yn(s.style,"top").map(function(m){return r.y-v.y}),yn(s.style,"right").map(function(m){return v.right-r.right}),yn(s.style,"bottom").map(function(m){return v.bottom-r.bottom}))));default:return R.none()}})},tB=function(t,r,o){return e3(t,o).filter(function(s){return QA(o.getModes(),s,r)}).bind(function(s){return eB(t,s,o)})},pF=function(t,r,o){var s=ii(t);if(QA(o.getModes(),s,r))return R.none();QM(t,s,o);var v=vu(),m=s.x-v.x,p=r.y-v.y,S=v.bottom-r.bottom,x=s.y<=r.y;return R.some(Vp.fixed(ju("fixed",R.some(m),x?R.some(p):R.none(),R.none(),x?R.none():R.some(S))))},bF=function(t,r,o){var s=t.element,v=Mo(oi(s,"position"),"fixed");return v?tB(s,r,o):pF(s,r,o)},yF=function(t,r){var o=t.element;return e3(o,r).bind(function(s){return eB(o,s,r)})},sk=function(t,r,o){o.setDocked(!1),Lt(["left","right","top","bottom","position"],function(s){return la(t.element,s)}),r.onUndocked(t)},K2=function(t,r,o,s){var v=s.position==="fixed";o.setDocked(v),Gv(t.element,s);var m=v?r.onDocked:r.onUndocked;m(t)},nB=function(t,r,o,s,v){v===void 0&&(v=!1),r.contextual.each(function(m){m.lazyContext(t).each(function(p){var S=Up(p,s);if(S!==o.isVisible())if(o.setVisible(S),v&&!S)Bd(t.element,[m.fadeOutClass]),m.onHide(t);else{var x=S?ok:ik;x(t,m)}})})},rB=function(t,r,o){var s=r.lazyViewport(t),v=o.isDocked();v&&nB(t,r,o,s),bF(t,s,o).each(function(m){m.fold(function(){return sk(t,r,o)},function(p){return K2(t,r,o,p)},function(p){nB(t,r,o,s,!0),K2(t,r,o,p)})})},wF=function(t,r,o){var s=t.element;o.setDocked(!1),yF(t,o).each(function(v){v.fold(function(){return sk(t,r,o)},function(m){return K2(t,r,o,m)},ge)}),o.setVisible(!0),r.contextual.each(function(v){xc(s,[v.fadeInClass,v.fadeOutClass,v.transitionClass]),v.onShow(t)}),ck(t,r,o)},ck=function(t,r,o){t.getSystem().isConnected()&&rB(t,r,o)},aB=function(t,r,o){o.isDocked()&&wF(t,r,o)},CF=function(t,r,o){return o.isDocked()},Wp=function(t,r,o,s){return o.setModes(s)},oB=function(t,r,o){return o.getModes()},SF=Object.freeze({__proto__:null,refresh:ck,reset:aB,isDocked:CF,getModes:oB,setModes:Wp}),iB=function(t,r){return Wa([ui(Fm(),function(o,s){t.contextual.each(function(v){if(ls(o.element,v.transitionClass)){xc(o.element,[v.transitionClass,v.fadeInClass]);var m=r.isVisible()?v.onShown:v.onHidden;m(o)}s.stop()})}),ut(Z0(),function(o,s){ck(o,t,r)}),ut(bc(),function(o,s){aB(o,t,r)})])},xF=Object.freeze({__proto__:null,events:iB}),lk=[Xs("contextual",[er("fadeInClass"),er("fadeOutClass"),er("transitionClass"),Uu("lazyContext"),va("onShow"),va("onShown"),va("onHide"),va("onHidden")]),Qa("lazyViewport",vu),Kf("modes",["top","bottom"],Zo),va("onDocked"),va("onUndocked")],Bf=function(t){var r=Hn(!1),o=Hn(!0),s=Wo(),v=Hn(t.modes),m=function(){return"docked:  "+r.get()+", visible: "+o.get()+", modes: "+v.get().join(",")};return Pu({isDocked:r.get,setDocked:r.set,getInitialPos:s.get,setInitialPos:s.set,clearInitialPos:s.clear,isVisible:o.get,setVisible:o.set,getModes:v.get,setModes:v.set,readState:m})},TF=Object.freeze({__proto__:null,init:Bf}),li=Ii({fields:lk,name:"docking",active:xF,apis:SF,state:TF}),t3=Z(gn("toolbar-height-change")),hd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},n3="tox-tinymce--toolbar-sticky-on",X2="tox-tinymce--toolbar-sticky-off",oh=function(t,r){var o=uo(r),s=o.dom.defaultView.innerHeight,v=Gs(o),m=ie.fromDom(t.elm),p=Jl(m),S=pi(m),x=p.y,E=x+S,M=as(r),P=pi(r),H=M.top,W=H+P,K=Math.abs(H-v.top)<2,ue=Math.abs(W-(v.top+s))<2;if(K&&x<W)Tm(v.left,x-P,o);else if(ue&&E>H){var be=x-s+S+P;Tm(v.left,be,o)}},Ps=function(t,r){return nr(li.getModes(t),r)},r3=function(t){var r=function(s){return js(s)+(parseInt(Po(s,"margin-top"),10)||0)+(parseInt(Po(s,"margin-bottom"),10)||0)},o=t.element;so(o).each(function(s){var v="padding-"+li.getModes(t)[0];if(li.isDocked(t)){var m=Au(s);Zn(o,"width",m+"px"),Zn(s,v,r(o)+"px")}else la(o,"width"),la(s,v)})},a3=function(t,r){r?(yi(t,hd.fadeOutClass),Bd(t,[hd.transitionClass,hd.fadeInClass])):(yi(t,hd.fadeInClass),Bd(t,[hd.fadeOutClass,hd.transitionClass]))},o3=function(t,r){var o=ie.fromDom(t.getContainer());r?(Mi(o,n3),yi(o,X2)):(Mi(o,X2),yi(o,n3))},uB=function(t,r){var o=uo(r);gs(o).filter(function(s){return!qr(r,s)}).filter(function(s){return qr(s,ie.fromDom(o.dom.body))||Ou(t,s)}).each(function(){return _l(r)})},kF=function(t,r){return Rl(t).orThunk(function(){return r().toOptional().bind(function(o){return Rl(o.element)})})},EF=function(t,r,o){t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",function(){o().each(li.reset)}),t.on("ResizeWindow ResizeEditor",function(){o().each(r3)}),t.on("SkinLoaded",function(){o().each(function(s){li.isDocked(s)?li.reset(s):li.refresh(s)})}),t.on("FullscreenStateChanged",function(){o().each(li.reset)})),t.on("AfterScrollIntoView",function(s){o().each(function(v){li.refresh(v);var m=v.element;QS(m)&&oh(s,m)})}),t.on("PostRender",function(){o3(t,!1)})},ih=function(t){return t().map(li.isDocked).getOr(!1)},sB=function(){var t;return[Wu.config({channels:(t={},t[t3()]={onReceive:r3},t)})]},jp=function(t,r){var o=Wo(),s=r.getSink,v=function(S){s().each(function(x){return S(x.element)})},m=function(S){t.inline||r3(S),o3(t,li.isDocked(S)),S.getSystem().broadcastOn([Cg()],{}),s().each(function(x){return x.getSystem().broadcastOn([Cg()],{})})},p=t.inline?[]:sB();return Pn([tr.config({}),li.config({contextual:ve({lazyContext:function(S){var x=js(S.element),E=t.inline?t.getContentAreaContainer():t.getContainer(),M=ii(ie.fromDom(E)),P=M.height-x,H=M.y+(Ps(S,"top")?0:x);return R.some(_i(M.x,H,M.width,P))},onShow:function(){v(function(S){return a3(S,!0)})},onShown:function(S){v(function(x){return xc(x,[hd.transitionClass,hd.fadeInClass])}),o.get().each(function(x){uB(S.element,x),o.clear()})},onHide:function(S){kF(S.element,s).fold(o.clear,o.set),v(function(x){return a3(x,!1)})},onHidden:function(){v(function(S){return xc(S,[hd.transitionClass])})}},hd),lazyViewport:function(S){var x=vu(),E=nT(t),M=x.y+(Ps(S,"top")?E:0),P=x.height-(Ps(S,"bottom")?E:0);return _i(x.x,M,x.width,P)},modes:[r.header.getDockingMode()],onDocked:m,onUndocked:m})],p,!0)},fk=Object.freeze({__proto__:null,setup:EF,isDocked:ih,getBehaviours:jp}),cB=function(t){var r=t.editor,o=t.sticky?jp:JM;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Bt(o(r,t.sharedBackstage))}},OF=In([er("type"),Es("items",Ch([F0([er("name"),Mu("items",Zo)]),Zo]))].concat(u2)),AF=function(t){return Oo("GroupToolbarButton",OF,t)},DF=[Za("text"),Za("tooltip"),Za("icon"),Uu("fetch"),Qa("onSetup",function(){return ge})],_F=In(Pn([er("type")],DF,!0)),Gp=function(t){return Oo("menubutton",_F,t)},RF=In([er("type"),Za("tooltip"),Za("icon"),Za("text"),Av("select"),Uu("fetch"),Qa("onSetup",function(){return ge}),gc("presets","normal",["normal","color","listpreview"]),Se("columns",1),Uu("onAction"),Uu("onItemAction")]),MF=function(t){return Oo("SplitButton",RF,t)},BF=function(t,r){var o=function(v,m){var p=gt(m,function(S){var x={type:"menubutton",text:S.text,fetch:function(M){M(S.getItems())}},E=Gp(x).mapError(function(M){return Ov(M)}).getOrDie();return RA(E,"tox-mbtn",r.backstage,R.some("menuitem"))});sr.set(v,p)},s={focus:Gn.focusIn,setMenus:o};return{uid:t.uid,dom:t.dom,components:[],behaviours:Bt([sr.config({}),mr("menubar-events",[dr(function(v){t.onSetup(v)}),ut(Yf(),function(v,m){Bi(v.element,".tox-mbtn--active").each(function(p){Fc(m.event.target,".tox-mbtn").each(function(S){qr(p,S)||v.getSystem().getByDom(p).each(function(x){v.getSystem().getByDom(S).each(function(E){Af.expand(E),Af.close(x),tr.focus(E)})})})})}),ut(d1(),function(v,m){m.event.prevFocus.bind(function(p){return v.getSystem().getByDom(p).toOptional()}).each(function(p){m.event.newFocus.bind(function(S){return v.getSystem().getByDom(S).toOptional()}).each(function(S){Af.isOpen(p)&&(Af.expand(S),Af.close(p))})})})]),Gn.config({mode:"flow",selector:".tox-mbtn",onEscape:function(v){return t.onEscape(v),R.some(!0)}}),si.config({})]),apis:s,domModification:{attributes:{role:"menubar"}}}},i3=Ec({factory:BF,name:"silver.Menubar",configFields:[rt("dom"),rt("uid"),rt("onEscape"),rt("backstage"),Se("onSetup",ge)],apis:{focus:function(t,r){t.focus(r)},setMenus:function(t,r,o){t.setMenus(r,o)}}}),Y2=function(t,r){return r.getAnimationRoot.fold(function(){return t.element},function(o){return o(t)})},yv=function(t){return t.dimension.property},k0=function(t,r){return t.dimension.getDimension(r)},vk=function(t,r){var o=Y2(t,r);xc(o,[r.shrinkingClass,r.growingClass])},J2=function(t,r){yi(t.element,r.openClass),Mi(t.element,r.closedClass),Zn(t.element,yv(r),"0px"),ro(t.element)},u3=function(t,r){yi(t.element,r.closedClass),Mi(t.element,r.openClass),la(t.element,yv(r))},Z2=function(t,r,o,s){o.setCollapsed(),Zn(t.element,yv(r),k0(r,t.element)),ro(t.element),vk(t,r),J2(t,r),r.onStartShrink(t),r.onShrunk(t)},dk=function(t,r,o,s){var v=s.getOrThunk(function(){return k0(r,t.element)});o.setCollapsed(),Zn(t.element,yv(r),v),ro(t.element);var m=Y2(t,r);yi(m,r.growingClass),Mi(m,r.shrinkingClass),J2(t,r),r.onStartShrink(t)},uh=function(t,r,o){var s=k0(r,t.element),v=s==="0px"?Z2:dk;v(t,r,o,R.some(s))},lB=function(t,r,o){var s=Y2(t,r),v=ls(s,r.shrinkingClass),m=k0(r,t.element);u3(t,r);var p=k0(r,t.element),S=function(){Zn(t.element,yv(r),m),ro(t.element)},x=function(){J2(t,r)},E=v?S:x;E(),yi(s,r.shrinkingClass),Mi(s,r.growingClass),u3(t,r),Zn(t.element,yv(r),p),o.setExpanded(),r.onStartGrow(t)},PF=function(t,r,o){if(o.isExpanded()){la(t.element,yv(r));var s=k0(r,t.element);Zn(t.element,yv(r),s)}},s3=function(t,r,o){o.isExpanded()||lB(t,r,o)},NF=function(t,r,o){o.isExpanded()&&uh(t,r,o)},mk=function(t,r,o){o.isExpanded()&&Z2(t,r,o)},fB=function(t,r,o){return o.isExpanded()},IF=function(t,r,o){return o.isCollapsed()},vB=function(t,r,o){var s=Y2(t,r);return ls(s,r.growingClass)===!0},E0=function(t,r,o){var s=Y2(t,r);return ls(s,r.shrinkingClass)===!0},c3=function(t,r,o){return vB(t,r)||E0(t,r)},$F=function(t,r,o){var s=o.isExpanded()?uh:lB;s(t,r,o)},zF=Object.freeze({__proto__:null,refresh:PF,grow:s3,shrink:NF,immediateShrink:mk,hasGrown:fB,hasShrunk:IF,isGrowing:vB,isShrinking:E0,isTransitioning:c3,toggleGrow:$F,disableTransitions:vk}),dB=function(t,r,o){var s=r.expanded;return ol(s?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:ef(r.dimension.property,"0px")})},FF=function(t,r){return Wa([ui(Fm(),function(o,s){var v=s.event.raw;if(v.propertyName===t.dimension.property){vk(o,t),r.isExpanded()&&la(o.element,t.dimension.property);var m=r.isExpanded()?t.onGrown:t.onShrunk;m(o)}})])},LF=Object.freeze({__proto__:null,exhibit:dB,events:FF}),e=[rt("closedClass"),rt("openClass"),rt("shrinkingClass"),rt("growingClass"),fa("getAnimationRoot"),va("onShrunk"),va("onStartShrink"),va("onGrown"),va("onStartGrow"),Se("expanded",!1),Es("dimension",Nc("property",{width:[Xa("property","width"),Xa("getDimension",function(t){return Au(t)+"px"})],height:[Xa("property","height"),Xa("getDimension",function(t){return pi(t)+"px"})]}))],n=function(t){var r=Hn(t.expanded),o=function(){return"expanded: "+r.get()};return Pu({isExpanded:function(){return r.get()===!0},isCollapsed:function(){return r.get()===!1},setCollapsed:Vt(r.set,!1),setExpanded:Vt(r.set,!0),readState:o})},a=Object.freeze({__proto__:null,init:n}),i=Ii({fields:e,name:"sliding",active:LF,apis:zF,state:a}),c="container",f=[$i("slotBehaviours",[])],g=function(t){return"<alloy.field."+t+">"},b=function(t){var r=function(){var m=[],p=function(S,x){return m.push(S),bw(c,g(S),x)};return{slot:p,record:Z(m)}}(),o=t(r),s=r.record(),v=gt(s,function(m){return Su({name:m,pname:g(m)})});return xw(c,f,v,C,o)},C=function(t,r){var o=function(ue){return MS(t)},s=function(ue,be){return Fa(ue,t,be)},v=function(ue,be){return function(ae,we){return Fa(ae,t,we).map(function(Le){return ue(Le,we)}).getOr(be)}},m=function(ue){return function(be,ae){Lt(ae,function(we){return ue(be,we)})}},p=function(ue,be){return co(ue.element,"aria-hidden")!=="true"},S=function(ue,be){if(!p(ue)){var ae=ue.element;la(ae,"display"),Ji(ae,"aria-hidden"),Vn(ue,Jf(),{name:be,visible:!0})}},x=function(ue,be){if(p(ue)){var ae=ue.element;Zn(ae,"display","none"),hr(ae,"aria-hidden","true"),Vn(ue,Jf(),{name:be,visible:!1})}},E=v(p,!1),M=v(x),P=m(M),H=function(ue){return P(ue,o())},W=v(S),K={getSlotNames:o,getSlot:s,isShowing:E,hideSlot:M,hideAllSlots:H,showSlot:W};return{uid:t.uid,dom:t.dom,components:r,behaviours:kg(t.slotBehaviours),apis:K}},D=Pr({getSlotNames:function(t,r){return t.getSlotNames(r)},getSlot:function(t,r,o){return t.getSlot(r,o)},isShowing:function(t,r,o){return t.isShowing(r,o)},hideSlot:function(t,r,o){return t.hideSlot(r,o)},hideAllSlots:function(t,r){return t.hideAllSlots(r)},showSlot:function(t,r,o){return t.showSlot(r,o)}},function(t){return Ao(t)}),I=ve(ve({},D),{sketch:b}),z=In([Za("icon"),Za("tooltip"),Qa("onShow",ge),Qa("onHide",ge),Qa("onSetup",function(){return ge})]),F=function(t){return Oo("sidebar",z,t)},q=function(t){var r=t.ui.registry.getAll().sidebars;Lt(Qr(r),function(o){var s=r[o],v=function(){return Mo(R.from(t.queryCommandValue("ToggleSidebar")),o)};t.ui.registry.addToggleButton(o,{icon:s.icon,tooltip:s.tooltip,onAction:function(m){t.execCommand("ToggleSidebar",!1,o),m.setActive(v())},onSetup:function(m){var p=function(){return m.setActive(v())};return t.on("ToggleSidebar",p),function(){t.off("ToggleSidebar",p)}}})})},X=function(t){return{element:function(){return t.element.dom}}},J=function(t,r){var o=gt(Qr(r),function(s){var v=r[s],m=Qc(F(v));return{name:s,getApi:X,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return gt(o,function(s){var v=Hn(ge);return t.slot(s.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Kx.unnamedEvents([Tp(s,v),kp(s,v),ut(Jf(),function(m,p){var S=p.event,x=lr(o,function(E){return E.name===S.name});x.each(function(E){var M=S.visible?E.onShow:E.onHide;M(E.getApi(m))})})])})})},ee=function(t){return I.sketch(function(r){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:J(r,t),slotBehaviours:Kx.unnamedEvents([dr(function(o){return I.hideAllSlots(o)})])}})},ce=function(t,r){var o=Fr.getCurrent(t);o.each(function(s){return sr.set(s,[ee(r)])})},se=function(t,r){var o=Fr.getCurrent(t);o.each(function(s){var v=Fr.getCurrent(s);v.each(function(m){i.hasGrown(s)?I.isShowing(m,r)?i.shrink(s):(I.hideAllSlots(m),I.showSlot(m,r)):(I.hideAllSlots(m),I.showSlot(m,r),i.grow(s))})})},Ae=function(t){var r=Fr.getCurrent(t);return r.bind(function(o){var s=i.isGrowing(o)||i.hasGrown(o);if(s){var v=Fr.getCurrent(o);return v.bind(function(m){return lr(I.getSlotNames(m),function(p){return I.isShowing(m,p)})})}else return R.none()})},Ee=gn("FixSizeEvent"),me=gn("AutoSizeEvent"),_e=function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Bt([si.config({}),tr.config({}),i.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(r){var o=Fr.getCurrent(r);o.each(I.hideAllSlots),oa(r,me)},onGrown:function(r){oa(r,me)},onStartGrow:function(r){Vn(r,Ee,{width:oi(r.element,"width").getOr("")})},onStartShrink:function(r){Vn(r,Ee,{width:Au(r.element)+"px"})}}),sr.config({}),Fr.config({find:function(r){var o=sr.contents(r);return io(o)}})])}],behaviours:Bt([pv.childAt(0),mr("sidebar-sliding-events",[ut(Ee,function(r,o){Zn(r.element,"width",o.event.width)}),ut(me,function(r,o){la(r.element,"width")})])])}},et=function(t,r,o,s){hr(t.element,"aria-busy",!0);var v=r.getRoot(t).getOr(t),m=Bt([Gn.config({mode:"special",onTab:function(){return R.some(!0)},onShiftTab:function(){return R.some(!0)}}),tr.config({})]),p=s(v,m),S=v.getSystem().build(p);sr.append(v,Tc(S)),S.hasConfigured(Gn)&&r.focus&&Gn.focusIn(S),o.isBlocked()||r.onBlock(t),o.blockWith(function(){return sr.remove(v,S)})},bt=function(t,r,o){Ji(t.element,"aria-busy"),o.isBlocked()&&r.onUnblock(t),o.clear()},Xn=Object.freeze({__proto__:null,block:et,unblock:bt}),an=[Qa("getRoot",R.none),Ua("focus",!0),va("onBlock"),va("onUnblock")],st=function(){var t=_y(),r=function(o){t.set({destroy:o})};return Pu({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})},qn=Object.freeze({__proto__:null,init:st}),xt=Ii({fields:an,name:"blocking",apis:Xn,state:qn}),tn=function(t){var r=t.dom.attributes!==void 0?t.dom.attributes:[];return $n(r,function(o,s){var v;return s.name==="class"?o:ve(ve({},o),(v={},v[s.name]=s.value,v))},{})},Et=function(t){return Array.prototype.slice.call(t.dom.classList,0)},Pt=function(t){var r=ie.fromHtml(t),o=T(r),s=tn(r),v=Et(r),m=o.length===0?{}:{innerHtml:rf(r)};return ve({tag:Kn(r),classes:v,attributes:s},m)},vn=function(t){return function(r,o){return{dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Pt('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}},ft=function(t){return Fr.getCurrent(t).each(function(r){return _l(r.element)})},on=function(t,r){var o="tabindex",s="data-mce-"+o;R.from(t.iframeElement).map(ie.fromDom).each(function(v){r?(Eo(v,o).each(function(m){return hr(v,s,m)}),hr(v,o,-1)):(Ji(v,o),Eo(v,s).each(function(m){hr(v,o,m),Ji(v,s)}))})},Hr=function(t,r,o,s){var v=r.element;if(on(t,o),o)xt.block(r,vn(s)),la(v,"display"),Ji(v,"aria-hidden"),t.hasFocus()&&ft(r);else{var m=Fr.getCurrent(r).exists(function(p){return Hh(p.element)});xt.unblock(r),Zn(v,"display","none"),hr(v,"aria-hidden","true"),m&&t.focus()}},pa=function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Bt([sr.config({}),xt.config({focus:!1}),Fr.config({find:function(r){return io(r.components())}})]),components:[]}},ma=function(t){return t.type==="focusin"},Tu=function(t){if(ma(t)){var r=t.composed?io(t.composedPath()):R.from(t.target);return r.map(ie.fromDom).filter(xr).exists(function(o){return ls(o,"mce-pastebin")})}else return!1},zo=function(t,r,o){var s=Hn(!1),v=Wo(),m=function(S){s.get()&&!Tu(S)&&(S.preventDefault(),ft(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",function(){t.dom.bind(t.getWin(),"focusin",m),t.on("BeforeExecCommand",function(S){S.command.toLowerCase()==="mcefocus"&&S.value!==!0&&m(S)})});var p=function(S){S!==s.get()&&(s.set(S),Hr(t,r(),S,o.providers),t.fire("AfterProgressState",{state:S}))};t.on("ProgressState",function(S){if(v.on(Kg.clearTimeout),xn(S.time)){var x=Kg.setEditorTimeout(t,function(){return p(S.state)},S.time);v.set(x)}else p(S.state),v.clear()})},Ns=function(t,r){var o={len:0,list:[]},s=$n(t,function(v,m){var p=r(m,v.len);return p.fold(Z(v),function(S){return{len:S.finish,list:v.list.concat([S])}})},o);return s.list},ac=function(t,r,o){return{within:t,extra:r,withinWidth:o}},vt=function(t,r,o){var s=Ns(t,function(S,x){var E=o(S);return R.some({element:S,start:x,finish:x+E,width:E})}),v=Nt(s,function(S){return S.finish<=r}),m=Dn(v,function(S,x){return S+x.width},0),p=s.slice(v.length);return{within:v,extra:p,withinWidth:m}},Ot=function(t){return gt(t,function(r){return r.element})},Rn=function(t,r,o){var s=Ot(t.concat(r));return ac(s,[],o)},Me=function(t,r,o,s){var v=Ot(t).concat([o]);return ac(v,Ot(r),s)},Ct=function(t,r,o){return ac(Ot(t),[],o)},mt=function(t,r,o){var s=vt(r,t,o);return s.extra.length===0?R.some(s):R.none()},zn=function(t,r,o,s){var v=mt(t,r,o).getOrThunk(function(){return vt(r,t-o(s),o)}),m=v.within,p=v.extra,S=v.withinWidth;return p.length===1&&p[0].width<=o(s)?Rn(m,p,S):p.length>=1?Me(m,p,s,S):Ct(m,p,S)},Un=function(t,r){var o=gt(r,function(s){return Tc(s)});bv.setGroups(t,o)},Ya=function(t){return ra(t,function(r){return Rl(r.element).bind(function(o){return r.getSystem().getByDom(o).toOptional()})})},Wi=function(t,r,o){var s=r.builtGroups.get();if(s.length!==0){var v=wf(t,r,"primary"),m=ci.getCoupled(t,"overflowGroup");Zn(v.element,"visibility","hidden");var p=s.concat([m]),S=Ya(p);o([]),Un(v,p);var x=Au(v.element),E=zn(x,r.builtGroups.get(),function(M){return Au(M.element)},m);E.extra.length===0?(sr.remove(v,m),o([])):(Un(v,E.within),o(E.extra)),la(v.element,"visibility"),ro(v.element),S.each(tr.focus)}},zi=Z([$i("splitToolbarBehaviours",[ci]),us("builtGroups",function(){return Hn([])})]),bm=Z([$d(["overflowToggledClass"]),Av("getOverflowBounds"),rt("lazySink"),us("overflowGroups",function(){return Hn([])})].concat(zi())),Is=Z([Su({factory:bv,schema:T0(),name:"primary"}),kc({schema:T0(),name:"overflow"}),kc({name:"overflow-button"}),kc({name:"overflow-group"})]),ys=Z(function(t,r){fu(t,Math.floor(r))}),iu=Z([$d(["toggledClass"]),rt("lazySink"),Uu("fetch"),Av("getBounds"),Xs("fireDismissalEventInstead",[Se("event",rl())]),qv()]),gl=Z([kc({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Bt([Jr.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),kc({factory:bv,schema:T0(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:Bt([Gn.config({mode:"cyclic",onEscape:function(r){return Fa(r,t,"button").each(tr.focus),R.none()}})])}}})]),$s=function(t,r){var o=ci.getCoupled(t,"toolbarSandbox");Kr.isOpen(o)?Kr.close(o):Kr.open(o,r.toolbar())},Pf=function(t,r,o,s){var v=o.getBounds.map(function(p){return p()}),m=o.lazySink(t).getOrDie();jo.positionWithinBounds(m,r,{anchor:{type:"hotspot",hotspot:t,layouts:s,overrides:{maxWidthFunction:ys()}}},v)},eo=function(t,r,o,s,v){bv.setGroups(r,v),Pf(t,r,o,s),Jr.on(t)},vo=function(t,r,o){var s=Pd(),v=function(p,S){o.fetch().get(function(x){eo(t,S,o,r.layouts,x),s.link(t.element),Gn.focusIn(S)})},m=function(){Jr.off(t),tr.focus(t),s.unlink(t.element)};return{dom:{tag:"div",attributes:{id:s.id}},behaviours:Bt([Gn.config({mode:"special",onEscape:function(p){return Kr.close(p),R.some(!0)}}),Kr.config({onOpen:v,onClose:m,isPartOf:function(p,S,x){return Nd(S,x)||Nd(t,x)},getAttachPoint:function(){return o.lazySink(t).getOrDie()}}),Wu.config({channels:ve(ve({},Ms(ve({isExtraPart:$t},o.fireDismissalEventInstead.map(function(p){return{fireEventInstead:{event:p.event}}}).getOr({})))),Jd({doReposition:function(){Kr.getState(ci.getCoupled(t,"toolbarSandbox")).each(function(p){Pf(t,p,o,r.layouts)})}}))})])}},uu=function(t,r,o,s){return ve(ve({},tc.sketch(ve(ve({},s.button()),{action:function(v){$s(v,s)},buttonBehaviours:Hc.augment({dump:s.button().buttonBehaviours},[ci.config({others:{toolbarSandbox:function(v){return vo(v,o,t)}}})])}))),{apis:{setGroups:function(v,m){Kr.getState(ci.getCoupled(v,"toolbarSandbox")).each(function(p){eo(v,p,t,o.layouts,m)})},reposition:function(v){Kr.getState(ci.getCoupled(v,"toolbarSandbox")).each(function(m){Pf(v,m,t,o.layouts)})},toggle:function(v){$s(v,s)},getToolbar:function(v){return Kr.getState(ci.getCoupled(v,"toolbarSandbox"))},isOpen:function(v){return Kr.isOpen(ci.getCoupled(v,"toolbarSandbox"))}}})},oc=hs({name:"FloatingToolbarButton",factory:uu,configFields:iu(),partFields:gl(),apis:{setGroups:function(t,r,o){t.setGroups(r,o)},reposition:function(t,r){t.reposition(r)},toggle:function(t,r){t.toggle(r)},getToolbar:function(t,r){return t.getToolbar(r)},isOpen:function(t,r){return t.isOpen(r)}}}),wv=Z([rt("items"),$d(["itemSelector"]),$i("tgroupBehaviours",[Gn])]),Cv=Z([yf({name:"items",unit:"item"})]),sh=function(t,r,o,s){return{uid:t.uid,dom:t.dom,components:r,behaviours:tu(t.tgroupBehaviours,[Gn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},O0=hs({name:"ToolbarGroup",configFields:wv(),partFields:Cv(),factory:sh}),gk=function(t){return gt(t,function(r){return Tc(r)})},mB=function(t,r,o){Wi(t,o,function(s){o.overflowGroups.set(s),r.getOpt(t).each(function(v){oc.setGroups(v,gk(s))})})},gB=function(t,r,o,s){var v=Sa(oc.sketch({fetch:function(){return $u.nu(function(m){m(gk(t.overflowGroups.get()))})},layouts:{onLtr:function(){return[Vi,Nu]},onRtl:function(){return[Nu,Vi]},onBottomLtr:function(){return[ms,ds]},onBottomRtl:function(){return[ds,ms]}},getBounds:o.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:s["overflow-button"](),toolbar:s.overflow()}}));return{uid:t.uid,dom:t.dom,components:r,behaviours:tu(t.splitToolbarBehaviours,[ci.config({others:{overflowGroup:function(){return O0.sketch(ve(ve({},s["overflow-group"]()),{items:[v.asSpec()]}))}}})]),apis:{setGroups:function(m,p){t.builtGroups.set(gt(p,m.getSystem().build)),mB(m,v,t)},refresh:function(m){return mB(m,v,t)},toggle:function(m){v.getOpt(m).each(function(p){oc.toggle(p)})},isOpen:function(m){return v.getOpt(m).map(oc.isOpen).getOr(!1)},reposition:function(m){v.getOpt(m).each(function(p){oc.reposition(p)})},getOverflow:function(m){return v.getOpt(m).bind(oc.getToolbar)}},domModification:{attributes:{role:"group"}}}},l3=hs({name:"SplitFloatingToolbar",configFields:bm(),partFields:Is(),factory:gB,apis:{setGroups:function(t,r,o){t.setGroups(r,o)},refresh:function(t,r){t.refresh(r)},reposition:function(t,r){t.reposition(r)},toggle:function(t,r){t.toggle(r)},isOpen:function(t,r){return t.isOpen(r)},getOverflow:function(t,r){return t.getOverflow(r)}}}),HF=Z([$d(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),va("onOpened"),va("onClosed")].concat(zi())),hB=Z([Su({factory:bv,schema:T0(),name:"primary"}),Su({factory:bv,schema:T0(),name:"overflow",overrides:function(t){return{toolbarBehaviours:Bt([i.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(r){Fa(r,t,"overflow-button").each(function(o){Jr.off(o),tr.focus(o)}),t.onClosed(r)},onGrown:function(r){Gn.focusIn(r),t.onOpened(r)},onStartGrow:function(r){Fa(r,t,"overflow-button").each(Jr.on)}}),Gn.config({mode:"acyclic",onEscape:function(r){return Fa(r,t,"overflow-button").each(tr.focus),R.some(!0)}})])}}}),kc({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Bt([Jr.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),kc({name:"overflow-group"})]),VF=function(t,r){return Fa(t,r,"overflow").map(i.hasGrown).getOr(!1)},pB=function(t,r){Fa(t,r,"overflow-button").bind(function(){return Fa(t,r,"overflow")}).each(function(o){f3(t,r),i.toggleGrow(o)})},f3=function(t,r){Fa(t,r,"overflow").each(function(o){Wi(t,r,function(s){var v=gt(s,function(m){return Tc(m)});bv.setGroups(o,v)}),Fa(t,r,"overflow-button").each(function(s){i.hasGrown(o)&&Jr.on(s)}),i.refresh(o)})},UF=function(t,r,o,s){var v="alloy.toolbar.toggle",m=function(p,S){var x=gt(S,p.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:r,behaviours:tu(t.splitToolbarBehaviours,[ci.config({others:{overflowGroup:function(p){return O0.sketch(ve(ve({},s["overflow-group"]()),{items:[tc.sketch(ve(ve({},s["overflow-button"]()),{action:function(S){oa(p,v)}}))]}))}}}),mr("toolbar-toggle-events",[ut(v,function(p){pB(p,t)})])]),apis:{setGroups:function(p,S){m(p,S),f3(p,t)},refresh:function(p){return f3(p,t)},toggle:function(p){return pB(p,t)},isOpen:function(p){return VF(p,t)}},domModification:{attributes:{role:"group"}}}},ym=hs({name:"SplitSlidingToolbar",configFields:HF(),partFields:hB(),factory:UF,apis:{setGroups:function(t,r,o){t.setGroups(r,o)},refresh:function(t,r){t.refresh(r)},toggle:function(t,r){t.toggle(r)},isOpen:function(t,r){return t.isOpen(r)}}}),v3=function(t){var r=t.title.fold(function(){return{}},function(o){return{attributes:{title:o}}});return{dom:ve({tag:"div",classes:["tox-toolbar__group"]},r),components:[O0.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Bt([si.config({}),tr.config({})])}},pe=function(t){return O0.sketch(v3(t))},$e=function(t,r){var o=dr(function(s){var v=gt(t.initGroups,pe);bv.setGroups(s,v)});return Bt([Ef.toolbarButton(t.providers.isDisabled),Ui(),Gn.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),mr("toolbar-events",[o])])},kt=function(t){var r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":v3({title:R.none(),items:[]}),"overflow-button":QR({name:"more",icon:R.some("more-drawer"),disabled:!1,tooltip:R.some("More..."),primary:!1,borderless:!1},R.none(),t.providers)},splitToolbarBehaviours:$e(t,r)}},Ht=function(t){var r=kt(t),o=4,s=l3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return l3.sketch(ve(ve({},r),{lazySink:t.getSink,getOverflowBounds:function(){var v=t.moreDrawerData.lazyHeader().element,m=Jl(v),p=je(v),S=Jl(p),x=Math.max(p.dom.scrollHeight,S.height);return _i(m.x+o,S.y,m.width-o*2,x)},parts:ve(ve({},r.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[s],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},Sr=function(t){var r=ym.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=ym.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),s=kt(t);return ym.sketch(ve(ve({},s),{components:[r,o],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(v){v.getSystem().broadcastOn([t3()],{type:"opened"})},onClosed:function(v){v.getSystem().broadcastOn([t3()],{type:"closed"})}}))},ua=function(t){var r=t.cyclicKeying?"cyclic":"acyclic";return bv.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===vl.scrolling?["tox-toolbar--scrolling"]:[])},components:[bv.parts.groups({})],toolbarBehaviours:$e(t,r)})},Do=function(t,r,o){var s={getSocket:function(v){return _c.getPart(v,t,"socket")},setSidebar:function(v,m){_c.getPart(v,t,"sidebar").each(function(p){return ce(p,m)})},toggleSidebar:function(v,m){_c.getPart(v,t,"sidebar").each(function(p){return se(p,m)})},whichSidebar:function(v){return _c.getPart(v,t,"sidebar").bind(Ae).getOrNull()},getHeader:function(v){return _c.getPart(v,t,"header")},getToolbar:function(v){return _c.getPart(v,t,"toolbar")},setToolbar:function(v,m){_c.getPart(v,t,"toolbar").each(function(p){p.getApis().setGroups(p,m)})},setToolbars:function(v,m){_c.getPart(v,t,"multiple-toolbar").each(function(p){XM.setItems(p,m)})},refreshToolbar:function(v){var m=_c.getPart(v,t,"toolbar");m.each(function(p){return p.getApis().refresh(p)})},toggleToolbarDrawer:function(v){_c.getPart(v,t,"toolbar").each(function(m){Lo(m.getApis().toggle,function(p){return p(m)})})},isToolbarDrawerToggled:function(v){return _c.getPart(v,t,"toolbar").bind(function(m){return R.from(m.getApis().isOpen).map(function(p){return p(m)})}).getOr(!1)},getThrobber:function(v){return _c.getPart(v,t,"throbber")},focusToolbar:function(v){var m=_c.getPart(v,t,"toolbar").orThunk(function(){return _c.getPart(v,t,"multiple-toolbar")});m.each(function(p){Gn.focusIn(p)})},setMenubar:function(v,m){_c.getPart(v,t,"menubar").each(function(p){i3.setMenus(p,m)})},focusMenubar:function(v){_c.getPart(v,t,"menubar").each(function(m){i3.focus(m)})}};return{uid:t.uid,dom:t.dom,components:r,apis:s,behaviours:t.behaviours}},ch=ah.optional({factory:i3,name:"menubar",schema:[rt("backstage")]}),Z8=function(t){return t.type===vl.sliding?Sr:t.type===vl.floating?Ht:ua},Q8=ah.optional({factory:{sketch:function(t){return XM.sketch({uid:t.uid,dom:t.dom,listBehaviours:Bt([Gn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return ua({type:t.type,uid:gn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),R.some(!0)}})},setupItem:function(r,o,s,v){bv.setGroups(o,s)},shell:!0})}},name:"multiple-toolbar",schema:[rt("dom"),rt("onEscape")]}),e7=ah.optional({factory:{sketch:function(t){var r=Z8(t),o={type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),R.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(o)}},name:"toolbar",schema:[rt("dom"),rt("onEscape"),rt("getSink")]}),t7=ah.optional({factory:{sketch:cB},name:"header",schema:[rt("dom")]}),n7=ah.optional({name:"socket",schema:[rt("dom")]}),r7=ah.optional({factory:{sketch:_e},name:"sidebar",schema:[rt("dom")]}),a7=ah.optional({factory:{sketch:pa},name:"throbber",schema:[rt("dom")]}),Ci=hs({name:"OuterContainer",factory:Do,configFields:[rt("dom"),rt("behaviours")],partFields:[t7,ch,e7,Q8,n7,r7,a7],apis:{getSocket:function(t,r){return t.getSocket(r)},setSidebar:function(t,r,o){t.setSidebar(r,o)},toggleSidebar:function(t,r,o){t.toggleSidebar(r,o)},whichSidebar:function(t,r){return t.whichSidebar(r)},getHeader:function(t,r){return t.getHeader(r)},getToolbar:function(t,r){return t.getToolbar(r)},setToolbar:function(t,r,o){var s=gt(o,function(v){return pe(v)});t.setToolbar(r,s)},setToolbars:function(t,r,o){var s=gt(o,function(v){return gt(v,pe)});t.setToolbars(r,s)},refreshToolbar:function(t,r){return t.refreshToolbar(r)},toggleToolbarDrawer:function(t,r){t.toggleToolbarDrawer(r)},isToolbarDrawerToggled:function(t,r){return t.isToolbarDrawerToggled(r)},getThrobber:function(t,r){return t.getThrobber(r)},setMenubar:function(t,r,o){t.setMenubar(r,o)},focusMenubar:function(t,r){t.focusMenubar(r)},focusToolbar:function(t,r){t.focusToolbar(r)}}}),o7="file edit view insert format tools table help",NL={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},i7=function(t,r,o){var s=sD(o).split(/[ ,]/);return{text:t.title,getItems:function(){return Yr(t.items,function(v){var m=v.toLowerCase();return m.trim().length===0?[]:ba(s,function(p){return p===m})?[]:m==="separator"||m==="|"?[{type:"separator"}]:r.menuItems[m]?[r.menuItems[m]]:[]})}}},WF=function(t){return typeof t=="string"?t.split(" "):t},IL=function(t,r){var o=ve(ve({},NL),r.menus),s=Qr(r.menus).length>0,v=r.menubar===void 0||r.menubar===!0?WF(o7):WF(r.menubar===!1?"":r.menubar),m=Nt(v,function(S){var x=Ar(NL,S);return s?x||yn(r.menus,S).exists(function(E){return Ar(E,"items")}):x}),p=gt(m,function(S){var x=o[S];return i7({title:x.title,items:WF(x.items)},r,t)});return Nt(p,function(S){var x=function(E){return E.type!=="separator"};return S.getItems().length>0&&ba(S.getItems(),x)})},$L=function(t){var r=function(){t._skinLoaded=!0,T5(t)};return function(){t.initialized?r():t.on("init",r)}},u7=function(t,r){return function(){return LD(t,{message:r})}},zL=function(t,r,o){return new i2(function(s,v){o.load(r,s,v),t.on("remove",function(){return o.unload(r)})})},s7=function(t,r){var o=r+"/skin.min.css";return zL(t,o,t.ui.styleSheetLoader)},c7=function(t,r){var o=fn(ie.fromDom(t.getElement()));if(o){var s=r+"/skin.shadowdom.min.css";return zL(t,s,f0.DOM.styleSheetLoader)}else return i2.resolve()},FL=function(t,r){var o=HP(r);o&&r.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css"),UP(r)===!1&&dt(o)?i2.all([s7(r,o),c7(r,o)]).then($L(r),u7(r,"Skin could not be loaded")):$L(r)()},l7=Vt(FL,!1),f7=Vt(FL,!0),bB=function(t,r){return function(o){var s=ng(),v=function(){o.setActive(t.formatter.match(r));var m=t.formatter.formatChanged(r,o.setActive);s.set(m)};return t.initialized?v():t.once("init",v),function(){t.off("init",v),s.clear()}}},yB=function(t,r,o){return function(s){var v=function(){return o(s)},m=function(){o(s),t.on(r,v)};return t.initialized?m():t.once("init",m),function(){t.off("init",m),t.off(r,v)}}},LL=function(t){return function(r){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})}}},Sv=function(t,r){return function(){return t.execCommand(r)}},v7=function(t,r,o){var s=function(S,x,E,M){var P=r.shared.providers.translate(S.title);if(S.type==="separator")return R.some({type:"separator",text:P});if(S.type==="submenu"){var H=Yr(S.getStyleItems(),function(W){return v(W,x,M)});return x===0&&H.length<=0?R.none():R.some({type:"nestedmenuitem",text:P,disabled:H.length<=0,getSubmenuItems:function(){return Yr(S.getStyleItems(),function(W){return v(W,x,M)})}})}else return R.some(ve({type:"togglemenuitem",text:P,icon:S.icon,active:S.isSelected(M),disabled:E,onAction:o.onAction(S)},S.getStylePreview().fold(function(){return{}},function(W){return{meta:{style:W}}})))},v=function(S,x,E){var M=S.type==="formatter"&&o.isInvalid(S);return x===0?M?[]:s(S,x,!1,E).toArray():s(S,x,M,E).toArray()},m=function(S){var x=o.getCurrentValue(),E=o.shouldHide?0:1;return Yr(S,function(M){return v(M,E,x)})},p=function(S,x){return function(E,M){var P=x(),H=m(P),W=S0(H,Xu.CLOSE_ON_EXECUTE,S,!1);M(W)}};return{validateItems:m,getFetch:p}},hk=function(t,r,o){var s=o.dataset,v=s.type==="basic"?function(){return gt(s.data,function(m){return qA(m,o.isSelectedFor,o.getPreviewFor)})}:s.getData;return{items:v7(t,r,o),getStyleItems:v}},d3=function(t,r,o){var s=hk(t,r,o),v=s.items,m=s.getStyleItems,p=function(x){return{getComponent:Z(x)}},S=yB(t,"NodeChange",function(x){var E=x.getComponent();o.updateText(E)});return LT({text:o.icon.isSome()?R.none():o.text,icon:o.icon,tooltip:R.from(o.tooltip),role:R.none(),fetch:v.getFetch(r,m),onSetup:S,getApi:p,columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},d7=function(t){return gt(t,function(r){var o=r,s=r,v=r.split("=");return v.length>1&&(o=v[0],s=v[1]),{title:o,format:s}})},m7=function(t){return{type:"basic",data:t}},pk;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(pk||(pk={}));var g7=function(t,r){return r===pk.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")},jF=function(t,r,o,s){var v=t.getParam(r,o,"string"),m=d7(g7(v,s));return{type:"basic",data:m}},GF=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],HL=function(t){var r=function(){return lr(GF,function(S){return t.formatter.match(S.format)})},o=function(S){return function(){return t.formatter.match(S)}},s=function(S){return R.none},v=function(S){var x=r(),E=x.fold(Z("left"),function(M){return M.title.toLowerCase()});Vn(S,YR,{icon:"align-"+E})},m=m7(GF),p=function(S){return function(){return lr(GF,function(x){return x.format===S.format}).each(function(x){return t.execCommand(x.command)})}};return{tooltip:"Align",text:R.none(),icon:R.some("align-left"),isSelectedFor:o,getCurrentValue:R.none,getPreviewFor:s,onAction:p,updateText:v,dataset:m,shouldHide:!1,isInvalid:function(S){return!t.formatter.canApply(S.format)}}},h7=function(t,r){return d3(t,r,HL(t))},p7=function(t,r){var o=hk(t,r,HL(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate("Align"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},b7="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",y7=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],VL=function(t){var r=t.split(/\s*,\s*/);return gt(r,function(o){return o.replace(/^['"]+|['"]+$/g,"")})},w7=function(t){var r=function(){var o=VL(t.toLowerCase());return ta(y7,function(s){return o.indexOf(s.toLowerCase())>-1})};return t.indexOf("-apple-system")===0&&r()},UL=function(t){var r="System Font",o=function(){var E=function(K){return K?VL(K)[0]:""},M=t.queryCommandValue("FontName"),P=x.data,H=M?M.toLowerCase():"",W=lr(P,function(K){var ue=K.format;return ue.toLowerCase()===H||E(ue).toLowerCase()===E(H).toLowerCase()}).orThunk(function(){return xo(w7(H),{title:r,format:H})});return{matchOpt:W,font:M}},s=function(E){return function(M){return M.exists(function(P){return P.format===E})}},v=function(){var E=o().matchOpt;return E},m=function(E){return function(){return R.some({tag:"div",styles:E.indexOf("dings")===-1?{"font-family":E}:{}})}},p=function(E){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontName",!1,E.format)})}},S=function(E){var M=o(),P=M.matchOpt,H=M.font,W=P.fold(Z(H),function(K){return K.title});Vn(E,zp,{text:W})},x=jF(t,"font_formats",b7,pk.SemiColon);return{tooltip:"Fonts",text:R.some(r),icon:R.none(),isSelectedFor:s,getCurrentValue:v,getPreviewFor:m,onAction:p,updateText:S,dataset:x,shouldHide:!1,isInvalid:$t}},C7=function(t,r){return d3(t,r,UL(t))},S7=function(t,r){var o=hk(t,r,UL(t));t.ui.registry.addNestedMenuItem("fontformats",{text:r.shared.providers.translate("Fonts"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},x7="8pt 10pt 12pt 14pt 18pt 24pt 36pt",T7={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},k7={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},E7=function(t,r){var o=Math.pow(10,r);return Math.round(t*o)/o},O7=function(t,r){return/[0-9.]+px$/.test(t)?E7(parseInt(t,10)*72/96,r||0)+"pt":yn(k7,t).getOr(t)},A7=function(t){return yn(T7,t).getOr("")},WL=function(t){var r=function(){var x=R.none(),E=S.data,M=t.queryCommandValue("FontSize");if(M)for(var P=function(W){var K=O7(M,W),ue=A7(K);x=lr(E,function(be){return be.format===M||be.format===K||be.format===ue})},H=3;x.isNone()&&H>=0;H--)P(H);return{matchOpt:x,size:M}},o=function(x){return function(E){return E.exists(function(M){return M.format===x})}},s=function(){var x=r().matchOpt;return x},v=Z(R.none),m=function(x){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,x.format)})}},p=function(x){var E=r(),M=E.matchOpt,P=E.size,H=M.fold(Z(P),function(W){return W.title});Vn(x,zp,{text:H})},S=jF(t,"fontsize_formats",x7,pk.Space);return{tooltip:"Font sizes",text:R.some("12pt"),icon:R.none(),isSelectedFor:o,getPreviewFor:v,getCurrentValue:s,onAction:m,updateText:p,dataset:S,shouldHide:!1,isInvalid:$t}},D7=function(t,r){return d3(t,r,WL(t))},_7=function(t,r){var o=hk(t,r,WL(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},jL=function(t,r){var o=r(),s=gt(o,function(v){return v.format});return R.from(t.formatter.closest(s)).bind(function(v){return lr(o,function(m){return m.format===v})}).orThunk(function(){return xo(t.formatter.match("p"),{title:"Paragraph",format:"p"})})},R7="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",GL=function(t){var r="Paragraph",o=function(p){return function(){return t.formatter.match(p)}},s=function(p){return function(){var S=t.formatter.get(p);return R.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))})}},v=function(p){var S=jL(t,function(){return m.data}),x=S.fold(Z(r),function(E){return E.title});Vn(p,zp,{text:x})},m=jF(t,"block_formats",R7,pk.SemiColon);return{tooltip:"Blocks",text:R.some(r),icon:R.none(),isSelectedFor:o,getCurrentValue:R.none,getPreviewFor:s,onAction:LL(t),updateText:v,dataset:m,shouldHide:!1,isInvalid:function(p){return!t.formatter.canApply(p.format)}}},M7=function(t,r){return d3(t,r,GL(t))},B7=function(t,r){var o=hk(t,r,GL(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},qL=function(t,r){var o="Paragraph",s=function(p){return function(){return t.formatter.match(p)}},v=function(p){return function(){var S=t.formatter.get(p);return S!==void 0?R.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):R.none()}},m=function(p){var S=function(P){var H=P.items;return H!==void 0&&H.length>0?Yr(H,S):[{title:P.title,format:P.format}]},x=Yr(GA(t),S),E=jL(t,Z(x)),M=E.fold(Z(o),function(P){return P.title});Vn(p,zp,{text:M})};return{tooltip:"Formats",text:R.some(o),icon:R.none(),isSelectedFor:s,getCurrentValue:R.none,getPreviewFor:v,onAction:LL(t),updateText:m,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(p){return!t.formatter.canApply(p.format)},dataset:r}},P7=function(t,r){var o=ve({type:"advanced"},r.styleselect);return d3(t,r,qL(t,o))},N7=function(t,r){var o=ve({type:"advanced"},r.styleselect),s=hk(t,r,qL(t,o));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return s.items.validateItems(s.getStyleItems())}})},I7=function(t,r){var o=function(s,v){t.updateState.each(function(m){var p=m(s,v);r.set(p)}),t.renderComponents.each(function(m){var p=m(v,r.get()),S=gt(p,s.getSystem().build);ew(s,S)})};return Wa([ut($c(),function(s,v){var m=v;if(!m.universal){var p=t.channel;nr(m.channels,p)&&o(s,m.data)}}),dr(function(s,v){t.initialData.each(function(m){o(s,m)})})])},$7=Object.freeze({__proto__:null,events:I7}),z7=function(t,r,o){return o},F7=Object.freeze({__proto__:null,getState:z7}),L7=[rt("channel"),fa("renderComponents"),fa("updateState"),fa("initialData")],H7=function(){var t=Hn(R.none()),r=function(){return t.set(R.none())},o=function(){return t.get().getOr("none")};return{readState:o,get:t.get,set:t.set,clear:r}},V7=Object.freeze({__proto__:null,init:H7}),Ul=Ii({fields:L7,name:"reflecting",active:$7,apis:F7,state:V7}),U7=Z([rt("toggleClass"),rt("fetch"),vs("onExecute"),Se("getHotspot",R.some),Se("getAnchorOverrides",Z({})),qv(),vs("onItemExecute"),fa("lazySink"),rt("dom"),va("onOpen"),$i("splitDropdownBehaviours",[ci,Gn,tr]),Se("matchWidth",!1),Se("useMinWidth",!1),Se("eventOrder",{}),fa("role")].concat(G4())),W7=Su({factory:tc,schema:[rt("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Bt([tr.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(r){r.getSystem().getByUid(t.uid).each(yc)},buttonBehaviours:Bt([Jr.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),j7=Su({factory:tc,schema:[rt("dom")],name:"button",defaults:function(){return{buttonBehaviours:Bt([tr.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(r){r.getSystem().getByUid(t.uid).each(function(o){t.onExecute(o,r)})}}}}),G7=Z([W7,j7,Vc({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[rt("text")],name:"aria-descriptor"}),kc({schema:[Id()],name:"menu",defaults:function(t){return{onExecute:function(r,o){r.getSystem().getByUid(t.uid).each(function(s){t.onItemExecute(s,r,o)})}}}}),D_()]),q7=function(t,r,o,s){var v,m=function(P){Fr.getCurrent(P).each(function(H){ha.highlightFirst(H),Gn.focusIn(H)})},p=function(P){var H=m;h0(t,Ne,P,s,H,Of.HighlightFirst).get(ge)},S=function(P){return p(P),R.some(!0)},x=function(P){var H=wf(P,t,"button");return yc(H),R.some(!0)},E=ve(ve({},Wa([dr(function(P,H){var W=Fa(P,t,"aria-descriptor");W.each(function(K){var ue=gn("aria");hr(K.element,"id",ue),hr(P.element,"aria-describedby",ue)})})])),n0(R.some(p))),M={repositionMenus:function(P){Jr.isOn(P)&&Zg(P)}};return{uid:t.uid,dom:t.dom,components:r,apis:M,eventOrder:ve(ve({},t.eventOrder),(v={},v[pc()]=["disabling","toggling","alloy.base.behaviour"],v)),events:E,behaviours:tu(t.splitDropdownBehaviours,[ci.config({others:{sandbox:function(P){var H=wf(P,t,"arrow"),W={onOpen:function(){Jr.on(H),Jr.on(P)},onClose:function(){Jr.off(H),Jr.off(P)}};return j4(t,P,W)}}}),Gn.config({mode:"special",onSpace:x,onEnter:x,onDown:S}),tr.config({}),Jr.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},wB=hs({name:"SplitDropdown",configFields:U7(),partFields:G7(),factory:q7,apis:{repositionMenus:function(t,r){return t.repositionMenus(r)}}}),K7=function(t){return{isDisabled:function(){return Ln.isDisabled(t)},setDisabled:function(r){return Ln.set(t,r)}}},X7=function(t){return{setActive:function(r){Jr.set(t,r)},isActive:function(){return Jr.isOn(t)},isDisabled:function(){return Ln.isDisabled(t)},setDisabled:function(r){return Ln.set(t,r)}}},KL=function(t,r){return t.map(function(o){return{"aria-label":r.translate(o),title:r.translate(o)}}).getOr({})},XL=gn("focus-button"),qF=function(t,r,o,s,v,m){var p;return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:KL(o,m)},components:cm([t.map(function(S){return FT(S,m.icons)}),r.map(function(S){return AA(S,"tox-tbtn",m)})]),eventOrder:(p={},p[nl()]=["focusing","alloy.base.behaviour","common-button-display-events"],p),buttonBehaviours:Bt([Ef.toolbarButton(m.isDisabled),Ui(),mr("common-button-display-events",[ut(nl(),function(S,x){x.event.prevent(),oa(S,XL)})])].concat(s.map(function(S){return Ul.config({channel:S,initialData:{icon:t,text:r},renderComponents:function(x,E){return cm([x.icon.map(function(M){return FT(M,m.icons)}),x.text.map(function(M){return AA(M,"tox-tbtn",m)})])}})}).toArray()).concat(v.getOr([])))}},Y7=function(t,r,o,s){var v=r.shared;return oc.sketch({lazySink:v.getSink,fetch:function(){return $u.nu(function(m){m(gt(o(t.items),pe))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:qF(t.icon,t.text,t.tooltip,R.none(),R.none(),v.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:s}}}})},YL=function(t,r,o){var s=Hn(ge),v=qF(t.icon,t.text,t.tooltip,R.none(),R.none(),o);return tc.sketch({dom:v.dom,components:v.components,eventOrder:XR,buttonBehaviours:Bt([mr("toolbar-button-events",[KR({onAction:t.onAction,getApi:r.getApi}),Tp(r,s),kp(r,s)]),Ef.toolbarButton(function(){return t.disabled||o.isDisabled()}),Ui()].concat(r.toolbarButtonBehaviours))})},J7=function(t,r){return JL(t,r,[])},JL=function(t,r,o){return YL(t,{toolbarButtonBehaviours:[].concat(o.length>0?[mr("toolbarButtonWith",o)]:[]),getApi:K7,onSetup:t.onSetup},r)},Z7=function(t,r){return ZL(t,r,[])},ZL=function(t,r,o){return Xe(YL(t,{toolbarButtonBehaviours:[sr.config({}),Jr.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(o.length>0?[mr("toolbarToggleButtonWith",o)]:[]),getApi:X7,onSetup:t.onSetup},r))},Q7=function(t,r,o){return function(s){return $u.nu(function(v){return r.fetch(v)}).map(function(v){return R.from(c_(Xe(B4(gn("menu-value"),v,function(m){r.onItemAction(t(s),m)},r.columns,r.presets,Xu.CLOSE_ON_EXECUTE,r.select.getOr($t),o),{movement:sT(r.columns,r.presets),menuBehaviours:Kx.unnamedEvents(r.columns!=="auto"?[]:[dr(function(m,p){v4(m,4,V3(r.presets)).each(function(S){var x=S.numRows,E=S.numColumns;Gn.setGridSize(m,x,E)})})])})))})}},eH=function(t,r){var o,s=gn("channel-update-split-dropdown-display"),v=function(S){return{isDisabled:function(){return Ln.isDisabled(S)},setDisabled:function(x){return Ln.set(S,x)},setIconFill:function(x,E){Bi(S.element,'svg path[id="'+x+'"], rect[id="'+x+'"]').each(function(M){hr(M,"fill",E)})},setIconStroke:function(x,E){Bi(S.element,'svg path[id="'+x+'"], rect[id="'+x+'"]').each(function(M){hr(M,"stroke",E)})},setActive:function(x){hr(S.element,"aria-pressed",x),Bi(S.element,"span").each(function(E){S.getSystem().getByDom(E).each(function(M){return Jr.set(M,x)})})},isActive:function(){return Bi(S.element,"span").exists(function(x){return S.getSystem().getByDom(x).exists(Jr.isOn)})}}},m=Hn(ge),p={getApi:v,onSetup:t.onSetup};return wB.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:ve({"aria-pressed":!1},KL(t.tooltip,r.providers))},onExecute:function(S){t.onAction(v(S))},onItemExecute:function(S,x,E){},splitDropdownBehaviours:Bt([Ef.splitButton(r.providers.isDisabled),Ui(),mr("split-dropdown-events",[ut(XL,tr.focus),Tp(p,m),kp(p,m)]),A2.config({})]),eventOrder:(o={},o[Ys()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:Q7(v,t,r.providers),parts:{menu:Sp(!1,t.columns,t.presets)},components:[wB.parts.button(qF(t.icon,t.text,R.none(),R.some(s),R.some([Jr.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),wB.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:k3("chevron-down",r.providers.icons)},buttonBehaviours:Bt([Ef.splitButton(r.providers.isDisabled),Ui(),LO()])}),wB.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},tH=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],m3=function(t,r){return function(o,s,v){var m=t(o).mapError(function(p){return Ov(p)}).getOrDie();return r(m,s,v)}},bk={button:m3(B3,function(t,r){return J7(t,r.backstage.shared.providers)}),togglebutton:m3(Ux,function(t,r){return Z7(t,r.backstage.shared.providers)}),menubutton:m3(Gp,function(t,r){return RA(t,"tox-tbtn",r.backstage,R.none())}),splitbutton:m3(MF,function(t,r){return eH(t,r.backstage.shared)}),grouptoolbarbutton:m3(AF,function(t,r,o){var s,v=o.ui.registry.getAll().buttons,m=function(S){return CB(o,{buttons:v,toolbar:S,allowToolbarGroups:!1},r,R.none())},p=(s={},s[tb]=r.backstage.shared.header.isPositionedAtTop()?vf.TopToBottom:vf.BottomToTop,s);switch(m2(o)){case vl.floating:return Y7(t,r.backstage,m,p);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,r){return P7(t,r.backstage)},fontsizeSelectButton:function(t,r){return D7(t,r.backstage)},fontSelectButton:function(t,r){return C7(t,r.backstage)},formatButton:function(t,r){return M7(t,r.backstage)},alignMenuButton:function(t,r){return h7(t,r.backstage)}},nH=function(t,r,o){return yn(bk,t.type).fold(function(){return console.error("skipping button defined by",t),R.none()},function(s){return R.some(s(t,r,o))})},QL={styleselect:bk.styleSelectButton,fontsizeselect:bk.fontsizeSelectButton,fontselect:bk.fontSelectButton,formatselect:bk.formatButton,align:bk.alignMenuButton},rH=function(t){var r=gt(tH,function(o){var s=Nt(o.items,function(v){return Ar(t,v)||Ar(QL,v)});return{name:o.name,items:s}});return Nt(r,function(o){return o.items.length>0})},aH=function(t){var r=t.split("|");return gt(r,function(o){return{items:o.trim().split(" ")}})},oH=function(t){return ze(t,function(r){return Ar(r,"name")&&Ar(r,"items")})},iH=function(t){var r=t.toolbar,o=t.buttons;return r===!1?[]:r===void 0||r===!0?rH(o):dt(r)?aH(r):oH(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},uH=function(t,r,o,s,v,m){return yn(r,o.toLowerCase()).orThunk(function(){return m.bind(function(p){return ra(p,function(S){return yn(r,S+o.toLowerCase())})})}).fold(function(){return yn(QL,o.toLowerCase()).map(function(p){return p(t,v)}).orThunk(function(){return R.none()})},function(p){return p.type==="grouptoolbarbutton"&&!s?(console.warn("Ignoring the '"+o+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),R.none()):nH(p,v,t)})},CB=function(t,r,o,s){var v=iH(r),m=gt(v,function(p){var S=Yr(p.items,function(x){return x.trim().length===0?[]:uH(t,r.buttons,x,r.allowToolbarGroups,o,s).toArray()});return{title:R.from(t.translate(p.name)),items:S}});return Nt(m,function(p){return p.items.length>0})},e6=function(t,r,o,s){var v=r.outerContainer,m=o.toolbar,p=o.buttons;if(ze(m,dt)){var S=m.map(function(x){var E={toolbar:x,buttons:p,allowToolbarGroups:o.allowToolbarGroups};return CB(t,E,{backstage:s},R.none())});Ci.setToolbars(v,S)}else Ci.setToolbar(v,CB(t,o,{backstage:s},R.none()))},t6=St(),sH=t6.os.isiOS()&&t6.os.version.major<=12,cH=function(t,r){var o=t.dom,s=t.getWin(),v=t.getDoc().documentElement,m=Hn(Ha(s.innerWidth,s.innerHeight)),p=Hn(Ha(v.offsetWidth,v.offsetHeight)),S=function(){var H=m.get();(H.left!==s.innerWidth||H.top!==s.innerHeight)&&(m.set(Ha(s.innerWidth,s.innerHeight)),T4(t))},x=function(){var H=t.getDoc().documentElement,W=p.get();(W.left!==H.offsetWidth||W.top!==H.offsetHeight)&&(p.set(Ha(H.offsetWidth,H.offsetHeight)),T4(t))},E=function(H){return E5(t,H)};o.bind(s,"resize",S),o.bind(s,"scroll",E);var M=J1(ie.fromDom(t.getBody()),"load",x),P=r.uiMothership.element;t.on("hide",function(){Zn(P,"display","none")}),t.on("show",function(){la(P,"display")}),t.on("NodeChange",x),t.on("remove",function(){M.unbind(),o.unbind(s,"resize",S),o.unbind(s,"scroll",E),s=null})},lH=function(t,r,o,s,v){var m=Hn(0),p=r.outerContainer;l7(t);var S=ie.fromDom(v.targetNode),x=Rt(Fn(S));ul(S,r.mothership),ov(x,r.uiMothership),t.on("PostRender",function(){e6(t,r,o,s),m.set(t.getWin().innerWidth),Ci.setMenubar(p,IL(t,o)),Ci.setSidebar(p,o.sidebar),cH(t,r)});var E=Ci.getSocket(p).getOrDie("Could not find expected socket element");if(sH){Ws(E.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var M=KB(function(){t.fire("ScrollContent")},20),P=Qo(E.element,"scroll",M.throttle);t.on("remove",P.unbind)}wD(t,r),t.addCommand("ToggleSidebar",function(ue,be){Ci.toggleSidebar(p,be),t.fire("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",function(){return Ci.whichSidebar(p)});var H=m2(t),W=function(){Ci.refreshToolbar(r.outerContainer)};(H===vl.sliding||H===vl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",function(){var ue=t.getWin().innerWidth;ue!==m.get()&&(W(),m.set(ue))});var K={enable:function(){v0(r,!1)},disable:function(){v0(r,!0)},isDisabled:function(){return Ln.isDisabled(p)}};return{iframeContainer:E.element.dom,editorContainer:p.element.dom,api:K}},fH=Object.freeze({__proto__:null,render:lH}),KF=function(t){var r=/^[0-9\.]+(|px)$/i;return r.test(""+t)?R.some(parseInt(""+t,10)):R.none()},XF=function(t){return xn(t)?t+"px":t},SB=function(t,r,o){var s=r.filter(function(m){return t<m}),v=o.filter(function(m){return t>m});return s.or(v).getOr(t)},vH=function(t){var r=Yx(t),o=aD(t),s=oD(t);return KF(r).map(function(v){return SB(v,o,s)})},dH=function(t){var r=vH(t);return r.getOr(Yx(t))},n6=function(t){var r=Jx(t),o=h4(t),s=Zx(t);return KF(r).map(function(v){return SB(v,o,s)})},mH=function(t){var r=n6(t);return r.getOr(Jx(t))},gH=function(t,r,o,s,v){var m=o.uiMothership,p=o.outerContainer,S=f0.DOM,x=eT(t),E=tT(t),M=Zx(t).or(n6(t)),P=s.shared.header,H=P.isPositionedAtTop,W=m2(t),K=W===vl.sliding||W===vl.floating,ue=Hn(!1),be=function(){return ue.get()&&!t.removed},ae=function(ct){return K?ct.fold(Z(0),function(Je){return Je.components().length>1?pi(Je.components()[1].element):0}):0},we=function(ct){switch(lD(t)){case xp.auto:var Je=Ci.getToolbar(p),At=ae(Je),hn=pi(ct.element)-At,ot=ii(r),cn=ot.y>hn;if(cn)return"top";var On=je(r),Wr=Math.max(On.dom.scrollHeight,pi(On)),xa=ot.bottom<Wr-hn;if(xa)return"bottom";var oo=vu(),Fo=oo.bottom<ot.bottom-hn;return Fo?"bottom":"top";case xp.bottom:return"bottom";case xp.top:default:return"top"}},Le=function(ct){var Je=v.get();li.setModes(Je,[ct]),P.setDockingMode(ct);var At=H()?vf.TopToBottom:vf.BottomToTop;hr(Je.element,tb,At)},Fe=function(){var ct=M.getOrThunk(function(){var Je=KF(Po(Ca(),"margin-left")).getOr(0);return Au(Ca())-as(r).left+Je});Zn(v.get().element,"max-width",ct+"px")},ye=function(){var ct=Ci.getToolbar(p),Je=ae(ct),At=ii(r),hn=H()?Math.max(At.y-pi(v.get().element)+Je,0):At.bottom;Ws(p.element,{position:"absolute",top:Math.round(hn)+"px",left:Math.round(At.x)+"px"})},Be=function(){m.broadcastOn([Cg()],{})},Qe=function(ct){if(ct===void 0&&(ct=!1),!!be()){if(x||Fe(),K&&Ci.refreshToolbar(p),x||ye(),E){var Je=v.get();ct?li.reset(Je):li.refresh(Je)}Be()}},Wt=function(ct){if(ct===void 0&&(ct=!0),!(x||!E||!be())){var Je=P.getDockingMode(),At=we(v.get());At!==Je&&(Le(At),ct&&Qe(!0))}},it=function(){ue.set(!0),Zn(p.element,"display","flex"),S.addClass(t.getBody(),"mce-edit-focus"),la(m.element,"display"),Wt(!1),Qe()},Jt=function(){ue.set(!1),o.outerContainer&&(Zn(p.element,"display","none"),S.removeClass(t.getBody(),"mce-edit-focus")),Zn(m.element,"display","none")};return{isVisible:be,isPositionedAtTop:H,show:it,hide:Jt,update:Qe,updateMode:Wt,repositionPopups:Be}},r6=function(t,r){var o=ii(t);return{pos:r?o.y:o.bottom,bounds:o}},hH=function(t,r,o,s){var v=Hn(r6(r,o.isPositionedAtTop())),m=function(S){var x=r6(r,o.isPositionedAtTop()),E=x.pos,M=x.bounds,P=v.get(),H=P.pos,W=P.bounds,K=M.height!==W.height||M.width!==W.width;v.set({pos:E,bounds:M}),K&&T4(t,S),o.isVisible()&&(H!==E?o.update(!0):K&&(o.updateMode(),o.repositionPopups()))};s||(t.on("activate",o.show),t.on("deactivate",o.hide)),t.on("SkinLoaded ResizeWindow",function(){return o.update(!0)}),t.on("NodeChange keydown",function(S){Kg.requestAnimationFrame(function(){return m(S)})}),t.on("ScrollWindow",function(){return o.updateMode()});var p=ng();p.set(J1(ie.fromDom(t.getBody()),"load",m)),t.on("remove",function(){p.clear()})},pH=function(t,r,o,s,v){var m=r.mothership,p=r.uiMothership,S=r.outerContainer,x=Hn(null),E=ie.fromDom(v.targetNode),M=gH(t,E,r,s,x),P=KP(t);f7(t);var H=function(){if(x.get()){M.show();return}x.set(Ci.getHeader(S).getOrDie());var K=mD(t);ov(K,m),ov(K,p),e6(t,r,o,s),Ci.setMenubar(S,IL(t,o)),M.show(),hH(t,E,M,P),t.nodeChanged()};t.on("show",H),t.on("hide",M.hide),P||(t.on("focus",H),t.on("blur",M.hide)),t.on("init",function(){(t.hasFocus()||P)&&H()}),wD(t,r);var W={show:function(){M.show()},hide:function(){M.hide()},enable:function(){v0(r,!1)},disable:function(){v0(r,!0)},isDisabled:function(){return Ln.isDisabled(S)}};return{editorContainer:S.element.dom,api:W}},bH=Object.freeze({__proto__:null,render:pH}),yH="contexttoolbar-show",a6="contexttoolbar-hide",wH=function(t){return{hide:function(){return oa(t,Oh())},getValue:function(){return Ut.getValue(t)}}},o6=function(t,r){return ut(qR,function(o,s){var v=t.get(o),m=wH(v);r.onAction(m,s.event.buttonApi)})},CH=function(t,r,o){var s=r.original;s.primary;var v=Y(s,["primary"]),m=Qc(B3(ve(ve({},v),{type:"button",onAction:ge})));return JL(m,o.backstage.shared.providers,[o6(t,r)])},SH=function(t,r,o){var s=r.original;s.primary;var v=Y(s,["primary"]),m=Qc(Ux(ve(ve({},v),{type:"togglebutton",onAction:ge})));return ZL(m,o.backstage.shared.providers,[o6(t,r)])},xH=function(t,r,o){var s={backstage:{shared:{providers:o}}};return r.type==="contextformtogglebutton"?SH(t,r,s):CH(t,r,s)},TH=function(t,r,o){var s=gt(r,function(p){return Sa(xH(t,p,o))}),v=function(){return gt(s,function(p){return p.asSpec()})},m=function(p){return ra(r,function(S,x){return S.primary?R.from(s[x]).bind(function(E){return E.getOpt(p)}).filter(Kt(Ln.isDisabled)):R.none()})};return{asSpecs:v,findPrimary:m}},i6=function(t,r){var o=t.label.fold(function(){return{}},function(m){return{"aria-label":m}}),s=Sa(E2.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:o,selectOnFocus:!0,inputBehaviours:Bt([Gn.config({mode:"special",onEnter:function(m){return v.findPrimary(m).map(function(p){return yc(p),!0})},onLeft:function(m,p){return p.cut(),R.none()},onRight:function(m,p){return p.cut(),R.none()}})])})),v=TH(s,t.commands,r);return[{title:R.none(),items:[s.asSpec()]},{title:R.none(),items:v.asSpecs()}]},kH=function(t,r,o){return ua({type:t,uid:gn("context-toolbar"),initGroups:i6(r,o),onEscape:R.none,cyclicKeying:!0,providers:o})},EH={renderContextForm:kH,buildInitGroups:i6},u6=function(t,r,o){return o===void 0&&(o=.01),r.bottom-t.y>=o&&t.bottom-r.y>=o},OH=function(t){var r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){var o=te(ie.fromDom(t.startContainer),t.startOffset).element,s=Ma(o)?so(o):R.some(o);return s.filter(xr).map(function(v){return v.dom.getBoundingClientRect()}).getOr(r)}else return r},YF=function(t){var r=t.selection.getRng(),o=OH(r);if(t.inline){var s=Gs();return _i(s.left+o.left,s.top+o.top,o.width,o.height)}else{var v=Jl(ie.fromDom(t.getBody()));return _i(v.x+o.left,v.y+o.top,o.width,o.height)}},AH=function(t,r){return r.filter(jn).map(Jl).getOrThunk(function(){return YF(t)})},DH=function(t,r,o){var s=Math.max(t.x+o,r.x),v=Math.min(t.right-o,r.right);return{x:s,width:v-s}},_H=function(t,r,o,s,v,m){var p=ie.fromDom(t.getContainer()),S=Bi(p,".tox-editor-header").getOr(p),x=ii(S),E=x.y>=r.bottom,M=s&&!E;if(t.inline&&M)return{y:Math.max(x.bottom+m,o.y),bottom:o.bottom};if(t.inline&&!M)return{y:o.y,bottom:Math.min(x.y-m,o.bottom)};var P=v==="line"?ii(p):r;return M?{y:Math.max(x.bottom+m,o.y),bottom:Math.min(P.bottom-m,o.bottom)}:{y:Math.max(P.y+m,o.y),bottom:Math.min(x.y-m,o.bottom)}},s6=function(t,r,o,s){s===void 0&&(s=0);var v=Uf(window),m=ii(ie.fromDom(t.getContentAreaContainer())),p=p4(t)||b4(t)||Qx(t),S=DH(m,v,s),x=S.x,E=S.width;if(t.inline&&!p)return _i(x,v.y,E,v.height);var M=r.header.isPositionedAtTop(),P=_H(t,m,v,M,o,s),H=P.y,W=P.bottom;return _i(x,H,E,W-H)},xB=12,c6={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},l6={maxHeightFunction:ag(),maxWidthFunction:ys()},RH=function(t,r){var o=t.selection.getRng(),s=te(ie.fromDom(o.startContainer),o.startOffset);return o.startContainer===o.endContainer&&o.startOffset===o.endOffset-1&&qr(s.element,r)},MH=function(t,r,o){var s=oi(t,"position");Zn(t,"position",r);var v=o(t);return s.each(function(m){return Zn(t,"position",m)}),v},f6=function(t){return t==="node"},BH=function(t,r,o,s,v){var m=YF(t),p=s.lastElement().exists(function(E){return qr(o,E)});if(RH(t,o))return p?S3:Fl;if(p)return MH(r,s.getMode(),function(){var E=u6(m,ii(r));return E&&!s.isReposition()?VB:S3});var S=s.getMode()==="fixed"?v.y+Gs().top:v.y,x=pi(r)+xB;return S+x<=m.y?Fl:jg},PH=function(t,r,o,s){var v=function(x){return function(E,M,P,H,W){var K=BH(t,H,x,o,W),ue=ve(ve({},E),{y:W.y,height:W.height});return ve(ve({},K(ue,M,P,H,W)),{alwaysFit:!0})}},m=function(x){return f6(s)?[v(x)]:[]},p={onLtr:function(x){return[Ds,wi,ds,Nu,ms,Vi].concat(m(x))},onRtl:function(x){return[Ds,wi,ms,Vi,ds,Nu].concat(m(x))}},S={onLtr:function(x){return[wi,Nu,Vi,ds,ms,Ds].concat(m(x))},onRtl:function(x){return[wi,Vi,Nu,ms,ds,Ds].concat(m(x))}};return r?S:p},NH=function(t,r,o,s){return r==="line"?{bubble:Wd(xB,0,c6),layouts:{onLtr:function(){return[L1]},onRtl:function(){return[H1]}},overrides:l6}:{bubble:Wd(0,xB,c6,1/xB),layouts:PH(t,o,s,r),overrides:l6}},JF=function(t,r){var o=Nt(r,function(p){return p.predicate(t.dom)}),s=Er(o,function(p){return p.type==="contexttoolbar"}),v=s.pass,m=s.fail;return{contextToolbars:v,contextForms:m}},IH=function(t){if(t.length<=1)return t;var r=function(S){return ba(t,function(x){return x.position===S})},o=function(S){return Nt(t,function(x){return x.position===S})},s=r("selection"),v=r("node");if(s||v)if(v&&s){var m=o("node"),p=gt(o("selection"),function(S){return ve(ve({},S),{position:"node"})});return m.concat(p)}else return o(s?"selection":"node");else return o("line")},$H=function(t){if(t.length<=1)return t;var r=function(s){return lr(t,function(v){return v.position===s})},o=r("selection").orThunk(function(){return r("node")}).orThunk(function(){return r("line")}).map(function(s){return s.position});return o.fold(function(){return[]},function(s){return Nt(t,function(v){return v.position===s})})},zH=function(t,r,o){var s=JF(t,r);if(s.contextForms.length>0)return R.some({elem:t,toolbars:[s.contextForms[0]]});var v=JF(t,o);if(v.contextForms.length>0)return R.some({elem:t,toolbars:[v.contextForms[0]]});if(s.contextToolbars.length>0||v.contextToolbars.length>0){var m=IH(s.contextToolbars.concat(v.contextToolbars));return R.some({elem:t,toolbars:m})}else return R.none()},FH=function(t,r,o){return t(r)?R.none():Eh(r,function(s){if(xr(s)){var v=JF(s,o.inNodeScope),m=v.contextToolbars,p=v.contextForms,S=p.length>0?p:$H(m);return S.length>0?R.some({elem:s,toolbars:S}):R.none()}else return R.none()},t)},LH=function(t,r){var o=ie.fromDom(r.getBody()),s=function(p){return qr(p,o)},v=function(p){return!s(p)&&!Ou(o,p)},m=ie.fromDom(r.selection.getNode());return v(m)?R.none():zH(m,t.inNodeScope,t.inEditorScope).orThunk(function(){return FH(s,m,t)})},HH=function(t,r){var o={},s=[],v=[],m={},p={},S=function(M,P){var H=Qc(YO(P));o[M]=H,H.launch.map(function(W){m["form:"+M]=ve(ve({},P.launch),{type:W.type==="contextformtogglebutton"?"togglebutton":"button",onAction:function(){r(H)}})}),H.scope==="editor"?v.push(H):s.push(H),p[M]=H},x=function(M,P){I3(P).each(function(H){P.scope==="editor"?v.push(H):s.push(H),p[M]=H})},E=Qr(t);return Lt(E,function(M){var P=t[M];P.type==="contextform"?S(M,P):P.type==="contexttoolbar"&&x(M,P)}),{forms:o,inNodeScope:s,inEditorScope:v,lookupTable:p,formNavigators:m}},v6=gn("forward-slide"),d6=gn("backward-slide"),ZF=gn("change-slide-event"),QF="tox-pop--resizing",VH=function(t){var r=Hn([]);return _a.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(o){r.set([]),_a.getContent(o).each(function(s){la(s.element,"visibility")}),yi(o.element,QF),la(o.element,"width")},inlineBehaviours:Bt([mr("context-toolbar-events",[ui(Fm(),function(o,s){s.event.raw.propertyName==="width"&&(yi(o.element,QF),la(o.element,"width"))}),ut(ZF,function(o,s){var v=o.element;la(v,"width");var m=Au(v);_a.setContent(o,s.event.contents),Mi(v,QF);var p=Au(v);Zn(v,"width",m+"px"),_a.getContent(o).each(function(S){s.event.focus.bind(function(x){return _l(x),Rl(v)}).orThunk(function(){return Gn.focusIn(S),gs(Fn(v))})}),Kg.setTimeout(function(){Zn(o.element,"width",p+"px")},0)}),ut(v6,function(o,s){_a.getContent(o).each(function(v){r.set(r.get().concat([{bar:v,focus:gs(Fn(o.element))}]))}),Vn(o,ZF,{contents:s.event.forwardContents,focus:R.none()})}),ut(d6,function(o,s){Ti(r.get()).each(function(v){r.set(r.get().slice(0,r.get().length-1)),Vn(o,ZF,{contents:Tc(v.bar),focus:v.focus})})})]),Gn.config({mode:"special",onEscape:function(o){return Ti(r.get()).fold(function(){return t.onEscape()},function(s){return oa(o,d6),R.some(!0)})}})]),lazySink:function(){return pr.value(t.sink)}})},eL="tox-pop--transition",UH=function(t,r,o,s){var v=s.backstage,m=v.shared,p=St().deviceType.isTouch,S=Wo(),x=Wo(),E=Wo(),M=fo(VH({sink:o,onEscape:function(){return t.focus(),R.some(!0)}})),P=function(){var it=E.get().getOr("node"),Jt=f6(it)?1:0;return s6(t,m,it,Jt)},H=function(){return!t.removed&&!(p()&&v.isContextMenuOpen())},W=function(it){return Mo(So(it,S.get(),qr),!0)},K=function(){if(H()){var it=P(),Jt=Mo(E.get(),"node")?AH(t,S.get()):YF(t);return it.height<=0||!u6(Jt,it)}else return!0},ue=function(){S.clear(),x.clear(),E.clear(),_a.hide(M)},be=function(){if(_a.isOpen(M)){var it=M.element;la(it,"display"),K()?Zn(it,"display","none"):(x.set(0),_a.reposition(M))}},ae=function(it){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[it],behaviours:Bt([Gn.config({mode:"acyclic"}),mr("pop-dialog-wrap-events",[dr(function(Jt){t.shortcuts.add("ctrl+F9","focus statusbar",function(){return Gn.focusIn(Jt)})}),wc(function(Jt){t.shortcuts.remove("ctrl+F9")})])])}},we=ho(function(){return HH(r,function(it){var Jt=ye([it]);Vn(M,v6,{forwardContents:ae(Jt)})})}),Le=function(it,Jt){return CB(t,{buttons:it,toolbar:Jt.items,allowToolbarGroups:!1},s,R.some(["form:"]))},Fe=function(it,Jt){return EH.buildInitGroups(it,Jt)},ye=function(it){var Jt=t.ui.registry.getAll().buttons,ct=we(),Je=ve(ve({},Jt),ct.formNavigators),At=m2(t)===vl.scrolling?vl.scrolling:vl.default,hn=bn(gt(it,function(ot){return ot.type==="contexttoolbar"?Le(Je,ot):Fe(ot,m.providers)}));return ua({type:At,uid:gn("context-toolbar"),initGroups:hn,onEscape:R.none,cyclicKeying:!0,providers:m.providers})},Be=function(it,Jt){var ct=it==="node"?m.anchors.node(Jt):m.anchors.cursor(),Je=NH(t,it,p(),{lastElement:S.get,isReposition:function(){return Mo(x.get(),0)},getMode:function(){return jo.getMode(o)}});return Xe(ct,Je)},Qe=function(it,Jt){if(Wt.cancel(),!!H()){var ct=ye(it),Je=it[0].position,At=Be(Je,Jt);E.set(Je),x.set(1);var hn=M.element;la(hn,"display"),W(Jt)||(yi(hn,eL),jo.reset(o,M)),_a.showWithinBounds(M,ae(ct),{anchor:At,transition:{classes:[eL],mode:"placement"}},function(){return R.some(P())}),Jt.fold(S.clear,S.set),K()&&Zn(hn,"display","none")}},Wt=WO(function(){if(!(!t.hasFocus()||t.removed))if(ls(M.element,eL))Wt.throttle();else{var it=we();LH(it,t).fold(ue,function(Jt){Qe(Jt.toolbars,R.some(Jt.elem))})}},17);t.on("init",function(){t.on("remove",ue),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",be),t.on("click keyup focus SetContent",Wt.throttle),t.on(a6,ue),t.on(yH,function(it){var Jt=we();yn(Jt.lookupTable,it.toolbarKey).each(function(ct){Qe([ct],xo(it.target!==t,it.target)),_a.getContent(M).each(Gn.focusIn)})}),t.on("focusout",function(it){Kg.setEditorTimeout(t,function(){Rl(o.element).isNone()&&Rl(M.element).isNone()&&ue()},0)}),t.on("SwitchMode",function(){t.mode.isReadOnly()&&ue()}),t.on("AfterProgressState",function(it){it.state?ue():t.hasFocus()&&Wt.throttle()}),t.on("NodeChange",function(it){Rl(M.element).fold(Wt.throttle,ge)})})},WH=function(t){var r=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];Lt(r,function(o){t.ui.registry.addToggleButton(o.name,{tooltip:o.text,icon:o.icon,onAction:Sv(t,o.cmd),onSetup:bB(t,o.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Sv(t,"JustifyNone")})},jH={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},GH=function(){var t="[0-9]+",r="[+-]?"+t,o="[eE]"+r,s="\\.",v=function(S){return"(?:"+S+")?"},m=["Infinity",t+s+v(t)+v(o),s+t+v(o),t+v(o)].join("|"),p="[+-]?(?:"+m+")";return new RegExp("^("+p+")(.*)$")}(),qH=function(t,r){return ba(r,function(o){return ba(jH[o],function(s){return t===s})})},KH=function(t,r){var o=R.from(GH.exec(t));return o.bind(function(s){var v=Number(s[1]),m=s[2];return qH(m,r)?R.some({value:v,unit:m}):R.none()})},XH=function(t,r){return KH(t,r).map(function(o){var s=o.value,v=o.unit;return s+v})},m6=function(t,r){var o=function(){var s=r.getOptions(t),v=r.getCurrent(t).map(r.hash),m=Wo();return gt(s,function(p){return{type:"togglemenuitem",text:r.display(p),onSetup:function(S){var x=function(M){M&&(m.on(function(P){return P.setActive(!1)}),m.set(S)),S.setActive(M)};x(Mo(v,r.hash(p)));var E=r.watcher(t,p,x);return function(){m.clear(),E()}},onAction:function(){return r.setCurrent(t,p)}}})};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:function(s){return s(o())},onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:o,onSetup:r.onMenuSetup})},YH={name:"lineheight",text:"Line height",icon:"line-height",getOptions:iD,hash:function(t){return XH(t,["fixed","relative","empty"]).getOr(t)},display:Ne,watcher:function(t,r,o){return t.formatter.formatChanged("lineheight",o,!1,{value:r}).unbind},getCurrent:function(t){return R.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,r){return t.execCommand("LineHeight",!1,r)}},JH=function(t){var r=R.from(uD(t));return r.map(function(o){return{name:"language",text:"Language",icon:"language",getOptions:Z(o),hash:function(s){return Dr(s.customCode)?s.code:s.code+"/"+s.customCode},display:function(s){return s.title},watcher:function(s,v,m){return s.formatter.formatChanged("lang",m,!1,{value:v.code,customValue:v.customCode}).unbind},getCurrent:function(s){var v=ie.fromDom(s.selection.getNode());return Nm(v,function(m){return R.some(m).filter(xr).bind(function(p){var S=Eo(p,"lang");return S.map(function(x){var E=Eo(p,"data-mce-lang").getOrUndefined();return{code:x,customCode:E,title:""}})})})},setCurrent:function(s,v){return s.execCommand("Lang",!1,v)},onToolbarSetup:function(s){var v=ng();return s.setActive(t.formatter.match("lang",{},void 0,!0)),v.set(t.formatter.formatChanged("lang",s.setActive,!0)),v.clear}}})},ZH=function(t){m6(t,YH),JH(t).each(function(r){return m6(t,r)})},QH=function(t,r){p7(t,r),S7(t,r),N7(t,r),B7(t,r),_7(t,r)},eV=function(t){return yB(t,"NodeChange",function(r){r.setDisabled(!t.queryCommandState("outdent"))})},tV=function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:eV(t),onAction:Sv(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Sv(t,"indent")})},nV=function(t){tV(t)},tL=function(t,r){return function(){t.execCommand("mceToggleFormat",!1,r)}},rV=function(t){rh.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(s,v){t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:bB(t,s.name),onAction:tL(t,s.name)})});for(var r=1;r<=6;r++){var o="h"+r;t.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+r,onSetup:bB(t,o),onAction:tL(t,o)})}},aV=function(t){rh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(r){t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Sv(t,r.action)})})},oV=function(t){rh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(r){t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Sv(t,r.action),onSetup:bB(t,r.name)})})},iV=function(t){rV(t),aV(t),oV(t)},uV=function(t){rh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(r){t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:Sv(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:tL(t,"code")})},sV=function(t){iV(t),uV(t)},TB=function(t,r){return yB(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(o){o.setDisabled(t.mode.isReadOnly()||!t.undoManager[r]())})},cV=function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:TB(t,"hasUndo"),onAction:Sv(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:TB(t,"hasRedo"),onAction:Sv(t,"redo")})},lV=function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:TB(t,"hasUndo"),onAction:Sv(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:TB(t,"hasRedo"),onAction:Sv(t,"redo")})},fV=function(t){cV(t),lV(t)},vV=function(t){return yB(t,"VisualAid",function(r){r.setActive(t.hasVisual)})},dV=function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:vV(t),onAction:Sv(t,"mceToggleVisualAid")})},mV=function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Sv(t,"mceToggleVisualAid")})},gV=function(t){mV(t),dV(t)},hV=function(t,r){WH(t),sV(t),QH(t,r),fV(t),P5(t),gV(t),nV(t),ZH(t)},g3=function(t,r){return{type:"makeshift",x:t,y:r}},pV=function(t,r,o){return g3(t.x+r,t.y+o)},g6=function(t){return t.type==="longpress"||t.type.indexOf("touch")===0},bV=function(t){if(g6(t)){var r=t.touches[0];return g3(r.pageX,r.pageY)}else return g3(t.pageX,t.pageY)},yV=function(t){if(g6(t)){var r=t.touches[0];return g3(r.clientX,r.clientY)}else return g3(t.clientX,t.clientY)},wV=function(t,r){var o=f0.DOM.getPos(t);return pV(r,o.x,o.y)},CV=function(t,r){return r.type==="contextmenu"||r.type==="longpress"?t.inline?bV(r):wV(t.getContentAreaContainer(),yV(r)):h6(t)},h6=function(t){return{type:"selection",root:ie.fromDom(t.selection.getNode())}},SV=function(t){return{type:"node",node:R.some(ie.fromDom(t.selection.getNode())),root:ie.fromDom(t.getBody())}},p6=function(t,r,o){switch(o){case"node":return SV(t);case"point":return CV(t,r);case"selection":return h6(t)}},xV=function(t,r,o,s,v,m){var p=o(),S=p6(t,r,m);S0(p,Xu.CLOSE_ON_EXECUTE,s,!1).map(function(x){r.preventDefault(),_a.showMenuAt(v,{anchor:S},{menu:{markers:u0("normal")},data:x})})},TV={onLtr:function(){return[wi,Nu,Vi,ds,ms,Ds,Fl,jg,Wg,Vg,Ug,a0]},onRtl:function(){return[wi,Vi,Nu,ms,ds,Ds,Fl,jg,Ug,a0,Wg,Vg]}},kV=12,EV={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},OV=function(t,r){var o=t.selection;if(o.isCollapsed()||r.touches.length<1)return!1;var s=r.touches[0],v=o.getRng(),m=Ky(t.getWin(),ug.domRange(v));return m.exists(function(p){return p.left<=s.clientX&&p.right>=s.clientX&&p.top<=s.clientY&&p.bottom>=s.clientY})},AV=function(t){var r=t.selection.getRng(),o=function(){Kg.setEditorTimeout(t,function(){t.selection.setRng(r)},10),m()};t.once("touchend",o);var s=function(p){p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",s,!0);var v=function(){return m()};t.once("longpresscancel",v);var m=function(){t.off("touchend",o),t.off("longpresscancel",v),t.off("mousedown",s)}},DV=function(t,r,o){var s=p6(t,r,o),v=o==="point"?kV:0;return ve({bubble:Wd(0,v,EV),layouts:TV,overrides:{maxWidthFunction:ys(),maxHeightFunction:ag()}},s)},_V=function(t,r,o,s,v,m,p){var S=DV(t,r,m);S0(o,Xu.CLOSE_ON_EXECUTE,s,!0).map(function(x){r.preventDefault(),_a.showMenuWithinBounds(v,{anchor:S},{menu:{markers:u0("normal"),highlightImmediately:p},data:x,type:"horizontal"},function(){return R.some(s6(t,s.shared,m==="node"?"node":"selection"))}),t.fire(a6)})},RV=function(t,r,o,s,v,m){var p=St(),S=p.os.isiOS(),x=p.os.isOSX(),E=p.os.isAndroid(),M=p.deviceType.isTouch(),P=function(){return!(E||S||x&&M)},H=function(){var K=o();_V(t,r,K,s,v,m,P())};if((x||S)&&m!=="node"){var W=function(){AV(t),H()};OV(t,r)?W():(t.once("selectionchange",W),t.once("touchend",function(){return t.off("selectionchange",W)}))}else H()},b6=function(t){return typeof t=="string"?t.split(/[ ,]/):t},y6=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},MV=function(t,r,o){var s=t.ui.registry.getAll().contextMenus;return R.from(t.getParam(r)).map(b6).getOrThunk(function(){return Nt(b6(o),function(v){return Ar(s,v)})})},BV=function(t){return t.getParam("contextmenu")===!1},PV=function(t){return MV(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},NV=function(t){return t.getParam("contextmenu_avoid_overlap","","string")},w6=function(t){return dt(t)?t==="|":t.type==="separator"},nL={type:"separator"},C6=function(t){var r=function(o){return{text:o.text,icon:o.icon,disabled:o.disabled,shortcut:o.shortcut}};if(dt(t))return t;switch(t.type){case"separator":return nL;case"submenu":return ve(ve({type:"nestedmenuitem"},r(t)),{getSubmenuItems:function(){var o=t.getSubmenuItems();return dt(o)?o:gt(o,C6)}});default:return ve(ve({type:"menuitem"},r(t)),{onAction:Tt(t.onAction)})}},S6=function(t,r){if(r.length===0)return t;var o=Ti(t).filter(function(v){return!w6(v)}),s=o.fold(function(){return[]},function(v){return[nL]});return t.concat(s).concat(r).concat([nL])},IV=function(t,r,o){var s=$n(r,function(v,m){return yn(t,m.toLowerCase()).map(function(p){var S=p.update(o);if(dt(S))return S6(v,S.split(" "));if(S.length>0){var x=gt(S,C6);return S6(v,x)}else return v}).getOrThunk(function(){return v.concat([m])})},[]);return s.length>0&&w6(s[s.length-1])&&s.pop(),s},$V=function(t,r){return r.ctrlKey&&!y6(t)},x6=function(t,r){return r.type!=="longpress"&&(r.button!==2||r.target===t.getBody()&&r.pointerType==="")},T6=function(t,r){return x6(t,r)?t.selection.getStart(!0):r.target},zV=function(t,r){var o=NV(t),s=x6(t,r)?"selection":"point";if(ki(o)){var v=T6(t,r),m=C2(ie.fromDom(v),o);return m?"node":s}else return s},FV=function(t,r,o){var s=St(),v=s.deviceType.isTouch,m=fo(_a.sketch({dom:{tag:"div"},lazySink:r,onEscape:function(){return t.focus()},onShow:function(){return o.setContextMenuState(!0)},onHide:function(){return o.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Bt([mr("dismissContextMenu",[ut(rl(),function(x,E){Kr.close(x),t.focus()})])])})),p=function(x){return _a.hide(m)},S=function(x){if(y6(t)&&x.preventDefault(),!($V(t,x)||BV(t))){var E=zV(t,x),M=function(){var H=T6(t,x),W=t.ui.registry.getAll(),K=PV(t);return IV(W.contextMenus,K,H)},P=v()?RV:xV;P(t,x,M,o,m,E)}};t.on("init",function(){var x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(v()?"":" ResizeWindow");t.on(x,p),t.on("longpress contextmenu",S)})},rL=hc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),kB=function(t){return function(r){return r.translate(-t.left,-t.top)}},EB=function(t){return function(r){return r.translate(t.left,t.top)}},qp=function(t){return function(r,o){return $n(t,function(s,v){return v(s)},Ha(r,o))}},OB=function(t,r,o){return t.fold(qp([EB(o),kB(r)]),qp([kB(r)]),qp([]))},yk=function(t,r,o){return t.fold(qp([EB(o)]),qp([]),qp([EB(r)]))},k6=function(t,r,o){return t.fold(qp([]),qp([kB(o)]),qp([EB(r),kB(o)]))},LV=function(t,r,o,s,v,m){var p=yk(t,v,m),S=yk(r,v,m);return Math.abs(p.left-S.left)<=o&&Math.abs(p.top-S.top)<=s},HV=function(t,r,o,s,v,m){var p=yk(t,v,m),S=yk(r,v,m),x=Math.abs(p.left-S.left),E=Math.abs(p.top-S.top);return Ha(x,E)},E6=function(t,r,o){var s=t.fold(function(v,m){return{position:R.some("absolute"),left:R.some(v+"px"),top:R.some(m+"px")}},function(v,m){return{position:R.some("absolute"),left:R.some(v-o.left+"px"),top:R.some(m-o.top+"px")}},function(v,m){return{position:R.some("fixed"),left:R.some(v+"px"),top:R.some(m+"px")}});return ve({right:R.none(),bottom:R.none()},s)},VV=function(t,r,o){return t.fold(function(s,v){return AB(s+r,v+o)},function(s,v){return A0(s+r,v+o)},function(s,v){return Q2(s+r,v+o)})},aL=function(t,r,o,s){var v=function(m,p){return function(S,x){var E=m(r,o,s);return p(S.getOr(E.left),x.getOr(E.top))}};return t.fold(v(k6,AB),v(yk,A0),v(OB,Q2))},AB=rL.offset,A0=rL.absolute,Q2=rL.fixed,O6=function(t,r){var o=co(t,r);return Dr(o)?NaN:parseInt(o,10)},UV=function(t,r){var o=t.element,s=O6(o,r.leftAttr),v=O6(o,r.topAttr);return isNaN(s)||isNaN(v)?R.none():R.some(Ha(s,v))},WV=function(t,r,o){var s=t.element;hr(s,r.leftAttr,o.left+"px"),hr(s,r.topAttr,o.top+"px")},jV=function(t,r){var o=t.element;Ji(o,r.leftAttr),Ji(o,r.topAttr)},GV=function(t,r,o,s){return UV(t,r).fold(function(){return o},function(v){return Q2(v.left+s.left,v.top+s.top)})},qV=function(t,r,o,s,v,m){var p=GV(t,r,o,s),S=r.mustSnap?XV(t,r,p,v,m):YV(t,r,p,v,m),x=OB(p,v,m);return WV(t,r,x),S.fold(function(){return{coord:Q2(x.left,x.top),extra:R.none()}},function(E){return{coord:E.output,extra:E.extra}})},KV=function(t,r){jV(t,r)},A6=function(t,r,o,s){return ra(t,function(v){var m=v.sensor,p=LV(r,m,v.range.left,v.range.top,o,s);return p?R.some({output:aL(v.output,r,o,s),extra:v.extra}):R.none()})},XV=function(t,r,o,s,v){var m=r.getSnapPoints(t),p=A6(m,o,s,v);return p.orThunk(function(){var S=$n(m,function(x,E){var M=E.sensor,P=HV(o,M,E.range.left,E.range.top,s,v);return x.deltas.fold(function(){return{deltas:R.some(P),snap:R.some(E)}},function(H){var W=(P.left+P.top)/2,K=(H.left+H.top)/2;return W<=K?{deltas:R.some(P),snap:R.some(E)}:x})},{deltas:R.none(),snap:R.none()});return S.snap.map(function(x){return{output:aL(x.output,o,s,v),extra:x.extra}})})},YV=function(t,r,o,s,v){var m=r.getSnapPoints(t);return A6(m,o,s,v)},JV=function(t,r,o){return{coord:aL(t.output,t.output,r,o),extra:t.extra}},ZV=function(t,r,o,s){var v=r.getTarget(t.element);if(r.repositionTarget){var m=uo(t.element),p=Gs(m),S=ak(v),x=JV(s,p,S),E=E6(x.coord,p,S);Bo(v,E)}},QV=Object.freeze({__proto__:null,snapTo:ZV}),oL="data-initial-z-index",e9=function(t){so(t.element).filter(xr).each(function(r){Eo(r,oL).fold(function(){return la(r,"z-index")},function(o){return Zn(r,"z-index",o)}),Ji(r,oL)})},t9=function(t){so(t.element).filter(xr).each(function(r){oi(r,"z-index").each(function(o){hr(r,oL,o)}),Zn(r,"z-index",Po(t.element,"z-index"))})},D6=function(t,r){t.getSystem().addToGui(r),t9(r)},n9=function(t){e9(t),t.getSystem().removeFromGui(t)},_6=function(t,r,o){return t.getSystem().build(ps.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:o}))},r9=Xs("snaps",[rt("getSnapPoints"),va("onSensor"),rt("leftAttr"),rt("topAttr"),Se("lazyViewport",vu),Se("mustSnap",!1)]),iL=[Se("useFixed",$t),rt("blockerClass"),Se("getTarget",Ne),Se("onDrag",ge),Se("repositionTarget",!0),Se("onDrop",ge),Qa("getBounds",vu),r9],a9=function(t){return vi(oi(t,"left"),oi(t,"top"),oi(t,"position"),function(r,o,s){var v=s==="fixed"?Q2:AB;return v(parseInt(r,10),parseInt(o,10))}).getOrThunk(function(){var r=as(t);return A0(r.left,r.top)})},o9=function(t,r,o,s,v){var m=v.bounds,p=yk(r,o,s),S=Zs(p.left,m.x,m.x+m.width-v.width),x=Zs(p.top,m.y,m.y+m.height-v.height),E=A0(S,x);return r.fold(function(){var M=k6(E,o,s);return AB(M.left,M.top)},Z(E),function(){var M=OB(E,o,s);return Q2(M.left,M.top)})},i9=function(t,r,o,s,v,m,p){var S=r.fold(function(){var x=VV(o,m.left,m.top),E=OB(x,s,v);return Q2(E.left,E.top)},function(x){var E=qV(t,x,o,m,s,v);return E.extra.each(function(M){x.onSensor(t,M)}),E.coord});return o9(t,S,s,v,p)},u9=function(t,r,o,s){var v=r.getTarget(t.element);if(r.repositionTarget){var m=uo(t.element),p=Gs(m),S=ak(v),x=a9(v),E=i9(t,r.snaps,x,p,S,s,o),M=E6(E,p,S);Bo(v,M)}r.onDrag(t,v,s)},R6=function(t,r){return{bounds:t.getBounds(),height:js(r.element),width:os(r.element)}},uL=function(t,r,o,s,v){var m=o.update(s,v),p=o.getStartData().getOrThunk(function(){return R6(r,t)});m.each(function(S){u9(t,r,p,S)})},M6=function(t,r,o,s){r.each(n9),o.snaps.each(function(m){KV(t,m)});var v=o.getTarget(t.element);s.reset(),o.onDrop(t,v)},sL=function(t){return function(r,o){var s=function(v){o.setStartData(R6(r,v))};return Wa(Pn([ut(Z0(),function(v){o.getStartData().each(function(){return s(v)})})],t(r,o,s),!0))}},s9=function(t){return Wa([ut(nl(),t.forceDrop),ut(G0(),t.drop),ut(xd(),function(r,o){t.move(o.event)}),ut(j0(),t.delayDrop)])},c9=function(t){return R.from(Ha(t.x,t.y))},l9=function(t,r){return Ha(r.left-t.left,r.top-t.top)},f9=Object.freeze({__proto__:null,getData:c9,getDelta:l9}),B6=function(t,r,o){return[ut(nl(),function(s,v){var m=v.event.raw;if(m.button===0){v.stop();var p=function(){return M6(s,R.some(E),t,r)},S=f_(p,200),x={drop:p,delayDrop:S.schedule,forceDrop:p,move:function(P){S.cancel(),uL(s,t,r,f9,P)}},E=_6(s,t.blockerClass,s9(x)),M=function(){o(s),D6(s,E)};M()}})]},v9=Pn(Pn([],iL,!0),[Xa("dragger",{handlers:sL(B6)})],!1),d9=function(t){return Wa([ut(nf(),t.forceDrop),ut(Dv(),t.drop),ut(SC(),t.drop),ut(tl(),function(r,o){t.move(o.event)})])},m9=function(t){var r=t[0];return R.some(Ha(r.clientX,r.clientY))},g9=function(t){var r=t.raw,o=r.touches;return o.length===1?m9(o):R.none()},h9=function(t,r){return Ha(r.left-t.left,r.top-t.top)},P6=Object.freeze({__proto__:null,getData:g9,getDelta:h9}),N6=function(t,r,o){var s=Wo(),v=function(m){M6(m,s.get(),t,r),s.clear()};return[ut(nf(),function(m,p){p.stop();var S=function(){return v(m)},x={drop:S,delayDrop:ge,forceDrop:S,move:function(P){uL(m,t,r,P6,P)}},E=_6(m,t.blockerClass,d9(x));s.set(E);var M=function(){o(m),D6(m,E)};M()}),ut(tl(),function(m,p){p.stop(),uL(m,t,r,P6,p.event)}),ut(Dv(),function(m,p){p.stop(),v(m)}),ut(SC(),v)]},p9=Pn(Pn([],iL,!0),[Xa("dragger",{handlers:sL(N6)})],!1),b9=function(t,r,o){return Pn(Pn([],B6(t,r,o),!0),N6(t,r,o),!0)},y9=Pn(Pn([],iL,!0),[Xa("dragger",{handlers:sL(b9)})],!1),w9=v9,C9=p9,S9=y9,x9=Object.freeze({__proto__:null,mouse:w9,touch:C9,mouseOrTouch:S9}),T9=function(){var t=R.none(),r=R.none(),o=function(){t=R.none(),r=R.none()},s=function(x,E){var M=t.map(function(P){return x.getDelta(P,E)});return t=R.some(E),M},v=function(x,E){return x.getData(E).bind(function(M){return s(x,M)})},m=function(x){r=R.some(x)},p=function(){return r},S=Z({});return Pu({readState:S,reset:o,update:v,getStartData:p,setStartData:m})},k9=Object.freeze({__proto__:null,init:T9}),eC=Hd({branchKey:"mode",branches:x9,name:"dragging",active:{events:function(t,r){var o=t.dragger;return o.handlers(t,r)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:R.from(t.extra)}}},state:k9,apis:QV}),cL=40,DB=cL/2,I6=function(t,r,o,s,v,m){return t.fold(function(){return eC.snap({sensor:A0(o-DB,s-DB),range:Ha(v,m),output:A0(R.some(o),R.some(s)),extra:{td:r}})},function(p){var S=o-DB,x=s-DB,E=cL,M=cL,P=p.element.dom.getBoundingClientRect();return eC.snap({sensor:A0(S,x),range:Ha(E,M),output:A0(R.some(o-P.width/2),R.some(s-P.height/2)),extra:{td:r}})})},$6=function(t,r,o){var s=function(v,m){return v.exists(function(p){return qr(p,m)})};return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(v,m){var p=m.td;s(r.get(),p)||(r.set(p),o(p))},mustSnap:!0}},z6=function(t){return Sa(tc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Bt([eC.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),A2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},E9=function(t,r){var o=Hn([]),s=Hn([]),v=Hn(!1),m=Wo(),p=Wo(),S=function(Qe){var Wt=Jl(Qe);return I6(W.getOpt(r),Qe,Wt.x,Wt.y,Wt.width,Wt.height)},x=function(){return gt(o.get(),function(Qe){return S(Qe)})},E=function(Qe){var Wt=Jl(Qe);return I6(K.getOpt(r),Qe,Wt.right,Wt.bottom,Wt.width,Wt.height)},M=function(){return gt(s.get(),function(Qe){return E(Qe)})},P=$6(x,m,function(Qe){p.get().each(function(Wt){t.fire("TableSelectorChange",{start:Qe,finish:Wt})})}),H=$6(M,p,function(Qe){m.get().each(function(Wt){t.fire("TableSelectorChange",{start:Wt,finish:Qe})})}),W=z6(P),K=z6(H),ue=fo(W.asSpec()),be=fo(K.asSpec()),ae=function(Qe,Wt,it,Jt){var ct=Wt.dom.getBoundingClientRect();la(Qe.element,"display");var Je=lc(ie.fromDom(t.getBody())).dom.innerHeight,At=it(ct),hn=Jt(ct,Je);(At||hn)&&Zn(Qe.element,"display","none")},we=function(Qe,Wt,it,Jt){var ct=it(Wt);eC.snapTo(Qe,ct);var Je=function(hn){return hn[Jt]<0},At=function(hn,ot){return hn[Jt]>ot};ae(Qe,Wt,Je,At)},Le=function(Qe){return we(ue,Qe,S,"top")},Fe=function(){return m.get().each(Le)},ye=function(Qe){return we(be,Qe,E,"bottom")},Be=function(){return p.get().each(ye)};St().deviceType.isTouch()&&(t.on("TableSelectionChange",function(Qe){v.get()||(Kd(r,ue),Kd(r,be),v.set(!0)),m.set(Qe.start),p.set(Qe.finish),Qe.otherCells.each(function(Wt){o.set(Wt.upOrLeftCells),s.set(Wt.downOrRightCells),Le(Qe.start),ye(Qe.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",function(){Fe(),Be()}),t.on("TableSelectionClear",function(){v.get()&&(Nl(ue),Nl(be),v.set(!1)),m.clear(),p.clear()}))},O9=function(t){return!!(t.nodeType===1&&(t.nodeName==="BR"||t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark"))},A9=function(t,r,o){r.delimiter||(r.delimiter="»");var s=function(m){var p=m||[],S=gt(p,function(E,M){return tc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":M,"tab-index":-1,"aria-level":M+1},innerHtml:E.name},action:function(P){t.focus(),t.selection.select(E.element),t.nodeChanged()},buttonBehaviours:Bt([Ef.button(o.isDisabled),Ui()])})}),x={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+r.delimiter+" "}};return $n(S.slice(1),function(E,M){var P=E;return P.push(x),P.push(M),P},[S[0]])},v=function(m){for(var p=[],S=m.length;S-- >0;){var x=m[S];if(x.nodeType===1&&!O9(x)){var E=t.fire("ResolveName",{name:x.nodeName.toLowerCase(),target:x});if(E.isDefaultPrevented()||p.push({name:E.name,element:x}),E.isPropagationStopped())break}}return p};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Bt([Gn.config({mode:"flow",selector:"div[role=button]"}),Ln.config({disabled:o.isDisabled}),Ui(),si.config({}),sr.config({}),mr("elementPathEvents",[dr(function(m,p){t.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return Gn.focusIn(m)}),t.on("NodeChange",function(S){var x=v(S.parents);x.length>0?sr.set(m,s(x)):sr.set(m,[])})})])]),components:[]}},tC;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(tC||(tC={}));var D9=function(t,r,o,s,v){var m={};return m.height=SB(s+r.top,aD(t),oD(t)),o===tC.Both&&(m.width=SB(v+r.left,h4(t),Zx(t))),m},F6=function(t,r,o){var s=ie.fromDom(t.getContainer()),v=D9(t,r,o,pi(s),Au(s));na(v,function(m,p){return Zn(s,p,XF(m))}),k5(t)},_9=function(t){var r=!t.hasPlugin("autoresize"),o=t.getParam("resize",r);return o===!1?tC.None:o==="both"?tC.Both:tC.Vertical},_B=function(t,r,o,s){var v=20,m=Ha(o*v,s*v);return F6(t,m,r),R.some(!0)},R9=function(t,r){var o=_9(t);return o===tC.None?R.none():R.some(dv("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize")},behaviours:[eC.config({mode:"mouse",repositionTarget:!1,onDrag:function(s,v,m){return F6(t,m,o)},blockerClass:"tox-blocker"}),Gn.config({mode:"special",onLeft:function(){return _B(t,o,-1,0)},onRight:function(){return _B(t,o,1,0)},onUp:function(){return _B(t,o,0,-1)},onDown:function(){return _B(t,o,0,1)}}),si.config({}),tr.config({})]},r.icons))},M9=function(t,r){var o,s=function(v,m,p){return sr.set(v,[pu(r.translate(["{0} "+p,m[p]]))])};return tc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Bt([Ef.button(r.isDisabled),Ui(),si.config({}),sr.config({}),Ut.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),mr("wordcount-events",[Js(function(v){var m=Ut.getValue(v),p=m.mode==="words"?"characters":"words";Ut.setValue(v,{mode:p,count:m.count}),s(v,m.count,p)}),dr(function(v){t.on("wordCountUpdate",function(m){var p=Ut.getValue(v).mode;Ut.setValue(v,{mode:p,count:m.wordCount}),s(v,m.wordCount,p)})})])]),eventOrder:(o={},o[pc()]=["disabling","alloy.base.behaviour","wordcount-events"],o)})},B9=function(t,r){var o=function(){var m=kf.translate(["Powered by {0}","Tiny"]),p='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+m+'">'+m+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:p}}},s=function(){var m=[];return t.getParam("elementpath",!0,"boolean")&&m.push(A9(t,{},r)),t.hasPlugin("wordcount")&&m.push(M9(t,r)),t.getParam("branding",!0,"boolean")&&m.push(o()),m.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:m}]:[]},v=function(){var m=s(),p=R9(t,r);return m.concat(p.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:v()}},P9=function(t){var r,o=t.inline,s=o?bH:fH,v=tT(t)?fk:gF,m=R.none(),p=St(),S=p.browser.isIE(),x=S?["tox-platform-ie"]:[],E=p.deviceType.isTouch(),M="tox-platform-touch",P=E?[M]:[],H=fD(t),W=mD(t),K=kf.isRtl()?{attributes:{dir:"rtl"}}:{},ue={attributes:(r={},r[tb]=H?vf.BottomToTop:vf.TopToBottom,r)},be=function(){return m.bind(Ci.getHeader)},ae=function(){return v.isDocked(be)},we=function(){Zn(zs.element,"width",document.body.clientWidth+"px")},Le=function(){var cu=qr(Ca(),W)&&Po(W,"display")==="grid",Sm={dom:ve({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(x).concat(P)},K),behaviours:Bt([jo.config({useFixed:function(){return ae()}})])},vh={dom:{styles:{width:document.body.clientWidth+"px"}},events:Wa([ut(bc(),we)])};return Xe(Sm,cu?vh:{})},Fe=fo(Le()),ye=function(){return pr.value(Fe)},Be=Sa({dom:{tag:"div",classes:["tox-anchorbar"]}}),Qe=function(){return m.bind(function(cu){return Be.getOpt(cu)}).getOrDie("Could not find a anchor bar element")},Wt=function(){return m.bind(function(cu){return Ci.getToolbar(cu)}).getOrDie("Could not find more toolbar element")},it=function(){return m.bind(function(cu){return Ci.getThrobber(cu)}).getOrDie("Could not find throbber element")},Jt=nk(Fe,t,Qe),ct=Ci.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Jt,onEscape:function(){t.focus()}}),Je=m2(t),At=Ci.parts.toolbar(ve({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ye,providers:Jt.shared.providers,onEscape:function(){t.focus()},type:Je,lazyToolbar:Wt,lazyHeader:function(){return be().getOrDie("Could not find header element")}},ue)),hn=Ci.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Jt.shared.providers,onEscape:function(){t.focus()},type:Je}),ot=Ci.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),cn=Ci.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),On=Ci.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Jt}),Wr=t.getParam("statusbar",!0,"boolean"),xa=Wr&&!o?R.some(B9(t,Jt.shared.providers)):R.none(),oo={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ot,cn]},Fo=Qx(t),qc=b4(t),ws=p4(t),Ck=function(){return Fo?[hn]:qc?[At]:[]},su=Ci.parts.header({dom:ve({tag:"div",classes:["tox-editor-header"]},ue),components:bn([ws?[ct]:[],Ck(),eT(t)?[]:[Be.asSpec()]]),sticky:tT(t),editor:t,sharedBackstage:Jt.shared}),Kp=bn([H?[]:[su],o?[]:[oo],H?[su]:[]]),Xp={dom:{tag:"div",classes:["tox-editor-container"]},components:Kp},aC=bn([[Xp],o?[]:xa.toArray(),[On]]),Yp=gD(t),oC=ve(ve({role:"application"},kf.isRtl()?{dir:"rtl"}:{}),Yp?{"aria-hidden":"true"}:{}),ic=fo(Ci.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(o?["tox-tinymce-inline"]:[]).concat(H?["tox-tinymce--toolbar-bottom"]:[]).concat(P).concat(x),styles:ve({visibility:"hidden"},Yp?{opacity:"0",border:"0"}:{}),attributes:oC},components:aC,behaviours:Bt([Ui(),Ln.config({disableClass:"tox-tinymce--disabled"}),Gn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));m=R.some(ic),t.shortcuts.add("alt+F9","focus menubar",function(){Ci.focusMenubar(ic)}),t.shortcuts.add("alt+F10","focus toolbar",function(){Ci.focusToolbar(ic)}),t.addCommand("ToggleToolbarDrawer",function(){Ci.toggleToolbarDrawer(ic)}),t.addQueryStateHandler("ToggleToolbarDrawer",function(){return Ci.isToolbarDrawerToggled(ic)});var xv=b_(ic),zs=b_(Fe);sF(t,xv,zs);var iC=function(){var cu={broadcastAll:zs.broadcast,broadcastOn:zs.broadcastOn,register:ge};return{channels:cu}},fh=function(){var cu=XF(dH(t)),Sm=XF(mH(t));return t.inline||(fc("div","width",Sm)&&Zn(ic.element,"width",Sm),fc("div","height",cu)?Zn(ic.element,"height",cu):Zn(ic.element,"height","200px")),cu},_0=function(){v.setup(t,Jt.shared,be),hV(t,Jt),FV(t,ye,Jt),q(t),zo(t,it,Jt.shared),Pr(GP(t),function(Fs,Kc){t.ui.registry.addGroupToolbarButton(Kc,Fs)});var cu=t.ui.registry.getAll(),Sm=cu.buttons,vh=cu.menuItems,Jp=cu.contextToolbars,Tv=cu.sidebars,dh=cD(t),rn={menuItems:vh,menus:XP(t),menubar:YP(t),toolbar:dh.getOrThunk(function(){return JP(t)}),allowToolbarGroups:Je===vl.floating,buttons:Sm,sidebar:Tv};UH(t,Jp,Fe,{backstage:Jt}),E9(t,Fe);var yr=t.getElement(),ka=fh(),_o={mothership:xv,uiMothership:zs,outerContainer:ic},uc={targetNode:yr,height:ka};return s.render(t,_o,rn,Jt,uc)};return{mothership:xv,uiMothership:zs,backstage:Jt,renderUI:_0,getUi:iC}},N9=function(t,r){var o=R.from(co(t,"id")).fold(function(){var s=gn("dialog-describe");return hr(r,"id",s),s},Ne);hr(t,"aria-describedby",o)},I9=function(t,r){var o=Eo(t,"id").fold(function(){var s=gn("dialog-label");return hr(r,"id",s),s},Ne);hr(t,"aria-labelledby",o)},$9=Z([rt("lazySink"),fa("dragBlockClass"),Qa("getBounds",vu),Se("useTabstopAt",We),Se("eventOrder",{}),$i("modalBehaviours",[Gn]),Pi("onExecute"),As("onEscape")]),lL={sketch:Ne},z9=Z([Vc({name:"draghandle",overrides:function(t,r){return{behaviours:Bt([eC.config({mode:"mouse",getTarget:function(o){return R1(o,'[role="dialog"]').getOr(o)},blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])}}}),Su({schema:[rt("dom")],name:"title"}),Su({factory:lL,schema:[rt("dom")],name:"close"}),Su({factory:lL,schema:[rt("dom")],name:"body"}),Vc({factory:lL,schema:[rt("dom")],name:"footer"}),kc({factory:{sketch:function(t,r){return ve(ve({},t),{dom:r.dom,components:r.components})}},schema:[Se("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Se("components",[])],name:"blocker"})]),F9=function(t,r,o,s){var v,m=Wo(),p=function(K){m.set(K);var ue=t.lazySink(K).getOrDie(),be=s.blocker(),ae=ue.getSystem().build(ve(ve({},be),{components:be.components.concat([Tc(K)]),behaviours:Bt([tr.config({}),mr("dialog-blocker-events",[ui(Ic(),function(){Gn.focusIn(K)})])])}));Kd(ue,ae),Gn.focusIn(K)},S=function(K){m.clear(),so(K.element).each(function(ue){K.getSystem().getByDom(ue).each(function(be){Nl(be)})})},x=function(K){return wf(K,t,"body")},E=function(K){return wf(K,t,"footer")},M=function(K,ue){xt.block(K,ue)},P=function(K){xt.unblock(K)},H=gn("modal-events"),W=ve(ve({},t.eventOrder),(v={},v[Ys()]=[H].concat(t.eventOrder["alloy.system.attached"]||[]),v));return{uid:t.uid,dom:t.dom,components:r,apis:{show:p,hide:S,getBody:x,getFooter:E,setIdle:P,setBusy:M},eventOrder:W,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:tu(t.modalBehaviours,[sr.config({}),Gn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),xt.config({getRoot:m.get}),mr(H,[dr(function(K){I9(K.element,wf(K,t,"title").element),N9(K.element,wf(K,t,"body").element)})])])}},ku=hs({name:"ModalDialog",configFields:$9(),partFields:z9(),factory:F9,apis:{show:function(t,r){t.show(r)},hide:function(t,r){t.hide(r)},getBody:function(t,r){return t.getBody(r)},getFooter:function(t,r){return t.getFooter(r)},setBusy:function(t,r,o){t.setBusy(r,o)},setIdle:function(t,r){t.setIdle(r)}}}),L9=In([er("type"),er("name")].concat(Xg)),H9=Zi,L6=[Ri("name","name",jr(function(){return gn("button-name")}),Zo),Za("icon"),gc("align","end",["start","end"]),Ua("primary",!1),Ua("disabled",!1)],H6=Pn(Pn([],L6,!0),[er("text")],!1),fL=Pn([mc("type",["submit","cancel","custom"])],H6,!0),V9=Pn([mc("type",["menu"]),Za("text"),Za("tooltip"),Za("icon"),Mu("items",L9)],L6,!0),U9=Nc("type",{submit:fL,cancel:fL,custom:fL,menu:V9}),W9=[er("type"),er("text"),mc("level",["info","warn","error","success"]),er("icon"),Se("url","")],j9=In(W9),G9=function(t){return[er("type"),t]},q9=[er("type"),er("text"),Ua("disabled",!1),Ua("primary",!1),Ri("name","name",jr(function(){return gn("button-name")}),Zo),Za("icon"),Ua("borderless",!1)],K9=In(q9),X9=[er("type"),er("name"),er("label"),Ua("disabled",!1)],Y9=In(X9),J9=Zi,vL=[er("type"),er("name")],pd=vL.concat([Za("label")]),Z9=pd.concat([Se("columns","auto")]),Q9=In(Z9),eU=F0([er("value"),er("text"),er("icon")]),tU=pd,nU=In(tU),rU=Zo,aU=pd,oU=In(aU),iU=Zo,uU=vL.concat([Pm("tag","textarea"),er("scriptId"),er("scriptUrl"),Os("settings",void 0)]),sU=vL.concat([Pm("tag","textarea"),Uu("init")]),cU=Mm(function(t){return Oo("customeditor.old",qs(sU),t).orThunk(function(){return Oo("customeditor.new",qs(uU),t)})}),lU=Zo,fU=pd,vU=In(fU),dU=_k(),mU=function(t){return[er("type"),qf("columns"),t]},gU=[er("type"),er("html"),gc("presets","presentation",["presentation","document"])],hU=In(gU),pU=pd.concat([Ua("sandboxed",!0)]),bU=In(pU),yU=Zo,wU=pd.concat([Es("currentState",In([rt("blob"),er("url")]))]),CU=In(wU),SU=pd.concat([Za("inputMode"),Za("placeholder"),Ua("maximized",!1),Ua("disabled",!1)]),xU=In(SU),TU=Zo,kU=function(t){return[er("type"),er("label"),t]},EU=[er("text"),er("value")],OU=[er("text"),Mu("items",Rk("items",function(){return V6}))],V6=Ch([In(EU),In(OU)]),AU=pd.concat([Mu("items",V6),Ua("disabled",!1)]),DU=In(AU),_U=Zo,RU=pd.concat([el("items",[er("text"),er("value")]),kl("size",1),Ua("disabled",!1)]),MU=In(RU),BU=Zo,PU=pd.concat([Ua("constrain",!0),Ua("disabled",!1)]),NU=In(PU),U6=In([er("width"),er("height")]),IU=[er("type"),Mu("header",Zo),Mu("cells",Gf(Zo))],$U=In(IU),zU=pd.concat([Za("placeholder"),Ua("maximized",!1),Ua("disabled",!1)]),FU=In(zU),LU=Zo,HU=pd.concat([gc("filetype","file",["image","media","file"]),Se("disabled",!1)]),VU=In(HU),UU=In([er("value"),Se("meta",{})]),dL=function(t){return Ri("items","items",ur(),Gf(Mm(function(r){return Oo("Checking item of "+t,mL,r).fold(function(o){return pr.error(Ov(o))},function(o){return pr.value(o)})})))},mL=mC(function(){return u1("type",{alertbanner:j9,bar:In(G9(dL("bar"))),button:K9,checkbox:Y9,colorinput:nU,colorpicker:oU,dropzone:vU,grid:In(mU(dL("grid"))),iframe:bU,input:xU,listbox:DU,selectbox:MU,sizeinput:NU,textarea:FU,urlinput:VU,customeditor:cU,htmlpanel:hU,imagetools:CU,collection:Q9,label:In(kU(dL("label"))),table:$U,panel:W6})}),WU=[er("type"),Se("classes",[]),Mu("items",mL)],W6=In(WU),jU=[Ri("name","name",jr(function(){return gn("tab-name")}),Zo),er("title"),Mu("items",mL)],GU=[er("type"),el("tabs",jU)],qU=In(GU),KU=H6,XU=U9,YU=In([er("title"),Es("body",u1("type",{panel:W6,tabpanel:qU})),Pm("size","normal"),Mu("buttons",XU),Se("initialData",{}),Qa("onAction",ge),Qa("onChange",ge),Qa("onSubmit",ge),Qa("onClose",ge),Qa("onCancel",ge),Se("onTabChange",ge)]),JU=function(t){return Oo("dialog",YU,t)},ZU=In(Pn([mc("type",["cancel","custom"])],KU,!0)),QU=In([er("title"),er("url"),Sd("height"),Sd("width"),Ks("buttons",ZU),Qa("onAction",ge),Qa("onCancel",ge),Qa("onClose",ge),Qa("onMessage",ge)]),eW=function(t){return Oo("dialog",QU,t)},gL=function(t){return Qt(t)?[t].concat(Yr(Ia(t),gL)):Sn(t)?Yr(t,gL):[]},tW=function(t){return dt(t.type)&&dt(t.name)},nW={checkbox:J9,colorinput:rU,colorpicker:iU,dropzone:dU,input:TU,iframe:yU,sizeinput:U6,selectbox:BU,listbox:_U,size:U6,textarea:LU,urlinput:UU,customeditor:lU,collection:eU,togglemenuitem:H9},rW=function(t){return R.from(nW[t.type])},aW=function(t){return Nt(gL(t),tW)},oW=function(t){var r=aW(t),o=Yr(r,function(s){return rW(s).fold(function(){return[]},function(v){return[Es(s.name,v)]})});return In(o)},j6=function(t){var r=Qc(JU(t)),o=oW(t),s=t.initialData;return{internalDialog:r,dataValidator:o,initialData:s}},h3={open:function(t,r){var o=j6(r);return t(o.internalDialog,o.initialData,o.dataValidator)},openUrl:function(t,r){var o=Qc(eW(r));return t(o)},redial:function(t){return j6(t)}},G6=function(t){var r=[],o={};return na(t,function(s,v){s.fold(function(){r.push(v)},function(m){o[v]=m})}),r.length>0?pr.error(r):pr.value(o)},iW=function(t,r){var o=Sa(y0.sketch(function(s){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:gt(t.items,function(v){return JT(s,v,r)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:Bt([Gn.config({mode:"acyclic",useTabstopAt:Kt(H2)}),pv.memento(o),hm.memento(o,{postprocess:function(s){return G6(s).fold(function(v){return console.error(v),{}},Ne)}})])}},uW=function(t,r){return{uid:t.uid,dom:t.dom,components:t.components,events:n0(t.action),behaviours:tu(t.tabButtonBehaviours,[tr.config({}),Gn.config({mode:"execution",useSpace:!0,useEnter:!0}),Ut.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}},sW=Ec({name:"TabButton",configFields:[Se("uid",void 0),rt("value"),Ri("dom","dom",du(function(){return{attributes:{role:"tab",id:gn("aria"),"aria-selected":"false"}}}),Zc()),fa("action"),Se("domModification",{}),$i("tabButtonBehaviours",[tr,Gn,Ut]),rt("view")],factory:uW}),cW=Z([rt("tabs"),rt("dom"),Se("clickToDismiss",!1),$i("tabbarBehaviours",[ha,Gn]),$d(["tabClass","selectedClass"])]),lW=yf({factory:sW,name:"tabs",unit:"tab",overrides:function(t){var r=function(s,v){ha.dehighlight(s,v),Vn(s,gu(),{tabbar:s,button:v})},o=function(s,v){ha.highlight(s,v),Vn(s,xC(),{tabbar:s,button:v})};return{action:function(s){var v=s.getSystem().getByUid(t.uid).getOrDie(),m=ha.isHighlighted(v,s),p=function(){return m&&t.clickToDismiss?r:m?ge:o}();p(v,s)},domModification:{classes:[t.markers.tabClass]}}}}),fW=Z([lW]),vW=function(t,r,o,s){return{uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:tu(t.tabbarBehaviours,[ha.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(v,m){hr(m.element,"aria-selected","true")},onDehighlight:function(v,m){hr(m.element,"aria-selected","false")}}),Gn.config({mode:"flow",getInitial:function(v){return ha.getHighlighted(v).map(function(m){return m.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}},q6=hs({name:"Tabbar",configFields:cW(),partFields:fW(),factory:vW}),dW=function(t,r){return{uid:t.uid,dom:t.dom,behaviours:tu(t.tabviewBehaviours,[sr.config({})]),domModification:{attributes:{role:"tabpanel"}}}},mW=Ec({name:"Tabview",configFields:[$i("tabviewBehaviours",[sr])],factory:dW}),gW=Z([Se("selectFirst",!0),va("onChangeTab"),va("onDismissTab"),Se("tabs",[]),$i("tabSectionBehaviours",[])]),hW=Su({factory:q6,schema:[rt("dom"),Ql("markers",[rt("tabClass"),rt("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),pW=Su({factory:mW,name:"tabview"}),bW=Z([hW,pW]),yW=function(t,r,o,s){var v=function(p){var S=Ut.getValue(p);Fa(p,t,"tabview").each(function(x){var E=lr(t.tabs,function(M){return M.value===S});E.each(function(M){var P=M.view();Eo(p.element,"id").each(function(H){hr(x.element,"aria-labelledby",H)}),sr.set(x,P),t.onChangeTab(x,p,P)})})},m=function(p,S){Fa(p,t,"tabbar").each(function(x){S(x).each(yc)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:kg(t.tabSectionBehaviours),events:Wa(bn([t.selectFirst?[dr(function(p,S){m(p,ha.getFirst)})]:[],[ut(xC(),function(p,S){var x=S.event.button;v(x)}),ut(gu(),function(p,S){var x=S.event.button;t.onDismissTab(p,x)})]])),apis:{getViewItems:function(p){return Fa(p,t,"tabview").map(function(S){return sr.contents(S)}).getOr([])},showTab:function(p,S){var x=function(E){var M=ha.getCandidates(E),P=lr(M,function(H){return Ut.getValue(H)===S});return P.filter(function(H){return!ha.isHighlighted(E,H)})};m(p,x)}}}},wk=hs({name:"TabSection",configFields:gW(),partFields:bW(),factory:yW,apis:{getViewItems:function(t,r){return t.getViewItems(r)},showTab:function(t,r,o){t.showTab(r,o)}}}),wW=function(t,r,o){return gt(t,function(s,v){sr.set(o,t[v].view());var m=r.dom.getBoundingClientRect();return sr.set(o,[]),m.height})},CW=function(t){return io(fi(t,function(r,o){return r>o?-1:r<o?1:0}))},SW=function(t,r,o){var s=je(t).dom,v=R1(t,".tox-dialog-wrap").getOr(t),m=Po(v,"position")==="fixed",p;m?p=Math.max(s.clientHeight,window.innerHeight):p=Math.max(s.offsetHeight,s.scrollHeight);var S=pi(r),x=r.dom.offsetLeft>=o.dom.offsetLeft+Au(o),E=x?Math.max(pi(o),S):S,M=parseInt(Po(t,"margin-top"),10)||0,P=parseInt(Po(t,"margin-bottom"),10)||0,H=pi(t)+M+P,W=H-E;return p-W},xW=function(t,r){io(t).each(function(o){return wk.showTab(r,o.value)})},K6=function(t,r){Zn(t,"height",r+"px"),St().browser.isIE()?la(t,"flex-basis"):Zn(t,"flex-basis",r+"px")},RB=function(t,r,o){R1(t,'[role="dialog"]').each(function(s){Bi(s,'[role="tablist"]').each(function(v){o.get().map(function(m){return Zn(r,"height","0"),Zn(r,"flex-basis","0"),Math.min(m,SW(s,r,v))}).each(function(m){K6(r,m)})})})},hL=function(t){return Bi(t,'[role="tabpanel"]')},TW=function(t){var r=function(){var s=Wo(),v=[dr(function(p){var S=p.element;hL(S).each(function(x){Zn(x,"visibility","hidden"),p.getSystem().getByDom(x).toOptional().each(function(E){var M=wW(t,x,E),P=CW(M);P.fold(s.clear,s.set)}),RB(S,x,s),la(x,"visibility"),xW(t,p),Kg.requestAnimationFrame(function(){RB(S,x,s)})})}),ut(bc(),function(p){var S=p.element;hL(S).each(function(x){RB(S,x,s)})}),ut(F4,function(p,S){var x=p.element;hL(x).each(function(E){var M=gs(Fn(E));Zn(E,"visibility","hidden");var P=oi(E,"height").map(function(K){return parseInt(K,10)});la(E,"height"),la(E,"flex-basis");var H=E.dom.getBoundingClientRect().height,W=P.forall(function(K){return H>K});W?(s.set(H),RB(x,E,s)):P.each(function(K){K6(E,K)}),la(E,"visibility"),M.each(_l)})})],m=!1;return{extraEvents:v,selectFirst:m}}(),o=function(){var s=[],v=!0;return{extraEvents:s,selectFirst:v}}();return{smartTabHeight:r,naiveTabHeight:o}},X6="send-data-to-section",Y6="send-data-to-view",kW=function(t,r){var o=Hn({}),s=function(x){var E=Ut.getValue(x),M=G6(E).getOr({}),P=o.get(),H=Xe(P,M);o.set(H)},v=function(x){var E=o.get();Ut.setValue(x,E)},m=Hn(null),p=gt(t.tabs,function(x){return{value:x.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:r.shared.providers.translate(x.title)},view:function(){return[y0.sketch(function(E){return{dom:{tag:"div",classes:["tox-form"]},components:gt(x.items,function(M){return JT(E,M,r)}),formBehaviours:Bt([Gn.config({mode:"acyclic",useTabstopAt:Kt(H2)}),mr("TabView.form.events",[dr(v),wc(s)]),Wu.config({channels:Xf([{key:X6,value:{onReceive:s}},{key:Y6,value:{onReceive:v}}])})])}})]}}}),S=TW(p).smartTabHeight;return wk.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(x,E,M){var P=Ut.getValue(E);Vn(x,z4,{name:P,oldName:m.get()}),m.set(P)},tabs:p,components:[wk.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[q6.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Bt([si.config({})])}),wk.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:S.selectFirst,tabSectionBehaviours:Bt([mr("tabpanel",S.extraEvents),Gn.config({mode:"acyclic"}),Fr.config({find:function(x){return io(wk.getViewItems(x))}}),Ut.config({store:{mode:"manual",getValue:function(x){return x.getSystem().broadcastOn([X6],{}),o.get()},setValue:function(x,E){o.set(E),x.getSystem().broadcastOn([Y6],{})}}})])})},pL=gn("update-dialog"),J6=gn("update-title"),Z6=gn("update-body"),Q6=gn("update-footer"),e8=gn("body-send-message"),t8=function(t,r,o,s){var v=function(S){switch(S.body.type){case"tabpanel":return[kW(S.body,o)];default:return[iW(S.body,o)]}},m=function(S,x){return R.some({isTabPanel:function(){return x.body.type==="tabpanel"}})},p={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:ve(ve({},r.map(function(S){return{id:S}}).getOr({})),s?p:{})},components:[],behaviours:Bt([pv.childAt(0),Ul.config({channel:Z6,updateState:m,renderComponents:v,initialData:t})])}},EW=function(t,r,o,s){return t8(t,R.some(r),o,s)},OW=function(t,r){var o=t8(t,R.none(),r,!1);return ku.parts.body(o)},AW=function(t){var r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[yA({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Bt([si.config({}),tr.config({})])})]}],behaviours:Bt([Gn.config({mode:"acyclic",useTabstopAt:Kt(H2)})])};return ku.parts.body(r)};function nC(t){return nC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nC(t)}function bL(t,r){return bL=Object.setPrototypeOf||function(s,v){return s.__proto__=v,s},bL(t,r)}function DW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function MB(t,r,o){return DW()?MB=Reflect.construct:MB=function(v,m,p){var S=[null];S.push.apply(S,m);var x=Function.bind.apply(v,S),E=new x;return p&&bL(E,p.prototype),E},MB.apply(null,arguments)}function wm(t){return _W(t)||RW(t)||MW(t)||BW()}function _W(t){if(Array.isArray(t))return yL(t)}function RW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MW(t,r){if(t){if(typeof t=="string")return yL(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return yL(t,r)}}function yL(t,r){(r==null||r>t.length)&&(r=t.length);for(var o=0,s=new Array(r);o<r;o++)s[o]=t[o];return s}function BW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var PW=Object.hasOwnProperty,n8=Object.setPrototypeOf,NW=Object.isFrozen,IW=Object.getPrototypeOf,$W=Object.getOwnPropertyDescriptor,Wl=Object.freeze,lh=Object.seal,zW=Object.create,r8=typeof Reflect<"u"&&Reflect,BB=r8.apply,wL=r8.construct;BB||(BB=function(r,o,s){return r.apply(o,s)}),Wl||(Wl=function(r){return r}),lh||(lh=function(r){return r}),wL||(wL=function(r,o){return MB(r,wm(o))});var FW=Cm(Array.prototype.forEach),a8=Cm(Array.prototype.pop),p3=Cm(Array.prototype.push),PB=Cm(String.prototype.toLowerCase),LW=Cm(String.prototype.match),D0=Cm(String.prototype.replace),HW=Cm(String.prototype.indexOf),VW=Cm(String.prototype.trim),jl=Cm(RegExp.prototype.test),CL=UW(TypeError);function Cm(t){return function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),v=1;v<o;v++)s[v-1]=arguments[v];return BB(t,r,s)}}function UW(t){return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return wL(t,o)}}function to(t,r){n8&&n8(t,null);for(var o=r.length;o--;){var s=r[o];if(typeof s=="string"){var v=PB(s);v!==s&&(NW(r)||(r[o]=v),s=v)}t[s]=!0}return t}function rC(t){var r=zW(null),o;for(o in t)BB(PW,t,[o])&&(r[o]=t[o]);return r}function NB(t,r){for(;t!==null;){var o=$W(t,r);if(o){if(o.get)return Cm(o.get);if(typeof o.value=="function")return Cm(o.value)}t=IW(t)}function s(v){return console.warn("fallback value for",v),null}return s}var o8=Wl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),SL=Wl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xL=Wl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),WW=Wl(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),TL=Wl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),jW=Wl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),i8=Wl(["#text"]),u8=Wl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),kL=Wl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),s8=Wl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),IB=Wl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),GW=lh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qW=lh(/<%[\w\W]*|[\w\W]*%>/gm),KW=lh(/^data-[\-\w.\u00B7-\uFFFF]/),XW=lh(/^aria-[\-\w]+$/),YW=lh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),JW=lh(/^(?:\w+script|data):/i),ZW=lh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QW=lh(/^html$/i),ej=function(){return typeof window>"u"?null:window},tj=function(r,o){if(nC(r)!=="object"||typeof r.createPolicy!="function")return null;var s=null,v="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(v)&&(s=o.currentScript.getAttribute(v));var m="dompurify"+(s?"#"+s:"");try{return r.createPolicy(m,{createHTML:function(S){return S}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}};function c8(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ej(),r=function(He){return c8(He)};if(r.version="2.3.8",r.removed=[],!t||!t.document||t.document.nodeType!==9)return r.isSupported=!1,r;var o=t.document,s=t.document,v=t.DocumentFragment,m=t.HTMLTemplateElement,p=t.Node,S=t.Element,x=t.NodeFilter,E=t.NamedNodeMap,M=E===void 0?t.NamedNodeMap||t.MozNamedAttrMap:E,P=t.HTMLFormElement,H=t.DOMParser,W=t.trustedTypes,K=S.prototype,ue=NB(K,"cloneNode"),be=NB(K,"nextSibling"),ae=NB(K,"childNodes"),we=NB(K,"parentNode");if(typeof m=="function"){var Le=s.createElement("template");Le.content&&Le.content.ownerDocument&&(s=Le.content.ownerDocument)}var Fe=tj(W,o),ye=Fe?Fe.createHTML(""):"",Be=s,Qe=Be.implementation,Wt=Be.createNodeIterator,it=Be.createDocumentFragment,Jt=Be.getElementsByTagName,ct=o.importNode,Je={};try{Je=rC(s).documentMode?s.documentMode:{}}catch{}var At={};r.isSupported=typeof we=="function"&&Qe&&typeof Qe.createHTMLDocument<"u"&&Je!==9;var hn=GW,ot=qW,cn=KW,On=XW,Wr=JW,xa=ZW,oo=YW,Fo=null,qc=to({},[].concat(wm(o8),wm(SL),wm(xL),wm(TL),wm(i8))),ws=null,Ck=to({},[].concat(wm(u8),wm(kL),wm(s8),wm(IB))),su=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Kp=null,Xp=null,aC=!0,Yp=!0,oC=!1,ic=!1,xv=!1,zs=!1,iC=!1,fh=!1,_0=!1,cu=!1,Sm=!0,vh=!0,Jp=!1,Tv={},dh=null,rn=to({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),yr=null,ka=to({},["audio","video","img","source","image","track"]),_o=null,uc=to({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Fs="http://www.w3.org/1998/Math/MathML",Kc="http://www.w3.org/2000/svg",Gl="http://www.w3.org/1999/xhtml",R0=Gl,uC=!1,M0,_L=["application/xhtml+xml","text/html"],RL="text/html",Zp,B0=null,Dj=s.createElement("form"),_8=function(He){return He instanceof RegExp||He instanceof Function},ML=function(He){B0&&B0===He||((!He||nC(He)!=="object")&&(He={}),He=rC(He),Fo="ALLOWED_TAGS"in He?to({},He.ALLOWED_TAGS):qc,ws="ALLOWED_ATTR"in He?to({},He.ALLOWED_ATTR):Ck,_o="ADD_URI_SAFE_ATTR"in He?to(rC(uc),He.ADD_URI_SAFE_ATTR):uc,yr="ADD_DATA_URI_TAGS"in He?to(rC(ka),He.ADD_DATA_URI_TAGS):ka,dh="FORBID_CONTENTS"in He?to({},He.FORBID_CONTENTS):rn,Kp="FORBID_TAGS"in He?to({},He.FORBID_TAGS):{},Xp="FORBID_ATTR"in He?to({},He.FORBID_ATTR):{},Tv="USE_PROFILES"in He?He.USE_PROFILES:!1,aC=He.ALLOW_ARIA_ATTR!==!1,Yp=He.ALLOW_DATA_ATTR!==!1,oC=He.ALLOW_UNKNOWN_PROTOCOLS||!1,ic=He.SAFE_FOR_TEMPLATES||!1,xv=He.WHOLE_DOCUMENT||!1,fh=He.RETURN_DOM||!1,_0=He.RETURN_DOM_FRAGMENT||!1,cu=He.RETURN_TRUSTED_TYPE||!1,iC=He.FORCE_BODY||!1,Sm=He.SANITIZE_DOM!==!1,vh=He.KEEP_CONTENT!==!1,Jp=He.IN_PLACE||!1,oo=He.ALLOWED_URI_REGEXP||oo,R0=He.NAMESPACE||Gl,He.CUSTOM_ELEMENT_HANDLING&&_8(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(su.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&_8(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(su.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(su.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),M0=_L.indexOf(He.PARSER_MEDIA_TYPE)===-1?M0=RL:M0=He.PARSER_MEDIA_TYPE,Zp=M0==="application/xhtml+xml"?function(Cn){return Cn}:PB,ic&&(Yp=!1),_0&&(fh=!0),Tv&&(Fo=to({},wm(i8)),ws=[],Tv.html===!0&&(to(Fo,o8),to(ws,u8)),Tv.svg===!0&&(to(Fo,SL),to(ws,kL),to(ws,IB)),Tv.svgFilters===!0&&(to(Fo,xL),to(ws,kL),to(ws,IB)),Tv.mathMl===!0&&(to(Fo,TL),to(ws,s8),to(ws,IB))),He.ADD_TAGS&&(Fo===qc&&(Fo=rC(Fo)),to(Fo,He.ADD_TAGS)),He.ADD_ATTR&&(ws===Ck&&(ws=rC(ws)),to(ws,He.ADD_ATTR)),He.ADD_URI_SAFE_ATTR&&to(_o,He.ADD_URI_SAFE_ATTR),He.FORBID_CONTENTS&&(dh===rn&&(dh=rC(dh)),to(dh,He.FORBID_CONTENTS)),vh&&(Fo["#text"]=!0),xv&&to(Fo,["html","head","body"]),Fo.table&&(to(Fo,["tbody"]),delete Kp.tbody),Wl&&Wl(He),B0=He)},R8=to({},["mi","mo","mn","ms","mtext"]),M8=to({},["foreignobject","desc","title","annotation-xml"]),_j=to({},["title","style","font","a","script"]),$B=to({},SL);to($B,xL),to($B,WW);var BL=to({},TL);to(BL,jW);var Rj=function(He){var Cn=we(He);(!Cn||!Cn.tagName)&&(Cn={namespaceURI:Gl,tagName:"template"});var gr=PB(He.tagName),Si=PB(Cn.tagName);return He.namespaceURI===Kc?Cn.namespaceURI===Gl?gr==="svg":Cn.namespaceURI===Fs?gr==="svg"&&(Si==="annotation-xml"||R8[Si]):Boolean($B[gr]):He.namespaceURI===Fs?Cn.namespaceURI===Gl?gr==="math":Cn.namespaceURI===Kc?gr==="math"&&M8[Si]:Boolean(BL[gr]):He.namespaceURI===Gl?Cn.namespaceURI===Kc&&!M8[Si]||Cn.namespaceURI===Fs&&!R8[Si]?!1:!BL[gr]&&(_j[gr]||!$B[gr]):!1},Qp=function(He){p3(r.removed,{element:He});try{He.parentNode.removeChild(He)}catch{try{He.outerHTML=ye}catch{He.remove()}}},B8=function(He,Cn){try{p3(r.removed,{attribute:Cn.getAttributeNode(He),from:Cn})}catch{p3(r.removed,{attribute:null,from:Cn})}if(Cn.removeAttribute(He),He==="is"&&!ws[He])if(fh||_0)try{Qp(Cn)}catch{}else try{Cn.setAttribute(He,"")}catch{}},P8=function(He){var Cn,gr;if(iC)He="<remove></remove>"+He;else{var Si=LW(He,/^[\r\n\t ]+/);gr=Si&&Si[0]}M0==="application/xhtml+xml"&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");var Nf=Fe?Fe.createHTML(He):He;if(R0===Gl)try{Cn=new H().parseFromString(Nf,M0)}catch{}if(!Cn||!Cn.documentElement){Cn=Qe.createDocument(R0,"template",null);try{Cn.documentElement.innerHTML=uC?"":Nf}catch{}}var hl=Cn.body||Cn.documentElement;return He&&gr&&hl.insertBefore(s.createTextNode(gr),hl.childNodes[0]||null),R0===Gl?Jt.call(Cn,xv?"html":"body")[0]:xv?Cn.documentElement:hl},N8=function(He){return Wt.call(He.ownerDocument||He,He,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},Mj=function(He){return He instanceof P&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof M)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function")},b3=function(He){return nC(p)==="object"?He instanceof p:He&&nC(He)==="object"&&typeof He.nodeType=="number"&&typeof He.nodeName=="string"},e1=function(He,Cn,gr){At[He]&&FW(At[He],function(Si){Si.call(r,Cn,gr,B0)})},I8=function(He){var Cn;if(e1("beforeSanitizeElements",He,null),Mj(He)||jl(/[\u0080-\uFFFF]/,He.nodeName))return Qp(He),!0;var gr=Zp(He.nodeName);if(e1("uponSanitizeElement",He,{tagName:gr,allowedTags:Fo}),He.hasChildNodes()&&!b3(He.firstElementChild)&&(!b3(He.content)||!b3(He.content.firstElementChild))&&jl(/<[/\w]/g,He.innerHTML)&&jl(/<[/\w]/g,He.textContent)||gr==="select"&&jl(/<template/i,He.innerHTML))return Qp(He),!0;if(!Fo[gr]||Kp[gr]){if(!Kp[gr]&&z8(gr)&&(su.tagNameCheck instanceof RegExp&&jl(su.tagNameCheck,gr)||su.tagNameCheck instanceof Function&&su.tagNameCheck(gr)))return!1;if(vh&&!dh[gr]){var Si=we(He)||He.parentNode,Nf=ae(He)||He.childNodes;if(Nf&&Si)for(var hl=Nf.length,Xc=hl-1;Xc>=0;--Xc)Si.insertBefore(ue(Nf[Xc],!0),be(He))}return Qp(He),!0}return He instanceof S&&!Rj(He)||(gr==="noscript"||gr==="noembed")&&jl(/<\/no(script|embed)/i,He.innerHTML)?(Qp(He),!0):(ic&&He.nodeType===3&&(Cn=He.textContent,Cn=D0(Cn,hn," "),Cn=D0(Cn,ot," "),He.textContent!==Cn&&(p3(r.removed,{element:He.cloneNode()}),He.textContent=Cn)),e1("afterSanitizeElements",He,null),!1)},$8=function(He,Cn,gr){if(Sm&&(Cn==="id"||Cn==="name")&&(gr in s||gr in Dj))return!1;if(!(Yp&&!Xp[Cn]&&jl(cn,Cn))){if(!(aC&&jl(On,Cn))){if(!ws[Cn]||Xp[Cn]){if(!(z8(He)&&(su.tagNameCheck instanceof RegExp&&jl(su.tagNameCheck,He)||su.tagNameCheck instanceof Function&&su.tagNameCheck(He))&&(su.attributeNameCheck instanceof RegExp&&jl(su.attributeNameCheck,Cn)||su.attributeNameCheck instanceof Function&&su.attributeNameCheck(Cn))||Cn==="is"&&su.allowCustomizedBuiltInElements&&(su.tagNameCheck instanceof RegExp&&jl(su.tagNameCheck,gr)||su.tagNameCheck instanceof Function&&su.tagNameCheck(gr))))return!1}else if(!_o[Cn]){if(!jl(oo,D0(gr,xa,""))){if(!((Cn==="src"||Cn==="xlink:href"||Cn==="href")&&He!=="script"&&HW(gr,"data:")===0&&yr[He])){if(!(oC&&!jl(Wr,D0(gr,xa,"")))){if(gr)return!1}}}}}}return!0},z8=function(He){return He.indexOf("-")>0},F8=function(He){var Cn,gr,Si,Nf;e1("beforeSanitizeAttributes",He,null);var hl=He.attributes;if(hl){var Xc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ws};for(Nf=hl.length;Nf--;){Cn=hl[Nf];var zB=Cn,ql=zB.name,L8=zB.namespaceURI;if(gr=ql==="value"?Cn.value:VW(Cn.value),Si=Zp(ql),Xc.attrName=Si,Xc.attrValue=gr,Xc.keepAttr=!0,Xc.forceKeepAttr=void 0,e1("uponSanitizeAttribute",He,Xc),gr=Xc.attrValue,!Xc.forceKeepAttr&&(B8(ql,He),!!Xc.keepAttr)){if(jl(/\/>/i,gr)){B8(ql,He);continue}ic&&(gr=D0(gr,hn," "),gr=D0(gr,ot," "));var Pj=Zp(He.nodeName);if($8(Pj,Si,gr))try{L8?He.setAttributeNS(L8,ql,gr):He.setAttribute(ql,gr),a8(r.removed)}catch{}}}e1("afterSanitizeAttributes",He,null)}},Bj=function Br(He){var Cn,gr=N8(He);for(e1("beforeSanitizeShadowDOM",He,null);Cn=gr.nextNode();)e1("uponSanitizeShadowNode",Cn,null),!I8(Cn)&&(Cn.content instanceof v&&Br(Cn.content),F8(Cn));e1("afterSanitizeShadowDOM",He,null)};return r.sanitize=function(Br,He){var Cn,gr,Si,Nf,hl;if(uC=!Br,uC&&(Br="<!-->"),typeof Br!="string"&&!b3(Br)){if(typeof Br.toString!="function")throw CL("toString is not a function");if(Br=Br.toString(),typeof Br!="string")throw CL("dirty is not a string, aborting")}if(!r.isSupported){if(nC(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Br=="string")return t.toStaticHTML(Br);if(b3(Br))return t.toStaticHTML(Br.outerHTML)}return Br}if(zs||ML(He),r.removed=[],typeof Br=="string"&&(Jp=!1),Jp){if(Br.nodeName){var Xc=Zp(Br.nodeName);if(!Fo[Xc]||Kp[Xc])throw CL("root node is forbidden and cannot be sanitized in-place")}}else if(Br instanceof p)Cn=P8("<!---->"),gr=Cn.ownerDocument.importNode(Br,!0),gr.nodeType===1&&gr.nodeName==="BODY"||gr.nodeName==="HTML"?Cn=gr:Cn.appendChild(gr);else{if(!fh&&!ic&&!xv&&Br.indexOf("<")===-1)return Fe&&cu?Fe.createHTML(Br):Br;if(Cn=P8(Br),!Cn)return fh?null:cu?ye:""}Cn&&iC&&Qp(Cn.firstChild);for(var zB=N8(Jp?Br:Cn);Si=zB.nextNode();)Si.nodeType===3&&Si===Nf||I8(Si)||(Si.content instanceof v&&Bj(Si.content),F8(Si),Nf=Si);if(Nf=null,Jp)return Br;if(fh){if(_0)for(hl=it.call(Cn.ownerDocument);Cn.firstChild;)hl.appendChild(Cn.firstChild);else hl=Cn;return ws.shadowroot&&(hl=ct.call(o,hl,!0)),hl}var ql=xv?Cn.outerHTML:Cn.innerHTML;return xv&&Fo["!doctype"]&&Cn.ownerDocument&&Cn.ownerDocument.doctype&&Cn.ownerDocument.doctype.name&&jl(QW,Cn.ownerDocument.doctype.name)&&(ql="<!DOCTYPE "+Cn.ownerDocument.doctype.name+`>
`+ql),ic&&(ql=D0(ql,hn," "),ql=D0(ql,ot," ")),Fe&&cu?Fe.createHTML(ql):ql},r.setConfig=function(Br){ML(Br),zs=!0},r.clearConfig=function(){B0=null,zs=!1},r.isValidAttribute=function(Br,He,Cn){B0||ML({});var gr=Zp(Br),Si=Zp(He);return $8(gr,Si,Cn)},r.addHook=function(Br,He){typeof He=="function"&&(At[Br]=At[Br]||[],p3(At[Br],He))},r.removeHook=function(Br){if(At[Br])return a8(At[Br])},r.removeHooks=function(Br){At[Br]&&(At[Br]=[])},r.removeAllHooks=function(){At={}},r}var nj=c8(),rj=function(t){return nj().sanitize(t)},aj=aT.deviceType.isTouch(),l8=function(t,r){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}},f8=function(t,r){return ku.parts.close(tc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:Bt([si.config({})])}))},v8=function(){return ku.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},d8=function(t,r){return ku.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Pt("<p>"+rj(r.translate(t))+"</p>")}]}]})},m8=function(t){return ku.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},g8=function(t,r){return[ps.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),ps.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})]},EL=function(t){var r,o="tox-dialog",s=o+"-wrap",v=s+"__backdrop",m=o+"__disable-scroll";return ku.sketch({lazySink:t.lazySink,onEscape:function(p){return t.onEscape(p),R.some(!0)},useTabstopAt:function(p){return!H2(p)},dom:{tag:"div",classes:[o].concat(t.extraClasses),styles:ve({position:"relative"},t.extraStyles)},components:Pn([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:Pt('<div class="'+s+'"></div>'),components:[{dom:{tag:"div",classes:aj?[v,v+"--opaque"]:[v]}}]}},dragBlockClass:s,modalBehaviours:Bt(Pn([tr.config({}),mr("dialog-events",t.dialogEvents.concat([ui(Ic(),function(p,S){Gn.focusIn(p)})])),mr("scroll-lock",[dr(function(){Mi(Ca(),m)}),wc(function(){yi(Ca(),m)})])],t.extraBehaviours,!0)),eventOrder:ve((r={},r[pc()]=["dialog-events"],r[Ys()]=["scroll-lock","dialog-events","alloy.base.behaviour"],r[Lm()]=["alloy.base.behaviour","dialog-events","scroll-lock"],r),t.eventOrder)})},h8=function(t){return tc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[dv("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(r){oa(r,Op)}})},p8=function(t,r,o){var s=function(v){return[pu(o.translate(v.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:ve({},r.map(function(v){return{id:v}}).getOr({}))},components:s(t),behaviours:Bt([Ul.config({channel:J6,renderComponents:s})])}},b8=function(){return{dom:Pt('<div class="tox-dialog__draghandle"></div>')}},oj=function(t,r,o){return ps.sketch({dom:Pt('<div class="tox-dialog__header"></div>'),components:[p8(t,R.some(r),o),b8(),h8(o)],containerBehaviours:Bt([eC.config({mode:"mouse",blockerClass:"blocker",getTarget:function(s){return Fc(s,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},ij=function(t,r){var o=ku.parts.title(p8(t,R.none(),r)),s=ku.parts.draghandle(b8()),v=ku.parts.close(h8(r)),m=[o].concat(t.draggable?[s]:[]).concat([v]);return ps.sketch({dom:Pt('<div class="tox-dialog__header"></div>'),components:m})},y8=function(t,r){return ij({title:r.shared.providers.translate(t),draggable:r.dialog.isDraggableModal()},r.shared.providers)},w8=function(t,r,o){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":o.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:r,components:[{dom:Pt('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},C8=function(t,r,o){return{onClose:function(){return o.closeWindow()},onBlock:function(s){ku.setBusy(t(),function(v,m){return w8(s.message,m,r)})},onUnblock:function(){ku.setIdle(t())}}},S8=function(t,r,o,s){var v,m=function(p,S){return R.some(S)};return fo(EL(ve(ve({},t),{lazySink:s.shared.getSink,extraBehaviours:Pn([Ul.config({channel:pL,updateState:m,initialData:r}),hm.memory({})],t.extraBehaviours,!0),onEscape:function(p){oa(p,Op)},dialogEvents:o,eventOrder:(v={},v[$c()]=[Ul.name(),Wu.name()],v[Ys()]=["scroll-lock",Ul.name(),"messages","dialog-events","alloy.base.behaviour"],v[Lm()]=["alloy.base.behaviour","dialog-events","messages",Ul.name(),"scroll-lock"],v)})))},x8=function(t){var r=function(o){var s=gt(o.items,function(v){var m=Hn(!1);return ve(ve({},v),{storage:m})});return ve(ve({},o),{items:s})};return gt(t,function(o){return o.type==="menu"?r(o):o})},T8=function(t){return $n(t,function(r,o){if(o.type==="menu"){var s=o;return $n(s.items,function(v,m){return v[m.name]=m.storage,v},r)}return r},{})},k8=function(t,r){return[Bv(Ic(),OR),t(k2,function(o,s){r.onClose(),s.onClose()}),t(Op,function(o,s,v,m){s.onCancel(o),oa(m,k2)}),ut($4,function(o,s){return r.onUnblock()}),ut(dd,function(o,s){return r.onBlock(s.event)})]},uj=function(t,r){var o=function(v,m){return ut(v,function(p,S){s(p,function(x,E){m(t(),x,S.event,p)})})},s=function(v,m){Ul.getState(v).get().each(function(p){m(p,v)})};return Pn(Pn([],k8(o,r),!0),[o(mv,function(v,m,p){m.onAction(v,{name:p.name})})],!1)},sj=function(t,r,o){var s=function(m,p){return ut(m,function(S,x){v(S,function(E,M){p(t(),E,x.event,S)})})},v=function(m,p){Ul.getState(m).get().each(function(S){p(S.internalDialog,m)})};return Pn(Pn([],k8(s,r),!0),[s(jc,function(m,p){return p.onSubmit(m)}),s(dl,function(m,p,S){p.onChange(m,{name:S.name})}),s(mv,function(m,p,S,x){var E=function(){return Gn.focusIn(x)},M=function(W){return t1(W,"disabled")||Eo(W,"aria-disabled").exists(function(K){return K==="true"})},P=Fn(x.element),H=gs(P);p.onAction(m,{name:S.name,value:S.value}),gs(P).fold(E,function(W){M(W)||H.exists(function(K){return Ou(W,K)&&M(K)})?E():o().toOptional().filter(function(K){return!Ou(K.element,W)}).each(E)})}),s(z4,function(m,p,S){p.onTabChange(m,{newTabName:S.name,oldTabName:S.oldName})}),wc(function(m){var p=t();Ut.setValue(m,p.getData())})],!1)},OL={initUrlDialog:uj,initDialog:sj},cj=function(t,r){return UT(t,t.type,r)},lj=function(t,r,o){return lr(r,function(s){return s.name===o}).bind(function(s){return s.memento.getOpt(t)})},fj=function(t,r){var o=r.map(function(S){return S.footerButtons}).getOr([]),s=Er(o,function(S){return S.align==="start"}),v=function(S,x){return ps.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+S]},components:gt(x,function(E){return E.memento.asSpec()})})},m=v("start",s.pass),p=v("end",s.fail);return[m,p]},E8=function(t,r){var o=function(s,v){var m=gt(v.buttons,function(S){var x=Sa(cj(S,r));return{name:S.name,align:S.align,memento:x}}),p=function(S,x){return lj(S,m,x)};return R.some({lookupByName:p,footerButtons:m})};return{dom:Pt('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Bt([Ul.config({channel:Q6,initialData:t,updateState:o,renderComponents:fj})])}},vj=function(t,r){return E8(t,r)},O8=function(t,r){return ku.parts.footer(E8(t,r))},AL=function(t,r){var o=t.getRoot();if(o.getSystem().isConnected()){var s=Fr.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return y0.getField(s,r).fold(function(){var v=t.getFooter(),m=Ul.getState(v);return m.get().bind(function(p){return p.lookupByName(s,r)})},function(v){return R.some(v)})}else return R.none()},dj=function(t,r){var o=t.getRoot();return Ul.getState(o).get().map(function(s){return Qc(Oo("data",s.dataValidator,r))}).getOr(r)},A8=function(t,r,o){var s=function(ue){var be=t.getRoot();be.getSystem().isConnected()&&ue(be)},v=function(){var ue=t.getRoot(),be=ue.getSystem().isConnected()?t.getFormWrapper():ue,ae=Ut.getValue(be),we=Pr(o,function(Le){return Le.get()});return ve(ve({},ae),we)},m=function(ue){s(function(be){var ae=K.getData(),we=ve(ve({},ae),ue),Le=dj(t,we),Fe=t.getFormWrapper();Ut.setValue(Fe,Le),na(o,function(ye,Be){Ar(we,Be)&&ye.set(we[Be])})})},p=function(ue){AL(t,ue).each(Ln.disable)},S=function(ue){AL(t,ue).each(Ln.enable)},x=function(ue){AL(t,ue).each(tr.focus)},E=function(ue){if(!dt(ue))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(function(be){Vn(be,dd,{message:ue})})},M=function(){s(function(ue){oa(ue,$4)})},P=function(ue){s(function(be){var ae=t.getBody(),we=Ul.getState(ae);we.get().exists(function(Le){return Le.isTabPanel()})&&Fr.getCurrent(ae).each(function(Le){wk.showTab(Le,ue)})})},H=function(ue){s(function(be){var ae=r(ue);be.getSystem().broadcastOn([pL],ae),be.getSystem().broadcastOn([J6],ae.internalDialog),be.getSystem().broadcastOn([Z6],ae.internalDialog),be.getSystem().broadcastOn([Q6],ae.internalDialog),K.setData(ae.initialData)})},W=function(){s(function(ue){oa(ue,k2)})},K={getData:v,setData:m,disable:p,enable:S,focus:x,block:E,unblock:M,showTab:P,redial:H,close:W};return K},mj=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},gj=function(t,r,o){var s=y8(t.internalDialog.title,o),v=OW({body:t.internalDialog.body},o),m=x8(t.internalDialog.buttons),p=T8(m),S=O8({buttons:m},o),x=OL.initDialog(function(){return W},C8(function(){return P},o.shared.providers,r),o.shared.getSink),E=mj(t.internalDialog.size),M={header:s,body:v,footer:R.some(S),extraClasses:E,extraBehaviours:[],extraStyles:{}},P=S8(M,t,x,o),H=function(){var K=function(){var ue=ku.getBody(P);return Fr.getCurrent(ue).getOr(ue)};return{getRoot:Z(P),getBody:function(){return ku.getBody(P)},getFooter:function(){return ku.getFooter(P)},getFormWrapper:K}}(),W=A8(H,r.redial,p);return{dialog:P,instanceApi:W}},hj=function(t,r,o,s){var v,m,p=gn("dialog-label"),S=gn("dialog-content"),x=function(ae,we){return R.some(we)},E=Sa(oj({title:t.internalDialog.title,draggable:!0},p,o.shared.providers)),M=Sa(EW({body:t.internalDialog.body},S,o,s)),P=x8(t.internalDialog.buttons),H=T8(P),W=Sa(vj({buttons:P},o)),K=OL.initDialog(function(){return be},{onBlock:function(ae){xt.block(ue,function(we,Le){return w8(ae.message,Le,o.shared.providers)})},onUnblock:function(){xt.unblock(ue)},onClose:function(){return r.closeWindow()}},o.shared.getSink),ue=fo({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(v={role:"dialog"},v["aria-labelledby"]=p,v["aria-describedby"]=S,v)},eventOrder:(m={},m[$c()]=[Ul.name(),Wu.name()],m[pc()]=["execute-on-form"],m[Ys()]=["reflecting","execute-on-form"],m),behaviours:Bt([Gn.config({mode:"cyclic",onEscape:function(ae){return oa(ae,k2),R.some(!0)},useTabstopAt:function(ae){return!H2(ae)&&(Kn(ae)!=="button"||co(ae,"disabled")!=="disabled")}}),Ul.config({channel:pL,updateState:x,initialData:t}),tr.config({}),mr("execute-on-form",K.concat([ui(Ic(),function(ae,we){Gn.focusIn(ae)})])),xt.config({getRoot:function(){return R.some(ue)}}),sr.config({}),hm.memory({})]),components:[E.asSpec(),M.asSpec(),W.asSpec()]}),be=A8({getRoot:Z(ue),getFooter:function(){return W.get(ue)},getBody:function(){return M.get(ue)},getFormWrapper:function(){var ae=M.get(ue);return Fr.getCurrent(ae).getOr(ae)}},r.redial,H);return{dialog:ue,instanceApi:be}},DL=tinymce.util.Tools.resolve("tinymce.util.URI"),pj=function(t){var r=function(p){t.getSystem().isConnected()&&p(t)},o=function(p){if(!dt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(function(S){Vn(S,dd,{message:p})})},s=function(){r(function(p){oa(p,$4)})},v=function(){r(function(p){oa(p,k2)})},m=function(p){r(function(S){S.getSystem().broadcastOn([e8],p)})};return{block:o,unblock:s,close:v,sendMessage:m}},bj=["insertContent","setContent","execCommand","close","block","unblock"],D8=function(t){return Qt(t)&&bj.indexOf(t.mceAction)!==-1},yj=function(t){return!D8(t)&&Qt(t)&&Ar(t,"mceAction")},wj=function(t,r,o){switch(o.mceAction){case"insertContent":t.insertContent(o.content);break;case"setContent":t.setContent(o.content);break;case"execCommand":var s=pn(o.ui)?o.ui:!1;t.execCommand(o.cmd,s,o.value);break;case"close":r.close();break;case"block":r.block(o.message);break;case"unblock":r.unblock();break}},Cj=function(t,r,o,s){var v,m=y8(t.title,s),p=AW(t),S=t.buttons.bind(function(we){return we.length===0?R.none():R.some(O8({buttons:we},s))}),x=OL.initUrlDialog(function(){return ae},C8(function(){return be},s.shared.providers,r)),E=ve(ve({},t.height.fold(function(){return{}},function(we){return{height:we+"px","max-height":we+"px"}})),t.width.fold(function(){return{}},function(we){return{width:we+"px","max-width":we+"px"}})),M=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],P=new DL(t.url,{base_uri:new DL(window.location.href)}),H=P.protocol+"://"+P.host+(P.port?":"+P.port:""),W=ng(),K=[mr("messages",[dr(function(){var we=Qo(ie.fromDom(window),"message",function(Le){if(P.isSameOrigin(new DL(Le.raw.origin))){var Fe=Le.raw.data;D8(Fe)?wj(o,ae,Fe):yj(Fe)&&t.onMessage(ae,Fe)}});W.set(we)}),wc(W.clear)]),Wu.config({channels:(v={},v[e8]={onReceive:function(we,Le){Bi(we.element,"iframe").each(function(Fe){var ye=Fe.dom.contentWindow;ye.postMessage(Le,H)})}},v)})],ue={header:m,body:p,footer:S,extraClasses:M,extraBehaviours:K,extraStyles:E},be=S8(ue,t,x,s),ae=pj(be);return{dialog:be,instanceApi:ae}},Sj=function(t){var r=t.backstage.shared,o=function(s,v){var m=function(){ku.hide(E),v()},p=Sa(UT({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:R.none()},"cancel",t.backstage)),S=v8(),x=f8(m,r.providers),E=fo(EL({lazySink:function(){return r.getSink()},header:l8(S,x),body:d8(s,r.providers),footer:R.some(m8(g8([],[p.asSpec()]))),onEscape:m,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ut(Op,m)],eventOrder:{}}));ku.show(E);var M=p.get(E);tr.focus(M)};return{open:o}},xj=function(t){var r=t.backstage.shared,o=function(s,v){var m=function(H){ku.hide(M),v(H)},p=Sa(UT({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:R.none()},"submit",t.backstage)),S=UT({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:R.none()},"cancel",t.backstage),x=v8(),E=f8(function(){return m(!1)},r.providers),M=fo(EL({lazySink:function(){return r.getSink()},header:l8(x,E),body:d8(s,r.providers),footer:R.some(m8(g8([],[S,p.asSpec()]))),onEscape:function(){return m(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ut(Op,function(){return m(!1)}),ut(jc,function(){return m(!0)})],eventOrder:{}}));ku.show(M);var P=p.get(M);tr.focus(P)};return{open:o}},Tj=function(t,r){return Qc(Oo("data",r,t))},kj=function(t){return C2(t,".tox-alert-dialog")||C2(t,".tox-confirm-dialog")},Ej=function(t,r,o){return r&&o?[]:[li.config({contextual:{lazyContext:function(){return R.some(ii(ie.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},Oj=function(t){var r=t.backstage,o=t.editor,s=tT(o),v=Sj(t),m=xj(t),p=function(K,ue,be){return ue!==void 0&&ue.inline==="toolbar"?M(K,r.shared.anchors.inlineDialog(),be,ue.ariaAttrs):ue!==void 0&&ue.inline==="cursor"?M(K,r.shared.anchors.cursor(),be,ue.ariaAttrs):E(K,be)},S=function(K,ue){return x(K,ue)},x=function(K,ue){var be=function(ae){var we=Cj(ae,{closeWindow:function(){ku.hide(we.dialog),ue(we.instanceApi)}},o,r);return ku.show(we.dialog),we.instanceApi};return h3.openUrl(be,K)},E=function(K,ue){var be=function(ae,we,Le){var Fe=we,ye={dataValidator:Le,initialData:Fe,internalDialog:ae},Be=gj(ye,{redial:h3.redial,closeWindow:function(){ku.hide(Be.dialog),ue(Be.instanceApi)}},r);return ku.show(Be.dialog),Be.instanceApi.setData(Fe),Be.instanceApi};return h3.open(be,K)},M=function(K,ue,be,ae){var we=function(Le,Fe,ye){var Be=Tj(Fe,ye),Qe=Wo(),Wt=r.shared.header.isPositionedAtTop(),it={dataValidator:ye,initialData:Be,internalDialog:Le},Jt=function(){return Qe.on(function(At){_a.reposition(At),li.refresh(At)})},ct=hj(it,{redial:h3.redial,closeWindow:function(){Qe.on(_a.hide),o.off("ResizeEditor",Jt),Qe.clear(),be(ct.instanceApi)}},r,ae),Je=fo(_a.sketch(ve(ve({lazySink:r.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},Wt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Bt(Pn([mr("window-manager-inline-events",[ut(rl(),function(At,hn){oa(ct.dialog,Op)})])],Ej(o,s,Wt),!0)),isExtraPart:function(At,hn){return kj(hn)}})));return Qe.set(Je),_a.showWithin(Je,Tc(ct.dialog),{anchor:ue},R.some(Ca())),(!s||!Wt)&&(li.refresh(Je),o.on("ResizeEditor",Jt)),ct.instanceApi.setData(Be),Gn.focusIn(ct.dialog),ct.instanceApi};return h3.open(we,K)},P=function(K,ue){m.open(K,function(be){ue(be)})},H=function(K,ue){v.open(K,function(){ue()})},W=function(K){K.close()};return{open:p,openUrl:S,alert:H,close:W,confirm:P}};function Aj(){ja.add("silver",function(t){var r=P9(t),o=r.uiMothership,s=r.backstage,v=r.renderUI,m=r.getUi;Z5.register(t,s.shared);var p=Oj({editor:t,backstage:s});return{renderUI:v,getWindowManagerImpl:Z(p),getNotificationManagerImpl:function(){return UO(t,{backstage:s},o)},ui:m()}})}Aj()})();(function(){var le=function(ke){var Vt=ke,Kt=function(){return Vt},ht=function($t){Vt=$t};return{get:Kt,set:ht}},nt=Object.hasOwnProperty,ln=function(ke,Vt){return nt.call(ke,Vt)},Gt=tinymce.util.Tools.resolve("tinymce.PluginManager"),dt=tinymce.util.Tools.resolve("tinymce.Env"),Qt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Sn=function(ke){return ke.fire("ResizeEditor")},Mn=function(ke){return ke.getParam("min_height",ke.getElement().offsetHeight,"number")},pn=function(ke){return ke.getParam("max_height",0,"number")},Dr=function(ke){return ke.getParam("autoresize_overflow_padding",1,"number")},Bn=function(ke){return ke.getParam("autoresize_bottom_margin",50,"number")},Ve=function(ke){return ke.getParam("autoresize_on_init",!0,"boolean")},Ft=function(ke){return ke.plugins.fullscreen&&ke.plugins.fullscreen.isFullscreen()},xn=function(ke,Vt,Kt,ht,$t){Qt.setEditorTimeout(ke,function(){Ze(ke,Vt),Kt--?xn(ke,Vt,Kt,ht,$t):$t&&$t()},ht)},ze=function(ke,Vt){var Kt=ke.getBody();Kt&&(Kt.style.overflowY=Vt?"":"hidden",Vt||(Kt.scrollTop=0))},ge=function(ke,Vt,Kt,ht){var $t=parseInt(ke.getStyle(Vt,Kt,ht),10);return isNaN($t)?0:$t},Tt=function(ke){if((ke==null?void 0:ke.type.toLowerCase())==="setcontent"){var Vt=ke;return Vt.selection===!0||Vt.paste===!0}else return!1},Ze=function(ke,Vt,Kt){var ht=ke.dom,$t=ke.getDoc();if($t){if(Ft(ke)){ze(ke,!0);return}var We=$t.documentElement,ja=Bn(ke),ve=Mn(ke),Y=ge(ht,We,"margin-top",!0),Pn=ge(ht,We,"margin-bottom",!0),Ea=We.offsetHeight+Y+Pn+ja;Ea<0&&(Ea=0);var Mt=ke.getContainer().offsetHeight,Oa=ke.getContentAreaContainer().offsetHeight,Vr=Mt-Oa;Ea+Vr>Mn(ke)&&(ve=Ea+Vr);var R=pn(ke);if(R&&ve>R?(ve=R,ze(ke,!0)):ze(ke,!1),ve!==Vt.get()){var Aa=ve-Vt.get();if(ht.setStyle(ke.getContainer(),"height",ve+"px"),Vt.set(ve),Sn(ke),dt.browser.isSafari()&&dt.mac){var wt=ke.getWin();wt.scrollTo(wt.pageXOffset,wt.pageYOffset)}ke.hasFocus()&&Tt(Kt)&&ke.selection.scrollIntoView(),dt.webkit&&Aa<0&&Ze(ke,Vt,Kt)}}},qt=function(ke,Vt){ke.on("init",function(){var Kt=Dr(ke),ht=ke.dom;ht.setStyles(ke.getDoc().documentElement,{height:"auto"}),ht.setStyles(ke.getBody(),{paddingLeft:Kt,paddingRight:Kt,"min-height":0})}),ke.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",function(Kt){Ze(ke,Vt,Kt)}),Ve(ke)&&ke.on("init",function(){xn(ke,Vt,20,100,function(){xn(ke,Vt,5,1e3)})})},Z=function(ke,Vt){ke.addCommand("mceAutoResize",function(){Ze(ke,Vt)})};function Ne(){Gt.add("autoresize",function(ke){if(ln(ke.settings,"resize")||(ke.settings.resize=!1),!ke.inline){var Vt=le(0);Z(ke,Vt),qt(ke,Vt)}})}Ne()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(Mn,pn){Mn.focus(),Mn.undoManager.transact(function(){Mn.setContent(pn)}),Mn.selection.setCursorLocation(),Mn.nodeChanged()},ln=function(Mn){return Mn.getContent({source_view:!0})},Gt=function(Mn){var pn=ln(Mn);Mn.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:pn},onSubmit:function(Dr){nt(Mn,Dr.getData().code),Dr.close()}})},dt=function(Mn){Mn.addCommand("mceCodeEditor",function(){Gt(Mn)})},Qt=function(Mn){var pn=function(){return Mn.execCommand("mceCodeEditor")};Mn.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:pn}),Mn.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:pn})};function Sn(){le.add("code",function(Mn){return dt(Mn),Qt(Mn),{}})}Sn()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(Ie){var Xt=typeof Ie;return Ie===null?"null":Xt==="object"&&(Array.prototype.isPrototypeOf(Ie)||Ie.constructor&&Ie.constructor.name==="Array")?"array":Xt==="object"&&(String.prototype.isPrototypeOf(Ie)||Ie.constructor&&Ie.constructor.name==="String")?"string":Xt},ln=function(Ie){return function(Xt){return nt(Xt)===Ie}},Gt=function(Ie){return function(Xt){return typeof Xt===Ie}},dt=ln("string"),Qt=Gt("boolean"),Sn=function(Ie){return Ie==null},Mn=function(Ie){return!Sn(Ie)},pn=Gt("function"),Dr=Gt("number"),Bn=function(){},Ve=function(Ie,Xt){return function(sn){return Ie(Xt(sn))}},Ft=function(Ie){return function(){return Ie}},xn=function(Ie){return Ie},ze=Ft(!1),ge=Ft(!0),Tt=function(){return Ze},Ze=function(){var Ie=function(Zt){return Zt()},Xt=xn,sn={fold:function(Zt,Or){return Zt()},isSome:ze,isNone:ge,getOr:Xt,getOrThunk:Ie,getOrDie:function(Zt){throw new Error(Zt||"error: getOrDie called on none.")},getOrNull:Ft(null),getOrUndefined:Ft(void 0),or:Xt,orThunk:Ie,map:Tt,each:Bn,bind:Tt,exists:ze,forall:ge,filter:function(){return Tt()},toArray:function(){return[]},toString:Ft("none()")};return sn}(),qt=function(Ie){var Xt=Ft(Ie),sn=function(){return Or},Zt=function(Nr){return Nr(Ie)},Or={fold:function(Nr,Ia){return Ia(Ie)},isSome:ge,isNone:ze,getOr:Xt,getOrThunk:Xt,getOrDie:Xt,getOrNull:Xt,getOrUndefined:Xt,or:sn,orThunk:sn,map:function(Nr){return qt(Nr(Ie))},each:function(Nr){Nr(Ie)},bind:Zt,exists:Zt,forall:Zt,filter:function(Nr){return Nr(Ie)?Or:Ze},toArray:function(){return[Ie]},toString:function(){return"some("+Ie+")"}};return Or},Z=function(Ie){return Ie==null?Ze:qt(Ie)},Ne={some:qt,none:Tt,from:Z},ke=function(Ie,Xt){for(var sn=Ie.length,Zt=new Array(sn),Or=0;Or<sn;Or++){var Nr=Ie[Or];Zt[Or]=Xt(Nr,Or)}return Zt},Vt=function(Ie,Xt){for(var sn=0,Zt=Ie.length;sn<Zt;sn++){var Or=Ie[sn];Xt(Or,sn)}},Kt=function(Ie,Xt){for(var sn=[],Zt=0,Or=Ie.length;Zt<Or;Zt++){var Nr=Ie[Zt];Xt(Nr,Zt)&&sn.push(Nr)}return sn},ht=9,$t=11,We=1,ja=3,ve=function(Ie,Xt){var sn=Xt||document,Zt=sn.createElement("div");if(Zt.innerHTML=Ie,!Zt.hasChildNodes()||Zt.childNodes.length>1)throw console.error("HTML does not have a single root node",Ie),new Error("HTML must have a single root node");return Ea(Zt.childNodes[0])},Y=function(Ie,Xt){var sn=Xt||document,Zt=sn.createElement(Ie);return Ea(Zt)},Pn=function(Ie,Xt){var sn=Xt||document,Zt=sn.createTextNode(Ie);return Ea(Zt)},Ea=function(Ie){if(Ie==null)throw new Error("Node cannot be null or undefined");return{dom:Ie}},Mt=function(Ie,Xt,sn){return Ne.from(Ie.dom.elementFromPoint(Xt,sn)).map(Ea)},Oa={fromHtml:ve,fromTag:Y,fromText:Pn,fromDom:Ea,fromPoint:Mt},Vr=function(Ie,Xt){var sn=Ie.dom;if(sn.nodeType!==We)return!1;var Zt=sn;if(Zt.matches!==void 0)return Zt.matches(Xt);if(Zt.msMatchesSelector!==void 0)return Zt.msMatchesSelector(Xt);if(Zt.webkitMatchesSelector!==void 0)return Zt.webkitMatchesSelector(Xt);if(Zt.mozMatchesSelector!==void 0)return Zt.mozMatchesSelector(Xt);throw new Error("Browser lacks native selectors")};typeof window<"u"||Function("return this;")();var R=function(Ie){var Xt=Ie.dom.nodeName;return Xt.toLowerCase()},Aa=function(Ie){return Ie.dom.nodeType},wt=function(Ie){return function(Xt){return Aa(Xt)===Ie}},jt=wt(We),go=wt(ja),Go=wt(ht),nr=wt($t),ba=function(Ie){return function(Xt){return jt(Xt)&&R(Xt)===Ie}},Q=function(Ie){return Oa.fromDom(Ie.dom.ownerDocument)},Ja=function(Ie){return Go(Ie)?Ie:Q(Ie)},gt=function(Ie){return Ne.from(Ie.dom.parentNode).map(Oa.fromDom)},Lt=function(Ie){return ke(Ie.dom.childNodes,Oa.fromDom)},Ro=function(Ie,Xt,sn){if(dt(sn)||Qt(sn)||Dr(sn))Ie.setAttribute(Xt,sn+"");else throw console.error("Invalid call to Attribute.set. Key ",Xt,":: Value ",sn,":: Element ",Ie),new Error("Attribute value was not simple")},Er=function(Ie,Xt,sn){Ro(Ie.dom,Xt,sn)},Nt=function(Ie,Xt){Ie.dom.removeAttribute(Xt)},Dn=function(Ie){return nr(Ie)&&Mn(Ie.dom.host)},$n=pn(Element.prototype.attachShadow)&&pn(Node.prototype.getRootNode),pt=$n?function(Ie){return Oa.fromDom(Ie.dom.getRootNode())}:Ja,lr=function(Ie){var Xt=pt(Ie);return Dn(Xt)?Ne.some(Xt):Ne.none()},Ra=function(Ie){return Oa.fromDom(Ie.dom.host)},bn=function(Ie){var Xt=go(Ie)?Ie.dom.parentNode:Ie.dom;if(Xt==null||Xt.ownerDocument===null)return!1;var sn=Xt.ownerDocument;return lr(Oa.fromDom(Xt)).fold(function(){return sn.body.contains(Xt)},Ve(bn,Ra))},Yr=function(Ie,Xt,sn){for(var Zt=Ie.dom,Or=pn(sn)?sn:ze;Zt.parentNode;){Zt=Zt.parentNode;var Nr=Oa.fromDom(Zt);if(Xt(Nr))return Ne.some(Nr);if(Or(Nr))break}return Ne.none()},ta=function(Ie,Xt,sn){return Yr(Ie,function(Zt){return Vr(Zt,Xt)},sn)},Nn=function(Ie){return Ie.style!==void 0&&pn(Ie.style.getPropertyValue)},ya=function(Ie,Xt){var sn=Ie.dom,Zt=window.getComputedStyle(sn),Or=Zt.getPropertyValue(Xt);return Or===""&&!bn(Ie)?qo(sn,Xt):Or},qo=function(Ie,Xt){return Nn(Ie)?Ie.style.getPropertyValue(Xt):""},xi=function(Ie){return ya(Ie,"direction")==="rtl"?"rtl":"ltr"},fi=function(Ie,Xt){return Kt(Lt(Ie),Xt)},ni=function(Ie,Xt){return fi(Ie,function(sn){return Vr(sn,Xt)})},io=function(Ie){return gt(Ie).filter(jt)},Ti=function(Ie,Xt){var sn=Xt?ta(Ie,"ol,ul"):Ne.some(Ie);return sn.getOr(Ie)},Co=ba("li"),ra=function(Ie,Xt){var sn=Ie.selection.getSelectedBlocks();sn.length>0&&(Vt(sn,function(Zt){var Or=Oa.fromDom(Zt),Nr=Co(Or),Ia=Ti(Or,Nr),yn=io(Ia);yn.each(function(Ar){var wa=xi(Ar);if(wa!==Xt?Er(Ia,"dir",Xt):xi(Ia)!==Xt&&Nt(Ia,"dir"),Nr){var Mo=ni(Ia,"li[dir]");Vt(Mo,function(ji){return Nt(ji,"dir")})}})}),Ie.nodeChanged())},Qr=function(Ie){Ie.addCommand("mceDirectionLTR",function(){ra(Ie,"ltr")}),Ie.addCommand("mceDirectionRTL",function(){ra(Ie,"rtl")})},Ga=function(Ie,Xt){return function(sn){var Zt=function(Or){var Nr=Oa.fromDom(Or.element);sn.setActive(xi(Nr)===Xt)};return Ie.on("NodeChange",Zt),function(){return Ie.off("NodeChange",Zt)}}},na=function(Ie){Ie.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return Ie.execCommand("mceDirectionLTR")},onSetup:Ga(Ie,"ltr")}),Ie.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return Ie.execCommand("mceDirectionRTL")},onSetup:Ga(Ie,"rtl")})};function Pr(){le.add("directionality",function(Ie){Qr(Ie),na(Ie)})}Pr()})();(function(){var le=function(T){var w=T,A=function(){return w},L=function(te){w=te};return{get:A,set:L}},nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),ln=function(T){return{isFullscreen:function(){return T.get()!==null}}},Gt=function(T){var w=typeof T;return T===null?"null":w==="object"&&(Array.prototype.isPrototypeOf(T)||T.constructor&&T.constructor.name==="Array")?"array":w==="object"&&(String.prototype.isPrototypeOf(T)||T.constructor&&T.constructor.name==="String")?"string":w},dt=function(T){return function(w){return Gt(w)===T}},Qt=function(T){return function(w){return typeof w===T}},Sn=dt("string"),Mn=dt("array"),pn=Qt("boolean"),Dr=function(T){return T==null},Bn=function(T){return!Dr(T)},Ve=Qt("function"),Ft=Qt("number"),xn=function(){},ze=function(T,w){return function(){for(var A=[],L=0;L<arguments.length;L++)A[L]=arguments[L];return T(w.apply(null,A))}},ge=function(T,w){return function(A){return T(w(A))}},Tt=function(T){return function(){return T}},Ze=function(T){return T};function qt(T){for(var w=[],A=1;A<arguments.length;A++)w[A-1]=arguments[A];return function(){for(var L=[],te=0;te<arguments.length;te++)L[te]=arguments[te];var Te=w.concat(L);return T.apply(null,Te)}}var Z=Tt(!1),Ne=Tt(!0),ke=function(){return Vt},Vt=function(){var T=function(L){return L()},w=Ze,A={fold:function(L,te){return L()},isSome:Z,isNone:Ne,getOr:w,getOrThunk:T,getOrDie:function(L){throw new Error(L||"error: getOrDie called on none.")},getOrNull:Tt(null),getOrUndefined:Tt(void 0),or:w,orThunk:T,map:ke,each:xn,bind:ke,exists:Z,forall:Ne,filter:function(){return ke()},toArray:function(){return[]},toString:Tt("none()")};return A}(),Kt=function(T){var w=Tt(T),A=function(){return te},L=function(Te){return Te(T)},te={fold:function(Te,tt){return tt(T)},isSome:Ne,isNone:Z,getOr:w,getOrThunk:w,getOrDie:w,getOrNull:w,getOrUndefined:w,or:A,orThunk:A,map:function(Te){return Kt(Te(T))},each:function(Te){Te(T)},bind:L,exists:L,forall:L,filter:function(Te){return Te(T)?te:Vt},toArray:function(){return[T]},toString:function(){return"some("+T+")"}};return te},ht=function(T){return T==null?Vt:Kt(T)},$t={some:Kt,none:ke,from:ht},We=function(){return We=Object.assign||function(w){for(var A,L=1,te=arguments.length;L<te;L++){A=arguments[L];for(var Te in A)Object.prototype.hasOwnProperty.call(A,Te)&&(w[Te]=A[Te])}return w},We.apply(this,arguments)},ja=function(T){var w=le($t.none()),A=function(){return w.get().each(T)},L=function(){A(),w.set($t.none())},te=function(){return w.get().isSome()},Te=function(){return w.get()},tt=function(dn){A(),w.set($t.some(dn))};return{clear:L,isSet:te,get:Te,set:tt}},ve=function(){return ja(function(T){return T.unbind()})},Y=function(){var T=ja(xn),w=function(A){return T.get().each(A)};return We(We({},T),{on:w})},Pn=Array.prototype.push,Ea=function(T,w){for(var A=T.length,L=new Array(A),te=0;te<A;te++){var Te=T[te];L[te]=w(Te,te)}return L},Mt=function(T,w){for(var A=0,L=T.length;A<L;A++){var te=T[A];w(te,A)}},Oa=function(T,w){for(var A=[],L=0,te=T.length;L<te;L++){var Te=T[L];w(Te,L)&&A.push(Te)}return A},Vr=function(T,w,A){for(var L=0,te=T.length;L<te;L++){var Te=T[L];if(w(Te,L))return $t.some(Te);if(A(Te,L))break}return $t.none()},R=function(T,w){return Vr(T,w,Z)},Aa=function(T){for(var w=[],A=0,L=T.length;A<L;++A){if(!Mn(T[A]))throw new Error("Arr.flatten item "+A+" was not an array, input: "+T);Pn.apply(w,T[A])}return w},wt=function(T,w){return Aa(Ea(T,w))},jt=function(T,w){return w>=0&&w<T.length?$t.some(T[w]):$t.none()},go=function(T){return jt(T,0)},Go=function(T,w){for(var A=0;A<T.length;A++){var L=w(T[A],A);if(L.isSome())return L}return $t.none()},nr=Object.keys,ba=function(T,w){for(var A=nr(T),L=0,te=A.length;L<te;L++){var Te=A[L],tt=T[Te];w(tt,Te)}},Q=function(T,w){return T.indexOf(w)!==-1},Ja=function(T){return T.style!==void 0&&Ve(T.style.getPropertyValue)},gt=function(T,w){var A=w||document,L=A.createElement("div");if(L.innerHTML=T,!L.hasChildNodes()||L.childNodes.length>1)throw console.error("HTML does not have a single root node",T),new Error("HTML must have a single root node");return Er(L.childNodes[0])},Lt=function(T,w){var A=w||document,L=A.createElement(T);return Er(L)},Ro=function(T,w){var A=w||document,L=A.createTextNode(T);return Er(L)},Er=function(T){if(T==null)throw new Error("Node cannot be null or undefined");return{dom:T}},Nt=function(T,w,A){return $t.from(T.dom.elementFromPoint(w,A)).map(Er)},Dn={fromHtml:gt,fromTag:Lt,fromText:Ro,fromDom:Er,fromPoint:Nt};typeof window<"u"||Function("return this;")();var $n=9,pt=11,lr=1,Ra=3,bn=function(T){return T.dom.nodeType},Yr=function(T){return function(w){return bn(w)===T}},ta=Yr(lr),Nn=Yr(Ra),ya=Yr($n),qo=Yr(pt),xi=function(T){var w=!1,A;return function(){for(var L=[],te=0;te<arguments.length;te++)L[te]=arguments[te];return w||(w=!0,A=T.apply(null,L)),A}},fi=function(T,w,A,L){var te=T.isiOS()&&/ipad/i.test(A)===!0,Te=T.isiOS()&&!te,tt=T.isiOS()||T.isAndroid(),dn=tt||L("(pointer:coarse)"),Fn=te||!Te&&tt&&L("(min-device-width:768px)"),Rt=Te||tt&&!Fn,fn=w.isSafari()&&T.isiOS()&&/safari/i.test(A)===!1,ir=!Rt&&!Fn&&!fn;return{isiPad:Tt(te),isiPhone:Tt(Te),isTablet:Tt(Fn),isPhone:Tt(Rt),isTouch:Tt(dn),isAndroid:T.isAndroid,isiOS:T.isiOS,isWebView:Tt(fn),isDesktop:Tt(ir)}},ni=function(T,w){for(var A=0;A<T.length;A++){var L=T[A];if(L.test(w))return L}},io=function(T,w){var A=ni(T,w);if(!A)return{major:0,minor:0};var L=function(te){return Number(w.replace(A,"$"+te))};return ra(L(1),L(2))},Ti=function(T,w){var A=String(w).toLowerCase();return T.length===0?Co():io(T,A)},Co=function(){return ra(0,0)},ra=function(T,w){return{major:T,minor:w}},Qr={nu:ra,detect:Ti,unknown:Co},Ga=function(T,w){return Go(w.brands,function(A){var L=A.brand.toLowerCase();return R(T,function(te){var Te;return L===((Te=te.brand)===null||Te===void 0?void 0:Te.toLowerCase())}).map(function(te){return{current:te.name,version:Qr.nu(parseInt(A.version,10),0)}})})},na=function(T,w){var A=String(w).toLowerCase();return R(T,function(L){return L.search(A)})},Pr=function(T,w){return na(T,w).map(function(A){var L=Qr.detect(A.versionRegexes,w);return{current:A.name,version:L}})},Ie=function(T,w){return na(T,w).map(function(A){var L=Qr.detect(A.versionRegexes,w);return{current:A.name,version:L}})},Xt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,sn=function(T){return function(w){return Q(w,T)}},Zt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(T){return Q(T,"edge/")&&Q(T,"chrome")&&Q(T,"safari")&&Q(T,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xt],search:function(T){return Q(T,"chrome")&&!Q(T,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(T){return Q(T,"msie")||Q(T,"trident")}},{name:"Opera",versionRegexes:[Xt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:sn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:sn("firefox")},{name:"Safari",versionRegexes:[Xt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(T){return(Q(T,"safari")||Q(T,"mobile/"))&&Q(T,"applewebkit")}}],Or=[{name:"Windows",search:sn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(T){return Q(T,"iphone")||Q(T,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:sn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:sn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:sn("linux"),versionRegexes:[]},{name:"Solaris",search:sn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:sn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:sn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Nr={browsers:Tt(Zt),oses:Tt(Or)},Ia="Edge",yn="Chrome",Ar="IE",wa="Opera",Mo="Firefox",ji="Safari",Ir=function(){return fr({current:void 0,version:Qr.unknown()})},fr=function(T){var w=T.current,A=T.version,L=function(te){return function(){return w===te}};return{current:w,version:A,isEdge:L(Ia),isChrome:L(yn),isIE:L(Ar),isOpera:L(wa),isFirefox:L(Mo),isSafari:L(ji)}},So={unknown:Ir,nu:fr,edge:Tt(Ia),chrome:Tt(yn),ie:Tt(Ar),opera:Tt(wa),firefox:Tt(Mo),safari:Tt(ji)},vi="Windows",Lo="iOS",xo="Android",Ko="Linux",Gi="OSX",di="Solaris",Ho="FreeBSD",qi="ChromeOS",$r=function(){return mi({current:void 0,version:Qr.unknown()})},mi=function(T){var w=T.current,A=T.version,L=function(te){return function(){return w===te}};return{current:w,version:A,isWindows:L(vi),isiOS:L(Lo),isAndroid:L(xo),isOSX:L(Gi),isLinux:L(Ko),isSolaris:L(di),isFreeBSD:L(Ho),isChromeOS:L(qi)}},kn={unknown:$r,nu:mi,windows:Tt(vi),ios:Tt(Lo),android:Tt(xo),linux:Tt(Ko),osx:Tt(Gi),solaris:Tt(di),freebsd:Tt(Ho),chromeos:Tt(qi)},Ju=function(T,w,A){var L=Nr.browsers(),te=Nr.oses(),Te=w.bind(function(Fn){return Ga(L,Fn)}).orThunk(function(){return Pr(L,T)}).fold(So.unknown,So.nu),tt=Ie(te,T).fold(kn.unknown,kn.nu),dn=fi(tt,Te,T,A);return{browser:Te,os:tt,deviceType:dn}},Xo={detect:Ju},ki=function(T){return window.matchMedia(T).matches},Yo=xi(function(){return Xo.detect(navigator.userAgent,$t.from(navigator.userAgentData),ki)}),Fi=function(){return Yo()},Lu=function(T,w){var A=T.dom;if(A.nodeType!==lr)return!1;var L=A;if(L.matches!==void 0)return L.matches(w);if(L.msMatchesSelector!==void 0)return L.msMatchesSelector(w);if(L.webkitMatchesSelector!==void 0)return L.webkitMatchesSelector(w);if(L.mozMatchesSelector!==void 0)return L.mozMatchesSelector(w);throw new Error("Browser lacks native selectors")},gi=function(T){return T.nodeType!==lr&&T.nodeType!==$n&&T.nodeType!==pt||T.childElementCount===0},Zu=function(T,w){var A=w===void 0?document:w.dom;return gi(A)?[]:Ea(A.querySelectorAll(T),Dn.fromDom)},ne=function(T,w){return T.dom===w.dom},Ce=function(T){return Dn.fromDom(T.dom.ownerDocument)},ie=function(T){return ya(T)?T:Ce(T)},Re=function(T){return $t.from(T.dom.parentNode).map(Dn.fromDom)},_t=function(T,w){for(var A=Ve(w)?w:Z,L=T.dom,te=[];L.parentNode!==null&&L.parentNode!==void 0;){var Te=L.parentNode,tt=Dn.fromDom(Te);if(te.push(tt),A(tt)===!0)break;L=Te}return te},en=function(T){var w=function(A){return Oa(A,function(L){return!ne(T,L)})};return Re(T).map(Wn).map(w).getOr([])},Wn=function(T){return Ea(T.dom.childNodes,Dn.fromDom)},Kn=function(T){return qo(T)&&Bn(T.dom.host)},_r=Ve(Element.prototype.attachShadow)&&Ve(Node.prototype.getRootNode),Ur=Tt(_r),xr=_r?function(T){return Dn.fromDom(T.dom.getRootNode())}:ie,Ma=function(T){var w=xr(T);return Kn(w)?$t.some(w):$t.none()},Ba=function(T){return Dn.fromDom(T.dom.host)},Ki=function(T){if(Ur()&&Bn(T.target)){var w=Dn.fromDom(T.target);if(ta(w)&&ho(w)&&T.composed&&T.composedPath){var A=T.composedPath();if(A)return go(A)}}return $t.from(T.target)},ho=function(T){return Bn(T.dom.shadowRoot)},ri=function(T){var w=Nn(T)?T.dom.parentNode:T.dom;if(w==null||w.ownerDocument===null)return!1;var A=w.ownerDocument;return Ma(Dn.fromDom(w)).fold(function(){return A.body.contains(w)},ge(ri,Ba))},lu=function(T){var w=T.dom.body;if(w==null)throw new Error("Body is not available yet");return Dn.fromDom(w)},Pa=function(T,w,A){if(Sn(A)||pn(A)||Ft(A))T.setAttribute(w,A+"");else throw console.error("Invalid call to Attribute.set. Key ",w,":: Value ",A,":: Element ",T),new Error("Attribute value was not simple")},$a=function(T,w,A){Pa(T.dom,w,A)},lt=function(T,w){var A=T.dom.getAttribute(w);return A===null?void 0:A},no=function(T,w){T.dom.removeAttribute(w)},Xi=function(T,w,A){if(!Sn(A))throw console.error("Invalid call to CSS.set. Property ",w,":: Value ",A,":: Element ",T),new Error("CSS value must be a string: "+A);Ja(T)&&T.style.setProperty(w,A)},Qu=function(T,w){var A=T.dom;ba(w,function(L,te){Xi(A,te,L)})},es=function(T,w){var A=T.dom,L=window.getComputedStyle(A),te=L.getPropertyValue(w);return te===""&&!ri(T)?Tr(A,w):te},Tr=function(T,w){return Ja(T)?T.style.getPropertyValue(w):""},Cs=function(T,w,A,L,te,Te,tt){return{target:T,x:w,y:A,stop:L,prevent:te,kill:Te,raw:tt}},Yi=function(T){var w=Dn.fromDom(Ki(T).getOr(T.target)),A=function(){return T.stopPropagation()},L=function(){return T.preventDefault()},te=ze(L,A);return Cs(w,T.clientX,T.clientY,A,L,te,T)},qa=function(T,w){return function(A){T(A)&&w(Yi(A))}},ts=function(T,w,A,L,te){var Te=qa(A,L);return T.dom.addEventListener(w,Te,te),{unbind:qt(hi,T,w,Te,te)}},ai=function(T,w,A,L){return ts(T,w,A,L,!1)},hi=function(T,w,A,L){T.dom.removeEventListener(w,A,L)},ga=Ne,ns=function(T,w,A){return ai(T,w,ga,A)},G=function(T,w){var A=function(L,te){return G(T+L,w+te)};return{left:T,top:w,translate:A}},de=G,De=function(T){var w=T!==void 0?T.dom:document,A=w.body.scrollLeft||w.documentElement.scrollLeft,L=w.body.scrollTop||w.documentElement.scrollTop;return de(A,L)},Ke=function(T){var w=T===void 0?window:T;return Fi().browser.isFirefox()?$t.none():$t.from(w.visualViewport)},zt=function(T,w,A,L){return{x:T,y:w,width:A,height:L,right:T+A,bottom:w+L}},nn=function(T){var w=T===void 0?window:T,A=w.document,L=De(Dn.fromDom(A));return Ke(w).fold(function(){var te=w.document.documentElement,Te=te.clientWidth,tt=te.clientHeight;return zt(L.left,L.top,Te,tt)},function(te){return zt(Math.max(te.pageLeft,L.left),Math.max(te.pageTop,L.top),te.width,te.height)})},mn=function(T,w,A){return Ke(A).map(function(L){var te=function(Te){return w(Yi(Te))};return L.addEventListener(T,te),{unbind:function(){return L.removeEventListener(T,te)}}}).getOrThunk(function(){return{unbind:xn}})},vr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.Env"),fe=tinymce.util.Tools.resolve("tinymce.util.Delay"),xe=function(T,w){T.fire("FullscreenStateChanged",{state:w}),T.fire("ResizeEditor")},Pe=function(T){return T.getParam("fullscreen_native",!1,"boolean")},Ye=function(T){var w=Dn.fromDom(T.getElement());return Ma(w).map(Ba).getOrThunk(function(){return lu(Ce(w))})},Yt=function(T){return T.fullscreenElement!==void 0?T.fullscreenElement:T.msFullscreenElement!==void 0?T.msFullscreenElement:T.webkitFullscreenElement!==void 0?T.webkitFullscreenElement:null},wn=function(){return document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange"},zr=function(T){var w=T.dom;w.requestFullscreen?w.requestFullscreen():w.msRequestFullscreen?w.msRequestFullscreen():w.webkitRequestFullScreen&&w.webkitRequestFullScreen()},or=function(T){var w=T.dom;w.exitFullscreen?w.exitFullscreen():w.msExitFullscreen?w.msExitFullscreen():w.webkitCancelFullScreen&&w.webkitCancelFullScreen()},aa=function(T){return T.dom===Yt(Ce(T).dom)},Da=function(T,w,A){return Oa(_t(T,A),w)},Eu=function(T,w){return Oa(en(T),w)},To=function(T){return Zu(T)},Tn=function(T,w,A){return Da(T,function(L){return Lu(L,w)},A)},St=function(T,w){return Eu(T,function(A){return Lu(A,w)})},sa="data-ephox-mobile-fullscreen-style",ko="display:none!important;",kr="position:absolute!important;",Hs="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",rs="background-color:rgb(255,255,255)!important;",Rc=V.os.isAndroid(),qr=function(T){var w=es(T,"background-color");return w!==void 0&&w!==""?"background-color:"+w+"!important":rs},Ei=function(T,w,A){var L=function(Rt){return St(Rt,"*:not(.tox-silver-sink)")},te=function(Rt){return function(fn){var ir=lt(fn,"style"),rr=ir===void 0?"no-styles":ir.trim();rr!==Rt&&($a(fn,sa,rr),Qu(fn,T.parseStyle(Rt)))}},Te=Tn(w,"*"),tt=wt(Te,L),dn=qr(A);Mt(tt,te(ko)),Mt(Te,te(kr+Hs+dn));var Fn=Rc===!0?"":kr;te(Fn+Hs+dn)(w)},Mc=function(T){var w=To("["+sa+"]");Mt(w,function(A){var L=lt(A,sa);L!=="no-styles"?Qu(A,T.parseStyle(L)):no(A,"style"),no(A,sa)})},Ou=vr.DOM,uo=function(){return nn(window)},Vs=function(T){return window.scrollTo(T.x,T.y)},je=Ke().fold(function(){return{bind:xn,unbind:xn}},function(T){var w=Y(),A=ve(),L=ve(),te=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},Te=function(){window.requestAnimationFrame(function(){w.on(function(Rt){return Qu(Rt,{top:T.offsetTop+"px",left:T.offsetLeft+"px",height:T.height+"px",width:T.width+"px"})})})},tt=fe.throttle(function(){te(),Te()},50),dn=function(Rt){w.set(Rt),tt(),A.set(mn("resize",tt)),L.set(mn("scroll",tt))},Fn=function(){w.on(function(){A.clear(),L.clear()}),w.clear()};return{bind:dn,unbind:Fn}}),lc=function(T,w){var A=document.body,L=document.documentElement,te=T.getContainer(),Te=Dn.fromDom(te),tt=Ye(T),dn=w.get(),Fn=Dn.fromDom(T.getBody()),Rt=V.deviceType.isTouch(),fn=te.style,ir=T.iframeElement,rr=ir.style,Yn=function(ca){ca(A,"tox-fullscreen"),ca(L,"tox-fullscreen"),ca(te,"tox-fullscreen"),Ma(Te).map(function(Oi){return Ba(Oi).dom}).each(function(Oi){ca(Oi,"tox-fullscreen"),ca(Oi,"tox-shadowhost")})},La=function(){Rt&&Mc(T.dom),Yn(Ou.removeClass),je.unbind(),$t.from(w.get()).each(function(ca){return ca.fullscreenChangeHandler.unbind()})};if(dn)dn.fullscreenChangeHandler.unbind(),Pe(T)&&aa(tt)&&or(Ce(tt)),rr.width=dn.iframeWidth,rr.height=dn.iframeHeight,fn.width=dn.containerWidth,fn.height=dn.containerHeight,fn.top=dn.containerTop,fn.left=dn.containerLeft,La(),Vs(dn.scrollPos),w.set(null),xe(T,!1),T.off("remove",La);else{var jn=ns(Ce(tt),wn(),function(ca){Pe(T)&&!aa(tt)&&w.get()!==null&&lc(T,w)}),Ca={scrollPos:uo(),containerWidth:fn.width,containerHeight:fn.height,containerTop:fn.top,containerLeft:fn.left,iframeWidth:rr.width,iframeHeight:rr.height,fullscreenChangeHandler:jn};Rt&&Ei(T.dom,Te,Fn),rr.width=rr.height="100%",fn.width=fn.height="",Yn(Ou.addClass),je.bind(Te),T.on("remove",La),w.set(Ca),Pe(T)&&zr(tt),xe(T,!0)}},so=function(T,w){T.addCommand("mceFullScreen",function(){lc(T,w)})},pl=function(T,w){return function(A){A.setActive(w.get()!==null);var L=function(te){return A.setActive(te.state)};return T.on("FullscreenStateChanged",L),function(){return T.off("FullscreenStateChanged",L)}}},Ss=function(T,w){var A=function(){return T.execCommand("mceFullScreen")};T.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:A,onSetup:pl(T,w)}),T.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:A,onSetup:pl(T,w)})};function B(){nt.add("fullscreen",function(T){var w=le(null);return T.inline||(so(T,w),Ss(T,w),T.addShortcut("Meta+Shift+F","","mceFullScreen")),ln(w)})}B()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(dt){dt.addCommand("InsertHorizontalRule",function(){dt.execCommand("mceInsertContent",!1,"<hr />")})},ln=function(dt){var Qt=function(){return dt.execCommand("InsertHorizontalRule")};dt.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:Qt}),dt.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:Qt})};function Gt(){le.add("hr",function(dt){nt(dt),ln(dt)})}Gt()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(){return nt=Object.assign||function(T){for(var w,A=1,L=arguments.length;A<L;A++){w=arguments[A];for(var te in w)Object.prototype.hasOwnProperty.call(w,te)&&(T[te]=w[te])}return T},nt.apply(this,arguments)},ln=function(B){var T=typeof B;return B===null?"null":T==="object"&&(Array.prototype.isPrototypeOf(B)||B.constructor&&B.constructor.name==="Array")?"array":T==="object"&&(String.prototype.isPrototypeOf(B)||B.constructor&&B.constructor.name==="String")?"string":T},Gt=function(B){return function(T){return ln(T)===B}},dt=function(B){return function(T){return typeof T===B}},Qt=function(B){return function(T){return B===T}},Sn=Gt("string"),Mn=Gt("object"),pn=Gt("array"),Dr=Qt(null),Bn=dt("boolean"),Ve=function(B){return B==null},Ft=function(B){return!Ve(B)},xn=dt("function"),ze=dt("number"),ge=function(){},Tt=function(B){return function(){return B}},Ze=function(B){return B},qt=Tt(!1),Z=Tt(!0),Ne=function(){return ke},ke=function(){var B=function(A){return A()},T=Ze,w={fold:function(A,L){return A()},isSome:qt,isNone:Z,getOr:T,getOrThunk:B,getOrDie:function(A){throw new Error(A||"error: getOrDie called on none.")},getOrNull:Tt(null),getOrUndefined:Tt(void 0),or:T,orThunk:B,map:Ne,each:ge,bind:Ne,exists:qt,forall:Z,filter:function(){return Ne()},toArray:function(){return[]},toString:Tt("none()")};return w}(),Vt=function(B){var T=Tt(B),w=function(){return L},A=function(te){return te(B)},L={fold:function(te,Te){return Te(B)},isSome:Z,isNone:qt,getOr:T,getOrThunk:T,getOrDie:T,getOrNull:T,getOrUndefined:T,or:w,orThunk:w,map:function(te){return Vt(te(B))},each:function(te){te(B)},bind:A,exists:A,forall:A,filter:function(te){return te(B)?L:ke},toArray:function(){return[B]},toString:function(){return"some("+B+")"}};return L},Kt=function(B){return B==null?ke:Vt(B)},ht={some:Vt,none:Ne,from:Kt},$t=Object.keys,We=Object.hasOwnProperty,ja=function(B,T){for(var w=$t(B),A=0,L=w.length;A<L;A++){var te=w[A],Te=B[te];T(Te,te)}},ve=function(B){return function(T,w){B[w]=T}},Y=function(B,T,w,A){var L={};return ja(B,function(te,Te){(T(te,Te)?w:A)(te,Te)}),L},Pn=function(B,T){var w={};return Y(B,T,ve(w),ge),w},Ea=function(B,T){return We.call(B,T)},Mt=function(B,T){return Ea(B,T)&&B[T]!==void 0&&B[T]!==null},Oa=Array.prototype.push,Vr=function(B){for(var T=[],w=0,A=B.length;w<A;++w){if(!pn(B[w]))throw new Error("Arr.flatten item "+w+" was not an array, input: "+B);Oa.apply(T,B[w])}return T},R=function(B,T){return T>=0&&T<B.length?ht.some(B[T]):ht.none()},Aa=function(B){return R(B,0)},wt=function(B,T){for(var w=0;w<B.length;w++){var A=T(B[w],w);if(A.isSome())return A}return ht.none()};typeof window<"u"||Function("return this;")();var jt=function(B,T,w){if(Sn(w)||Bn(w)||ze(w))B.setAttribute(T,w+"");else throw console.error("Invalid call to Attribute.set. Key ",T,":: Value ",w,":: Element ",B),new Error("Attribute value was not simple")},go=function(B,T,w){jt(B.dom,T,w)},Go=function(B,T){B.dom.removeAttribute(T)},nr=function(B,T){var w=T||document,A=w.createElement("div");if(A.innerHTML=B,!A.hasChildNodes()||A.childNodes.length>1)throw console.error("HTML does not have a single root node",B),new Error("HTML must have a single root node");return Ja(A.childNodes[0])},ba=function(B,T){var w=T||document,A=w.createElement(B);return Ja(A)},Q=function(B,T){var w=T||document,A=w.createTextNode(B);return Ja(A)},Ja=function(B){if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},gt=function(B,T,w){return ht.from(B.dom.elementFromPoint(T,w)).map(Ja)},Lt={fromHtml:nr,fromTag:ba,fromText:Q,fromDom:Ja,fromPoint:gt},Ro=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Er=tinymce.util.Tools.resolve("tinymce.util.Promise"),Nt=tinymce.util.Tools.resolve("tinymce.util.URI"),Dn=tinymce.util.Tools.resolve("tinymce.util.XHR"),$n=function(B){return B.getParam("image_dimensions",!0,"boolean")},pt=function(B){return B.getParam("image_advtab",!1,"boolean")},lr=function(B){return B.getParam("image_uploadtab",!0,"boolean")},Ra=function(B){return B.getParam("image_prepend_url","","string")},bn=function(B){return B.getParam("image_class_list")},Yr=function(B){return B.getParam("image_description",!0,"boolean")},ta=function(B){return B.getParam("image_title",!1,"boolean")},Nn=function(B){return B.getParam("image_caption",!1,"boolean")},ya=function(B){return B.getParam("image_list",!1)},qo=function(B){return Ft(B.getParam("images_upload_url"))},xi=function(B){return Ft(B.getParam("images_upload_handler"))},fi=function(B){return B.getParam("a11y_advanced_options",!1,"boolean")},ni=function(B){return B.getParam("automatic_uploads",!0,"boolean")},io=function(B,T){return Math.max(parseInt(B,10),parseInt(T,10))},Ti=function(B){return new Er(function(T){var w=document.createElement("img"),A=function(te){w.onload=w.onerror=null,w.parentNode&&w.parentNode.removeChild(w),T(te)};w.onload=function(){var te=io(w.width,w.clientWidth),Te=io(w.height,w.clientHeight),tt={width:te,height:Te};A(Er.resolve(tt))},w.onerror=function(){A(Er.reject("Failed to get image dimensions for: "+B))};var L=w.style;L.visibility="hidden",L.position="fixed",L.bottom=L.left="0px",L.width=L.height="auto",document.body.appendChild(w),w.src=B})},Co=function(B){return B&&(B=B.replace(/px$/,"")),B},ra=function(B){return B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B},Qr=function(B){if(B.margin){var T=String(B.margin).split(" ");switch(T.length){case 1:B["margin-top"]=B["margin-top"]||T[0],B["margin-right"]=B["margin-right"]||T[0],B["margin-bottom"]=B["margin-bottom"]||T[0],B["margin-left"]=B["margin-left"]||T[0];break;case 2:B["margin-top"]=B["margin-top"]||T[0],B["margin-right"]=B["margin-right"]||T[1],B["margin-bottom"]=B["margin-bottom"]||T[0],B["margin-left"]=B["margin-left"]||T[1];break;case 3:B["margin-top"]=B["margin-top"]||T[0],B["margin-right"]=B["margin-right"]||T[1],B["margin-bottom"]=B["margin-bottom"]||T[2],B["margin-left"]=B["margin-left"]||T[1];break;case 4:B["margin-top"]=B["margin-top"]||T[0],B["margin-right"]=B["margin-right"]||T[1],B["margin-bottom"]=B["margin-bottom"]||T[2],B["margin-left"]=B["margin-left"]||T[3]}delete B.margin}return B},Ga=function(B,T){var w=ya(B);Sn(w)?Dn.send({url:w,success:function(A){T(JSON.parse(A))}}):xn(w)?w(T):T(w)},na=function(B,T,w){var A=function(){w.onload=w.onerror=null,B.selection&&(B.selection.select(w),B.nodeChanged())};w.onload=function(){!T.width&&!T.height&&$n(B)&&B.dom.setAttribs(w,{width:String(w.clientWidth),height:String(w.clientHeight)}),A()},w.onerror=A},Pr=function(B){return new Er(function(T,w){var A=new FileReader;A.onload=function(){T(A.result)},A.onerror=function(){w(A.error.message)},A.readAsDataURL(B)})},Ie=function(B){return B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder"))},Xt=function(B,T){return Nt.isDomSafe(T,"img",B.settings)},sn=Ro.DOM,Zt=function(B){return B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?Co(B.style.marginLeft):""},Or=function(B){return B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?Co(B.style.marginTop):""},Nr=function(B){return B.style.borderWidth?Co(B.style.borderWidth):""},Ia=function(B,T){return B.hasAttribute(T)?B.getAttribute(T):""},yn=function(B,T){return B.style[T]?B.style[T]:""},Ar=function(B){return B.parentNode!==null&&B.parentNode.nodeName==="FIGURE"},wa=function(B,T,w){w===""?B.removeAttribute(T):B.setAttribute(T,w)},Mo=function(B){var T=sn.create("figure",{class:"image"});sn.insertAfter(T,B),T.appendChild(B),T.appendChild(sn.create("figcaption",{contentEditable:"true"},"Caption")),T.contentEditable="false"},ji=function(B){var T=B.parentNode;sn.insertAfter(B,T),sn.remove(T)},Ir=function(B){Ar(B)?ji(B):Mo(B)},fr=function(B,T){var w=B.getAttribute("style"),A=T(w!==null?w:"");A.length>0?(B.setAttribute("style",A),B.setAttribute("data-mce-style",A)):B.removeAttribute("style")},So=function(B,T){return function(w,A,L){w.style[A]?(w.style[A]=ra(L),fr(w,T)):wa(w,A,L)}},vi=function(B,T){return B.style[T]?Co(B.style[T]):Ia(B,T)},Lo=function(B,T){var w=ra(T);B.style.marginLeft=w,B.style.marginRight=w},xo=function(B,T){var w=ra(T);B.style.marginTop=w,B.style.marginBottom=w},Ko=function(B,T){var w=ra(T);B.style.borderWidth=w},Gi=function(B,T){B.style.borderStyle=T},di=function(B){return yn(B,"borderStyle")},Ho=function(B){return B.nodeName==="FIGURE"},qi=function(B){return B.nodeName==="IMG"},$r=function(B){return sn.getAttrib(B,"alt").length===0&&sn.getAttrib(B,"role")==="presentation"},mi=function(B){return $r(B)?"":Ia(B,"alt")},kn=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Ju=function(B,T){var w=document.createElement("img");return wa(w,"style",T.style),(Zt(w)||T.hspace!=="")&&Lo(w,T.hspace),(Or(w)||T.vspace!=="")&&xo(w,T.vspace),(Nr(w)||T.border!=="")&&Ko(w,T.border),(di(w)||T.borderStyle!=="")&&Gi(w,T.borderStyle),B(w.getAttribute("style"))},Xo=function(B,T){var w=document.createElement("img");if(Zu(B,nt(nt({},T),{caption:!1}),w),Fi(w,T.alt,T.isDecorative),T.caption){var A=sn.create("figure",{class:"image"});return A.appendChild(w),A.appendChild(sn.create("figcaption",{contentEditable:"true"},"Caption")),A.contentEditable="false",A}else return w},ki=function(B,T){return{src:Ia(T,"src"),alt:mi(T),title:Ia(T,"title"),width:vi(T,"width"),height:vi(T,"height"),class:Ia(T,"class"),style:B(Ia(T,"style")),caption:Ar(T),hspace:Zt(T),vspace:Or(T),border:Nr(T),borderStyle:yn(T,"borderStyle"),isDecorative:$r(T)}},Yo=function(B,T,w,A,L){w[A]!==T[A]&&L(B,A,w[A])},Fi=function(B,T,w){if(w){sn.setAttrib(B,"role","presentation");var A=Lt.fromDom(B);go(A,"alt","")}else{if(Dr(T)){var A=Lt.fromDom(B);Go(A,"alt")}else{var A=Lt.fromDom(B);go(A,"alt",T)}sn.getAttrib(B,"role")==="presentation"&&sn.setAttrib(B,"role","")}},Lu=function(B,T,w){(w.alt!==T.alt||w.isDecorative!==T.isDecorative)&&Fi(B,w.alt,w.isDecorative)},gi=function(B,T){return function(w,A,L){B(w,L),fr(w,T)}},Zu=function(B,T,w){var A=ki(B,w);Yo(w,A,T,"caption",function(L,te,Te){return Ir(L)}),Yo(w,A,T,"src",wa),Yo(w,A,T,"title",wa),Yo(w,A,T,"width",So("width",B)),Yo(w,A,T,"height",So("height",B)),Yo(w,A,T,"class",wa),Yo(w,A,T,"style",gi(function(L,te){return wa(L,"style",te)},B)),Yo(w,A,T,"hspace",gi(Lo,B)),Yo(w,A,T,"vspace",gi(xo,B)),Yo(w,A,T,"border",gi(Ko,B)),Yo(w,A,T,"borderStyle",gi(Gi,B)),Lu(w,A,T)},ne=function(B,T){var w=B.dom.styles.parse(T),A=Qr(w),L=B.dom.styles.parse(B.dom.styles.serialize(A));return B.dom.styles.serialize(L)},Ce=function(B){var T=B.selection.getNode(),w=B.dom.getParent(T,"figure.image");return w?B.dom.select("img",w)[0]:T&&(T.nodeName!=="IMG"||Ie(T))?null:T},ie=function(B,T){var w=B.dom,A=Pn(B.schema.getTextBlockElements(),function(te,Te){return!B.schema.isValidChild(Te,"figure")}),L=w.getParent(T.parentNode,function(te){return Mt(A,te.nodeName)},B.getBody());return L?w.split(L,T):T},Re=function(B){var T=Ce(B);return T?ki(function(w){return ne(B,w)},T):kn()},_t=function(B,T){var w=Xo(function(te){return ne(B,te)},T);B.dom.setAttrib(w,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(w.outerHTML);var A=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(A,"data-mce-id",null),Ho(A)){var L=ie(B,A);B.selection.select(L)}else B.selection.select(A)},en=function(B,T){B.dom.setAttrib(T,"src",T.getAttribute("src"))},Wn=function(B,T){if(T){var w=B.dom.is(T.parentNode,"figure.image")?T.parentNode:T;B.dom.remove(w),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},Kn=function(B,T){var w=Ce(B);if(Zu(function(L){return ne(B,L)},T,w),en(B,w),Ho(w.parentNode)){var A=w.parentNode;ie(B,A),B.selection.select(w.parentNode)}else B.selection.select(w),na(B,T,w)},_r=function(B,T){var w=T.src;return nt(nt({},T),{src:Xt(B,w)?w:""})},Ur=function(B,T){var w=Ce(B);if(w){var A=ki(function(Te){return ne(B,Te)},w),L=nt(nt({},A),T),te=_r(B,L);L.src?Kn(B,te):Wn(B,w)}else T.src&&_t(B,nt(nt({},kn()),T))},xr=function(B,T){var w=Mn(B)&&Mn(T);return w?Ba(B,T):T},Ma=function(B){return function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];if(T.length===0)throw new Error("Can't merge zero objects");for(var A={},L=0;L<T.length;L++){var te=T[L];for(var Te in te)Ea(te,Te)&&(A[Te]=B(A[Te],te[Te]))}return A}},Ba=Ma(xr),Ki=function(B){return B.length>0},ho=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ri=tinymce.util.Tools.resolve("tinymce.util.Tools"),lu=function(B){return Sn(B.value)?B.value:""},Pa=function(B){return Sn(B.text)?B.text:Sn(B.title)?B.title:""},$a=function(B,T){var w=[];return ri.each(B,function(A){var L=Pa(A);if(A.menu!==void 0){var te=$a(A.menu,T);w.push({text:L,items:te})}else{var Te=T(A);w.push({text:L,value:Te})}}),w},lt=function(B){return B===void 0&&(B=lu),function(T){return T?ht.from(T).map(function(w){return $a(w,B)}):ht.none()}},no=function(B){return lt(lu)(B)},Xi=function(B){return Ea(B,"items")},Qu=function(B,T){return wt(B,function(w){return Xi(w)?Qu(w.items,T):w.value===T?ht.some(w):ht.none()})},es=function(B,T){return B.bind(function(w){return Qu(w,T)})},Tr={sanitizer:lt,sanitize:no,findEntry:es},Cs=function(B){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Yi={makeTab:Cs},qa=function(B){var T=Tr.sanitizer(function(jn){return B.convertURL(jn.value||jn.url,"src")}),w=new Er(function(jn){Ga(B,function(Ca){jn(T(Ca).map(function(ca){return Vr([[{text:"None",value:""}],ca])}))})}),A=Tr.sanitize(bn(B)),L=pt(B),te=lr(B),Te=qo(B),tt=xi(B),dn=Re(B),Fn=Yr(B),Rt=ta(B),fn=$n(B),ir=Nn(B),rr=fi(B),Yn=ni(B),La=ht.some(Ra(B)).filter(function(jn){return Sn(jn)&&jn.length>0});return w.then(function(jn){return{image:dn,imageList:jn,classList:A,hasAdvTab:L,hasUploadTab:te,hasUploadUrl:Te,hasUploadHandler:tt,hasDescription:Fn,hasImageTitle:Rt,hasDimensions:fn,hasImageCaption:ir,prependURL:La,hasAccessibilityOptions:rr,automaticUploads:Yn}})},ts=function(B){var T={name:"src",type:"urlinput",filetype:"image",label:"Source"},w=B.imageList.map(function(Rt){return{name:"images",type:"listbox",label:"Image list",items:Rt}}),A={name:"alt",type:"input",label:"Alternative description",disabled:B.hasAccessibilityOptions&&B.image.isDecorative},L={name:"title",type:"input",label:"Image title"},te={name:"dimensions",type:"sizeinput"},Te={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},tt=B.classList.map(function(Rt){return{name:"classes",type:"listbox",label:"Class",items:Rt}}),dn={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Fn=function(Rt){return Rt?{type:"grid",columns:2}:{type:"panel"}};return Vr([[T],w.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[Te]:[],B.hasDescription?[A]:[],B.hasImageTitle?[L]:[],B.hasDimensions?[te]:[],[nt(nt({},Fn(B.classList.isSome()&&B.hasImageCaption)),{items:Vr([tt.toArray(),B.hasImageCaption?[dn]:[]])})]])},ai=function(B){return{title:"General",name:"general",items:ts(B)}},hi={makeTab:ai,makeItems:ts},ga=function(B){var T=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:T}},ns={makeTab:ga},G=function(B){return{prevImage:Tr.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}},de=function(B){return{src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}},De=function(B,T){return{src:B.src.value,alt:B.alt.length===0&&T?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}},Ke=function(B,T){return/^(?:[a-zA-Z]+:)?\/\//.test(T)?ht.none():B.prependURL.bind(function(w){return T.substring(0,w.length)!==w?ht.some(w+T):ht.none()})},zt=function(B,T){var w=T.getData();Ke(B,w.src.value).each(function(A){T.setData({src:{value:A,meta:w.src.meta}})})},nn=function(B,T,w){B.hasDescription&&Sn(w.alt)&&(T.alt=w.alt),B.hasAccessibilityOptions&&(T.isDecorative=w.isDecorative||T.isDecorative||!1),B.hasImageTitle&&Sn(w.title)&&(T.title=w.title),B.hasDimensions&&(Sn(w.width)&&(T.dimensions.width=w.width),Sn(w.height)&&(T.dimensions.height=w.height)),Sn(w.class)&&Tr.findEntry(B.classList,w.class).each(function(A){T.classes=A.value}),B.hasImageCaption&&Bn(w.caption)&&(T.caption=w.caption),B.hasAdvTab&&(Sn(w.style)&&(T.style=w.style),Sn(w.vspace)&&(T.vspace=w.vspace),Sn(w.border)&&(T.border=w.border),Sn(w.hspace)&&(T.hspace=w.hspace),Sn(w.borderstyle)&&(T.borderstyle=w.borderstyle))},mn=function(B,T){var w=T.getData(),A=w.src.meta;if(A!==void 0){var L=Ba({},w);nn(B,L,A),T.setData(L)}},vr=function(B,T,w,A){var L=A.getData(),te=L.src.value,Te=L.src.meta||{};!Te.width&&!Te.height&&T.hasDimensions&&(Ki(te)?B.imageSize(te).then(function(tt){w.open&&A.setData({dimensions:tt})}).catch(function(tt){return console.error(tt)}):A.setData({dimensions:{width:"",height:""}}))},V=function(B,T,w){var A=w.getData(),L=Tr.findEntry(B.imageList,A.src.value);T.prevImage=L,w.setData({images:L.map(function(te){return te.value}).getOr("")})},fe=function(B,T,w,A){zt(T,A),mn(T,A),vr(B,T,w,A),V(T,w,A)},xe=function(B,T,w,A){var L=A.getData(),te=Tr.findEntry(T.imageList,L.images);te.each(function(Te){var tt=L.alt===""||w.prevImage.map(function(dn){return dn.text===L.alt}).getOr(!1);tt?Te.value===""?A.setData({src:Te,alt:w.prevAlt}):A.setData({src:Te,alt:Te.text}):A.setData({src:Te})}),w.prevImage=te,fe(B,T,w,A)},Pe=function(B){var T=B["margin-top"]&&B["margin-bottom"]&&B["margin-top"]===B["margin-bottom"];return T?Co(String(B["margin-top"])):""},Ye=function(B){var T=B["margin-right"]&&B["margin-left"]&&B["margin-right"]===B["margin-left"];return T?Co(String(B["margin-right"])):""},Yt=function(B){return B["border-width"]?Co(String(B["border-width"])):""},wn=function(B){return B["border-style"]?String(B["border-style"]):""},zr=function(B,T,w){return T(B(T(w)))},or=function(B,T,w){var A=Qr(B(w.style)),L=Ba({},w);return L.vspace=Pe(A),L.hspace=Ye(A),L.border=Yt(A),L.borderstyle=wn(A),L.style=zr(B,T,A),L},aa=function(B,T){var w=T.getData(),A=or(B.parseStyle,B.serializeStyle,w);T.setData(A)},Da=function(B,T,w){var A=Ba(de(T.image),w.getData()),L=Ju(B.normalizeCss,De(A,!1));w.setData({style:L})},Eu=function(B,T,w,A){var L=A.getData();A.block("Uploading image"),Aa(L.fileinput).fold(function(){A.unblock()},function(te){var Te=URL.createObjectURL(te),tt=function(){A.unblock(),URL.revokeObjectURL(Te)},dn=function(Fn){A.setData({src:{value:Fn,meta:{}}}),A.showTab("general"),fe(B,T,w,A)};Pr(te).then(function(Fn){var Rt=B.createBlobCache(te,Te,Fn);T.automaticUploads?B.uploadImage(Rt).then(function(fn){dn(fn.url),tt()}).catch(function(fn){tt(),B.alertErr(fn)}):(B.addToBlobCache(Rt),dn(Rt.blobUri()),A.unblock())})})},To=function(B,T,w){return function(A,L){L.name==="src"?fe(B,T,w,A):L.name==="images"?xe(B,T,w,A):L.name==="alt"?w.prevAlt=A.getData().alt:L.name==="style"?aa(B,A):L.name==="vspace"||L.name==="hspace"||L.name==="border"||L.name==="borderstyle"?Da(B,T,A):L.name==="fileinput"?Eu(B,T,w,A):L.name==="isDecorative"&&(A.getData().isDecorative?A.disable("alt"):A.enable("alt"))}},Tn=function(B){return function(){B.open=!1}},St=function(B){if(B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler){var T={type:"tabpanel",tabs:Vr([[hi.makeTab(B)],B.hasAdvTab?[Yi.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[ns.makeTab(B)]:[]])};return T}else{var w={type:"panel",items:hi.makeItems(B)};return w}},sa=function(B){return function(T){var w=G(T);return{title:"Insert/Edit Image",size:"normal",body:St(T),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:de(T.image),onSubmit:B.onSubmit(T),onChange:To(B,T,w),onClose:Tn(w)}}},ko=function(B){return function(T){return function(w){var A=Ba(de(T.image),w.getData());B.execCommand("mceUpdateImage",!1,De(A,T.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),w.close()}}},kr=function(B){return function(T){return Xt(B,T)?Ti(B.documentBaseURI.toAbsolute(T)).then(function(w){return{width:String(w.width),height:String(w.height)}}):Er.resolve({width:"",height:""})}},Hs=function(B){return function(T,w,A){return B.editorUpload.blobCache.create({blob:T,blobUri:w,name:T.name?T.name.replace(/\.[^\.]+$/,""):null,filename:T.name,base64:A.split(",")[1]})}},rs=function(B){return function(T){B.editorUpload.blobCache.add(T)}},Rc=function(B){return function(T){B.windowManager.alert(T)}},qr=function(B){return function(T){return ne(B,T)}},Ei=function(B){return function(T){return B.dom.parseStyle(T)}},Mc=function(B){return function(T,w){return B.dom.serializeStyle(T,w)}},Ou=function(B){return function(T){return ho(B).upload([T],!1).then(function(w){return w.length===0?Er.reject("Failed to upload image"):w[0].status===!1?Er.reject(w[0].error.message):w[0]})}},uo=function(B){var T={onSubmit:ko(B),imageSize:kr(B),addToBlobCache:rs(B),createBlobCache:Hs(B),alertErr:Rc(B),normalizeCss:qr(B),parseStyle:Ei(B),serializeStyle:Mc(B),uploadImage:Ou(B)},w=function(){qa(B).then(sa(T)).then(B.windowManager.open)};return{open:w}},Vs=function(B){B.addCommand("mceImage",uo(B).open),B.addCommand("mceUpdateImage",function(T,w){B.undoManager.transact(function(){return Ur(B,w)})})},je=function(B){var T=B.attr("class");return T&&/\bimage\b/.test(T)},lc=function(B){return function(T){for(var w=T.length,A=function(te){te.attr("contenteditable",B?"true":null)};w--;){var L=T[w];je(L)&&(L.attr("contenteditable",B?"false":null),ri.each(L.getAll("figcaption"),A))}}},so=function(B){B.on("PreInit",function(){B.parser.addNodeFilter("figure",lc(!0)),B.serializer.addNodeFilter("figure",lc(!1))})},pl=function(B){B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:uo(B).open,onSetup:function(T){return T.setActive(Ft(Ce(B))),B.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",T.setActive).unbind}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:uo(B).open}),B.ui.registry.addContextMenu("image",{update:function(T){return Ho(T)||qi(T)&&!Ie(T)?["image"]:[]}})};function Ss(){le.add("image",function(B){so(B),pl(B),Vs(B)})}Ss()})();(function(){var le=function(G){var de=G,De=function(){return de},Ke=function(zt){de=zt};return{get:De,set:Ke}},nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),ln=tinymce.util.Tools.resolve("tinymce.util.Tools"),Gt=function(G){var de=typeof G;return G===null?"null":de==="object"&&(Array.prototype.isPrototypeOf(G)||G.constructor&&G.constructor.name==="Array")?"array":de==="object"&&(String.prototype.isPrototypeOf(G)||G.constructor&&G.constructor.name==="String")?"string":de},dt=function(G){return function(de){return Gt(de)===G}},Qt=function(G){return function(de){return typeof de===G}},Sn=dt("array"),Mn=function(G){return G==null},pn=function(G){return!Mn(G)},Dr=Qt("function"),Bn=function(){},Ve=function(G){return function(){return G}},Ft=function(G){return G},xn=Ve(!1),ze=Ve(!0),ge=function(){return Tt},Tt=function(){var G=function(Ke){return Ke()},de=Ft,De={fold:function(Ke,zt){return Ke()},isSome:xn,isNone:ze,getOr:de,getOrThunk:G,getOrDie:function(Ke){throw new Error(Ke||"error: getOrDie called on none.")},getOrNull:Ve(null),getOrUndefined:Ve(void 0),or:de,orThunk:G,map:ge,each:Bn,bind:ge,exists:xn,forall:ze,filter:function(){return ge()},toArray:function(){return[]},toString:Ve("none()")};return De}(),Ze=function(G){var de=Ve(G),De=function(){return zt},Ke=function(nn){return nn(G)},zt={fold:function(nn,mn){return mn(G)},isSome:ze,isNone:xn,getOr:de,getOrThunk:de,getOrDie:de,getOrNull:de,getOrUndefined:de,or:De,orThunk:De,map:function(nn){return Ze(nn(G))},each:function(nn){nn(G)},bind:Ke,exists:Ke,forall:Ke,filter:function(nn){return nn(G)?zt:Tt},toArray:function(){return[G]},toString:function(){return"some("+G+")"}};return zt},qt=function(G){return G==null?Tt:Ze(G)},Z={some:Ze,none:ge,from:qt},Ne={},ke={exports:Ne};(function(G,de,De,Ke){(function(zt,nn){typeof de=="object"&&typeof De<"u"?De.exports=nn():typeof G=="function"&&G.amd?G(nn):(zt=typeof globalThis<"u"?globalThis:zt||self,zt.EphoxContactWrapper=nn())})(this,function(){var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xk<"u"?xk:typeof self<"u"?self:{},nn={exports:{}};(function(fe){(function(xe){var Pe=setTimeout;function Ye(){}function Yt(Tn,St){return function(){Tn.apply(St,arguments)}}function wn(Tn){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof Tn!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],To(Tn,this)}function zr(Tn,St){for(;Tn._state===3;)Tn=Tn._value;if(Tn._state===0){Tn._deferreds.push(St);return}Tn._handled=!0,wn._immediateFn(function(){var sa=Tn._state===1?St.onFulfilled:St.onRejected;if(sa===null){(Tn._state===1?or:aa)(St.promise,Tn._value);return}var ko;try{ko=sa(Tn._value)}catch(kr){aa(St.promise,kr);return}or(St.promise,ko)})}function or(Tn,St){try{if(St===Tn)throw new TypeError("A promise cannot be resolved with itself.");if(St&&(typeof St=="object"||typeof St=="function")){var sa=St.then;if(St instanceof wn){Tn._state=3,Tn._value=St,Da(Tn);return}else if(typeof sa=="function"){To(Yt(sa,St),Tn);return}}Tn._state=1,Tn._value=St,Da(Tn)}catch(ko){aa(Tn,ko)}}function aa(Tn,St){Tn._state=2,Tn._value=St,Da(Tn)}function Da(Tn){Tn._state===2&&Tn._deferreds.length===0&&wn._immediateFn(function(){Tn._handled||wn._unhandledRejectionFn(Tn._value)});for(var St=0,sa=Tn._deferreds.length;St<sa;St++)zr(Tn,Tn._deferreds[St]);Tn._deferreds=null}function Eu(Tn,St,sa){this.onFulfilled=typeof Tn=="function"?Tn:null,this.onRejected=typeof St=="function"?St:null,this.promise=sa}function To(Tn,St){var sa=!1;try{Tn(function(ko){sa||(sa=!0,or(St,ko))},function(ko){sa||(sa=!0,aa(St,ko))})}catch(ko){if(sa)return;sa=!0,aa(St,ko)}}wn.prototype.catch=function(Tn){return this.then(null,Tn)},wn.prototype.then=function(Tn,St){var sa=new this.constructor(Ye);return zr(this,new Eu(Tn,St,sa)),sa},wn.all=function(Tn){var St=Array.prototype.slice.call(Tn);return new wn(function(sa,ko){if(St.length===0)return sa([]);var kr=St.length;function Hs(Rc,qr){try{if(qr&&(typeof qr=="object"||typeof qr=="function")){var Ei=qr.then;if(typeof Ei=="function"){Ei.call(qr,function(Mc){Hs(Rc,Mc)},ko);return}}St[Rc]=qr,--kr===0&&sa(St)}catch(Mc){ko(Mc)}}for(var rs=0;rs<St.length;rs++)Hs(rs,St[rs])})},wn.resolve=function(Tn){return Tn&&typeof Tn=="object"&&Tn.constructor===wn?Tn:new wn(function(St){St(Tn)})},wn.reject=function(Tn){return new wn(function(St,sa){sa(Tn)})},wn.race=function(Tn){return new wn(function(St,sa){for(var ko=0,kr=Tn.length;ko<kr;ko++)Tn[ko].then(St,sa)})},wn._immediateFn=typeof setImmediate=="function"?function(Tn){setImmediate(Tn)}:function(Tn){Pe(Tn,0)},wn._unhandledRejectionFn=function(St){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",St)},wn._setImmediateFn=function(St){wn._immediateFn=St},wn._setUnhandledRejectionFn=function(St){wn._unhandledRejectionFn=St},fe.exports?fe.exports=wn:xe.Promise||(xe.Promise=wn)})(zt)})(nn);var mn=nn.exports,vr=function(){return typeof window<"u"?window:Function("return this;")()}(),V={boltExport:vr.Promise||mn};return V})})(void 0,Ne,ke);var Vt=ke.exports.boltExport,Kt=function(G,de){return We(document.createElement("canvas"),G,de)},ht=function(G){var de=Kt(G.width,G.height),De=$t(de);return De.drawImage(G,0,0),de},$t=function(G){return G.getContext("2d")},We=function(G,de,De){return G.width=de,G.height=De,G},ja=function(G){return G.naturalWidth||G.width},ve=function(G){return G.naturalHeight||G.height},Y=function(G){var de=G.src;return de.indexOf("data:")===0?Oa(de):Ea(de)},Pn=function(G){return new Vt(function(de,De){var Ke=URL.createObjectURL(G),zt=new Image,nn=function(){zt.removeEventListener("load",mn),zt.removeEventListener("error",vr)},mn=function(){nn(),de(zt)},vr=function(){nn(),De("Unable to load data of type "+G.type+": "+Ke)};zt.addEventListener("load",mn),zt.addEventListener("error",vr),zt.src=Ke,zt.complete&&setTimeout(mn,0)})},Ea=function(G){return new Vt(function(de,De){var Ke=new XMLHttpRequest;Ke.open("GET",G,!0),Ke.responseType="blob",Ke.onload=function(){this.status===200&&de(this.response)},Ke.onerror=function(){var zt=this,nn=function(){var vr=new Error("No access to download image");return vr.code=18,vr.name="SecurityError",vr},mn=function(){return new Error("Error "+zt.status+" downloading image")};De(this.status===0?nn():mn())},Ke.send()})},Mt=function(G){var de=G.split(","),De=/data:([^;]+)/.exec(de[0]);if(!De)return Z.none();for(var Ke=De[1],zt=de[1],nn=1024,mn=atob(zt),vr=mn.length,V=Math.ceil(vr/nn),fe=new Array(V),xe=0;xe<V;++xe){for(var Pe=xe*nn,Ye=Math.min(Pe+nn,vr),Yt=new Array(Ye-Pe),wn=Pe,zr=0;wn<Ye;++zr,++wn)Yt[zr]=mn[wn].charCodeAt(0);fe[xe]=new Uint8Array(Yt)}return Z.some(new Blob(fe,{type:Ke}))},Oa=function(G){return new Vt(function(de,De){Mt(G).fold(function(){De("uri is not base64: "+G)},de)})},Vr=function(G,de,De){return de=de||"image/png",Dr(HTMLCanvasElement.prototype.toBlob)?new Vt(function(Ke,zt){G.toBlob(function(nn){nn?Ke(nn):zt()},de,De)}):Oa(G.toDataURL(de,De))},R=function(G,de,De){return de=de||"image/png",G.toDataURL(de,De)},Aa=function(G){return Pn(G).then(function(de){jt(de);var De=Kt(ja(de),ve(de)),Ke=$t(De);return Ke.drawImage(de,0,0),De})},wt=function(G){return new Vt(function(de){var De=new FileReader;De.onloadend=function(){de(De.result)},De.readAsDataURL(G)})},jt=function(G){URL.revokeObjectURL(G.src)},go=function(G){return Pn(G)},Go=function(G){return Y(G)},nr=Array.prototype.indexOf,ba=function(G,de){return nr.call(G,de)},Q=function(G,de){return ba(G,de)>-1},Ja=function(G,de){for(var De=0,Ke=G.length;De<Ke;De++){var zt=G[De];de(zt,De)}},gt=function(G,de){for(var De=[],Ke=0,zt=G.length;Ke<zt;Ke++){var nn=G[Ke];de(nn,Ke)&&De.push(nn)}return De},Lt=function(G,de,De){return Ja(G,function(Ke,zt){De=de(De,Ke,zt)}),De},Ro=function(G,de,De){for(var Ke=0,zt=G.length;Ke<zt;Ke++){var nn=G[Ke];if(de(nn,Ke))return Z.some(nn);if(De(nn,Ke))break}return Z.none()},Er=function(G,de){return Ro(G,de,xn)},Nt=function(G,de){for(var De=0,Ke=G.length;De<Ke;++De){var zt=G[De];if(de(zt,De)!==!0)return!1}return!0},Dn=Object.keys,$n=function(G,de){for(var De=Dn(G),Ke=0,zt=De.length;Ke<zt;Ke++){var nn=De[Ke],mn=G[nn];de(mn,nn)}},pt=function(G){if(!Sn(G))throw new Error("cases must be an array");if(G.length===0)throw new Error("there must be at least one case");var de=[],De={};return Ja(G,function(Ke,zt){var nn=Dn(Ke);if(nn.length!==1)throw new Error("one and only one name per case");var mn=nn[0],vr=Ke[mn];if(De[mn]!==void 0)throw new Error("duplicate key detected:"+mn);if(mn==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn(vr))throw new Error("case arguments must be an array");de.push(mn),De[mn]=function(){for(var V=[],fe=0;fe<arguments.length;fe++)V[fe]=arguments[fe];var xe=V.length;if(xe!==vr.length)throw new Error("Wrong number of arguments to case "+mn+". Expected "+vr.length+" ("+vr+"), got "+xe);var Pe=function(Ye){var Yt=Dn(Ye);if(de.length!==Yt.length)throw new Error("Wrong number of arguments to match. Expected: "+de.join(",")+`
Actual: `+Yt.join(","));var wn=Nt(de,function(zr){return Q(Yt,zr)});if(!wn)throw new Error("Not all branches were specified when using match. Specified: "+Yt.join(", ")+`
Required: `+de.join(", "));return Ye[mn].apply(null,V)};return{fold:function(){for(var Ye=[],Yt=0;Yt<arguments.length;Yt++)Ye[Yt]=arguments[Yt];if(Ye.length!==G.length)throw new Error("Wrong number of arguments to fold. Expected "+G.length+", got "+Ye.length);var wn=Ye[zt];return wn.apply(null,V)},match:Pe,log:function(Ye){console.log(Ye,{constructors:de,constructor:mn,params:V})}}}}),De},lr={generate:pt};lr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Ra=function(G,de,De){var Ke=de.type,zt=Ve(Ke),nn=function(){return Vt.resolve(de)},mn=Ve(De),vr=function(){return De.split(",")[1]},V=function(Ye,Yt){return G.then(function(wn){return Vr(wn,Ye,Yt)})},fe=function(Ye,Yt){return G.then(function(wn){return R(wn,Ye,Yt)})},xe=function(Ye,Yt){return fe(Ye,Yt).then(function(wn){return wn.split(",")[1]})},Pe=function(){return G.then(ht)};return{getType:zt,toBlob:nn,toDataURL:mn,toBase64:vr,toAdjustedBlob:V,toAdjustedDataURL:fe,toAdjustedBase64:xe,toCanvas:Pe}},bn=function(G){return wt(G).then(function(de){return Ra(Aa(G),G,de)})},Yr=function(G,de){return Vr(G,de).then(function(De){return Ra(Vt.resolve(G),De,G.toDataURL())})},ta=function(G,de){de===void 0&&(de=2);var De=Math.pow(10,de),Ke=Math.round(G*De);return Math.ceil(Ke/De)},Nn=function(G,de){return G.toCanvas().then(function(De){return ya(De,G.getType(),de)})},ya=function(G,de,De){var Ke=De<0?360+De:De,zt=Ke*Math.PI/180,nn=G.width,mn=G.height,vr=Math.sin(zt),V=Math.cos(zt),fe=ta(Math.abs(nn*V)+Math.abs(mn*vr)),xe=ta(Math.abs(nn*vr)+Math.abs(mn*V)),Pe=Kt(fe,xe),Ye=$t(Pe);return Ye.translate(fe/2,xe/2),Ye.rotate(zt),Ye.drawImage(G,-nn/2,-mn/2),Yr(Pe,de)},qo=function(G,de){return G.toCanvas().then(function(De){return xi(De,G.getType(),de)})},xi=function(G,de,De){var Ke=Kt(G.width,G.height),zt=$t(Ke);return De==="v"?(zt.scale(1,-1),zt.drawImage(G,0,-Ke.height)):(zt.scale(-1,1),zt.drawImage(G,-Ke.width,0)),Yr(Ke,de)},fi=function(G,de){return qo(G,de)},ni=function(G,de){return Nn(G,de)},io=function(G,de,De){return De===void 0&&(De=!1),new Vt(function(Ke){var zt=new XMLHttpRequest;zt.onreadystatechange=function(){zt.readyState===4&&Ke({status:zt.status,blob:zt.response})},zt.open("GET",G,!0),zt.withCredentials=De,$n(de,function(nn,mn){zt.setRequestHeader(mn,nn)}),zt.responseType="blob",zt.send()})},Ti=function(G){return new Vt(function(de,De){var Ke=new FileReader;Ke.onload=function(){de(Ke.result)},Ke.onerror=function(zt){De(zt)},Ke.readAsText(G)})},Co=function(G){try{return Z.some(JSON.parse(G))}catch{return Z.none()}},ra=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],Qr=[{type:"not_found",message:"Failed to load image."},{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],Ga=function(G,de){var De=Lt(de,function(Ke,zt){return pn(Ke)?Ke[zt]:void 0},G);return Z.from(De)},na=function(G,de){return(de==null?void 0:de.type)==="application/json"&&(G===400||G===403||G===404||G===500)},Pr=function(G){var de=Er(ra,function(De){return G===De.code}).fold(Ve("Unknown ImageProxy error"),function(De){return De.message});return"ImageProxy HTTP error: "+de},Ie=function(G){var de=Pr(G);return Vt.reject(de)},Xt=function(G){return Er(Qr,function(de){return de.type===G}).fold(Ve("Unknown service error"),function(de){return de.message})},sn=function(G){var de=Co(G),De=de.bind(function(Ke){return Ga(Ke,["error","type"]).map(Xt)}).getOr("Invalid JSON in service error message");return"ImageProxy Service error: "+De},Zt=function(G){return Ti(G).then(function(de){var De=sn(de);return Vt.reject(De)})},Or=function(G,de){return na(G,de)?Zt(de):Ie(G)},Nr=function(G,de){var De=G.indexOf("?")===-1?"?":"&";return/[?&]apiKey=/.test(G)?G:G+De+"apiKey="+encodeURIComponent(de)},Ia=function(G){return G<200||G>=300},yn=function(G,de){var De={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":de};return io(Nr(G,de),De).then(function(Ke){return Ia(Ke.status)?Or(Ke.status,Ke.blob):Vt.resolve(Ke.blob)})},Ar=function(G,de){return io(G,{},de).then(function(De){return Ia(De.status)?Ie(De.status):Vt.resolve(De.blob)})},wa=function(G,de,De){return De===void 0&&(De=!1),de?yn(G,de):Ar(G,De)},Mo=function(G){return bn(G)},ji=1,Ir=function(G,de){var De=de||document,Ke=De.createElement("div");if(Ke.innerHTML=G,!Ke.hasChildNodes()||Ke.childNodes.length>1)throw console.error("HTML does not have a single root node",G),new Error("HTML must have a single root node");return vi(Ke.childNodes[0])},fr=function(G,de){var De=de||document,Ke=De.createElement(G);return vi(Ke)},So=function(G,de){var De=de||document,Ke=De.createTextNode(G);return vi(Ke)},vi=function(G){if(G==null)throw new Error("Node cannot be null or undefined");return{dom:G}},Lo=function(G,de,De){return Z.from(G.dom.elementFromPoint(de,De)).map(vi)},xo={fromHtml:Ir,fromTag:fr,fromText:So,fromDom:vi,fromPoint:Lo},Ko=function(G,de){var De=G.dom;if(De.nodeType!==ji)return!1;var Ke=De;if(Ke.matches!==void 0)return Ke.matches(de);if(Ke.msMatchesSelector!==void 0)return Ke.msMatchesSelector(de);if(Ke.webkitMatchesSelector!==void 0)return Ke.webkitMatchesSelector(de);if(Ke.mozMatchesSelector!==void 0)return Ke.mozMatchesSelector(de);throw new Error("Browser lacks native selectors")};typeof window<"u"||Function("return this;")();var Gi=function(G,de){var De=function(zt){return de(xo.fromDom(zt))},Ke=Er(G.dom.childNodes,De);return Ke.map(xo.fromDom)},di=function(G,de){return Gi(G,function(De){return Ko(De,de)})},Ho=tinymce.util.Tools.resolve("tinymce.util.Delay"),qi=tinymce.util.Tools.resolve("tinymce.util.Promise"),$r=tinymce.util.Tools.resolve("tinymce.util.URI"),mi=function(G){return G.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions")},kn=function(G){return G.getParam("imagetools_proxy")},Ju=function(G){return G.getParam("imagetools_cors_hosts",[],"string[]")},Xo=function(G){return G.getParam("imagetools_credentials_hosts",[],"string[]")},ki=function(G){return Z.from(G.getParam("imagetools_fetch_image",null,"function"))},Yo=function(G){return G.getParam("api_key",G.getParam("imagetools_api_key","","string"),"string")},Fi=function(G){return G.getParam("images_upload_timeout",3e4,"number")},Lu=function(G){return G.getParam("images_reuse_filename",!1,"boolean")},gi=function(G){var de,De,Ke=function(zt){return/^[0-9\.]+px$/.test(zt)};return de=G.style.width,De=G.style.height,de||De?Ke(de)&&Ke(De)?{w:parseInt(de,10),h:parseInt(De,10)}:null:(de=G.width,De=G.height,de&&De?{w:parseInt(de,10),h:parseInt(De,10)}:null)},Zu=function(G,de){var De,Ke;de&&(De=G.style.width,Ke=G.style.height,(De||Ke)&&(G.style.width=de.w+"px",G.style.height=de.h+"px",G.removeAttribute("data-mce-style")),De=G.width,Ke=G.height,(De||Ke)&&(G.setAttribute("width",String(de.w)),G.setAttribute("height",String(de.h))))},ne=function(G){return{w:G.naturalWidth,h:G.naturalHeight}},Ce=0,ie=function(G){return di(xo.fromDom(G),"img")},Re=function(G,de){return G.dom.is(de,"figure")},_t=function(G,de){return G.dom.is(de,"img:not([data-mce-object],[data-mce-placeholder])")},en=function(G,de){var De=function(Ke){return _t(G,Ke)&&(xr(G,Ke)||Ma(G,Ke)||pn(kn(G)))};return Re(G,de)?ie(de).bind(function(Ke){return De(Ke.dom)?Z.some(Ke.dom):Z.none()}):De(de)?Z.some(de):Z.none()},Wn=function(G,de){G.notificationManager.open({text:de,type:"error"})},Kn=function(G){var de=G.selection.getNode(),De=G.dom.getParent(de,"figure.image");return De!==null&&Re(G,De)?ie(De):_t(G,de)?Z.some(xo.fromDom(de)):Z.none()},_r=function(G,de,De){var Ke=de.match(/(?:\/|^)(([^\/\?]+)\.(?:[a-z0-9.]+))(?:\?|$)/i);return pn(Ke)?G.dom.encode(Ke[De]):null},Ur=function(){return"imagetools"+Ce++},xr=function(G,de){var De=de.src;return De.indexOf("data:")===0||De.indexOf("blob:")===0||new $r(De).host===G.documentBaseURI.host},Ma=function(G,de){return ln.inArray(Ju(G),new $r(de.src).host)!==-1},Ba=function(G,de){return ln.inArray(Xo(G),new $r(de.src).host)!==-1},Ki=function(G,de){if(Ma(G,de))return wa(de.src,null,Ba(G,de));if(!xr(G,de)){var De=kn(G),Ke=De+(De.indexOf("?")===-1?"?":"&")+"url="+encodeURIComponent(de.src),zt=Yo(G);return wa(Ke,zt,!1)}return Go(de)},ho=function(G,de){return ki(G).fold(function(){return Ki(G,de)},function(De){return De(de)})},ri=function(G,de){var De=G.editorUpload.blobCache.getByUri(de.src);return De?qi.resolve(De.blob()):ho(G,de)},lu=function(G,de){var De=Ho.setEditorTimeout(G,function(){G.editorUpload.uploadImagesAuto()},Fi(G));de.set(De)},Pa=function(G){Ho.clearTimeout(G.get())},$a=function(G,de,De,Ke,zt,nn,mn){return De.toBlob().then(function(vr){var V,fe,xe,Pe,Ye=G.editorUpload.blobCache;V=nn.src;var Yt=de.type===vr.type;return Lu(G)&&(Pe=Ye.getByUri(V),pn(Pe)?(V=Pe.uri(),fe=Pe.name(),xe=Pe.filename()):(fe=_r(G,V,2),xe=_r(G,V,1))),Pe=Ye.create({id:Ur(),blob:vr,base64:De.toBase64(),uri:V,name:fe,filename:Yt?xe:void 0}),Ye.add(Pe),G.undoManager.transact(function(){var wn=function(){G.$(nn).off("load",wn),G.nodeChanged(),Ke?G.editorUpload.uploadImagesAuto():(Pa(zt),lu(G,zt))};G.$(nn).on("load",wn),mn&&G.$(nn).attr({width:mn.w,height:mn.h}),G.$(nn).attr({src:Pe.blobUri()}).removeAttr("data-mce-src")}),Pe})},lt=function(G,de,De,Ke){return function(){var zt=Kn(G);return zt.fold(function(){Wn(G,"Could not find selected image")},function(nn){return G._scanForImages().then(function(){return ri(G,nn.dom)}).then(function(mn){return Mo(mn).then(De).then(function(vr){return $a(G,mn,vr,!1,de,nn.dom,Ke)})}).catch(function(mn){Wn(G,mn)})})}},no=function(G,de,De){return function(){var Ke=Kn(G),zt=Ke.map(function(nn){var mn=gi(nn.dom);return mn?{w:mn.h,h:mn.w}:null}).getOrNull();return lt(G,de,function(nn){return ni(nn,De)},zt)()}},Xi=function(G,de,De){return function(){return lt(G,de,function(Ke){return fi(Ke,De)})()}},Qu=function(G,de,De,Ke,zt){return go(zt).then(function(nn){var mn=ne(nn);return(Ke.w!==mn.w||Ke.h!==mn.h)&&gi(De)&&Zu(De,mn),URL.revokeObjectURL(nn.src),zt}).then(Mo).then(function(nn){return $a(G,zt,nn,!0,de,De)})},es="save-state",Tr="disable",Cs="enable",Yi=function(G){return{blob:G,url:URL.createObjectURL(G)}},qa=function(G,de){return function(){var De=function(nn){return{title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:nn}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(mn){var vr=mn.getData().imagetools.blob;Ke.each(function(V){zt.each(function(fe){Qu(G,de,V.dom,fe,vr)})}),mn.close()},onCancel:Bn,onAction:function(mn,vr){switch(vr.name){case es:vr.value?mn.enable("save"):mn.disable("save");break;case Tr:mn.disable("save"),mn.disable("cancel");break;case Cs:mn.enable("cancel");break}}}},Ke=Kn(G),zt=Ke.map(function(nn){return ne(nn.dom)});Ke.each(function(nn){en(G,nn.dom).each(function(mn){ri(G,nn.dom).then(function(vr){var V=Yi(vr);G.windowManager.open(De(V))})})})}},ts=function(G,de){ln.each({mceImageRotateLeft:no(G,de,-90),mceImageRotateRight:no(G,de,90),mceImageFlipVertical:Xi(G,de,"v"),mceImageFlipHorizontal:Xi(G,de,"h"),mceEditImage:qa(G,de)},function(De,Ke){G.addCommand(Ke,De)})},ai=function(G,de,De){G.on("NodeChange",function(Ke){var zt=De.get(),nn=en(G,Ke.element);zt&&!nn.exists(function(mn){return zt.src===mn.src})&&(Pa(de),G.editorUpload.uploadImagesAuto(),De.set(null)),nn.each(De.set)})},hi=function(G){var de=[],De=function(nn){return function(){return G.execCommand(nn)}},Ke=function(){return Kn(G).exists(function(nn){return en(G,nn.dom).isSome()})},zt=function(nn){var mn=function(vr){return nn.setDisabled(!vr)};return mn(Ke()),de=de.concat([mn]),function(){de=gt(de,function(vr){return vr!==mn})}};G.on("NodeChange",function(){var nn=Ke();Ja(de,function(mn){return mn(nn)})}),G.ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:De("mceImageRotateLeft"),onSetup:zt}),G.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:De("mceImageRotateRight"),onSetup:zt}),G.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:De("mceImageFlipVertical"),onSetup:zt}),G.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:De("mceImageFlipHorizontal"),onSetup:zt}),G.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:De("mceEditImage"),onSetup:zt}),G.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image",onAction:De("mceImage")}),G.ui.registry.addContextMenu("imagetools",{update:function(nn){return en(G,nn).map(function(mn){return{text:"Edit image",icon:"edit-image",onAction:De("mceEditImage")}}).toArray()}})},ga=function(G){G.ui.registry.addContextToolbar("imagetools",{items:mi(G),predicate:function(de){return en(G,de).isSome()},position:"node",scope:"node"})};function ns(){nt.add("imagetools",function(G){var de=le(0),De=le(null);ts(G,de),hi(G),ga(G),ai(G,de,De)})}ns()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(Z){return Z.getParam("insertdatetime_dateformat",Z.translate("%Y-%m-%d"))},ln=function(Z){return Z.getParam("insertdatetime_timeformat",Z.translate("%H:%M:%S"))},Gt=function(Z){return Z.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},dt=function(Z){var Ne=Gt(Z);return Ne.length>0?Ne[0]:ln(Z)},Qt=function(Z){return Z.getParam("insertdatetime_element",!1)},Sn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Mn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),pn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Dr="January February March April May June July August September October November December".split(" "),Bn=function(Z,Ne){if(Z=""+Z,Z.length<Ne)for(var ke=0;ke<Ne-Z.length;ke++)Z="0"+Z;return Z},Ve=function(Z,Ne,ke){return ke===void 0&&(ke=new Date),Ne=Ne.replace("%D","%m/%d/%Y"),Ne=Ne.replace("%r","%I:%M:%S %p"),Ne=Ne.replace("%Y",""+ke.getFullYear()),Ne=Ne.replace("%y",""+ke.getYear()),Ne=Ne.replace("%m",Bn(ke.getMonth()+1,2)),Ne=Ne.replace("%d",Bn(ke.getDate(),2)),Ne=Ne.replace("%H",""+Bn(ke.getHours(),2)),Ne=Ne.replace("%M",""+Bn(ke.getMinutes(),2)),Ne=Ne.replace("%S",""+Bn(ke.getSeconds(),2)),Ne=Ne.replace("%I",""+((ke.getHours()+11)%12+1)),Ne=Ne.replace("%p",ke.getHours()<12?"AM":"PM"),Ne=Ne.replace("%B",""+Z.translate(Dr[ke.getMonth()])),Ne=Ne.replace("%b",""+Z.translate(pn[ke.getMonth()])),Ne=Ne.replace("%A",""+Z.translate(Mn[ke.getDay()])),Ne=Ne.replace("%a",""+Z.translate(Sn[ke.getDay()])),Ne=Ne.replace("%%","%"),Ne},Ft=function(Z,Ne,ke,Vt){var Kt=Z.dom.create("time",{datetime:ke},Vt);Ne.parentNode.insertBefore(Kt,Ne),Z.dom.remove(Ne),Z.selection.select(Kt,!0),Z.selection.collapse(!1)},xn=function(Z,Ne){if(Qt(Z)){var ke=Ve(Z,Ne),Vt=void 0;/%[HMSIp]/.test(Ne)?Vt=Ve(Z,"%Y-%m-%dT%H:%M"):Vt=Ve(Z,"%Y-%m-%d");var Kt=Z.dom.getParent(Z.selection.getStart(),"time");Kt?Ft(Z,Kt,Vt,ke):Z.insertContent('<time datetime="'+Vt+'">'+ke+"</time>")}else Z.insertContent(Ve(Z,Ne))},ze=function(Z){Z.addCommand("mceInsertDate",function(Ne,ke){xn(Z,ke??nt(Z))}),Z.addCommand("mceInsertTime",function(Ne,ke){xn(Z,ke??ln(Z))})},ge=function(Z){var Ne=Z,ke=function(){return Ne},Vt=function(Kt){Ne=Kt};return{get:ke,set:Vt}},Tt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ze=function(Z){var Ne=Gt(Z),ke=ge(dt(Z)),Vt=function(ht){return Z.execCommand("mceInsertDate",!1,ht)};Z.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(ht){return ht===ke.get()},fetch:function(ht){ht(Tt.map(Ne,function($t){return{type:"choiceitem",text:Ve(Z,$t),value:$t}}))},onAction:function(ht){Vt(ke.get())},onItemAction:function(ht,$t){ke.set($t),Vt($t)}});var Kt=function(ht){return function(){ke.set(ht),Vt(ht)}};Z.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return Tt.map(Ne,function(ht){return{type:"menuitem",text:Ve(Z,ht),onAction:Kt(ht)}})}})};function qt(){le.add("insertdatetime",function(Z){ze(Z),Ze(Z)})}qt()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=tinymce.util.Tools.resolve("tinymce.util.VK"),ln=function(V){var fe=typeof V;return V===null?"null":fe==="object"&&(Array.prototype.isPrototypeOf(V)||V.constructor&&V.constructor.name==="Array")?"array":fe==="object"&&(String.prototype.isPrototypeOf(V)||V.constructor&&V.constructor.name==="String")?"string":fe},Gt=function(V){return function(fe){return ln(fe)===V}},dt=function(V){return function(fe){return typeof fe===V}},Qt=function(V){return function(fe){return V===fe}},Sn=Gt("string"),Mn=Gt("array"),pn=Qt(null),Dr=dt("boolean"),Bn=dt("function"),Ve=function(){},Ft=function(V){return function(){return V}},xn=function(V){return V},ze=function(V,fe){return V===fe},ge=Ft(!1),Tt=Ft(!0),Ze=function(){return qt},qt=function(){var V=function(Pe){return Pe()},fe=xn,xe={fold:function(Pe,Ye){return Pe()},isSome:ge,isNone:Tt,getOr:fe,getOrThunk:V,getOrDie:function(Pe){throw new Error(Pe||"error: getOrDie called on none.")},getOrNull:Ft(null),getOrUndefined:Ft(void 0),or:fe,orThunk:V,map:Ze,each:Ve,bind:Ze,exists:ge,forall:Tt,filter:function(){return Ze()},toArray:function(){return[]},toString:Ft("none()")};return xe}(),Z=function(V){var fe=Ft(V),xe=function(){return Ye},Pe=function(Yt){return Yt(V)},Ye={fold:function(Yt,wn){return wn(V)},isSome:Tt,isNone:ge,getOr:fe,getOrThunk:fe,getOrDie:fe,getOrNull:fe,getOrUndefined:fe,or:xe,orThunk:xe,map:function(Yt){return Z(Yt(V))},each:function(Yt){Yt(V)},bind:Pe,exists:Pe,forall:Pe,filter:function(Yt){return Yt(V)?Ye:qt},toArray:function(){return[V]},toString:function(){return"some("+V+")"}};return Ye},Ne=function(V){return V==null?qt:Z(V)},ke={some:Z,none:Ze,from:Ne},Vt=Array.prototype.indexOf,Kt=Array.prototype.push,ht=function(V,fe){return Vt.call(V,fe)},$t=function(V,fe){return ht(V,fe)>-1},We=function(V,fe){for(var xe=V.length,Pe=new Array(xe),Ye=0;Ye<xe;Ye++){var Yt=V[Ye];Pe[Ye]=fe(Yt,Ye)}return Pe},ja=function(V,fe){for(var xe=0,Pe=V.length;xe<Pe;xe++){var Ye=V[xe];fe(Ye,xe)}},ve=function(V,fe,xe){return ja(V,function(Pe,Ye){xe=fe(xe,Pe,Ye)}),xe},Y=function(V){for(var fe=[],xe=0,Pe=V.length;xe<Pe;++xe){if(!Mn(V[xe]))throw new Error("Arr.flatten item "+xe+" was not an array, input: "+V);Kt.apply(fe,V[xe])}return fe},Pn=function(V,fe){return Y(We(V,fe))},Ea=function(V,fe){for(var xe=0;xe<V.length;xe++){var Pe=fe(V[xe],xe);if(Pe.isSome())return Pe}return ke.none()},Mt=function(V,fe,xe){return xe===void 0&&(xe=ze),V.exists(function(Pe){return xe(Pe,fe)})},Oa=function(V){for(var fe=[],xe=function(Ye){fe.push(Ye)},Pe=0;Pe<V.length;Pe++)V[Pe].each(xe);return fe},Vr=function(V,fe){return V?ke.some(fe):ke.none()},R=function(V){var fe=V.getParam("link_assume_external_targets",!1);return Dr(fe)&&fe?1:Sn(fe)&&(fe==="http"||fe==="https")?fe:0},Aa=function(V){return V.getParam("link_context_toolbar",!1,"boolean")},wt=function(V){return V.getParam("link_list")},jt=function(V){return V.getParam("default_link_target")},go=function(V){return V.getParam("target_list",!0)},Go=function(V){return V.getParam("rel_list",[],"array")},nr=function(V){return V.getParam("link_class_list",[],"array")},ba=function(V){return V.getParam("link_title",!0,"boolean")},Q=function(V){return V.getParam("allow_unsafe_link_target",!1,"boolean")},Ja=function(V){return V.getParam("link_quicklink",!1,"boolean")},gt=function(V){return V.getParam("link_default_protocol","http","string")},Lt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ro=function(V){return Sn(V.value)?V.value:""},Er=function(V){return Sn(V.text)?V.text:Sn(V.title)?V.title:""},Nt=function(V,fe){var xe=[];return Lt.each(V,function(Pe){var Ye=Er(Pe);if(Pe.menu!==void 0){var Yt=Nt(Pe.menu,fe);xe.push({text:Ye,items:Yt})}else{var wn=fe(Pe);xe.push({text:Ye,value:wn})}}),xe},Dn=function(V){return V===void 0&&(V=Ro),function(fe){return ke.from(fe).map(function(xe){return Nt(xe,V)})}},$n=function(V){return Dn(Ro)(V)},pt=function(V,fe){return function(xe){return{name:V,type:"listbox",label:fe,items:xe}}},lr={sanitize:$n,sanitizeWith:Dn,createUi:pt,getValue:Ro},Ra=function(){return Ra=Object.assign||function(fe){for(var xe,Pe=1,Ye=arguments.length;Pe<Ye;Pe++){xe=arguments[Pe];for(var Yt in xe)Object.prototype.hasOwnProperty.call(xe,Yt)&&(fe[Yt]=xe[Yt])}return fe},Ra.apply(this,arguments)},bn=Object.keys,Yr=Object.hasOwnProperty,ta=function(V,fe){for(var xe=bn(V),Pe=0,Ye=xe.length;Pe<Ye;Pe++){var Yt=xe[Pe],wn=V[Yt];fe(wn,Yt)}},Nn=function(V){return function(fe,xe){V[xe]=fe}},ya=function(V,fe,xe,Pe){var Ye={};return ta(V,function(Yt,wn){(fe(Yt,wn)?xe:Pe)(Yt,wn)}),Ye},qo=function(V,fe){var xe={};return ya(V,fe,Nn(xe),Ve),xe},xi=function(V,fe){return Yr.call(V,fe)},fi=function(V,fe){return xi(V,fe)&&V[fe]!==void 0&&V[fe]!==null},ni=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),io=tinymce.util.Tools.resolve("tinymce.util.URI"),Ti=function(V){return V&&V.nodeName.toLowerCase()==="a"},Co=function(V){return Ti(V)&&!!Ga(V)},ra=function(V,fe){if(V.collapsed)return[];var xe=V.cloneContents(),Pe=new ni(xe.firstChild,xe),Ye=[],Yt=xe.firstChild;do fe(Yt)&&Ye.push(Yt);while(Yt=Pe.next());return Ye},Qr=function(V){return/^\w+:/i.test(V)},Ga=function(V){var fe=V.getAttribute("data-mce-href");return fe||V.getAttribute("href")},na=function(V,fe){var xe=["noopener"],Pe=V?V.split(/\s+/):[],Ye=function(or){return Lt.trim(or.sort().join(" "))},Yt=function(or){return or=wn(or),or.length>0?or.concat(xe):xe},wn=function(or){return or.filter(function(aa){return Lt.inArray(xe,aa)===-1})},zr=fe?Yt(Pe):wn(Pe);return zr.length>0?Ye(zr):""},Pr=function(V){return V.replace(/\uFEFF/g,"")},Ie=function(V,fe){return fe=fe||V.selection.getNode(),Nr(fe)?V.dom.select("a[href]",fe)[0]:V.dom.getParent(fe,"a[href]")},Xt=function(V,fe){var xe=fe?fe.innerText||fe.textContent:V.getContent({format:"text"});return Pr(xe)},sn=function(V){return Lt.grep(V,Co).length>0},Zt=function(V){return ra(V,Co).length>0},Or=function(V){var fe=V.schema.getTextInlineElements(),xe=function(Ye){return Ye.nodeType===1&&!Ti(Ye)&&!xi(fe,Ye.nodeName.toLowerCase())},Pe=ra(V.selection.getRng(),xe);return Pe.length===0},Nr=function(V){return V&&V.nodeName==="FIGURE"&&/\bimage\b/i.test(V.className)},Ia=function(V){var fe=["title","rel","class","target"];return ve(fe,function(xe,Pe){return V[Pe].each(function(Ye){xe[Pe]=Ye.length>0?Ye:null}),xe},{href:V.href})},yn=function(V,fe){return(fe==="http"||fe==="https")&&!Qr(V)?fe+"://"+V:V},Ar=function(V,fe){var xe=Ra({},fe);if(!(Go(V).length>0)&&Q(V)===!1){var Pe=na(xe.rel,xe.target==="_blank");xe.rel=Pe||null}return ke.from(xe.target).isNone()&&go(V)===!1&&(xe.target=jt(V)),xe.href=yn(xe.href,R(V)),xe},wa=function(V,fe,xe,Pe){xe.each(function(Ye){xi(fe,"innerText")?fe.innerText=Ye:fe.textContent=Ye}),V.dom.setAttribs(fe,Pe),V.selection.select(fe)},Mo=function(V,fe,xe,Pe){Nr(fe)?Gi(V,fe,Pe):xe.fold(function(){V.execCommand("mceInsertLink",!1,Pe)},function(Ye){V.insertContent(V.dom.createHTML("a",Pe,V.dom.encode(Ye)))})},ji=function(V,fe,xe){var Pe=V.selection.getNode(),Ye=Ie(V,Pe),Yt=Ar(V,Ia(xe));V.undoManager.transact(function(){xe.href===fe.href&&fe.attach(),Ye?(V.focus(),wa(V,Ye,xe.text,Yt)):Mo(V,Pe,xe.text,Yt)})},Ir=function(V){var fe=V.dom,xe=V.selection,Pe=xe.getBookmark(),Ye=xe.getRng().cloneRange(),Yt=fe.getParent(Ye.startContainer,"a[href]",V.getBody()),wn=fe.getParent(Ye.endContainer,"a[href]",V.getBody());Yt&&Ye.setStartBefore(Yt),wn&&Ye.setEndAfter(wn),xe.setRng(Ye),V.execCommand("unlink"),xe.moveToBookmark(Pe)},fr=function(V){V.undoManager.transact(function(){var fe=V.selection.getNode();Nr(fe)?Ko(V,fe):Ir(V),V.focus()})},So=function(V){var fe=V.class,xe=V.href,Pe=V.rel,Ye=V.target,Yt=V.text,wn=V.title;return qo({class:fe.getOrNull(),href:xe,rel:Pe.getOrNull(),target:Ye.getOrNull(),text:Yt.getOrNull(),title:wn.getOrNull()},function(zr,or){return pn(zr)===!1})},vi=function(V,fe){var xe=fe.href;return Ra(Ra({},fe),{href:io.isDomSafe(xe,"a",V.settings)?xe:""})},Lo=function(V,fe,xe){var Pe=vi(V,xe);V.hasPlugin("rtc",!0)?V.execCommand("createlink",!1,So(Pe)):ji(V,fe,Pe)},xo=function(V){V.hasPlugin("rtc",!0)?V.execCommand("unlink"):fr(V)},Ko=function(V,fe){var xe=V.dom.select("img",fe)[0];if(xe){var Pe=V.dom.getParents(xe,"a[href]",fe)[0];Pe&&(Pe.parentNode.insertBefore(xe,Pe),V.dom.remove(Pe))}},Gi=function(V,fe,xe){var Pe=V.dom.select("img",fe)[0];if(Pe){var Ye=V.dom.create("a",xe);Pe.parentNode.insertBefore(Ye,Pe),Ye.appendChild(Pe)}},di=function(V){return fi(V,"items")},Ho=function(V,fe){return Ea(fe,function(xe){return di(xe)?Ho(V,xe.items):Vr(xe.value===V,xe)})},qi=function(V,fe,xe,Pe){var Ye=Pe[fe],Yt=V.length>0;return Ye!==void 0?Ho(Ye,xe).map(function(wn){return{url:{value:wn.value,meta:{text:Yt?V:wn.text,attach:Ve}},text:Yt?V:wn.text}}):ke.none()},$r=function(V,fe){return fe==="link"?V.link:fe==="anchor"?V.anchor:ke.none()},mi=function(V,fe){var xe={text:V.text,title:V.title},Pe=function(or){return Vr(xe.title.length<=0,ke.from(or.meta.title).getOr(""))},Ye=function(or){return Vr(xe.text.length<=0,ke.from(or.meta.text).getOr(or.value))},Yt=function(or){var aa=Ye(or.url),Da=Pe(or.url);return aa.isSome()||Da.isSome()?ke.some(Ra(Ra({},aa.map(function(Eu){return{text:Eu}}).getOr({})),Da.map(function(Eu){return{title:Eu}}).getOr({}))):ke.none()},wn=function(or,aa){var Da=$r(fe,aa.name).getOr([]);return qi(xe.text,aa.name,Da,or)},zr=function(or,aa){var Da=aa.name;return Da==="url"?Yt(or()):$t(["anchor","link"],Da)?wn(or(),aa):((Da==="text"||Da==="title")&&(xe[Da]=or()[Da]),ke.none())};return{onChange:zr}},kn={init:mi,getDelta:qi},Ju=tinymce.util.Tools.resolve("tinymce.util.Delay"),Xo=tinymce.util.Tools.resolve("tinymce.util.Promise"),ki=function(V,fe,xe){var Pe=V.selection.getRng();Ju.setEditorTimeout(V,function(){V.windowManager.confirm(fe,function(Ye){V.selection.setRng(Pe),xe(Ye)})})},Yo=function(V){var fe=V.href,xe=fe.indexOf("@")>0&&fe.indexOf("/")===-1&&fe.indexOf("mailto:")===-1;return xe?ke.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(Pe){return Ra(Ra({},Pe),{href:"mailto:"+fe})}}):ke.none()},Fi=function(V,fe){return function(xe){var Pe=xe.href,Ye=V===1&&!Qr(Pe)||V===0&&/^\s*www(\.|\d\.)/i.test(Pe);return Ye?ke.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+fe+":// prefix?",preprocess:function(Yt){return Ra(Ra({},Yt),{href:fe+"://"+Pe})}}):ke.none()}},Lu=function(V,fe){return Ea([Yo,Fi(R(V),gt(V))],function(xe){return xe(fe)}).fold(function(){return Xo.resolve(fe)},function(xe){return new Xo(function(Pe){ki(V,xe.message,function(Ye){Pe(Ye?xe.preprocess(fe):fe)})})})},gi={preprocess:Lu},Zu=function(V){var fe=V.dom.select("a:not([href])"),xe=Pn(fe,function(Pe){var Ye=Pe.name||Pe.id;return Ye?[{text:Ye,value:"#"+Ye}]:[]});return xe.length>0?ke.some([{text:"None",value:""}].concat(xe)):ke.none()},ne={getAnchors:Zu},Ce=function(V){var fe=nr(V);return fe.length>0?lr.sanitize(fe):ke.none()},ie={getClasses:Ce},Re=tinymce.util.Tools.resolve("tinymce.util.XHR"),_t=function(V){try{return ke.some(JSON.parse(V))}catch{return ke.none()}},en=function(V){var fe=function(Pe){return V.convertURL(Pe.value||Pe.url,"href")},xe=wt(V);return new Xo(function(Pe){Sn(xe)?Re.send({url:xe,success:function(Ye){return Pe(_t(Ye))},error:function(Ye){return Pe(ke.none())}}):Bn(xe)?xe(function(Ye){return Pe(ke.some(Ye))}):Pe(ke.from(xe))}).then(function(Pe){return Pe.bind(lr.sanitizeWith(fe)).map(function(Ye){if(Ye.length>0){var Yt=[{text:"None",value:""}];return Yt.concat(Ye)}else return Ye})})},Wn={getLinks:en},Kn=function(V,fe){var xe=Go(V);if(xe.length>0){var Pe=Mt(fe,"_blank"),Ye=Q(V)===!1,Yt=function(zr){return na(lr.getValue(zr),Pe)},wn=Ye?lr.sanitizeWith(Yt):lr.sanitize;return wn(xe)}return ke.none()},_r={getRels:Kn},Ur=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],xr=function(V){var fe=go(V);return Mn(fe)?lr.sanitize(fe).orThunk(function(){return ke.some(Ur)}):fe===!1?ke.none():ke.some(Ur)},Ma={getTargets:xr},Ba=function(V,fe,xe){var Pe=V.getAttrib(fe,xe);return Pe!==null&&Pe.length>0?ke.some(Pe):ke.none()},Ki=function(V,fe){var xe=V.dom,Pe=Or(V),Ye=Pe?ke.some(Xt(V.selection,fe)):ke.none(),Yt=fe?ke.some(xe.getAttrib(fe,"href")):ke.none(),wn=fe?ke.from(xe.getAttrib(fe,"target")):ke.none(),zr=Ba(xe,fe,"rel"),or=Ba(xe,fe,"class"),aa=Ba(xe,fe,"title");return{url:Yt,text:Ye,title:aa,target:wn,rel:zr,linkClass:or}},ho=function(V,fe){return Wn.getLinks(V).then(function(xe){var Pe=Ki(V,fe);return{anchor:Pe,catalogs:{targets:Ma.getTargets(V),rels:_r.getRels(V,Pe.target),classes:ie.getClasses(V),anchor:ne.getAnchors(V),link:xe},optNode:ke.from(fe),flags:{titleEnabled:ba(V)}}})},ri={collect:ho},lu=function(V,fe){return function(xe){var Pe=xe.getData();if(!Pe.url.value){xo(V),xe.close();return}var Ye=function(zr){return ke.from(Pe[zr]).filter(function(or){return!Mt(fe.anchor[zr],or)})},Yt={href:Pe.url.value,text:Ye("text"),target:Ye("target"),rel:Ye("rel"),class:Ye("linkClass"),title:Ye("title")},wn={href:Pe.url.value,attach:Pe.url.meta!==void 0&&Pe.url.meta.attach?Pe.url.meta.attach:Ve};gi.preprocess(V,Yt).then(function(zr){Lo(V,wn,zr)}),xe.close()}},Pa=function(V){var fe=Ie(V);return ri.collect(V,fe)},$a=function(V,fe){var xe=V.anchor,Pe=xe.url.getOr("");return{url:{value:Pe,meta:{original:{value:Pe}}},text:xe.text.getOr(""),title:xe.title.getOr(""),anchor:Pe,link:Pe,rel:xe.rel.getOr(""),target:xe.target.or(fe).getOr(""),linkClass:xe.linkClass.getOr("")}},lt=function(V,fe,xe){var Pe=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Ye=V.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),Yt=V.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],wn=ke.from(jt(xe)),zr=$a(V,wn),or=V.catalogs,aa=kn.init(zr,or),Da={type:"panel",items:Y([Pe,Ye,Yt,Oa([or.anchor.map(lr.createUi("anchor","Anchors")),or.rels.map(lr.createUi("rel","Rel")),or.targets.map(lr.createUi("target","Open link in...")),or.link.map(lr.createUi("link","Link list")),or.classes.map(lr.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:Da,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:zr,onChange:function(Eu,To){var Tn=To.name;aa.onChange(Eu.getData,{name:Tn}).each(function(St){Eu.setData(St)})},onSubmit:fe}},no=function(V){var fe=Pa(V);fe.then(function(xe){var Pe=lu(V,xe);return lt(xe,Pe,V)}).then(function(xe){V.windowManager.open(xe)})},Xi=function(V,fe){document.body.appendChild(V),V.dispatchEvent(fe),document.body.removeChild(V)},Qu=function(V){var fe=document.createElement("a");fe.target="_blank",fe.href=V,fe.rel="noreferrer noopener";var xe=document.createEvent("MouseEvents");xe.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Xi(fe,xe)},es=function(V,fe){return V.dom.getParent(fe,"a[href]")},Tr=function(V){return es(V,V.selection.getStart())},Cs=function(V){return V.altKey===!0&&V.shiftKey===!1&&V.ctrlKey===!1&&V.metaKey===!1},Yi=function(V,fe){if(fe){var xe=Ga(fe);if(/^#/.test(xe)){var Pe=V.$(xe);Pe.length&&V.selection.scrollIntoView(Pe[0],!0)}else Qu(fe.href)}},qa=function(V){return function(){no(V)}},ts=function(V){return function(){Yi(V,Tr(V))}},ai=function(V){V.on("click",function(fe){var xe=es(V,fe.target);xe&&nt.metaKeyPressed(fe)&&(fe.preventDefault(),Yi(V,xe))}),V.on("keydown",function(fe){var xe=Tr(V);xe&&fe.keyCode===13&&Cs(fe)&&(fe.preventDefault(),Yi(V,xe))})},hi=function(V,fe){return V.on("NodeChange",fe),function(){return V.off("NodeChange",fe)}},ga=function(V){return function(fe){var xe=function(){return fe.setActive(!V.mode.isReadOnly()&&Ie(V,V.selection.getNode())!==null)};return xe(),hi(V,xe)}},ns=function(V){return function(fe){var xe=function(){return fe.setDisabled(Ie(V,V.selection.getNode())===null)};return xe(),hi(V,xe)}},G=function(V){return function(fe){var xe=function(Ye){return sn(Ye)||Zt(V.selection.getRng())},Pe=V.dom.getParents(V.selection.getStart());return fe.setDisabled(!xe(Pe)),hi(V,function(Ye){return fe.setDisabled(!xe(Ye.parents))})}},de=function(V){V.addCommand("mceLink",function(){Ja(V)?V.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):qa(V)()})},De=function(V){V.addShortcut("Meta+K","",function(){V.execCommand("mceLink")})},Ke=function(V){V.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:qa(V),onSetup:ga(V)}),V.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ts(V),onSetup:ns(V)}),V.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return xo(V)},onSetup:G(V)})},zt=function(V){V.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ts(V),onSetup:ns(V)}),V.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:qa(V)}),V.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return xo(V)},onSetup:G(V)})},nn=function(V){var fe="link unlink openlink",xe="link";V.ui.registry.addContextMenu("link",{update:function(Pe){return sn(V.dom.getParents(Pe,"a"))?fe:xe}})},mn=function(V){var fe=function(Ye){Ye.selection.collapse(!1)},xe=function(Ye){var Yt=V.selection.getNode();return Ye.setDisabled(!Ie(V,Yt)),Ve},Pe=function(Ye){var Yt=Ie(V),wn=Or(V);if(!Yt&&wn){var zr=Xt(V.selection,Yt);return ke.some(zr.length>0?zr:Ye)}else return ke.none()};V.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ga(V)},label:"Link",predicate:function(Ye){return!!Ie(V,Ye)&&Aa(V)},initValue:function(){var Ye=Ie(V);return Ye?Ga(Ye):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(Ye){var Yt=V.selection.getNode();return Ye.setActive(!!Ie(V,Yt)),ga(V)(Ye)},onAction:function(Ye){var Yt=Ye.getValue(),wn=Pe(Yt),zr={href:Yt,attach:Ve};Lo(V,zr,{href:Yt,text:wn,title:ke.none(),rel:ke.none(),target:ke.none(),class:ke.none()}),fe(V),Ye.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:xe,onAction:function(Ye){xo(V),Ye.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:xe,onAction:function(Ye){ts(V)(),Ye.hide()}}]})};function vr(){le.add("link",function(V){Ke(V),zt(V),nn(V),mn(V),ai(V),de(V),De(V)})}vr()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(O){var $=typeof O;return O===null?"null":$==="object"&&(Array.prototype.isPrototypeOf(O)||O.constructor&&O.constructor.name==="Array")?"array":$==="object"&&(String.prototype.isPrototypeOf(O)||O.constructor&&O.constructor.name==="String")?"string":$},ln=function(O){return function($){return nt($)===O}},Gt=function(O){return function($){return typeof $===O}},dt=ln("string"),Qt=ln("object"),Sn=ln("array"),Mn=Gt("boolean"),pn=Gt("function"),Dr=Gt("number"),Bn=function(){},Ve=function(O){return function(){return O}},Ft=function(O){return O},xn=function(O,$){return O===$},ze=function(O){return function($){return!O($)}},ge=Ve(!1),Tt=Ve(!0),Ze=function(){return qt},qt=function(){var O=function(oe){return oe()},$=Ft,U={fold:function(oe,Oe){return oe()},isSome:ge,isNone:Tt,getOr:$,getOrThunk:O,getOrDie:function(oe){throw new Error(oe||"error: getOrDie called on none.")},getOrNull:Ve(null),getOrUndefined:Ve(void 0),or:$,orThunk:O,map:Ze,each:Bn,bind:Ze,exists:ge,forall:Tt,filter:function(){return Ze()},toArray:function(){return[]},toString:Ve("none()")};return U}(),Z=function(O){var $=Ve(O),U=function(){return Oe},oe=function(Xe){return Xe(O)},Oe={fold:function(Xe,En){return En(O)},isSome:Tt,isNone:ge,getOr:$,getOrThunk:$,getOrDie:$,getOrNull:$,getOrUndefined:$,or:U,orThunk:U,map:function(Xe){return Z(Xe(O))},each:function(Xe){Xe(O)},bind:oe,exists:oe,forall:oe,filter:function(Xe){return Xe(O)?Oe:qt},toArray:function(){return[O]},toString:function(){return"some("+O+")"}};return Oe},Ne=function(O){return O==null?qt:Z(O)},ke={some:Z,none:Ze,from:Ne},Vt=Array.prototype.slice,Kt=Array.prototype.push,ht=function(O,$){for(var U=O.length,oe=new Array(U),Oe=0;Oe<U;Oe++){var Xe=O[Oe];oe[Oe]=$(Xe,Oe)}return oe},$t=function(O,$){for(var U=0,oe=O.length;U<oe;U++){var Oe=O[U];$(Oe,U)}},We=function(O,$){for(var U=[],oe=0,Oe=O.length;oe<Oe;oe++){var Xe=O[oe];$(Xe,oe)&&U.push(Xe)}return U},ja=function(O,$){if(O.length===0)return[];for(var U=$(O[0]),oe=[],Oe=[],Xe=0,En=O.length;Xe<En;Xe++){var ur=O[Xe],jr=$(ur);jr!==U&&(oe.push(Oe),Oe=[]),U=jr,Oe.push(ur)}return Oe.length!==0&&oe.push(Oe),oe},ve=function(O,$,U){return $t(O,function(oe,Oe){U=$(U,oe,Oe)}),U},Y=function(O,$,U){for(var oe=0,Oe=O.length;oe<Oe;oe++){var Xe=O[oe];if($(Xe,oe))return ke.some(Xe);if(U(Xe,oe))break}return ke.none()},Pn=function(O,$){return Y(O,$,ge)},Ea=function(O){for(var $=[],U=0,oe=O.length;U<oe;++U){if(!Sn(O[U]))throw new Error("Arr.flatten item "+U+" was not an array, input: "+O);Kt.apply($,O[U])}return $},Mt=function(O,$){return Ea(ht(O,$))},Oa=function(O){var $=Vt.call(O,0);return $.reverse(),$},Vr=function(O,$){return $>=0&&$<O.length?ke.some(O[$]):ke.none()},R=function(O){return Vr(O,0)},Aa=function(O){return Vr(O,O.length-1)},wt=function(O,$){for(var U=0;U<O.length;U++){var oe=$(O[U],U);if(oe.isSome())return oe}return ke.none()},jt=function(){return jt=Object.assign||function($){for(var U,oe=1,Oe=arguments.length;oe<Oe;oe++){U=arguments[oe];for(var Xe in U)Object.prototype.hasOwnProperty.call(U,Xe)&&($[Xe]=U[Xe])}return $},jt.apply(this,arguments)};function go(O,$,U){if(U||arguments.length===2)for(var oe=0,Oe=$.length,Xe;oe<Oe;oe++)(Xe||!(oe in $))&&(Xe||(Xe=Array.prototype.slice.call($,0,oe)),Xe[oe]=$[oe]);return O.concat(Xe||Array.prototype.slice.call($))}var Go=function(O){var $=!1,U;return function(){for(var oe=[],Oe=0;Oe<arguments.length;Oe++)oe[Oe]=arguments[Oe];return $||($=!0,U=O.apply(null,oe)),U}},nr=function(O,$,U,oe){var Oe=O.isiOS()&&/ipad/i.test(U)===!0,Xe=O.isiOS()&&!Oe,En=O.isiOS()||O.isAndroid(),ur=En||oe("(pointer:coarse)"),jr=Oe||!Xe&&En&&oe("(min-device-width:768px)"),Cr=Xe||En&&!jr,Ka=$.isSafari()&&O.isiOS()&&/safari/i.test(U)===!1,du=!Cr&&!jr&&!Ka;return{isiPad:Ve(Oe),isiPhone:Ve(Xe),isTablet:Ve(jr),isPhone:Ve(Cr),isTouch:Ve(ur),isAndroid:O.isAndroid,isiOS:O.isiOS,isWebView:Ve(Ka),isDesktop:Ve(du)}},ba=function(O,$){for(var U=0;U<O.length;U++){var oe=O[U];if(oe.test($))return oe}},Q=function(O,$){var U=ba(O,$);if(!U)return{major:0,minor:0};var oe=function(Oe){return Number($.replace(U,"$"+Oe))};return Lt(oe(1),oe(2))},Ja=function(O,$){var U=String($).toLowerCase();return O.length===0?gt():Q(O,U)},gt=function(){return Lt(0,0)},Lt=function(O,$){return{major:O,minor:$}},Ro={nu:Lt,detect:Ja,unknown:gt},Er=function(O,$){return wt($.brands,function(U){var oe=U.brand.toLowerCase();return Pn(O,function(Oe){var Xe;return oe===((Xe=Oe.brand)===null||Xe===void 0?void 0:Xe.toLowerCase())}).map(function(Oe){return{current:Oe.name,version:Ro.nu(parseInt(U.version,10),0)}})})},Nt=function(O,$){var U=String($).toLowerCase();return Pn(O,function(oe){return oe.search(U)})},Dn=function(O,$){return Nt(O,$).map(function(U){var oe=Ro.detect(U.versionRegexes,$);return{current:U.name,version:oe}})},$n=function(O,$){return Nt(O,$).map(function(U){var oe=Ro.detect(U.versionRegexes,$);return{current:U.name,version:oe}})},pt=function(O,$){return O.indexOf($)!==-1},lr=function(O){return function($){return $.replace(O,"")}},Ra=lr(/^\s+|\s+$/g),bn=function(O){return O.length>0},Yr=function(O){return!bn(O)},ta=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nn=function(O){return function($){return pt($,O)}},ya=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(O){return pt(O,"edge/")&&pt(O,"chrome")&&pt(O,"safari")&&pt(O,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ta],search:function(O){return pt(O,"chrome")&&!pt(O,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(O){return pt(O,"msie")||pt(O,"trident")}},{name:"Opera",versionRegexes:[ta,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nn("firefox")},{name:"Safari",versionRegexes:[ta,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(O){return(pt(O,"safari")||pt(O,"mobile/"))&&pt(O,"applewebkit")}}],qo=[{name:"Windows",search:Nn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(O){return pt(O,"iphone")||pt(O,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Nn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Nn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Nn("linux"),versionRegexes:[]},{name:"Solaris",search:Nn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Nn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Nn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xi={browsers:Ve(ya),oses:Ve(qo)},fi="Edge",ni="Chrome",io="IE",Ti="Opera",Co="Firefox",ra="Safari",Qr=function(){return Ga({current:void 0,version:Ro.unknown()})},Ga=function(O){var $=O.current,U=O.version,oe=function(Oe){return function(){return $===Oe}};return{current:$,version:U,isEdge:oe(fi),isChrome:oe(ni),isIE:oe(io),isOpera:oe(Ti),isFirefox:oe(Co),isSafari:oe(ra)}},na={unknown:Qr,nu:Ga,edge:Ve(fi),chrome:Ve(ni),ie:Ve(io),opera:Ve(Ti),firefox:Ve(Co),safari:Ve(ra)},Pr="Windows",Ie="iOS",Xt="Android",sn="Linux",Zt="OSX",Or="Solaris",Nr="FreeBSD",Ia="ChromeOS",yn=function(){return Ar({current:void 0,version:Ro.unknown()})},Ar=function(O){var $=O.current,U=O.version,oe=function(Oe){return function(){return $===Oe}};return{current:$,version:U,isWindows:oe(Pr),isiOS:oe(Ie),isAndroid:oe(Xt),isOSX:oe(Zt),isLinux:oe(sn),isSolaris:oe(Or),isFreeBSD:oe(Nr),isChromeOS:oe(Ia)}},wa={unknown:yn,nu:Ar,windows:Ve(Pr),ios:Ve(Ie),android:Ve(Xt),linux:Ve(sn),osx:Ve(Zt),solaris:Ve(Or),freebsd:Ve(Nr),chromeos:Ve(Ia)},Mo=function(O,$,U){var oe=xi.browsers(),Oe=xi.oses(),Xe=$.bind(function(jr){return Er(oe,jr)}).orThunk(function(){return Dn(oe,O)}).fold(na.unknown,na.nu),En=$n(Oe,O).fold(wa.unknown,wa.nu),ur=nr(En,Xe,O,U);return{browser:Xe,os:En,deviceType:ur}},ji={detect:Mo},Ir=function(O){return window.matchMedia(O).matches},fr=Go(function(){return ji.detect(navigator.userAgent,ke.from(navigator.userAgentData),Ir)}),So=function(){return fr()},vi=function(O,$,U){return(O.compareDocumentPosition($)&U)!==0},Lo=function(O,$){return vi(O,$,Node.DOCUMENT_POSITION_CONTAINED_BY)},xo=1,Ko=function(O,$){var U=$||document,oe=U.createElement("div");if(oe.innerHTML=O,!oe.hasChildNodes()||oe.childNodes.length>1)throw console.error("HTML does not have a single root node",O),new Error("HTML must have a single root node");return Ho(oe.childNodes[0])},Gi=function(O,$){var U=$||document,oe=U.createElement(O);return Ho(oe)},di=function(O,$){var U=$||document,oe=U.createTextNode(O);return Ho(oe)},Ho=function(O){if(O==null)throw new Error("Node cannot be null or undefined");return{dom:O}},qi=function(O,$,U){return ke.from(O.dom.elementFromPoint($,U)).map(Ho)},$r={fromHtml:Ko,fromTag:Gi,fromText:di,fromDom:Ho,fromPoint:qi},mi=function(O,$){var U=O.dom;if(U.nodeType!==xo)return!1;var oe=U;if(oe.matches!==void 0)return oe.matches($);if(oe.msMatchesSelector!==void 0)return oe.msMatchesSelector($);if(oe.webkitMatchesSelector!==void 0)return oe.webkitMatchesSelector($);if(oe.mozMatchesSelector!==void 0)return oe.mozMatchesSelector($);throw new Error("Browser lacks native selectors")},kn=function(O,$){return O.dom===$.dom},Ju=function(O,$){var U=O.dom,oe=$.dom;return U===oe?!1:U.contains(oe)},Xo=function(O,$){return Lo(O.dom,$.dom)},ki=function(O,$){return So().browser.isIE()?Xo(O,$):Ju(O,$)},Yo=mi,Fi=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Lu=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),gi=tinymce.util.Tools.resolve("tinymce.util.VK"),Zu=Object.keys,ne=function(O,$){for(var U=Zu(O),oe=0,Oe=U.length;oe<Oe;oe++){var Xe=U[oe],En=O[Xe];$(En,Xe)}},Ce=function(O){return function($,U){O[U]=$}},ie=function(O,$,U,oe){var Oe={};return ne(O,function(Xe,En){($(Xe,En)?U:oe)(Xe,En)}),Oe},Re=function(O,$){var U={};return ie(O,$,Ce(U),Bn),U};typeof window<"u"||Function("return this;")();var _t=function(O){var $=O.dom.nodeName;return $.toLowerCase()},en=function(O){return O.dom.nodeType},Wn=function(O){return function($){return en($)===O}},Kn=Wn(xo),_r=function(O){return function($){return Kn($)&&_t($)===O}},Ur=function(O,$,U){if(dt(U)||Mn(U)||Dr(U))O.setAttribute($,U+"");else throw console.error("Invalid call to Attribute.set. Key ",$,":: Value ",U,":: Element ",O),new Error("Attribute value was not simple")},xr=function(O,$){var U=O.dom;ne($,function(oe,Oe){Ur(U,Oe,oe)})},Ma=function(O){return ve(O.dom.attributes,function($,U){return $[U.name]=U.value,$},{})},Ba=function(O){return ke.from(O.dom.parentNode).map($r.fromDom)},Ki=function(O){return ht(O.dom.childNodes,$r.fromDom)},ho=function(O,$){var U=O.dom.childNodes;return ke.from(U[$]).map($r.fromDom)},ri=function(O){return ho(O,0)},lu=function(O){return ho(O,O.dom.childNodes.length-1)},Pa=function(O,$){var U=Ba(O);U.each(function(oe){oe.dom.insertBefore($.dom,O.dom)})},$a=function(O,$){O.dom.appendChild($.dom)},lt=function(O,$){$t($,function(U){Pa(O,U)})},no=function(O,$){$t($,function(U){$a(O,U)})},Xi=function(O){var $=O.dom;$.parentNode!==null&&$.parentNode.removeChild($)},Qu=function(O,$){return $r.fromDom(O.dom.cloneNode($))},es=function(O){return Qu(O,!0)},Tr=function(O,$){var U=$r.fromTag($),oe=Ma(O);return xr(U,oe),U},Cs=function(O,$){var U=Tr(O,$);Pa(O,U);var oe=Ki(O);return no(U,oe),Xi(O),U},Yi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),qa=tinymce.util.Tools.resolve("tinymce.util.Tools"),ts=function(O){return function($){return $&&$.nodeName.toLowerCase()===O}},ai=function(O){return function($){return $&&O.test($.nodeName)}},hi=function(O){return O&&O.nodeType===3},ga=ai(/^(OL|UL|DL)$/),ns=ai(/^(OL|UL)$/),G=ts("ol"),de=ai(/^(LI|DT|DD)$/),De=ai(/^(DT|DD)$/),Ke=ai(/^(TH|TD)$/),zt=ts("br"),nn=function(O){return O.parentNode.firstChild===O},mn=function(O,$){return $&&!!O.schema.getTextBlockElements()[$.nodeName]},vr=function(O,$){return O&&O.nodeName in $},V=function(O,$){return zt($)?O.isBlock($.nextSibling)&&!zt($.previousSibling):!1},fe=function(O,$,U){var oe=O.isEmpty($);return U&&O.select("span[data-mce-type=bookmark]",$).length>0?!1:oe},xe=function(O,$){return O.isChildOf($,O.getRoot())},Pe=function(O){return O.getParam("lists_indent_on_tab",!0)},Ye=function(O){var $=O.getParam("forced_root_block","p");return $===!1?"":$===!0?"p":$},Yt=function(O){return O.getParam("forced_root_block_attrs",{})},wn=function(O,$){var U=O.dom,oe=O.schema.getBlockElements(),Oe=U.createFragment(),Xe=Ye(O),En,ur,jr;if(Xe&&(ur=U.create(Xe),ur.tagName===Xe.toUpperCase()&&U.setAttribs(ur,Yt(O)),vr($.firstChild,oe)||Oe.appendChild(ur)),$)for(;En=$.firstChild;){var Cr=En.nodeName;!jr&&(Cr!=="SPAN"||En.getAttribute("data-mce-type")!=="bookmark")&&(jr=!0),vr(En,oe)?(Oe.appendChild(En),ur=null):Xe?(ur||(ur=U.create(Xe),Oe.appendChild(ur)),ur.appendChild(En)):Oe.appendChild(En)}return Xe?jr||ur.appendChild(U.create("br",{"data-mce-bogus":"1"})):Oe.appendChild(U.create("br")),Oe},zr=Yi.DOM,or=function(O,$,U){var oe=function(Cr){qa.each(Oe,function(Ka){Cr.parentNode.insertBefore(Ka,U.parentNode)}),zr.remove(Cr)},Oe=zr.select('span[data-mce-type="bookmark"]',$),Xe=wn(O,U),En=zr.createRng();En.setStartAfter(U),En.setEndAfter($);for(var ur=En.extractContents(),jr=ur.firstChild;jr;jr=jr.firstChild)if(jr.nodeName==="LI"&&O.dom.isEmpty(jr)){zr.remove(jr);break}O.dom.isEmpty(ur)||zr.insertAfter(ur,$),zr.insertAfter(Xe,$),fe(O.dom,U.parentNode)&&oe(U.parentNode),zr.remove(U),fe(O.dom,$)&&zr.remove($)},aa=_r("dd"),Da=_r("dt"),Eu=function(O,$){aa($)?Cs($,"dt"):Da($)&&Ba($).each(function(U){return or(O,U.dom,$.dom)})},To=function(O){Da(O)&&Cs(O,"dd")},Tn=function(O,$,U){$==="Indent"?$t(U,To):$t(U,function(oe){return Eu(O,oe)})},St=function(O,$){if(hi(O))return{container:O,offset:$};var U=Fi.getNode(O,$);return hi(U)?{container:U,offset:$>=O.childNodes.length?U.data.length:0}:U.previousSibling&&hi(U.previousSibling)?{container:U.previousSibling,offset:U.previousSibling.data.length}:U.nextSibling&&hi(U.nextSibling)?{container:U.nextSibling,offset:0}:{container:O,offset:$}},sa=function(O){var $=O.cloneRange(),U=St(O.startContainer,O.startOffset);$.setStart(U.container,U.offset);var oe=St(O.endContainer,O.endOffset);return $.setEnd(oe.container,oe.offset),$},ko=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),kr=function(O,$){var U=$||O.selection.getStart(!0);return O.dom.getParent(U,"OL,UL,DL",Ou(O,U))},Hs=function(O,$){return O&&$.length===1&&$[0]===O},rs=function(O){return We(O.querySelectorAll("ol,ul,dl"),ga)},Rc=function(O){var $=kr(O),U=O.selection.getSelectedBlocks();return Hs($,U)?rs($):We(U,function(oe){return ga(oe)&&$!==oe})},qr=function(O,$){var U=qa.map($,function(oe){var Oe=O.dom.getParent(oe,"li,dd,dt",Ou(O,oe));return Oe||oe});return ko.unique(U)},Ei=function(O){var $=O.selection.getSelectedBlocks();return We(qr(O,$),de)},Mc=function(O){return We(Ei(O),De)},Ou=function(O,$){var U=O.dom.getParents($,"TD,TH");return U.length>0?U[0]:O.getBody()},uo=function(O,$){var U=O.dom.getParents($,"ol,ul",Ou(O,$));return Aa(U)},Vs=function(O){var $=uo(O,O.selection.getStart()),U=We(O.selection.getSelectedBlocks(),ns);return $.toArray().concat(U)},je=function(O){var $=Vs(O);return lc(O,$)},lc=function(O,$){var U=ht($,function(oe){return uo(O,oe).getOr(oe)});return ko.unique(U)},so=function(O,$,U){return U===void 0&&(U=xn),O.exists(function(oe){return U(oe,$)})},pl=function(O,$,U){return O.isSome()&&$.isSome()?ke.some(U(O.getOrDie(),$.getOrDie())):ke.none()},Ss=function(O,$){var U=$||document,oe=U.createDocumentFragment();return $t(O,function(Oe){oe.appendChild(Oe.dom)}),$r.fromDom(oe)},B=function(O,$,U){return O.fire("ListMutation",{action:$,element:U})},T=function(O){return O.style!==void 0&&pn(O.style.getPropertyValue)},w=function(O,$,U){if(!dt(U))throw console.error("Invalid call to CSS.set. Property ",$,":: Value ",U,":: Element ",O),new Error("CSS value must be a string: "+U);T(O)&&O.style.setProperty($,U)},A=function(O,$,U){var oe=O.dom;w(oe,$,U)},L=function(O,$){$a(O.item,$.list)},te=function(O){for(var $=1;$<O.length;$++)L(O[$-1],O[$])},Te=function(O,$){pl(Aa(O),R($),L)},tt=function(O,$){var U={list:$r.fromTag($,O),item:$r.fromTag("li",O)};return $a(U.list,U.item),U},dn=function(O,$,U){for(var oe=[],Oe=0;Oe<U;Oe++)oe.push(tt(O,$.listType));return oe},Fn=function(O,$){for(var U=0;U<O.length-1;U++)A(O[U].item,"list-style-type","none");Aa(O).each(function(oe){xr(oe.list,$.listAttributes),xr(oe.item,$.itemAttributes),no(oe.item,$.content)})},Rt=function(O,$){_t(O.list)!==$.listType&&(O.list=Cs(O.list,$.listType)),xr(O.list,$.listAttributes)},fn=function(O,$,U){var oe=$r.fromTag("li",O);return xr(oe,$),no(oe,U),oe},ir=function(O,$){$a(O.list,$),O.item=$},rr=function(O,$,U){var oe=$.slice(0,U.depth);return Aa(oe).each(function(Oe){var Xe=fn(O,U.itemAttributes,U.content);ir(Oe,Xe),Rt(Oe,U)}),oe},Yn=function(O,$,U){var oe=dn(O,U,U.depth-$.length);return te(oe),Fn(oe,U),Te($,oe),$.concat(oe)},La=function(O,$){var U=ve($,function(oe,Oe){return Oe.depth>oe.length?Yn(O,oe,Oe):rr(O,oe,Oe)},[]);return R(U).map(function(oe){return oe.list})},jn=function(O){return Yo(O,"OL,UL")},Ca=function(O){return ri(O).exists(jn)},ca=function(O){return lu(O).exists(jn)},Oi=function(O){return O.depth>0},hr=function(O){return O.isSelected},Us=function(O){var $=Ki(O),U=ca(O)?$.slice(0,-1):$;return ht(U,es)},co=function(O,$,U){return Ba(O).filter(Kn).map(function(oe){return{depth:$,dirty:!1,isSelected:U,content:Us(O),itemAttributes:Ma(O),listAttributes:Ma(oe),listType:_t(oe)}})},Eo=function(O,$){switch(O){case"Indent":$.depth++;break;case"Outdent":$.depth--;break;case"Flatten":$.depth=0}$.dirty=!0},t1=function(O,$){O.listType=$.listType,O.listAttributes=jt({},$.listAttributes)},Ji=function(O){O.listAttributes=Re(O.listAttributes,function($,U){return U!=="start"})},mh=function(O,$){var U=O[$].depth,oe=function(Xe){return Xe.depth===U&&!Xe.dirty},Oe=function(Xe){return Xe.depth<U};return Y(Oa(O.slice(0,$)),oe,Oe).orThunk(function(){return Y(O.slice($+1),oe,Oe)})},Yc=function(O){return $t(O,function($,U){mh(O,U).fold(function(){$.dirty&&Ji($)},function(oe){return t1($,oe)})}),O},Zn=function(O){var $=O,U=function(){return $},oe=function(Oe){$=Oe};return{get:U,set:oe}},Ws=function(O,$,U,oe){return ri(oe).filter(jn).fold(function(){$.each(function(En){kn(En.start,oe)&&U.set(!0)});var Oe=co(oe,O,U.get());$.each(function(En){kn(En.end,oe)&&U.set(!1)});var Xe=lu(oe).filter(jn).map(function(En){return Bo(O,$,U,En)}).getOr([]);return Oe.toArray().concat(Xe)},function(Oe){return Bo(O,$,U,Oe)})},Bo=function(O,$,U,oe){return Mt(Ki(oe),function(Oe){var Xe=jn(Oe)?Bo:Ws,En=O+1;return Xe(En,$,U,Oe)})},Po=function(O,$){var U=Zn(!1),oe=0;return ht(O,function(Oe){return{sourceList:Oe,entries:Bo(oe,$,U,Oe)}})},Ai=function(O,$){var U=Yc($);return ht(U,function(oe){var Oe=Ss(oe.content);return $r.fromDom(wn(O,Oe.dom))})},oi=function(O,$){var U=Yc($);return La(O.contentDocument,U).toArray()},If=function(O,$){return Mt(ja($,Oi),function(U){var oe=R(U).exists(Oi);return oe?oi(O,U):Ai(O,U)})},fc=function(O,$){$t(We(O,hr),function(U){return Eo($,U)})},la=function(O){var $=ht(Ei(O),$r.fromDom);return pl(Pn($,ze(Ca)),Pn(Oa($),ze(Ca)),function(U,oe){return{start:U,end:oe}})},ro=function(O,$,U){var oe=Po($,la(O));$t(oe,function(Oe){fc(Oe.entries,U);var Xe=If(O,Oe.entries);$t(Xe,function(En){B(O,U==="Indent"?"IndentList":"OutdentList",En.dom)}),lt(Oe.sourceList,Xe),Xi(Oe.sourceList)})},Hu=function(O,$){var U=ht(je(O),$r.fromDom),oe=ht(Mc(O),$r.fromDom),Oe=!1;if(U.length||oe.length){var Xe=O.selection.getBookmark();ro(O,U,$),Tn(O,$,oe),O.selection.moveToBookmark(Xe),O.selection.setRng(sa(O.selection.getRng())),O.nodeChanged(),Oe=!0}return Oe},bl=function(O){return Hu(O,"Indent")},pi=function(O){return Hu(O,"Outdent")},js=function(O){return Hu(O,"Flatten")},n1=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),$f=Yi.DOM,Ha=function(O){var $={},U=function(oe){var Oe=O[oe?"startContainer":"endContainer"],Xe=O[oe?"startOffset":"endOffset"];if(Oe.nodeType===1){var En=$f.create("span",{"data-mce-type":"bookmark"});Oe.hasChildNodes()?(Xe=Math.min(Xe,Oe.childNodes.length-1),oe?Oe.insertBefore(En,Oe.childNodes[Xe]):$f.insertAfter(En,Oe.childNodes[Xe])):Oe.appendChild(En),Oe=En,Xe=0}$[oe?"startContainer":"endContainer"]=Oe,$[oe?"startOffset":"endOffset"]=Xe};return U(!0),O.collapsed||U(),$},Bc=function(O){var $=function(oe){var Oe,Xe=function(jr){for(var Cr=jr.parentNode.firstChild,Ka=0;Cr;){if(Cr===jr)return Ka;(Cr.nodeType!==1||Cr.getAttribute("data-mce-type")!=="bookmark")&&Ka++,Cr=Cr.nextSibling}return-1},En=Oe=O[oe?"startContainer":"endContainer"],ur=O[oe?"startOffset":"endOffset"];En&&(En.nodeType===1&&(ur=Xe(En),En=En.parentNode,$f.remove(Oe),!En.hasChildNodes()&&$f.isBlock(En)&&En.appendChild($f.create("br"))),O[oe?"startContainer":"endContainer"]=En,O[oe?"startOffset":"endOffset"]=ur)};$(!0),$();var U=$f.createRng();return U.setStart(O.startContainer,O.startOffset),O.endContainer&&U.setEnd(O.endContainer,O.endOffset),sa(U)},Kl=function(O){switch(O){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},as=function(O){return/\btox\-/.test(O.className)},Vo=function(O,$,U){var oe=function(Xe){var En=Y(Xe.parents,ga,Ke).filter(function(ur){return ur.nodeName===$&&!as(ur)}).isSome();U(En)},Oe=O.dom.getParents(O.selection.getNode());return oe({parents:Oe}),O.on("NodeChange",oe),function(){return O.off("NodeChange",oe)}},Xl=function(O,$,U){var oe=U["list-style-type"]?U["list-style-type"]:null;O.setStyle($,"list-style-type",oe)},yl=function(O,$){qa.each($,function(U,oe){O.setAttribute(oe,U)})},Au=function(O,$,U){yl($,U["list-attributes"]),qa.each(O.select("li",$),function(oe){yl(oe,U["list-item-attributes"])})},os=function(O,$,U){Xl(O,$,U),Au(O,$,U)},fu=function(O,$,U){qa.each(U,function(oe){var Oe;return O.setStyle($,(Oe={},Oe[oe]="",Oe))})},kv=function(O,$,U,oe){var Oe=$[U?"startContainer":"endContainer"],Xe=$[U?"startOffset":"endOffset"];for(Oe.nodeType===1&&(Oe=Oe.childNodes[Math.min(Xe,Oe.childNodes.length-1)]||Oe),!U&&zt(Oe.nextSibling)&&(Oe=Oe.nextSibling);Oe.parentNode!==oe;){if(mn(O,Oe)||/^(TD|TH)$/.test(Oe.parentNode.nodeName))return Oe;Oe=Oe.parentNode}return Oe},Pc=function(O,$,U){for(var oe=[],Oe=O.dom,Xe=kv(O,$,!0,U),En=kv(O,$,!1,U),ur,jr=[],Cr=Xe;Cr&&(jr.push(Cr),Cr!==En);Cr=Cr.nextSibling);return qa.each(jr,function(Ka){if(mn(O,Ka)){oe.push(Ka),ur=null;return}if(Oe.isBlock(Ka)||zt(Ka)){zt(Ka)&&Oe.remove(Ka),ur=null;return}var du=Ka.nextSibling;if(n1.isBookmarkNode(Ka)&&(ga(du)||mn(O,du)||!du&&Ka.parentNode===U)){ur=null;return}ur||(ur=Oe.create("p"),Ka.parentNode.insertBefore(ur,Ka),oe.push(ur)),ur.appendChild(Ka)}),oe},Di=function(O,$,U){var oe=O.getStyle($,"list-style-type"),Oe=U?U["list-style-type"]:"";return Oe=Oe===null?"":Oe,oe===Oe},yd=function(O,$,U){var oe=O.selection.getRng(),Oe="LI",Xe=Ou(O,O.selection.getStart(!0)),En=O.dom;if(En.getContentEditable(O.selection.getNode())!=="false"){$=$.toUpperCase(),$==="DL"&&(Oe="DT");var ur=Ha(oe),jr=Pc(O,oe,Xe);qa.each(jr,function(Cr){var Ka,du=Cr.previousSibling,No=Cr.parentNode;de(No)||(du&&ga(du)&&du.nodeName===$&&Di(En,du,U)?(Ka=du,Cr=En.rename(Cr,Oe),du.appendChild(Cr)):(Ka=En.create($),Cr.parentNode.insertBefore(Ka,Cr),Ka.appendChild(Cr),Cr=En.rename(Cr,Oe)),fu(En,Cr,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),os(En,Ka,U),Lf(O.dom,Ka))}),O.selection.setRng(Bc(ur))}},r1=function(O,$){return O&&$&&ga(O)&&O.nodeName===$.nodeName},zf=function(O,$,U){var oe=O.getStyle($,"list-style-type",!0),Oe=O.getStyle(U,"list-style-type",!0);return oe===Oe},Ff=function(O,$){return O.className===$.className},Uo=function(O,$,U){return r1($,U)&&zf(O,$,U)&&Ff($,U)},Lf=function(O,$){var U,oe;if(U=$.nextSibling,Uo(O,$,U)){for(;oe=U.firstChild;)$.appendChild(oe);O.remove(U)}if(U=$.previousSibling,Uo(O,$,U)){for(;oe=U.lastChild;)$.insertBefore(oe,$.firstChild);O.remove(U)}},Hf=function(O,$,U,oe){if($.nodeName!==U){var Oe=O.dom.rename($,U);os(O.dom,Oe,oe),B(O,Kl(U),Oe)}else os(O.dom,$,oe),B(O,Kl(U),$)},Du=function(O,$,U,oe,Oe){var Xe=ga($);if(Xe&&$.nodeName===oe&&!wl(Oe))js(O);else{yd(O,oe,Oe);var En=Ha(O.selection.getRng()),ur=Xe?go([$],U,!0):U;qa.each(ur,function(jr){Hf(O,jr,oe,Oe)}),O.selection.setRng(Bc(En))}},wl=function(O){return"list-style-type"in O},Vf=function(O,$,U,oe){if($!==O.getBody())if($)if($.nodeName===U&&!wl(oe)&&!as($))js(O);else{var Oe=Ha(O.selection.getRng());os(O.dom,$,oe);var Xe=O.dom.rename($,U);Lf(O.dom,Xe),O.selection.setRng(Bc(Oe)),yd(O,U,oe),B(O,Kl(U),Xe)}else yd(O,U,oe),B(O,Kl(U),$)},Cl=function(O,$,U){var oe=kr(O),Oe=Rc(O),Xe=Qt(U)?U:{};Oe.length>0?Du(O,oe,Oe,$,Xe):Vf(O,oe,$,Xe)},po=Yi.DOM,xs=function(O,$){var U=$.parentNode;if(U.nodeName==="LI"&&U.firstChild===$){var oe=U.previousSibling;oe&&oe.nodeName==="LI"?(oe.appendChild($),fe(O,U)&&po.remove(U)):po.setStyle(U,"listStyleType","none")}if(ga(U)){var oe=U.previousSibling;oe&&oe.nodeName==="LI"&&oe.appendChild($)}},xm=function(O,$){var U=qa.grep(O.select("ol,ul",$));qa.each(U,function(oe){xs(O,oe)})},Gs=function(O,$,U,oe){var Oe=$.startContainer,Xe=$.startOffset;if(hi(Oe)&&(U?Xe<Oe.data.length:Xe>0))return Oe;var En=O.schema.getNonEmptyElements();Oe.nodeType===1&&(Oe=Fi.getNode(Oe,Xe));var ur=new Lu(Oe,oe);for(U&&V(O.dom,Oe)&&ur.next();Oe=ur[U?"next":"prev2"]();)if(Oe.nodeName==="LI"&&!Oe.hasChildNodes()||En[Oe.nodeName]||hi(Oe)&&Oe.data.length>0)return Oe},Tm=function(O,$){var U=$.childNodes;return U.length===1&&!ga(U[0])&&O.isBlock(U[0])},a1=function(O,$){Tm(O,$)&&O.remove($.firstChild,!0)},gh=function(O,$,U){var oe,Oe=Tm(O,U)?U.firstChild:U;if(a1(O,$),!fe(O,$,!0))for(;oe=$.firstChild;)Oe.appendChild(oe)},Uf=function(O,$,U){var oe,Oe=$.parentNode;if(!(!xe(O,$)||!xe(O,U))){ga(U.lastChild)&&(oe=U.lastChild),Oe===U.lastChild&&zt(Oe.previousSibling)&&O.remove(Oe.previousSibling);var Xe=U.lastChild;Xe&&zt(Xe)&&$.hasChildNodes()&&O.remove(Xe),fe(O,U,!0)&&O.$(U).empty(),gh(O,$,U),oe&&U.appendChild(oe);var En=ki($r.fromDom(U),$r.fromDom($)),ur=En?O.getParents($,ga,U):[];O.remove($),$t(ur,function(jr){fe(O,jr)&&jr!==O.getRoot()&&O.remove(jr)})}},Wf=function(O,$,U){O.dom.$(U).empty(),Uf(O.dom,$,U),O.selection.setCursorLocation(U,0)},Yl=function(O,$,U,oe){var Oe=O.dom;if(Oe.isEmpty(oe))Wf(O,U,oe);else{var Xe=Ha($);Uf(Oe,U,oe),O.selection.setRng(Bc(Xe))}},Qn=function(O,$,U,oe){var Oe=Ha($);Uf(O.dom,U,oe);var Xe=Bc(Oe);O.selection.setRng(Xe)},vc=function(O,$){var U=O.dom,oe=O.selection,Oe=oe.getStart(),Xe=Ou(O,Oe),En=U.getParent(oe.getStart(),"LI",Xe);if(En){var ur=En.parentNode;if(ur===O.getBody()&&fe(U,ur))return!0;var jr=sa(oe.getRng()),Cr=U.getParent(Gs(O,jr,$,Xe),"LI",Xe);if(Cr&&Cr!==En)return O.undoManager.transact(function(){$?Yl(O,jr,Cr,En):nn(En)?pi(O):Qn(O,jr,En,Cr)}),!0;if(!Cr&&!$&&jr.startOffset===0&&jr.endOffset===0)return O.undoManager.transact(function(){js(O)}),!0}return!1},is=function(O,$,U){var oe=O.getParent($.parentNode,O.isBlock,U);O.remove($),oe&&O.isEmpty(oe)&&O.remove(oe)},_u=function(O,$){var U=O.dom,oe=O.selection.getStart(),Oe=Ou(O,oe),Xe=U.getParent(oe,U.isBlock,Oe);if(Xe&&U.isEmpty(Xe)){var En=sa(O.selection.getRng()),ur=U.getParent(Gs(O,En,$,Oe),"LI",Oe);if(ur)return O.undoManager.transact(function(){is(U,Xe,Oe),Lf(U,ur.parentNode),O.selection.select(ur,!0),O.selection.collapse($)}),!0}return!1},dc=function(O,$){return vc(O,$)||_u(O,$)},Jo=function(O){var $=O.selection.getStart(),U=Ou(O,$),oe=O.dom.getParent($,"LI,DT,DD",U);return oe||Ei(O).length>0?(O.undoManager.transact(function(){O.execCommand("Delete"),xm(O.dom,O.getBody())}),!0):!1},_i=function(O,$){return O.selection.isCollapsed()?dc(O,$):Jo(O)},ii=function(O){O.on("keydown",function($){$.keyCode===gi.BACKSPACE?_i(O,!1)&&$.preventDefault():$.keyCode===gi.DELETE&&_i(O,!0)&&$.preventDefault()})},Jl=function(O){return{backspaceDelete:function($){_i(O,$)}}},vu=function(O,$){var U=kr(O);O.undoManager.transact(function(){Qt($.styles)&&O.dom.setStyles(U,$.styles),Qt($.attrs)&&ne($.attrs,function(oe,Oe){return O.dom.setAttrib(U,Oe,oe)})})},un=function(O){var $=Oa(Ra(O).split("")),U=ht($,function(oe,Oe){var Xe=oe.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,Oe)*Xe});return ve(U,function(oe,Oe){return oe+Oe},0)},jf=function(O){if(O--,O<0)return"";var $=O%26,U=Math.floor(O/26),oe=jf(U),Oe=String.fromCharCode("A".charCodeAt(0)+$);return oe+Oe},hh=function(O){return/^[A-Z]+$/.test(O)},pr=function(O){return/^[a-z]+$/.test(O)},Va=function(O){return/^[0-9]+$/.test(O)},km=function(O){return Va(O)?2:hh(O)?0:pr(O)?1:Yr(O)?3:4},Jc=function(O){switch(km(O)){case 2:return ke.some({listStyleType:ke.none(),start:O});case 0:return ke.some({listStyleType:ke.some("upper-alpha"),start:un(O).toString()});case 1:return ke.some({listStyleType:ke.some("lower-alpha"),start:un(O).toString()});case 3:return ke.some({listStyleType:ke.none(),start:""});case 4:return ke.none()}},lo=function(O){var $=parseInt(O.start,10);return so(O.listStyleType,"upper-alpha")?jf($):so(O.listStyleType,"lower-alpha")?jf($).toLowerCase():O.start},Em=function(O){var $=kr(O);G($)&&O.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:lo({start:O.dom.getAttrib($,"start","1"),listStyleType:ke.some(O.dom.getStyle($,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(U){var oe=U.getData();Jc(oe.start).each(function(Oe){O.execCommand("mceListUpdate",!1,{attrs:{start:Oe.start==="1"?"":Oe.start},styles:{"list-style-type":Oe.listStyleType.getOr("")}})}),U.close()}})},Ts=function(O,$){return function(){var U=kr(O);return U&&U.nodeName===$}},wd=function(O){O.addCommand("mceListProps",function(){Em(O)})},wr=function(O){O.on("BeforeExecCommand",function($){var U=$.command.toLowerCase();U==="indent"?bl(O):U==="outdent"&&pi(O)}),O.addCommand("InsertUnorderedList",function($,U){Cl(O,"UL",U)}),O.addCommand("InsertOrderedList",function($,U){Cl(O,"OL",U)}),O.addCommand("InsertDefinitionList",function($,U){Cl(O,"DL",U)}),O.addCommand("RemoveList",function(){js(O)}),wd(O),O.addCommand("mceListUpdate",function($,U){Qt(U)&&vu(O,U)}),O.addQueryStateHandler("InsertUnorderedList",Ts(O,"UL")),O.addQueryStateHandler("InsertOrderedList",Ts(O,"OL")),O.addQueryStateHandler("InsertDefinitionList",Ts(O,"DL"))},Vu=function(O){O.on("keydown",function($){$.keyCode!==gi.TAB||gi.metaKeyPressed($)||O.undoManager.transact(function(){($.shiftKey?pi(O):bl(O))&&$.preventDefault()})})},N0=function(O){Pe(O)&&Vu(O),ii(O)},I0=function(O){var $=function(U){return function(){return O.execCommand(U)}};O.hasPlugin("advlist")||(O.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:$("InsertOrderedList"),onSetup:function(U){return Vo(O,"OL",U.setActive)}}),O.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:$("InsertUnorderedList"),onSetup:function(U){return Vo(O,"UL",U.setActive)}}))},bo=function(O){var $={text:"List properties...",icon:"ordered-list",onAction:function(){return O.execCommand("mceListProps")},onSetup:function(U){return Vo(O,"OL",function(oe){return U.setDisabled(!oe)})}};O.ui.registry.addMenuItem("listprops",$),O.ui.registry.addContextMenu("lists",{update:function(U){var oe=kr(O,U);return G(oe)?["listprops"]:[]}})};function Om(){le.add("lists",function(O){return O.hasPlugin("rtc",!0)===!1?(N0(O),wr(O)):wd(O),I0(O),bo(O),Jl(O)})}Om()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=function(){return nt=Object.assign||function(Ce){for(var ie,Re=1,_t=arguments.length;Re<_t;Re++){ie=arguments[Re];for(var en in ie)Object.prototype.hasOwnProperty.call(ie,en)&&(Ce[en]=ie[en])}return Ce},nt.apply(this,arguments)},ln=function(ne){var Ce=typeof ne;return ne===null?"null":Ce==="object"&&(Array.prototype.isPrototypeOf(ne)||ne.constructor&&ne.constructor.name==="Array")?"array":Ce==="object"&&(String.prototype.isPrototypeOf(ne)||ne.constructor&&ne.constructor.name==="String")?"string":Ce},Gt=function(ne){return function(Ce){return ln(Ce)===ne}},dt=Gt("string"),Qt=Gt("object"),Sn=Gt("array"),Mn=function(ne){return ne==null},pn=function(ne){return!Mn(ne)},Dr=function(){},Bn=function(ne){return function(){return ne}},Ve=function(ne){return ne},Ft=Bn(!1),xn=Bn(!0),ze=function(){return ge},ge=function(){var ne=function(Re){return Re()},Ce=Ve,ie={fold:function(Re,_t){return Re()},isSome:Ft,isNone:xn,getOr:Ce,getOrThunk:ne,getOrDie:function(Re){throw new Error(Re||"error: getOrDie called on none.")},getOrNull:Bn(null),getOrUndefined:Bn(void 0),or:Ce,orThunk:ne,map:ze,each:Dr,bind:ze,exists:Ft,forall:xn,filter:function(){return ze()},toArray:function(){return[]},toString:Bn("none()")};return ie}(),Tt=function(ne){var Ce=Bn(ne),ie=function(){return _t},Re=function(en){return en(ne)},_t={fold:function(en,Wn){return Wn(ne)},isSome:xn,isNone:Ft,getOr:Ce,getOrThunk:Ce,getOrDie:Ce,getOrNull:Ce,getOrUndefined:Ce,or:ie,orThunk:ie,map:function(en){return Tt(en(ne))},each:function(en){en(ne)},bind:Re,exists:Re,forall:Re,filter:function(en){return en(ne)?_t:ge},toArray:function(){return[ne]},toString:function(){return"some("+ne+")"}};return _t},Ze=function(ne){return ne==null?ge:Tt(ne)},qt={some:Tt,none:ze,from:Ze},Z=Array.prototype.push,Ne=function(ne,Ce){for(var ie=0,Re=ne.length;ie<Re;ie++){var _t=ne[ie];Ce(_t,ie)}},ke=function(ne){for(var Ce=[],ie=0,Re=ne.length;ie<Re;++ie){if(!Sn(ne[ie]))throw new Error("Arr.flatten item "+ie+" was not an array, input: "+ne);Z.apply(Ce,ne[ie])}return Ce},Vt=function(ne){var Ce=ne,ie=function(){return Ce},Re=function(_t){Ce=_t};return{get:ie,set:Re}},Kt=Object.keys,ht=Object.hasOwnProperty,$t=function(ne,Ce){for(var ie=Kt(ne),Re=0,_t=ie.length;Re<_t;Re++){var en=ie[Re],Wn=ne[en];Ce(Wn,en)}},We=function(ne,Ce){return ja(ne,Ce)?qt.from(ne[Ce]):qt.none()},ja=function(ne,Ce){return ht.call(ne,Ce)},ve=function(ne){return ne.getParam("media_scripts")},Y=function(ne){return ne.getParam("audio_template_callback")},Pn=function(ne){return ne.getParam("video_template_callback")},Ea=function(ne){return ne.getParam("media_live_embeds",!0)},Mt=function(ne){return ne.getParam("media_filter_html",!0)},Oa=function(ne){return ne.getParam("media_url_resolver")},Vr=function(ne){return ne.getParam("media_alt_source",!0)},R=function(ne){return ne.getParam("media_poster",!0)},Aa=function(ne){return ne.getParam("media_dimensions",!0)},wt=tinymce.util.Tools.resolve("tinymce.util.Tools"),jt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),go=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),Go=function(ne,Ce){if(ne){for(var ie=0;ie<ne.length;ie++)if(Ce.indexOf(ne[ie].filter)!==-1)return ne[ie]}},nr=jt.DOM,ba=function(ne){return ne.replace(/px$/,"")},Q=function(ne){var Ce=ne.map.style,ie=Ce?nr.parseStyle(Ce):{};return{type:"ephox-embed-iri",source:ne.map["data-ephox-embed-iri"],altsource:"",poster:"",width:We(ie,"max-width").map(ba).getOr(""),height:We(ie,"max-height").map(ba).getOr("")}},Ja=function(ne,Ce){var ie=Vt(!1),Re={};return go({validate:!1,allow_conditional_comments:!0,start:function(_t,en){if(!ie.get())if(ja(en.map,"data-ephox-embed-iri"))ie.set(!0),Re=Q(en);else{if(!Re.source&&_t==="param"&&(Re.source=en.map.movie),(_t==="iframe"||_t==="object"||_t==="embed"||_t==="video"||_t==="audio")&&(Re.type||(Re.type=_t),Re=wt.extend(en.map,Re)),_t==="script"){var Wn=Go(ne,en.map.src);if(!Wn)return;Re={type:"script",source:en.map.src,width:String(Wn.width),height:String(Wn.height)}}_t==="source"&&(Re.source?Re.altsource||(Re.altsource=en.map.src):Re.source=en.map.src),_t==="img"&&!Re.poster&&(Re.poster=en.map.src)}}}).parse(Ce),Re.source=Re.source||Re.src||Re.data,Re.altsource=Re.altsource||"",Re.poster=Re.poster||"",Re},gt=function(ne){var Ce={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},ie=ne.toLowerCase().split(".").pop(),Re=Ce[ie];return Re||""},Lt=tinymce.util.Tools.resolve("tinymce.html.Schema"),Ro=tinymce.util.Tools.resolve("tinymce.html.Writer"),Er=jt.DOM,Nt=function(ne){return/^[0-9.]+$/.test(ne)?ne+"px":ne},Dn=function(ne,Ce){$t(Ce,function(ie,Re){var _t=""+ie;if(ne.map[Re])for(var en=ne.length;en--;){var Wn=ne[en];Wn.name===Re&&(_t?(ne.map[Re]=_t,Wn.value=_t):(delete ne.map[Re],ne.splice(en,1)))}else _t&&(ne.push({name:Re,value:_t}),ne.map[Re]=_t)})},$n=function(ne,Ce){var ie=Ce.map.style,Re=ie?Er.parseStyle(ie):{};Re["max-width"]=Nt(ne.width),Re["max-height"]=Nt(ne.height),Dn(Ce,{style:Er.serializeStyle(Re)})},pt=["source","altsource"],lr=function(ne,Ce,ie){var Re=Ro(),_t=Vt(!1),en=0,Wn;return go({validate:!1,allow_conditional_comments:!0,comment:function(Kn){Re.comment(Kn)},cdata:function(Kn){Re.cdata(Kn)},text:function(Kn,_r){Re.text(Kn,_r)},start:function(Kn,_r,Ur){if(!_t.get())if(ja(_r.map,"data-ephox-embed-iri"))_t.set(!0),$n(Ce,_r);else{switch(Kn){case"video":case"object":case"embed":case"img":case"iframe":Ce.height!==void 0&&Ce.width!==void 0&&Dn(_r,{width:Ce.width,height:Ce.height});break}if(ie)switch(Kn){case"video":Dn(_r,{poster:Ce.poster,src:""}),Ce.altsource&&Dn(_r,{src:""});break;case"iframe":Dn(_r,{src:Ce.source});break;case"source":if(en<2&&(Dn(_r,{src:Ce[pt[en]],type:Ce[pt[en]+"mime"]}),!Ce[pt[en]]))return;en++;break;case"img":if(!Ce.poster)return;Wn=!0;break}}Re.start(Kn,_r,Ur)},end:function(Kn){if(!_t.get()){if(Kn==="video"&&ie){for(var _r=0;_r<2;_r++)if(Ce[pt[_r]]){var Ur=[];Ur.map={},en<=_r&&(Dn(Ur,{src:Ce[pt[_r]],type:Ce[pt[_r]+"mime"]}),Re.start("source",Ur,!0))}}if(Ce.poster&&Kn==="object"&&ie&&!Wn){var xr=[];xr.map={},Dn(xr,{src:Ce.poster,width:Ce.width,height:Ce.height}),Re.start("img",xr,!0)}}Re.end(Kn)}},Lt({})).parse(ne),Re.getContent()},Ra=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],bn=function(ne){var Ce=ne.match(/^(https?:\/\/|www\.)(.+)$/i);return Ce&&Ce.length>1?Ce[1]==="www."?"https://":Ce[1]:"https://"},Yr=function(ne,Ce){for(var ie=bn(Ce),Re=ne.regex.exec(Ce),_t=ie+ne.url,en=function(Kn){_t=_t.replace("$"+Kn,function(){return Re[Kn]?Re[Kn]:""})},Wn=0;Wn<Re.length;Wn++)en(Wn);return _t.replace(/\?$/,"")},ta=function(ne){var Ce=Ra.filter(function(ie){return ie.regex.test(ne)});return Ce.length>0?wt.extend({},Ce[0],{url:Yr(Ce[0],ne)}):null},Nn=function(ne){var Ce=ne.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ne.source+'" width="'+ne.width+'" height="'+ne.height+'"'+Ce+"></iframe>"},ya=function(ne){var Ce='<object data="'+ne.source+'" width="'+ne.width+'" height="'+ne.height+'" type="application/x-shockwave-flash">';return ne.poster&&(Ce+='<img src="'+ne.poster+'" width="'+ne.width+'" height="'+ne.height+'" />'),Ce+="</object>",Ce},qo=function(ne,Ce){return Ce?Ce(ne):'<audio controls="controls" src="'+ne.source+'">'+(ne.altsource?`
<source src="`+ne.altsource+'"'+(ne.altsourcemime?' type="'+ne.altsourcemime+'"':"")+` />
`:"")+"</audio>"},xi=function(ne,Ce){return Ce?Ce(ne):'<video width="'+ne.width+'" height="'+ne.height+'"'+(ne.poster?' poster="'+ne.poster+'"':"")+` controls="controls">
<source src="`+ne.source+'"'+(ne.sourcemime?' type="'+ne.sourcemime+'"':"")+` />
`+(ne.altsource?'<source src="'+ne.altsource+'"'+(ne.altsourcemime?' type="'+ne.altsourcemime+'"':"")+` />
`:"")+"</video>"},fi=function(ne){return'<script src="'+ne.source+'"><\/script>'},ni=function(ne,Ce){var ie=wt.extend({},Ce);if(!ie.source&&(wt.extend(ie,Ja(ve(ne),ie.embed)),!ie.source))return"";ie.altsource||(ie.altsource=""),ie.poster||(ie.poster=""),ie.source=ne.convertURL(ie.source,"source"),ie.altsource=ne.convertURL(ie.altsource,"source"),ie.sourcemime=gt(ie.source),ie.altsourcemime=gt(ie.altsource),ie.poster=ne.convertURL(ie.poster,"poster");var Re=ta(ie.source);if(Re&&(ie.source=Re.url,ie.type=Re.type,ie.allowfullscreen=Re.allowFullscreen,ie.width=ie.width||String(Re.w),ie.height=ie.height||String(Re.h)),ie.embed)return lr(ie.embed,ie,!0);var _t=Go(ve(ne),ie.source);_t&&(ie.type="script",ie.width=String(_t.width),ie.height=String(_t.height));var en=Y(ne),Wn=Pn(ne);return ie.width=ie.width||"300",ie.height=ie.height||"150",wt.each(ie,function(Kn,_r){ie[_r]=ne.dom.encode(""+Kn)}),ie.type==="iframe"?Nn(ie):ie.sourcemime==="application/x-shockwave-flash"?ya(ie):ie.sourcemime.indexOf("audio")!==-1?qo(ie,en):ie.type==="script"?fi(ie):xi(ie,Wn)},io=function(ne){return ne.hasAttribute("data-mce-object")||ne.hasAttribute("data-ephox-embed-iri")},Ti=function(ne){ne.on("click keyup touchend",function(){var Ce=ne.selection.getNode();Ce&&ne.dom.hasClass(Ce,"mce-preview-object")&&ne.dom.getAttrib(Ce,"data-mce-selected")&&Ce.setAttribute("data-mce-selected","2")}),ne.on("ObjectSelected",function(Ce){var ie=Ce.target.getAttribute("data-mce-object");ie==="script"&&Ce.preventDefault()}),ne.on("ObjectResized",function(Ce){var ie=Ce.target;if(ie.getAttribute("data-mce-object")){var Re=ie.getAttribute("data-mce-html");Re&&(Re=unescape(Re),ie.setAttribute("data-mce-html",escape(lr(Re,{width:String(Ce.width),height:String(Ce.height)}))))}})},Co=tinymce.util.Tools.resolve("tinymce.util.Promise"),ra={},Qr=function(ne,Ce,ie){return new Co(function(Re,_t){var en=function(Wn){return Wn.html&&(ra[ne.source]=Wn),Re({url:ne.source,html:Wn.html?Wn.html:Ce(ne)})};ra[ne.source]?en(ra[ne.source]):ie({url:ne.source},en,_t)})},Ga=function(ne,Ce){return Co.resolve({html:Ce(ne),url:ne.source})},na=function(ne){return function(Ce){return ni(ne,Ce)}},Pr=function(ne,Ce){var ie=Oa(ne);return ie?Qr(Ce,na(ne),ie):Ga(Ce,na(ne))},Ie=function(ne){return ja(ra,ne)},Xt=function(ne,Ce){return We(Ce,ne).bind(function(ie){return We(ie,"meta")})},sn=function(ne,Ce,ie){return function(Re){var _t,en=function(){return We(ne,Re)},Wn=function(){return We(Ce,Re)},Kn=function(xr){return We(xr,"value").bind(function(Ma){return Ma.length>0?qt.some(Ma):qt.none()})},_r=function(){return en().bind(function(xr){return Qt(xr)?Kn(xr).orThunk(Wn):Wn().orThunk(function(){return qt.from(xr)})})},Ur=function(){return Wn().orThunk(function(){return en().bind(function(xr){return Qt(xr)?Kn(xr):qt.from(xr)})})};return _t={},_t[Re]=(Re===ie?_r():Ur()).getOr(""),_t}},Zt=function(ne,Ce){var ie={};return We(ne,"dimensions").each(function(Re){Ne(["width","height"],function(_t){We(Ce,_t).orThunk(function(){return We(Re,_t)}).each(function(en){return ie[_t]=en})})}),ie},Or=function(ne,Ce){var ie=Ce?Xt(Ce,ne).getOr({}):{},Re=sn(ne,ie,Ce);return nt(nt(nt(nt(nt({},Re("source")),Re("altsource")),Re("poster")),Re("embed")),Zt(ne,ie))},Nr=function(ne){var Ce=nt(nt({},ne),{source:{value:We(ne,"source").getOr("")},altsource:{value:We(ne,"altsource").getOr("")},poster:{value:We(ne,"poster").getOr("")}});return Ne(["width","height"],function(ie){We(ne,ie).each(function(Re){var _t=Ce.dimensions||{};_t[ie]=Re,Ce.dimensions=_t})}),Ce},Ia=function(ne){return function(Ce){var ie=Ce&&Ce.msg?"Media embed handler error: "+Ce.msg:"Media embed handler threw unknown error.";ne.notificationManager.open({type:"error",text:ie})}},yn=function(ne,Ce){return Ja(ve(ne),Ce)},Ar=function(ne){var Ce=ne.selection.getNode(),ie=io(Ce)?ne.serializer.serialize(Ce,{selection:!0}):"";return nt({embed:ie},Ja(ve(ne),ie))},wa=function(ne,Ce){return function(ie){if(dt(ie.url)&&ie.url.trim().length>0){var Re=ie.html,_t=yn(Ce,Re),en=nt(nt({},_t),{source:ie.url,embed:Re});ne.setData(Nr(en))}}},Mo=function(ne,Ce){for(var ie=ne.dom.select("*[data-mce-object]"),Re=0;Re<Ce.length;Re++)for(var _t=ie.length-1;_t>=0;_t--)Ce[Re]===ie[_t]&&ie.splice(_t,1);ne.selection.select(ie[0])},ji=function(ne,Ce){var ie=ne.dom.select("*[data-mce-object]");ne.insertContent(Ce),Mo(ne,ie),ne.nodeChanged()},Ir=function(ne,Ce,ie){Ce.embed=lr(Ce.embed,Ce),Ce.embed&&(ne.source===Ce.source||Ie(Ce.source))?ji(ie,Ce.embed):Pr(ie,Ce).then(function(Re){ji(ie,Re.html)}).catch(Ia(ie))},fr=function(ne){var Ce=Ar(ne),ie=Vt(Ce),Re=Nr(Ce),_t=function(Pa,$a){var lt=Or($a.getData(),"source");Pa.source!==lt.source&&(wa(lu,ne)({url:lt.source,html:""}),Pr(ne,lt).then(wa(lu,ne)).catch(Ia(ne)))},en=function(Pa){var $a=Or(Pa.getData()),lt=yn(ne,$a.embed);Pa.setData(Nr(lt))},Wn=function(Pa,$a){var lt=Or(Pa.getData(),$a),no=ni(ne,lt);Pa.setData(Nr(nt(nt({},lt),{embed:no})))},Kn=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],_r=Aa(ne)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Ur={title:"General",name:"general",items:ke([Kn,_r])},xr={type:"textarea",name:"embed",label:"Paste your embed code below:"},Ma={title:"Embed",items:[xr]},Ba=[];Vr(ne)&&Ba.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),R(ne)&&Ba.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var Ki={title:"Advanced",name:"advanced",items:Ba},ho=[Ur,Ma];Ba.length>0&&ho.push(Ki);var ri={type:"tabpanel",tabs:ho},lu=ne.windowManager.open({title:"Insert/Edit Media",size:"normal",body:ri,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(Pa){var $a=Or(Pa.getData());Ir(ie.get(),$a,ne),Pa.close()},onChange:function(Pa,$a){switch($a.name){case"source":_t(ie.get(),Pa);break;case"embed":en(Pa);break;case"dimensions":case"altsource":case"poster":Wn(Pa,$a.name);break}ie.set(Or(Pa.getData()))},initialData:Re})},So=function(ne){var Ce=function(){fr(ne)};return{showDialog:Ce}},vi=function(ne){var Ce=function(){fr(ne)};ne.addCommand("mceMedia",Ce)},Lo=tinymce.util.Tools.resolve("tinymce.html.Node"),xo=tinymce.util.Tools.resolve("tinymce.Env"),Ko=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Gi=function(ne,Ce){if(Mt(ne)===!1)return Ce;var ie=Ro(),Re;return go({validate:!1,allow_conditional_comments:!1,comment:function(_t){Re||ie.comment(_t)},cdata:function(_t){Re||ie.cdata(_t)},text:function(_t,en){Re||ie.text(_t,en)},start:function(_t,en,Wn){if(Re=!0,!(_t==="script"||_t==="noscript"||_t==="svg")){for(var Kn=en.length-1;Kn>=0;Kn--){var _r=en[Kn].name;_r.indexOf("on")===0&&(delete en.map[_r],en.splice(Kn,1)),_r==="style"&&(en[Kn].value=ne.dom.serializeStyle(ne.dom.parseStyle(en[Kn].value),_t))}ie.start(_t,en,Wn),Re=!1}},end:function(_t){Re||ie.end(_t)}},Lt({})).parse(Ce),ie.getContent()},di=function(ne){var Ce=ne.name;return Ce==="iframe"||Ce==="video"||Ce==="audio"},Ho=function(ne,Ce,ie,Re){Re===void 0&&(Re=null);var _t=ne.attr(ie);return pn(_t)?_t:ja(Ce,ie)?null:Re},qi=function(ne,Ce,ie){var Re=Ce.name==="img"||ne.name==="video",_t=Re?"300":null,en=ne.name==="audio"?"30":"150",Wn=Re?en:null;Ce.attr({width:Ho(ne,ie,"width",_t),height:Ho(ne,ie,"height",Wn)})},$r=function(ne,Ce,ie,Re){for(var _t=Ko({forced_root_block:!1,validate:!1},ne.schema).parse(Re,{context:Ce});_t.firstChild;)ie.append(_t.firstChild)},mi=function(ne,Ce){var ie=Ce.name,Re=new Lo("img",1);return Re.shortEnded=!0,Ju(ne,Ce,Re),qi(Ce,Re,{}),Re.attr({style:Ce.attr("style"),src:xo.transparentSrc,"data-mce-object":ie,class:"mce-object mce-object-"+ie}),Re},kn=function(ne,Ce){var ie=Ce.name,Re=new Lo("span",1);Re.attr({contentEditable:"false",style:Ce.attr("style"),"data-mce-object":ie,class:"mce-preview-object mce-object-"+ie}),Ju(ne,Ce,Re);var _t=ne.dom.parseStyle(Ce.attr("style")),en=new Lo(ie,1);if(qi(Ce,en,_t),en.attr({src:Ce.attr("src"),style:Ce.attr("style"),class:Ce.attr("class")}),ie==="iframe")en.attr({allowfullscreen:Ce.attr("allowfullscreen"),frameborder:"0"});else{var Wn=["controls","crossorigin","currentTime","loop","muted","poster","preload"];Ne(Wn,function(Ur){en.attr(Ur,Ce.attr(Ur))});var Kn=Re.attr("data-mce-html");pn(Kn)&&$r(ne,ie,en,unescape(Kn))}var _r=new Lo("span",1);return _r.attr("class","mce-shim"),Re.append(en),Re.append(_r),Re},Ju=function(ne,Ce,ie){for(var Re=Ce.attributes,_t=Re.length;_t--;){var en=Re[_t].name,Wn=Re[_t].value;en!=="width"&&en!=="height"&&en!=="style"&&((en==="data"||en==="src")&&(Wn=ne.convertURL(Wn,en)),ie.attr("data-mce-p-"+en,Wn))}var Kn=Ce.firstChild&&Ce.firstChild.value;Kn&&(ie.attr("data-mce-html",escape(Gi(ne,Kn))),ie.firstChild=null)},Xo=function(ne){var Ce=ne.attr("class");return Ce&&/\btiny-pageembed\b/.test(Ce)},ki=function(ne){for(;ne=ne.parent;)if(ne.attr("data-ephox-embed-iri")||Xo(ne))return!0;return!1},Yo=function(ne){return function(Ce){for(var ie=Ce.length,Re,_t;ie--;)Re=Ce[ie],Re.parent&&(Re.parent.attr("data-mce-object")||Re.name==="script"&&(_t=Go(ve(ne),Re.attr("src")),!_t)||(_t&&(_t.width&&Re.attr("width",_t.width.toString()),_t.height&&Re.attr("height",_t.height.toString())),di(Re)&&Ea(ne)&&xo.ceFalse?ki(Re)||Re.replace(kn(ne,Re)):ki(Re)||Re.replace(mi(ne,Re))))}},Fi=function(ne){ne.on("preInit",function(){var Ce=ne.schema.getSpecialElements();wt.each("video audio iframe object".split(" "),function(Re){Ce[Re]=new RegExp("</"+Re+"[^>]*>","gi")});var ie=ne.schema.getBoolAttrs();wt.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(Re){ie[Re]={}}),ne.parser.addNodeFilter("iframe,video,audio,object,embed,script",Yo(ne)),ne.serializer.addAttributeFilter("data-mce-object",function(Re,_t){for(var en=Re.length,Wn,Kn,_r,Ur,xr,Ma,Ba,Ki;en--;)if(Wn=Re[en],!!Wn.parent){for(Ba=Wn.attr(_t),Kn=new Lo(Ba,1),Ba!=="audio"&&Ba!=="script"&&(Ki=Wn.attr("class"),Ki&&Ki.indexOf("mce-preview-object")!==-1?Kn.attr({width:Wn.firstChild.attr("width"),height:Wn.firstChild.attr("height")}):Kn.attr({width:Wn.attr("width"),height:Wn.attr("height")})),Kn.attr({style:Wn.attr("style")}),Ur=Wn.attributes,_r=Ur.length;_r--;){var ho=Ur[_r].name;ho.indexOf("data-mce-p-")===0&&Kn.attr(ho.substr(11),Ur[_r].value)}Ba==="script"&&Kn.attr("type","text/javascript"),xr=Wn.attr("data-mce-html"),xr&&(Ma=new Lo("#text",3),Ma.raw=!0,Ma.value=Gi(ne,unescape(xr)),Kn.append(Ma)),Wn.replace(Kn)}})}),ne.on("SetContent",function(){ne.$("span.mce-preview-object").each(function(Ce,ie){var Re=ne.$(ie);Re.find("span.mce-shim").length===0&&Re.append('<span class="mce-shim"></span>')})})},Lu=function(ne){ne.on("ResolveName",function(Ce){var ie;Ce.target.nodeType===1&&(ie=Ce.target.getAttribute("data-mce-object"))&&(Ce.name=ie)})},gi=function(ne){var Ce=function(){return ne.execCommand("mceMedia")};ne.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Ce,onSetup:function(ie){var Re=ne.selection;return ie.setActive(io(Re.getNode())),Re.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",ie.setActive).unbind}}),ne.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Ce})};function Zu(){le.add("media",function(ne){return vi(ne),gi(ne),Lu(ne),Fi(ne),Ti(ne),So(ne)})}Zu()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=tinymce.util.Tools.resolve("tinymce.Env"),ln=function(Ve){return Ve.getParam("pagebreak_separator","<!-- pagebreak -->")},Gt=function(Ve){return Ve.getParam("pagebreak_split_block",!1)},dt="mce-pagebreak",Qt=function(Ve){var Ft='<img src="'+nt.transparentSrc+'" class="'+dt+'" data-mce-resize="false" data-mce-placeholder />';return Ve?"<p>"+Ft+"</p>":Ft},Sn=function(Ve){var Ft=ln(Ve),xn=function(){return Gt(Ve)},ze=new RegExp(Ft.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(ge){return"\\"+ge}),"gi");Ve.on("BeforeSetContent",function(ge){ge.content=ge.content.replace(ze,Qt(xn()))}),Ve.on("PreInit",function(){Ve.serializer.addNodeFilter("img",function(ge){for(var Tt=ge.length,Ze,qt;Tt--;)if(Ze=ge[Tt],qt=Ze.attr("class"),qt&&qt.indexOf(dt)!==-1){var Z=Ze.parent;if(Ve.schema.getBlockElements()[Z.name]&&xn()){Z.type=3,Z.value=Ft,Z.raw=!0,Ze.remove();continue}Ze.type=3,Ze.value=Ft,Ze.raw=!0}})})},Mn=function(Ve){Ve.addCommand("mcePageBreak",function(){Ve.insertContent(Qt(Gt(Ve)))})},pn=function(Ve){Ve.on("ResolveName",function(Ft){Ft.target.nodeName==="IMG"&&Ve.dom.hasClass(Ft.target,dt)&&(Ft.name="pagebreak")})},Dr=function(Ve){var Ft=function(){return Ve.execCommand("mcePageBreak")};Ve.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Ft}),Ve.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Ft})};function Bn(){le.add("pagebreak",function(Ve){Mn(Ve),Dr(Ve),Sn(Ve),pn(Ve)})}Bn()})();(function(){var le=function(w){var A=w,L=function(){return A},te=function(Te){A=Te};return{get:L,set:te}},nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),ln=function(w){return w.hasPlugin("powerpaste",!0)?(typeof window.console<"u"&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0):!1},Gt=function(w){return{clipboard:w}},dt=function(w){var A=typeof w;return w===null?"null":A==="object"&&(Array.prototype.isPrototypeOf(w)||w.constructor&&w.constructor.name==="Array")?"array":A==="object"&&(String.prototype.isPrototypeOf(w)||w.constructor&&w.constructor.name==="String")?"string":A},Qt=function(w){return function(A){return dt(A)===w}},Sn=function(w){return function(A){return typeof A===w}},Mn=Qt("array"),pn=function(w){return w==null},Dr=function(w){return!pn(w)},Bn=Sn("function"),Ve=function(){},Ft=function(w){return function(){return w}},xn=function(w){return w},ze=Ft(!1),ge=Ft(!0),Tt=function(){return Ze},Ze=function(){var w=function(te){return te()},A=xn,L={fold:function(te,Te){return te()},isSome:ze,isNone:ge,getOr:A,getOrThunk:w,getOrDie:function(te){throw new Error(te||"error: getOrDie called on none.")},getOrNull:Ft(null),getOrUndefined:Ft(void 0),or:A,orThunk:w,map:Tt,each:Ve,bind:Tt,exists:ze,forall:ge,filter:function(){return Tt()},toArray:function(){return[]},toString:Ft("none()")};return L}(),qt=function(w){var A=Ft(w),L=function(){return Te},te=function(tt){return tt(w)},Te={fold:function(tt,dn){return dn(w)},isSome:ge,isNone:ze,getOr:A,getOrThunk:A,getOrDie:A,getOrNull:A,getOrUndefined:A,or:L,orThunk:L,map:function(tt){return qt(tt(w))},each:function(tt){tt(w)},bind:te,exists:te,forall:te,filter:function(tt){return tt(w)?Te:Ze},toArray:function(){return[w]},toString:function(){return"some("+w+")"}};return Te},Z=function(w){return w==null?Ze:qt(w)},Ne={some:qt,none:Tt,from:Z},ke=Array.prototype.slice,Vt=Array.prototype.push,Kt=function(w,A){for(var L=0,te=w.length;L<te;L++){var Te=w[L];if(A(Te,L))return!0}return!1},ht=function(w,A){for(var L=w.length,te=new Array(L),Te=0;Te<L;Te++){var tt=w[Te];te[Te]=A(tt,Te)}return te},$t=function(w,A){for(var L=0,te=w.length;L<te;L++){var Te=w[L];A(Te,L)}},We=function(w,A){for(var L=[],te=0,Te=w.length;te<Te;te++){var tt=w[te];A(tt,te)&&L.push(tt)}return L},ja=function(w,A,L){return $t(w,function(te,Te){L=A(L,te,Te)}),L},ve=function(w){for(var A=[],L=0,te=w.length;L<te;++L){if(!Mn(w[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+w);Vt.apply(A,w[L])}return A},Y=function(w,A){return ve(ht(w,A))},Pn=Bn(Array.from)?Array.from:function(w){return ke.call(w)},Ea=function(){return Ea=Object.assign||function(A){for(var L,te=1,Te=arguments.length;te<Te;te++){L=arguments[te];for(var tt in L)Object.prototype.hasOwnProperty.call(L,tt)&&(A[tt]=L[tt])}return A},Ea.apply(this,arguments)},Mt=function(w){var A=le(Ne.none()),L=function(){return A.get().each(w)},te=function(){L(),A.set(Ne.none())},Te=function(){return A.get().isSome()},tt=function(){return A.get()},dn=function(Fn){L(),A.set(Ne.some(Fn))};return{clear:te,isSet:Te,get:tt,set:dn}},Oa=function(){var w=Mt(Ve),A=function(L){return w.get().each(L)};return Ea(Ea({},w),{on:A})},Vr=function(w,A,L){return A===""||w.length>=A.length&&w.substr(L,L+A.length)===A},R=function(w,A){return Vr(w,A,0)},Aa=function(w,A){return Vr(w,A,w.length-A.length)},wt=function(w,A){return A<=0?"":new Array(A+1).join(w)},jt=tinymce.util.Tools.resolve("tinymce.Env"),go=tinymce.util.Tools.resolve("tinymce.util.Delay"),Go=tinymce.util.Tools.resolve("tinymce.util.Promise"),nr=tinymce.util.Tools.resolve("tinymce.util.VK"),ba=function(w,A,L,te){return w.fire("PastePreProcess",{content:A,internal:L,wordContent:te})},Q=function(w,A,L,te){return w.fire("PastePostProcess",{node:A,internal:L,wordContent:te})},Ja=function(w,A){return w.fire("PastePlainTextToggle",{state:A})},gt=function(w,A){return w.fire("paste",{ieFake:A})},Lt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ro=function(w){return w.getParam("paste_block_drop",!1)},Er=function(w){return w.getParam("paste_data_images",!1)},Nt=function(w){return w.getParam("paste_filter_drop",!0)},Dn=function(w){return w.getParam("paste_preprocess")},$n=function(w){return w.getParam("paste_postprocess")},pt=function(w){return w.getParam("paste_webkit_styles")},lr=function(w){return w.getParam("paste_remove_styles_if_webkit",!0)},Ra=function(w){return w.getParam("paste_merge_formats",!0)},bn=function(w){return w.getParam("smart_paste",!0)},Yr=function(w){return w.getParam("paste_as_text",!1)},ta=function(w){return w.getParam("paste_retain_style_properties")},Nn=function(w){var A="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return w.getParam("paste_word_valid_elements",A)},ya=function(w){return w.getParam("paste_convert_word_fake_lists",!0)},qo=function(w){return w.getParam("paste_enable_default_filters",!0)},xi=function(w){return w.getParam("validate")},fi=function(w){return w.getParam("allow_html_data_urls",!1,"boolean")},ni=function(w){return w.getParam("paste_data_images",!1,"boolean")},io=function(w){return w.getParam("images_dataimg_filter")},Ti=function(w){return w.getParam("images_reuse_filename")},Co=function(w){return w.getParam("forced_root_block")},ra=function(w){return w.getParam("forced_root_block_attrs")},Qr=function(w){return w.getParam("paste_tab_spaces",4,"number")},Ga=function(w){var A="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp";return Lt.explode(w.getParam("images_file_types",A,"string"))},na="x-tinymce/html",Pr="<!-- "+na+" -->",Ie=function(w){return Pr+w},Xt=function(w){return w.replace(Pr,"")},sn=function(w){return w.indexOf(Pr)!==-1},Zt=Ft(na),Or=Object.hasOwnProperty,Nr=function(w,A){return Or.call(w,A)},Ia=tinymce.util.Tools.resolve("tinymce.html.Entities"),yn=function(w){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(w)},Ar=function(w){return w.replace(/\r?\n/g,"<br>")},wa=function(w,A){var L=[],te="<"+w;if(typeof A=="object"){for(var Te in A)Nr(A,Te)&&L.push(Te+'="'+Ia.encodeAllRaw(A[Te])+'"');L.length&&(te+=" "+L.join(" "))}return te+">"},Mo=function(w,A,L){var te=w.split(/\n\n/),Te=wa(A,L),tt="</"+A+">",dn=Lt.map(te,function(Rt){return Rt.split(/\n/).join("<br />")}),Fn=function(Rt){return Te+Rt+tt};return dn.length===1?dn[0]:Lt.map(dn,Fn).join("")},ji=function(w,A,L){return A?Mo(w,A===!0?"p":A,L):Ar(w)},Ir=tinymce.util.Tools.resolve("tinymce.html.DomParser"),fr=tinymce.util.Tools.resolve("tinymce.html.Serializer"),So=" ",vi=tinymce.util.Tools.resolve("tinymce.html.Node"),Lo=tinymce.util.Tools.resolve("tinymce.html.Schema"),xo=function(w){return w.constructor===RegExp},Ko=function(w,A){return Lt.each(A,function(L){xo(L)?w=w.replace(L,""):w=w.replace(L[0],L[1])}),w},Gi=function(w){var A=Lo(),L=Ir({},A),te="",Te=A.getShortEndedElements(),tt=Lt.makeMap("script noscript style textarea video audio iframe object"," "),dn=A.getBlockElements(),Fn=function(Rt){var fn=Rt.name,ir=Rt;if(fn==="br"){te+=`
`;return}if(fn!=="wbr"){if(Te[fn]&&(te+=" "),tt[fn]){te+=" ";return}if(Rt.type===3&&(te+=Rt.value),!Rt.shortEnded&&(Rt=Rt.firstChild))do Fn(Rt);while(Rt=Rt.next);dn[fn]&&ir.next&&(te+=`
`,fn==="p"&&(te+=`
`))}};return w=Ko(w,[/<!\[[^\]]+\]>/g]),Fn(L.parse(w)),te},di=function(w){var A=function(L,te,Te){return!te&&!Te?" ":So};return w=Ko(w,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,A],/<br class="Apple-interchange-newline">/g,/<br>$/i]),w},Ho=function(w){var A=0;return function(){return w+A++}},qi=function(w){var A=w.toLowerCase(),L={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Lt.hasOwn(L,A)?"image/"+L[A]:"image/"+A},$r=function(w){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(w)||/class="OutlineElement/.test(w)||/id="?docs\-internal\-guid\-/.test(w)},mi=function(w){var A=!1,L=[/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return w=w.replace(/^[\u00a0 ]+/,""),Lt.each(L,function(te){if(te.test(w))return A=!0,!1}),A},kn=function(w){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(w)},Ju=function(w){for(var A,L,te=1,Te=function(jn){var Ca="";if(jn.type===3)return jn.value;if(jn=jn.firstChild)do Ca+=Te(jn);while(jn=jn.next);return Ca},tt=function(jn,Ca){if(jn.type===3&&Ca.test(jn.value))return jn.value=jn.value.replace(Ca,""),!1;if(jn=jn.firstChild)do if(!tt(jn,Ca))return!1;while(jn=jn.next);return!0},dn=function(jn){if(jn._listIgnore){jn.remove();return}if(jn=jn.firstChild)do dn(jn);while(jn=jn.next)},Fn=function(jn,Ca,ca){var Oi=jn._listLevel||te;Oi!==te&&(Oi<te?A&&(A=A.parent.parent):(L=A,A=null)),!A||A.name!==Ca?(L=L||A,A=new vi(Ca,1),ca>1&&A.attr("start",""+ca),jn.wrap(A)):A.append(jn),jn.name="li",Oi>te&&L&&L.lastChild.append(A),te=Oi,dn(jn),tt(jn,/^\u00a0+/),tt(jn,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),tt(jn,/^\u00a0+/)},Rt=[],fn=w.firstChild;typeof fn<"u"&&fn!==null;)if(Rt.push(fn),fn=fn.walk(),fn!==null)for(;typeof fn<"u"&&fn.parent!==w;)fn=fn.walk();for(var ir=0;ir<Rt.length;ir++)if(w=Rt[ir],w.name==="p"&&w.firstChild){var rr=Te(w);if(kn(rr)){Fn(w,"ul");continue}if(mi(rr)){var Yn=/([0-9]+)\./.exec(rr),La=1;Yn&&(La=parseInt(Yn[1],10)),Fn(w,"ol",La);continue}if(w._listLevel){Fn(w,"ul",1);continue}A=null}else L=A,A=null},Xo=function(w,A,L,te){var Te={},tt=w.dom.parseStyle(te);Lt.each(tt,function(Fn,Rt){switch(Rt){case"mso-list":var fn=/\w+ \w+([0-9]+)/i.exec(te);fn&&(L._listLevel=parseInt(fn[1],10)),/Ignore/i.test(Fn)&&L.firstChild&&(L._listIgnore=!0,L.firstChild._listIgnore=!0);break;case"horiz-align":Rt="text-align";break;case"vert-align":Rt="vertical-align";break;case"font-color":case"mso-foreground":Rt="color";break;case"mso-background":case"mso-highlight":Rt="background";break;case"font-weight":case"font-style":Fn!=="normal"&&(Te[Rt]=Fn);return;case"mso-element":if(/^(comment|comment-list)$/i.test(Fn)){L.remove();return}break}if(Rt.indexOf("mso-comment")===0){L.remove();return}Rt.indexOf("mso-")!==0&&(ta(w)==="all"||A&&A[Rt])&&(Te[Rt]=Fn)}),/(bold)/i.test(Te["font-weight"])&&(delete Te["font-weight"],L.wrap(new vi("b",1))),/(italic)/i.test(Te["font-style"])&&(delete Te["font-style"],L.wrap(new vi("i",1)));var dn=w.dom.serializeStyle(Te,L.name);return dn||null},ki=function(w,A){var L,te=ta(w);te&&(L=Lt.makeMap(te.split(/[, ]/))),A=Ko(A,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,So],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(Rt,fn){return fn.length>0?fn.replace(/./," ").slice(Math.floor(fn.length/2)).split("").join(So):""}]]);var Te=Nn(w),tt=Lo({valid_elements:Te,valid_children:"-li[p]"});Lt.each(tt.elements,function(Rt){Rt.attributes.class||(Rt.attributes.class={},Rt.attributesOrder.push("class")),Rt.attributes.style||(Rt.attributes.style={},Rt.attributesOrder.push("style"))});var dn=Ir({},tt);dn.addAttributeFilter("style",function(Rt){for(var fn=Rt.length,ir;fn--;)ir=Rt[fn],ir.attr("style",Xo(w,L,ir,ir.attr("style"))),ir.name==="span"&&ir.parent&&!ir.attributes.length&&ir.unwrap()}),dn.addAttributeFilter("class",function(Rt){for(var fn=Rt.length,ir,rr;fn--;)ir=Rt[fn],rr=ir.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(rr)&&ir.remove(),ir.attr("class",null)}),dn.addNodeFilter("del",function(Rt){for(var fn=Rt.length;fn--;)Rt[fn].remove()}),dn.addNodeFilter("a",function(Rt){for(var fn=Rt.length,ir,rr,Yn;fn--;){if(ir=Rt[fn],rr=ir.attr("href"),Yn=ir.attr("name"),rr&&rr.indexOf("#_msocom_")!==-1){ir.remove();continue}if(rr&&rr.indexOf("file://")===0&&(rr=rr.split("#")[1],rr&&(rr="#"+rr)),!rr&&!Yn)ir.unwrap();else{if(Yn&&!/^_?(?:toc|edn|ftn)/i.test(Yn)){ir.unwrap();continue}ir.attr({href:rr,name:Yn})}}});var Fn=dn.parse(A);return ya(w)&&Ju(Fn),A=fr({validate:xi(w)},tt).serialize(Fn),A},Yo=function(w,A){return qo(w)?ki(w,A):A},Fi=function(w,A){var L=Ir({},w.schema);L.addNodeFilter("meta",function(Te){Lt.each(Te,function(tt){tt.remove()})});var te=L.parse(A,{forced_root_block:!1,isRootContent:!0});return fr({validate:xi(w)},w.schema).serialize(te)},Lu=function(w,A){return{content:w,cancelled:A}},gi=function(w,A,L,te){var Te=w.dom.create("div",{style:"display:none"},A),tt=Q(w,Te,L,te);return Lu(tt.node.innerHTML,tt.isDefaultPrevented())},Zu=function(w,A,L,te){var Te=ba(w,A,L,te),tt=Fi(w,Te.content);return w.hasEventListeners("PastePostProcess")&&!Te.isDefaultPrevented()?gi(w,tt,L,te):Lu(tt,Te.isDefaultPrevented())},ne=function(w,A,L){var te=$r(A),Te=te?Yo(w,A):A;return Zu(w,Te,L,te)},Ce=function(w,A){return w.insertContent(A,{merge:Ra(w),paste:!0}),!0},ie=function(w){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(w)},Re=function(w,A){return ie(A)&&Kt(Ga(w),function(L){return Aa(A.toLowerCase(),"."+L.toLowerCase())})},_t=function(w,A,L){return w.undoManager.extra(function(){L(w,A)},function(){w.insertContent('<img src="'+A+'">')}),!0},en=function(w,A,L){return w.undoManager.extra(function(){L(w,A)},function(){w.execCommand("mceInsertLink",!1,A)}),!0},Wn=function(w,A,L){return w.selection.isCollapsed()===!1&&ie(A)?en(w,A,L):!1},Kn=function(w,A,L){return Re(w,A)?_t(w,A,L):!1},_r=function(w,A){Lt.each([Wn,Kn,Ce],function(L){return L(w,A,Ce)!==!0})},Ur=function(w,A,L){L||bn(w)===!1?Ce(w,A):_r(w,A)},xr=function(w){return" \f	\v".indexOf(w)!==-1},Ma=function(w){return w===`
`||w==="\r"},Ba=function(w,A){return A<w.length&&A>=0?Ma(w[A]):!1},Ki=function(w,A){var L=wt(" ",Qr(w)),te=A.replace(/\t/g,L),Te=ja(te,function(tt,dn){return xr(dn)||dn===So?tt.pcIsSpace||tt.str===""||tt.str.length===te.length-1||Ba(te,tt.str.length+1)?{pcIsSpace:!1,str:tt.str+So}:{pcIsSpace:!0,str:tt.str+" "}:{pcIsSpace:Ma(dn),str:tt.str+dn}},{pcIsSpace:!1,str:""});return Te.str},ho=function(w,A,L,te){var Te=ne(w,A,L);Te.cancelled===!1&&Ur(w,Te.content,te)},ri=function(w,A,L){var te=L||sn(A);ho(w,Xt(A),te,!1)},lu=function(w,A){var L=w.dom.encode(A).replace(/\r\n/g,`
`),te=Ki(w,L),Te=ji(te,Co(w),ra(w));ho(w,Te,!1,!0)},Pa=function(w){var A={},L="data:text/mce-internal,";if(w){if(w.getData){var te=w.getData("Text");te&&te.length>0&&te.indexOf(L)===-1&&(A["text/plain"]=te)}if(w.types)for(var Te=0;Te<w.types.length;Te++){var tt=w.types[Te];try{A[tt]=w.getData(tt)}catch{A[tt]=""}}}return A},$a=function(w,A){return Pa(A.clipboardData||w.getDoc().dataTransfer)},lt=function(w,A){return A in w&&w[A].length>0},no=function(w){return lt(w,"text/html")||lt(w,"text/plain")},Xi=function(w){var A=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(w);return A?{type:A[1],data:decodeURIComponent(A[2])}:{type:null,data:null}},Qu=function(w,A){var L=io(w);return L?L(A):!0},es=function(w,A){var L=A.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Dr(L)?w.dom.encode(L[1]):null},Tr=Ho("mceclip"),Cs=function(w,A){var L=Xi(A.uri),te=L.data,Te=L.type,tt=Tr(),dn=A.blob,Fn=new Image;if(Fn.src=A.uri,Qu(w,Fn)){var Rt=w.editorUpload.blobCache,fn=void 0,ir=Rt.getByData(te,Te);if(ir)fn=ir;else{var rr=Ti(w)&&Dr(dn.name),Yn=rr?es(w,dn.name):tt,La=rr?dn.name:void 0;fn=Rt.create(tt,dn,te,Yn,La),Rt.add(fn)}ri(w,'<img src="'+fn.blobUri()+'">',!1)}else ri(w,'<img src="'+A.uri+'">',!1)},Yi=function(w){return w.type==="paste"},qa=function(w){return Dr(w.getAsFile)},ts=function(w){return Go.all(ht(w,function(A){return new Go(function(L){var te=qa(A)?A.getAsFile():A,Te=new window.FileReader;Te.onload=function(){L({blob:te,uri:Te.result})},Te.readAsDataURL(te)})}))},ai=function(w){var A=Ga(w);return function(L){return R(L.type,"image/")&&Kt(A,function(te){return qi(te)===L.type})}},hi=function(w,A){var L=A.items?Y(Pn(A.items),function(Te){return Te.kind==="file"?[Te.getAsFile()]:[]}):[],te=A.files?Pn(A.files):[];return We(L.length>0?L:te,ai(w))},ga=function(w,A,L){var te=Yi(A)?A.clipboardData:A.dataTransfer;if(ni(w)&&te){var Te=hi(w,te);if(Te.length>0)return A.preventDefault(),ts(Te).then(function(tt){L&&w.selection.setRng(L),$t(tt,function(dn){Cs(w,dn)})}),!0}return!1},ns=function(w){var A=w.clipboardData;return navigator.userAgent.indexOf("Android")!==-1&&A&&A.items&&A.items.length===0},G=function(w){return nr.metaKeyPressed(w)&&w.keyCode===86||w.shiftKey&&w.keyCode===45},de=function(w,A,L){var te=Oa(),Te=Oa(),tt;w.on("keyup",Te.clear),w.on("keydown",function(Rt){var fn=function(ir){G(ir)&&!ir.isDefaultPrevented()&&A.remove()};if(G(Rt)&&!Rt.isDefaultPrevented()){if(tt=Rt.shiftKey&&Rt.keyCode===86,tt&&jt.webkit&&navigator.userAgent.indexOf("Version/")!==-1)return;if(Rt.stopImmediatePropagation(),te.set(Rt),Te.set(!0),jt.ie&&tt){Rt.preventDefault(),gt(w,!0);return}A.remove(),A.create(),w.once("keyup",fn),w.once("paste",function(){w.off("keyup",fn)})}});var dn=function(Rt,fn,ir,rr,Yn){var La;lt(fn,"text/html")?La=fn["text/html"]:(La=A.getHtml(),Yn=Yn||sn(La),A.isDefaultContent(La)&&(rr=!0)),La=di(La),A.remove();var jn=Yn===!1&&yn(La),Ca=ie(La);if((!La.length||jn&&!Ca)&&(rr=!0),(rr||Ca)&&(lt(fn,"text/plain")&&jn?La=fn["text/plain"]:La=Gi(La)),A.isDefaultContent(La)){ir||Rt.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}rr?lu(Rt,La):ri(Rt,La,Yn)},Fn=function(){return A.getLastRng()||w.selection.getRng()};w.on("paste",function(Rt){var fn=te.isSet()||Te.isSet();fn&&te.clear();var ir=$a(w,Rt),rr=L.get()==="text"||tt,Yn=lt(ir,Zt());if(tt=!1,Rt.isDefaultPrevented()||ns(Rt)){A.remove();return}if(!no(ir)&&ga(w,Rt,Fn())){A.remove();return}fn||Rt.preventDefault(),jt.ie&&(!fn||Rt.ieFake)&&!lt(ir,"text/html")&&(A.create(),w.dom.bind(A.getEl(),"paste",function(La){La.stopPropagation()}),w.getDoc().execCommand("Paste",!1,null),ir["text/html"]=A.getHtml()),lt(ir,"text/html")?(Rt.preventDefault(),Yn||(Yn=sn(ir["text/html"])),dn(w,ir,fn,rr,Yn)):go.setEditorTimeout(w,function(){dn(w,ir,fn,rr,Yn)},0)})},De=function(w,A,L){de(w,A,L);var te;w.parser.addNodeFilter("img",function(Te,tt,dn){var Fn=function(Yn){return Yn.data&&Yn.data.paste===!0},Rt=function(Yn){!Yn.attr("data-mce-object")&&te!==jt.transparentSrc&&Yn.remove()},fn=function(Yn){return Yn.indexOf("webkit-fake-url")===0},ir=function(Yn){return Yn.indexOf("data:")===0};if(!ni(w)&&Fn(dn))for(var rr=Te.length;rr--;)te=Te[rr].attr("src"),te&&(fn(te)||!fi(w)&&ir(te))&&Rt(Te[rr])})},Ke=function(w){return jt.ie&&w.inline?document.body:w.getBody()},zt=function(w){return Ke(w)!==w.getBody()},nn=function(w,A,L){zt(w)&&w.dom.bind(A,"paste keyup",function(te){Ye(w,L)||w.fire("paste")})},mn=function(w,A,L){var te=w.dom,Te=w.getBody();A.set(w.selection.getRng());var tt=w.dom.add(Ke(w),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},L);(jt.ie||jt.gecko)&&te.setStyle(tt,"left",te.getStyle(Te,"direction",!0)==="rtl"?65535:-65535),te.bind(tt,"beforedeactivate focusin focusout",function(dn){dn.stopPropagation()}),nn(w,tt,L),tt.focus(),w.selection.select(tt,!0)},vr=function(w,A){if(V(w)){for(var L=void 0,te=A.get();L=w.dom.get("mcepastebin");)w.dom.remove(L),w.dom.unbind(L);te&&w.selection.setRng(te)}A.set(null)},V=function(w){return w.dom.get("mcepastebin")},fe=function(w){var A=function(Fn,Rt){Fn.appendChild(Rt),w.dom.remove(Rt,!0)},L=Lt.grep(Ke(w).childNodes,function(Fn){return Fn.id==="mcepastebin"}),te=L.shift();Lt.each(L,function(Fn){A(te,Fn)});for(var Te=w.dom.select("div[id=mcepastebin]",te),tt=Te.length-1;tt>=0;tt--){var dn=w.dom.create("div");te.insertBefore(dn,Te[tt]),A(dn,Te[tt])}return te?te.innerHTML:""},xe=function(w,A){return A===w},Pe=function(w){return w&&w.id==="mcepastebin"},Ye=function(w,A){var L=V(w);return Pe(L)&&xe(A,L.innerHTML)},Yt=function(w){var A=le(null),L="%MCEPASTEBIN%";return{create:function(){return mn(w,A,L)},remove:function(){return vr(w,A)},getEl:function(){return V(w)},getHtml:function(){return fe(w)},getLastRng:A.get,isDefault:function(){return Ye(w,L)},isDefaultContent:function(te){return xe(L,te)}}},wn=function(w,A){var L=Yt(w);return w.on("PreInit",function(){return De(w,L,A)}),{pasteFormat:A,pasteHtml:function(te,Te){return ri(w,te,Te)},pasteText:function(te){return lu(w,te)},pasteImageData:function(te,Te){return ga(w,te,Te)},getDataTransferItems:Pa,hasHtmlOrText:no,hasContentType:lt}},zr=function(w,A){A.pasteFormat.get()==="text"?(A.pasteFormat.set("html"),Ja(w,!1)):(A.pasteFormat.set("text"),Ja(w,!0)),w.focus()},or=function(w,A){w.addCommand("mceTogglePlainTextPaste",function(){zr(w,A)}),w.addCommand("mceInsertClipboardContent",function(L,te){te.content&&A.pasteHtml(te.content,te.internal),te.text&&A.pasteText(te.text)})},aa=function(w){return jt.iOS===!1&&typeof(w==null?void 0:w.setData)=="function"},Da=function(w,A,L){if(aa(w))try{return w.clearData(),w.setData("text/html",A),w.setData("text/plain",L),w.setData(Zt(),A),!0}catch{return!1}else return!1},Eu=function(w,A,L,te){Da(w.clipboardData,A.html,A.text)?(w.preventDefault(),te()):L(A.html,te)},To=function(w){return function(A,L){var te=Ie(A),Te=w.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),tt=w.dom.create("div",{contenteditable:"true"},te);w.dom.setStyles(Te,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),Te.appendChild(tt),w.dom.add(w.getBody(),Te);var dn=w.selection.getRng();tt.focus();var Fn=w.dom.createRng();Fn.selectNodeContents(tt),w.selection.setRng(Fn),go.setTimeout(function(){w.selection.setRng(dn),Te.parentNode.removeChild(Te),L()},0)}},Tn=function(w){return{html:w.selection.getContent({contextual:!0}),text:w.selection.getContent({format:"text"})}},St=function(w){return!!w.dom.getParent(w.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",w.getBody())},sa=function(w){return!w.selection.isCollapsed()||St(w)},ko=function(w){return function(A){sa(w)&&Eu(A,Tn(w),To(w),function(){if(jt.browser.isChrome()||jt.browser.isFirefox()){var L=w.selection.getRng();go.setEditorTimeout(w,function(){w.selection.setRng(L),w.execCommand("Delete")},0)}else w.execCommand("Delete")})}},kr=function(w){return function(A){sa(w)&&Eu(A,Tn(w),To(w),Ve)}},Hs=function(w){w.on("cut",ko(w)),w.on("copy",kr(w))},rs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Rc=function(w,A){return rs.getCaretRangeFromPoint(A.clientX,A.clientY,w.getDoc())},qr=function(w){var A=w["text/plain"];return A?A.indexOf("file://")===0:!1},Ei=function(w,A){w.focus(),w.selection.setRng(A)},Mc=function(w,A,L){Ro(w)&&w.on("dragend dragover draggesture dragdrop drop drag",function(te){te.preventDefault(),te.stopPropagation()}),Er(w)||w.on("drop",function(te){var Te=te.dataTransfer;Te&&Te.files&&Te.files.length>0&&te.preventDefault()}),w.on("drop",function(te){var Te=Rc(w,te);if(!(te.isDefaultPrevented()||L.get())){var tt=A.getDataTransferItems(te.dataTransfer),dn=A.hasContentType(tt,Zt());if(!((!A.hasHtmlOrText(tt)||qr(tt))&&A.pasteImageData(te,Te))&&Te&&Nt(w)){var Fn=tt["mce-internal"]||tt["text/html"]||tt["text/plain"];Fn&&(te.preventDefault(),go.setEditorTimeout(w,function(){w.undoManager.transact(function(){tt["mce-internal"]&&w.execCommand("Delete"),Ei(w,Te),Fn=di(Fn),tt["text/html"]?A.pasteHtml(Fn,dn):A.pasteText(Fn)})}))}}}),w.on("dragstart",function(te){L.set(!0)}),w.on("dragover dragend",function(te){Er(w)&&L.get()===!1&&(te.preventDefault(),Ei(w,Rc(w,te))),te.type==="dragend"&&L.set(!1)})},Ou=function(w){var A=w.plugins.paste,L=Dn(w);L&&w.on("PastePreProcess",function(Te){L.call(A,A,Te)});var te=$n(w);te&&w.on("PastePostProcess",function(Te){te.call(A,A,Te)})},uo=function(w,A){w.on("PastePreProcess",function(L){L.content=A(w,L.content,L.internal,L.wordContent)})},Vs=function(w,A){w.on("PastePostProcess",function(L){A(w,L.node)})},je=function(w,A){if(!$r(A))return A;var L=[];Lt.each(w.schema.getBlockElements(),function(Te,tt){L.push(tt)});var te=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+L.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return A=Ko(A,[[te,"$1"]]),A=Ko(A,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),A},lc=function(w,A,L,te){if(te||L)return A;var Te=pt(w),tt;if(lr(w)===!1||Te==="all")return A;if(Te&&(tt=Te.split(/[, ]/)),tt){var dn=w.dom,Fn=w.selection.getNode();A=A.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(Rt,fn,ir,rr){var Yn=dn.parseStyle(dn.decode(ir)),La={};if(tt==="none")return fn+rr;for(var jn=0;jn<tt.length;jn++){var Ca=Yn[tt[jn]],ca=dn.getStyle(Fn,tt[jn],!0);/color/.test(tt[jn])&&(Ca=dn.toHex(Ca),ca=dn.toHex(ca)),ca!==Ca&&(La[tt[jn]]=Ca)}var Oi=dn.serializeStyle(La,"span");return Oi?fn+' style="'+Oi+'"'+rr:fn+rr})}else A=A.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return A=A.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(Rt,fn,ir,rr){return fn+' style="'+ir+'"'+rr}),A},so=function(w,A){w.$("a",A).find("font,u").each(function(L,te){w.dom.remove(te,!0)})},pl=function(w){jt.webkit&&uo(w,lc),jt.ie&&(uo(w,je),Vs(w,so))},Ss=function(w,A){return function(L){L.setActive(A.pasteFormat.get()==="text");var te=function(Te){return L.setActive(Te.state)};return w.on("PastePlainTextToggle",te),function(){return w.off("PastePlainTextToggle",te)}}},B=function(w,A){var L=function(){return w.execCommand("mceTogglePlainTextPaste")};w.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:L,onSetup:Ss(w,A)}),w.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:L,onSetup:Ss(w,A)})};function T(){nt.add("paste",function(w){if(ln(w)===!1){var A=le(!1),L=le(Yr(w)?"text":"html"),te=wn(w,L);return pl(w),B(w,te),or(w,te),Ou(w),Hs(w),Mc(w,te,A),Gt(te)}})}T()})();(function(){var le=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=tinymce.util.Tools.resolve("tinymce.Env"),ln=tinymce.util.Tools.resolve("tinymce.util.Tools"),Gt=function(ze){return ze.getParam("content_style","","string")},dt=function(ze){return ze.getParam("content_css_cors",!1,"boolean")},Qt=function(ze){var ge=ze.getParam("body_class","","hash");return ge[ze.id]||""},Sn=function(ze){var ge=ze.getParam("body_class","","string");return ge.indexOf("=")===-1?ge:Qt(ze)},Mn=function(ze){var ge=ze.getParam("body_id","","hash");return ge[ze.id]||ge},pn=function(ze){var ge=ze.getParam("body_id","tinymce","string");return ge.indexOf("=")===-1?ge:Mn(ze)},Dr=function(ze){var ge="",Tt=ze.dom.encode,Ze=Gt(ze);ge+='<base href="'+Tt(ze.documentBaseURI.getURI())+'">';var qt=dt(ze)?' crossorigin="anonymous"':"";ln.each(ze.contentCSS,function(We){ge+='<link type="text/css" rel="stylesheet" href="'+Tt(ze.documentBaseURI.toAbsolute(We))+'"'+qt+">"}),Ze&&(ge+='<style type="text/css">'+Ze+"</style>");var Z=pn(ze),Ne=Sn(ze),ke=nt.mac?"e.metaKey":"e.ctrlKey && !e.altKey",Vt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+ke+")) {e.preventDefault();}}}, false);<\/script> ",Kt=ze.getBody().dir,ht=Kt?' dir="'+Tt(Kt)+'"':"",$t="<!DOCTYPE html><html><head>"+ge+'</head><body id="'+Tt(Z)+'" class="mce-content-body '+Tt(Ne)+'"'+ht+">"+ze.getContent()+Vt+"</body></html>";return $t},Bn=function(ze){var ge=Dr(ze),Tt=ze.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:ge}});Tt.focus("close")},Ve=function(ze){ze.addCommand("mcePreview",function(){Bn(ze)})},Ft=function(ze){var ge=function(){return ze.execCommand("mcePreview")};ze.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:ge}),ze.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:ge})};function xn(){le.add("preview",function(ze){Ve(ze),Ft(ze)})}xn()})();(function(){var le=function(u){var l=typeof u;return u===null?"null":l==="object"&&(Array.prototype.isPrototypeOf(u)||u.constructor&&u.constructor.name==="Array")?"array":l==="object"&&(String.prototype.isPrototypeOf(u)||u.constructor&&u.constructor.name==="String")?"string":l},nt=function(u){return function(l){return le(l)===u}},ln=function(u){return function(l){return typeof l===u}},Gt=function(u){return function(l){return u===l}},dt=nt("string"),Qt=nt("object"),Sn=nt("array"),Mn=Gt(null),pn=ln("boolean"),Dr=Gt(void 0),Bn=function(u){return u==null},Ve=function(u){return!Bn(u)},Ft=ln("function"),xn=ln("number"),ze=function(){},ge=function(u,l){return function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return u(l.apply(null,d))}},Tt=function(u,l){return function(d){return u(l(d))}},Ze=function(u){return function(){return u}},qt=function(u){return u},Z=function(u,l){return u===l};function Ne(u){for(var l=[],d=1;d<arguments.length;d++)l[d-1]=arguments[d];return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var k=l.concat(h);return u.apply(null,k)}}var ke=function(u){return function(l){return!u(l)}},Vt=function(u){return function(){throw new Error(u)}},Kt=Ze(!1),ht=Ze(!0),$t=function(){return We},We=function(){var u=function(h){return h()},l=qt,d={fold:function(h,y){return h()},isSome:Kt,isNone:ht,getOr:l,getOrThunk:u,getOrDie:function(h){throw new Error(h||"error: getOrDie called on none.")},getOrNull:Ze(null),getOrUndefined:Ze(void 0),or:l,orThunk:u,map:$t,each:ze,bind:$t,exists:Kt,forall:ht,filter:function(){return $t()},toArray:function(){return[]},toString:Ze("none()")};return d}(),ja=function(u){var l=Ze(u),d=function(){return y},h=function(k){return k(u)},y={fold:function(k,_){return _(u)},isSome:ht,isNone:Kt,getOr:l,getOrThunk:l,getOrDie:l,getOrNull:l,getOrUndefined:l,or:d,orThunk:d,map:function(k){return ja(k(u))},each:function(k){k(u)},bind:h,exists:h,forall:h,filter:function(k){return k(u)?y:We},toArray:function(){return[u]},toString:function(){return"some("+u+")"}};return y},ve=function(u){return u==null?We:ja(u)},Y={some:ja,none:$t,from:ve},Pn=Array.prototype.slice,Ea=Array.prototype.indexOf,Mt=Array.prototype.push,Oa=function(u,l){return Ea.call(u,l)},Vr=function(u,l){return Oa(u,l)>-1},R=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];if(l(y,d))return!0}return!1},Aa=function(u,l){for(var d=[],h=0;h<u;h++)d.push(l(h));return d},wt=function(u,l){for(var d=u.length,h=new Array(d),y=0;y<d;y++){var k=u[y];h[y]=l(k,y)}return h},jt=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];l(y,d)}},go=function(u,l){for(var d=u.length-1;d>=0;d--){var h=u[d];l(h,d)}},Go=function(u,l){for(var d=[],h=[],y=0,k=u.length;y<k;y++){var _=u[y],N=l(_,y)?d:h;N.push(_)}return{pass:d,fail:h}},nr=function(u,l){for(var d=[],h=0,y=u.length;h<y;h++){var k=u[h];l(k,h)&&d.push(k)}return d},ba=function(u,l,d){return go(u,function(h,y){d=l(d,h,y)}),d},Q=function(u,l,d){return jt(u,function(h,y){d=l(d,h,y)}),d},Ja=function(u,l,d){for(var h=0,y=u.length;h<y;h++){var k=u[h];if(l(k,h))return Y.some(k);if(d(k,h))break}return Y.none()},gt=function(u,l){return Ja(u,l,Kt)},Lt=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];if(l(y,d))return Y.some(d)}return Y.none()},Ro=function(u){for(var l=[],d=0,h=u.length;d<h;++d){if(!Sn(u[d]))throw new Error("Arr.flatten item "+d+" was not an array, input: "+u);Mt.apply(l,u[d])}return l},Er=function(u,l){return Ro(wt(u,l))},Nt=function(u,l){for(var d=0,h=u.length;d<h;++d){var y=u[d];if(l(y,d)!==!0)return!1}return!0},Dn=function(u){var l=Pn.call(u,0);return l.reverse(),l},$n=function(u,l){for(var d={},h=0,y=u.length;h<y;h++){var k=u[h];d[String(k)]=l(k,h)}return d},pt=function(u){return[u]},lr=function(u,l){var d=Pn.call(u,0);return d.sort(l),d},Ra=function(u,l){return l>=0&&l<u.length?Y.some(u[l]):Y.none()},bn=function(u){return Ra(u,0)},Yr=function(u){return Ra(u,u.length-1)},ta=function(u,l){for(var d=0;d<u.length;d++){var h=l(u[d],d);if(h.isSome())return h}return Y.none()},Nn=function(){return Nn=Object.assign||function(l){for(var d,h=1,y=arguments.length;h<y;h++){d=arguments[h];for(var k in d)Object.prototype.hasOwnProperty.call(d,k)&&(l[k]=d[k])}return l},Nn.apply(this,arguments)};function ya(u,l,d){if(d||arguments.length===2)for(var h=0,y=l.length,k;h<y;h++)(k||!(h in l))&&(k||(k=Array.prototype.slice.call(l,0,h)),k[h]=l[h]);return u.concat(k||Array.prototype.slice.call(l))}var qo=function(u){var l=!1,d;return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];return l||(l=!0,d=u.apply(null,h)),d}},xi=function(u,l,d,h){var y=u.isiOS()&&/ipad/i.test(d)===!0,k=u.isiOS()&&!y,_=u.isiOS()||u.isAndroid(),N=_||h("(pointer:coarse)"),j=y||!k&&_&&h("(min-device-width:768px)"),re=k||_&&!j,he=l.isSafari()&&u.isiOS()&&/safari/i.test(d)===!1,Ge=!re&&!j&&!he;return{isiPad:Ze(y),isiPhone:Ze(k),isTablet:Ze(j),isPhone:Ze(re),isTouch:Ze(N),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:Ze(he),isDesktop:Ze(Ge)}},fi=function(u,l){for(var d=0;d<u.length;d++){var h=u[d];if(h.test(l))return h}},ni=function(u,l){var d=fi(u,l);if(!d)return{major:0,minor:0};var h=function(y){return Number(l.replace(d,"$"+y))};return Co(h(1),h(2))},io=function(u,l){var d=String(l).toLowerCase();return u.length===0?Ti():ni(u,d)},Ti=function(){return Co(0,0)},Co=function(u,l){return{major:u,minor:l}},ra={nu:Co,detect:io,unknown:Ti},Qr=function(u,l){return ta(l.brands,function(d){var h=d.brand.toLowerCase();return gt(u,function(y){var k;return h===((k=y.brand)===null||k===void 0?void 0:k.toLowerCase())}).map(function(y){return{current:y.name,version:ra.nu(parseInt(d.version,10),0)}})})},Ga=function(u,l){var d=String(l).toLowerCase();return gt(u,function(h){return h.search(d)})},na=function(u,l){return Ga(u,l).map(function(d){var h=ra.detect(d.versionRegexes,l);return{current:d.name,version:h}})},Pr=function(u,l){return Ga(u,l).map(function(d){var h=ra.detect(d.versionRegexes,l);return{current:d.name,version:h}})},Ie=function(u,l){return u.substring(l)},Xt=function(u,l,d){return l===""||u.length>=l.length&&u.substr(d,d+l.length)===l},sn=function(u,l){return Or(u,l)?Ie(u,l.length):u},Zt=function(u,l){return u.indexOf(l)!==-1},Or=function(u,l){return Xt(u,l,0)},Nr=function(u,l){return Xt(u,l,u.length-l.length)},Ia=function(u){return function(l){return l.replace(u,"")}},yn=Ia(/^\s+|\s+$/g),Ar=function(u){return u.length>0},wa=function(u){return!Ar(u)},Mo=function(u){var l=parseFloat(u);return isNaN(l)?Y.none():Y.some(l)},ji=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ir=function(u){return function(l){return Zt(l,u)}},fr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(u){return Zt(u,"edge/")&&Zt(u,"chrome")&&Zt(u,"safari")&&Zt(u,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ji],search:function(u){return Zt(u,"chrome")&&!Zt(u,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(u){return Zt(u,"msie")||Zt(u,"trident")}},{name:"Opera",versionRegexes:[ji,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ir("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ir("firefox")},{name:"Safari",versionRegexes:[ji,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(u){return(Zt(u,"safari")||Zt(u,"mobile/"))&&Zt(u,"applewebkit")}}],So=[{name:"Windows",search:Ir("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(u){return Zt(u,"iphone")||Zt(u,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ir("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ir("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ir("linux"),versionRegexes:[]},{name:"Solaris",search:Ir("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ir("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ir("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],vi={browsers:Ze(fr),oses:Ze(So)},Lo="Edge",xo="Chrome",Ko="IE",Gi="Opera",di="Firefox",Ho="Safari",qi=function(){return $r({current:void 0,version:ra.unknown()})},$r=function(u){var l=u.current,d=u.version,h=function(y){return function(){return l===y}};return{current:l,version:d,isEdge:h(Lo),isChrome:h(xo),isIE:h(Ko),isOpera:h(Gi),isFirefox:h(di),isSafari:h(Ho)}},mi={unknown:qi,nu:$r,edge:Ze(Lo),chrome:Ze(xo),ie:Ze(Ko),opera:Ze(Gi),firefox:Ze(di),safari:Ze(Ho)},kn="Windows",Ju="iOS",Xo="Android",ki="Linux",Yo="OSX",Fi="Solaris",Lu="FreeBSD",gi="ChromeOS",Zu=function(){return ne({current:void 0,version:ra.unknown()})},ne=function(u){var l=u.current,d=u.version,h=function(y){return function(){return l===y}};return{current:l,version:d,isWindows:h(kn),isiOS:h(Ju),isAndroid:h(Xo),isOSX:h(Yo),isLinux:h(ki),isSolaris:h(Fi),isFreeBSD:h(Lu),isChromeOS:h(gi)}},Ce={unknown:Zu,nu:ne,windows:Ze(kn),ios:Ze(Ju),android:Ze(Xo),linux:Ze(ki),osx:Ze(Yo),solaris:Ze(Fi),freebsd:Ze(Lu),chromeos:Ze(gi)},ie=function(u,l,d){var h=vi.browsers(),y=vi.oses(),k=l.bind(function(j){return Qr(h,j)}).orThunk(function(){return na(h,u)}).fold(mi.unknown,mi.nu),_=Pr(y,u).fold(Ce.unknown,Ce.nu),N=xi(_,k,u,d);return{browser:k,os:_,deviceType:N}},Re={detect:ie},_t=function(u){return window.matchMedia(u).matches},en=qo(function(){return Re.detect(navigator.userAgent,Y.from(navigator.userAgentData),_t)}),Wn=function(){return en()},Kn=function(u,l,d){return(u.compareDocumentPosition(l)&d)!==0},_r=function(u,l){return Kn(u,l,Node.DOCUMENT_POSITION_CONTAINED_BY)},Ur=8,xr=9,Ma=11,Ba=1,Ki=3,ho=function(u,l){var d=l||document,h=d.createElement("div");if(h.innerHTML=u,!h.hasChildNodes()||h.childNodes.length>1)throw console.error("HTML does not have a single root node",u),new Error("HTML must have a single root node");return Pa(h.childNodes[0])},ri=function(u,l){var d=l||document,h=d.createElement(u);return Pa(h)},lu=function(u,l){var d=l||document,h=d.createTextNode(u);return Pa(h)},Pa=function(u){if(u==null)throw new Error("Node cannot be null or undefined");return{dom:u}},$a=function(u,l,d){return Y.from(u.dom.elementFromPoint(l,d)).map(Pa)},lt={fromHtml:ho,fromTag:ri,fromText:lu,fromDom:Pa,fromPoint:$a},no=function(u,l){var d=u.dom;if(d.nodeType!==Ba)return!1;var h=d;if(h.matches!==void 0)return h.matches(l);if(h.msMatchesSelector!==void 0)return h.msMatchesSelector(l);if(h.webkitMatchesSelector!==void 0)return h.webkitMatchesSelector(l);if(h.mozMatchesSelector!==void 0)return h.mozMatchesSelector(l);throw new Error("Browser lacks native selectors")},Xi=function(u){return u.nodeType!==Ba&&u.nodeType!==xr&&u.nodeType!==Ma||u.childElementCount===0},Qu=function(u,l){var d=l===void 0?document:l.dom;return Xi(d)?[]:wt(d.querySelectorAll(u),lt.fromDom)},es=function(u,l){var d=l===void 0?document:l.dom;return Xi(d)?Y.none():Y.from(d.querySelector(u)).map(lt.fromDom)},Tr=function(u,l){return u.dom===l.dom},Cs=function(u,l){var d=u.dom,h=l.dom;return d===h?!1:d.contains(h)},Yi=function(u,l){return _r(u.dom,l.dom)},qa=function(u,l){return Wn().browser.isIE()?Yi(u,l):Cs(u,l)},ts=no,ai=Object.keys,hi=Object.hasOwnProperty,ga=function(u,l){for(var d=ai(u),h=0,y=d.length;h<y;h++){var k=d[h],_=u[k];l(_,k)}},ns=function(u,l){return G(u,function(d,h){return{k:h,v:l(d,h)}})},G=function(u,l){var d={};return ga(u,function(h,y){var k=l(h,y);d[k.k]=k.v}),d},de=function(u){return function(l,d){u[d]=l}},De=function(u,l,d,h){var y={};return ga(u,function(k,_){(l(k,_)?d:h)(k,_)}),y},Ke=function(u,l){var d={};return De(u,l,de(d),ze),d},zt=function(u,l){var d=[];return ga(u,function(h,y){d.push(l(h,y))}),d},nn=function(u){return zt(u,qt)},mn=function(u){return ai(u).length},vr=function(u,l){return V(u,l)?Y.from(u[l]):Y.none()},V=function(u,l){return hi.call(u,l)},fe=function(u,l){return V(u,l)&&u[l]!==void 0&&u[l]!==null},xe=function(u){for(var l in u)if(hi.call(u,l))return!1;return!0},Pe=["tfoot","thead","tbody","colgroup"],Ye=function(u){return Vr(Pe,u)},Yt=function(u,l){return{rows:u,columns:l}},wn=function(u,l){return{row:u,column:l}},zr=function(u,l,d){return{element:u,rowspan:l,colspan:d}},or=function(u,l,d,h){return{element:u,rowspan:l,colspan:d,isNew:h}},aa=function(u,l,d,h,y,k){return{element:u,rowspan:l,colspan:d,row:h,column:y,isLocked:k}},Da=function(u,l,d){return{element:u,cells:l,section:d}},Eu=function(u,l,d,h){return{element:u,cells:l,section:d,isNew:h}},To=function(u,l,d){return{element:u,isNew:l,isLocked:d}},Tn=function(u,l,d,h){return{element:u,cells:l,section:d,isNew:h}},St=function(u,l,d,h){return{startRow:u,startCol:l,finishRow:d,finishCol:h}},sa=function(u,l,d){return{element:u,colspan:l,column:d}},ko=function(u,l){return{element:u,columns:l}};typeof window<"u"||Function("return this;")();var kr=function(u){var l=u.dom.nodeName;return l.toLowerCase()},Hs=function(u){return u.dom.nodeType},rs=function(u){return function(l){return Hs(l)===u}},Rc=function(u){return Hs(u)===Ur||kr(u)==="#comment"},qr=rs(Ba),Ei=rs(Ki),Mc=rs(xr),Ou=rs(Ma),uo=function(u){return function(l){return qr(l)&&kr(l)===u}},Vs=function(u){return lt.fromDom(u.dom.ownerDocument)},je=function(u){return Mc(u)?u:Vs(u)},lc=function(u){return lt.fromDom(je(u).dom.defaultView)},so=function(u){return Y.from(u.dom.parentNode).map(lt.fromDom)},pl=function(u){return Y.from(u.dom.parentElement).map(lt.fromDom)},Ss=function(u,l){for(var d=Ft(l)?l:Kt,h=u.dom,y=[];h.parentNode!==null&&h.parentNode!==void 0;){var k=h.parentNode,_=lt.fromDom(k);if(y.push(_),d(_)===!0)break;h=k}return y},B=function(u){return Y.from(u.dom.previousSibling).map(lt.fromDom)},T=function(u){return Y.from(u.dom.nextSibling).map(lt.fromDom)},w=function(u){return wt(u.dom.childNodes,lt.fromDom)},A=function(u,l){var d=u.dom.childNodes;return Y.from(d[l]).map(lt.fromDom)},L=function(u){return A(u,0)},te=function(u){return Ou(u)&&Ve(u.dom.host)},Te=Ft(Element.prototype.attachShadow)&&Ft(Node.prototype.getRootNode),tt=Ze(Te),dn=Te?function(u){return lt.fromDom(u.dom.getRootNode())}:je,Fn=function(u){var l=dn(u);return te(l)?Y.some(l):Y.none()},Rt=function(u){return lt.fromDom(u.dom.host)},fn=function(u){if(tt()&&Ve(u.target)){var l=lt.fromDom(u.target);if(qr(l)&&ir(l)&&u.composed&&u.composedPath){var d=u.composedPath();if(d)return bn(d)}}return Y.from(u.target)},ir=function(u){return Ve(u.dom.shadowRoot)},rr=function(u){var l=Ei(u)?u.dom.parentNode:u.dom;if(l==null||l.ownerDocument===null)return!1;var d=l.ownerDocument;return Fn(lt.fromDom(l)).fold(function(){return d.body.contains(l)},Tt(rr,Rt))},Yn=function(){return La(lt.fromDom(document))},La=function(u){var l=u.dom.body;if(l==null)throw new Error("Body is not available yet");return lt.fromDom(l)},jn=function(u,l,d){return nr(Ss(u,d),l)},Ca=function(u,l){return nr(w(u),l)},ca=function(u,l){var d=[];return jt(w(u),function(h){l(h)&&(d=d.concat([h])),d=d.concat(ca(h,l))}),d},Oi=function(u,l,d){return jn(u,function(h){return no(h,l)},d)},hr=function(u,l){return Ca(u,function(d){return no(d,l)})},Us=function(u,l){return Qu(l,u)};function co(u,l,d,h,y){return u(d,h)?Y.some(d):Ft(y)&&y(d)?Y.none():l(d,h,y)}var Eo=function(u,l,d){for(var h=u.dom,y=Ft(d)?d:Kt;h.parentNode;){h=h.parentNode;var k=lt.fromDom(h);if(l(k))return Y.some(k);if(y(k))break}return Y.none()},t1=function(u,l,d){var h=function(y,k){return k(y)};return co(h,Eo,u,l,d)},Ji=function(u,l){var d=function(y){return l(lt.fromDom(y))},h=gt(u.dom.childNodes,d);return h.map(lt.fromDom)},mh=function(u,l){var d=function(h){for(var y=0;y<h.childNodes.length;y++){var k=lt.fromDom(h.childNodes[y]);if(l(k))return Y.some(k);var _=d(h.childNodes[y]);if(_.isSome())return _}return Y.none()};return d(u.dom)},Yc=function(u,l,d){return Eo(u,function(h){return no(h,l)},d)},Zn=function(u,l){return Ji(u,function(d){return no(d,l)})},Ws=function(u,l){return es(l,u)},Bo=function(u,l,d){var h=function(y,k){return no(y,k)};return co(h,Yc,u,l,d)},Po=function(u,l,d){if(dt(d)||pn(d)||xn(d))u.setAttribute(l,d+"");else throw console.error("Invalid call to Attribute.set. Key ",l,":: Value ",d,":: Element ",u),new Error("Attribute value was not simple")},Ai=function(u,l,d){Po(u.dom,l,d)},oi=function(u,l){var d=u.dom;ga(l,function(h,y){Po(d,y,h)})},If=function(u,l){ga(l,function(d,h){d.fold(function(){ro(u,h)},function(y){Po(u.dom,h,y)})})},fc=function(u,l){var d=u.dom.getAttribute(l);return d===null?void 0:d},la=function(u,l){return Y.from(fc(u,l))},ro=function(u,l){u.dom.removeAttribute(l)},Hu=function(u){return Q(u.dom.attributes,function(l,d){return l[d.name]=d.value,l},{})},bl=function(u,l,d){return d===void 0&&(d=Z),u.exists(function(h){return d(h,l)})},pi=function(u){for(var l=[],d=function(y){l.push(y)},h=0;h<u.length;h++)u[h].each(d);return l},js=function(u,l,d){return u.isSome()&&l.isSome()?Y.some(d(u.getOrDie(),l.getOrDie())):Y.none()},n1=function(u,l){return u!=null?l(u):Y.none()},$f=function(u){return u.bind(qt)},Ha=function(u,l){return u?Y.some(l):Y.none()},Bc=function(u){return u.style!==void 0&&Ft(u.style.getPropertyValue)},Kl=function(u,l,d){if(!dt(d))throw console.error("Invalid call to CSS.set. Property ",l,":: Value ",d,":: Element ",u),new Error("CSS value must be a string: "+d);Bc(u)&&u.style.setProperty(l,d)},as=function(u,l){Bc(u)&&u.style.removeProperty(l)},Vo=function(u,l,d){var h=u.dom;Kl(h,l,d)},Xl=function(u,l){var d=u.dom;ga(l,function(h,y){Kl(d,y,h)})},yl=function(u,l){var d=u.dom,h=window.getComputedStyle(d),y=h.getPropertyValue(l);return y===""&&!rr(u)?Au(d,l):y},Au=function(u,l){return Bc(u)?u.style.getPropertyValue(l):""},os=function(u,l){var d=u.dom,h=Au(d,l);return Y.from(h).filter(function(y){return y.length>0})},fu=function(u,l){var d=u.dom;as(d,l),bl(la(u,"style").map(yn),"")&&ro(u,"style")},kv=function(u,l){var d=u.dom,h=l.dom;Bc(d)&&Bc(h)&&(h.style.cssText=d.style.cssText)},Pc=function(u,l,d){return d===void 0&&(d=0),la(u,l).map(function(h){return parseInt(h,10)}).getOr(d)},Di=function(u,l){return Pc(u,l,1)},yd=function(u){return uo("col")(u)?Pc(u,"span",1)>1:Di(u,"colspan")>1},r1=function(u){return Di(u,"rowspan")>1},zf=function(u,l){return parseInt(yl(u,l),10)},Ff=Ze(10),Uo=Ze(10),Lf=function(u,l){return Hf(u,l,ht)},Hf=function(u,l,d){return Er(w(u),function(h){return no(h,l)?d(h)?[h]:[]:Hf(h,l,d)})},Du=function(u,l,d){if(d===void 0&&(d=Kt),d(l))return Y.none();if(Vr(u,kr(l)))return Y.some(l);var h=function(y){return no(y,"table")||d(y)};return Yc(l,u.join(","),h)},wl=function(u,l){return Du(["td","th"],u,l)},Vf=function(u){return Lf(u,"th,td")},Cl=function(u){return no(u,"colgroup")?hr(u,"col"):Er(xm(u),function(l){return hr(l,"col")})},po=function(u,l){return Bo(u,"table",l)},xs=function(u){return Lf(u,"tr")},xm=function(u){return po(u).fold(Ze([]),function(l){return hr(l,"colgroup")})},Gs=function(u,l){return wt(u,function(d){if(kr(d)==="colgroup"){var h=wt(Cl(d),function(y){var k=Pc(y,"span",1);return zr(y,1,k)});return Da(d,h,"colgroup")}else{var h=wt(Vf(d),function(k){var _=Pc(k,"rowspan",1),N=Pc(k,"colspan",1);return zr(k,_,N)});return Da(d,h,l(d))}})},Tm=function(u){return so(u).map(function(l){var d=kr(l);return Ye(d)?d:"tbody"}).getOr("tbody")},a1=function(u){var l=xs(u),d=xm(u),h=ya(ya([],d,!0),l,!0);return Gs(h,Tm)},gh=function(u,l){return Gs(u,function(){return l})},Uf=function(u,l,d){var h=u.cells,y=h.slice(0,l),k=h.slice(l),_=y.concat(d).concat(k);return Qn(u,_)},Wf=function(u,l,d){return Uf(u,l,[d])},Yl=function(u,l,d){var h=u.cells;h[l]=d},Qn=function(u,l){return Tn(u.element,l,u.section,u.isNew)},vc=function(u,l){var d=u.cells,h=wt(d,l);return Tn(u.element,h,u.section,u.isNew)},is=function(u,l){return u.cells[l]},_u=function(u,l){return is(u,l).element},dc=function(u){return u.cells.length},Jo=function(u){var l=Go(u,function(d){return d.section==="colgroup"});return{rows:l.fail,cols:l.pass}},_i=function(u,l,d){var h=wt(u.cells,d);return Tn(l(u.element),h,u.section,!0)},ii="data-snooker-locked-cols",Jl=function(u){return la(u,ii).bind(function(l){return Y.from(l.match(/\d+/g))}).map(function(l){return $n(l,ht)})},vu=function(u){var l=Q(Jo(u).rows,function(h,y){return jt(y.cells,function(k,_){k.isLocked&&(h[_]=!0)}),h},{}),d=zt(l,function(h,y){return parseInt(y,10)});return lr(d)},un=function(u,l){return u+","+l},jf=function(u,l,d){return Y.from(u.access[un(l,d)])},hh=function(u,l,d){var h=pr(u,function(y){return d(l,y.element)});return h.length>0?Y.some(h[0]):Y.none()},pr=function(u,l){var d=Er(u.all,function(h){return h.cells});return nr(d,l)},Va=function(u){var l={},d=0;return jt(u.cells,function(h){var y=h.colspan;Aa(y,function(k){var _=d+k;l[_]=sa(h.element,y,_)}),d+=y}),l},km=function(u){var l={},d=[],h=bn(u).map(function(Dt){return Dt.element}).bind(po),y=h.bind(Jl).getOr({}),k=0,_=0,N=0,j=Go(u,function(Dt){return Dt.section==="colgroup"}),re=j.pass,he=j.fail;jt(he,function(Dt){var It=[];jt(Dt.cells,function(_n){for(var ia=0;l[un(N,ia)]!==void 0;)ia++;for(var An=fe(y,ia.toString()),ar=aa(_n.element,_n.rowspan,_n.colspan,N,ia,An),Lr=0;Lr<_n.colspan;Lr++)for(var Mr=0;Mr<_n.rowspan;Mr++){var ei=N+Mr,nu=ia+Lr,ru=un(ei,nu);l[ru]=ar,_=Math.max(_,nu+1)}It.push(ar)}),k++,d.push(Da(Dt.element,It,Dt.section)),N++});var Ge=Yr(re).map(function(Dt){var It=Va(Dt),_n=ko(Dt.element,nn(It));return{colgroups:[_n],columns:It}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),yt=Ge.columns,at=Ge.colgroups,qe=Yt(k,_);return{grid:qe,access:l,all:d,columns:yt,colgroups:at}},Jc=function(u){var l=a1(u);return km(l)},lo=function(u){return Er(u.all,function(l){return l.cells})},Em=function(u){return nn(u.columns)},Ts=function(u){return ai(u.columns).length>0},wd=function(u,l){return Y.from(u.columns[l])},wr={fromTable:Jc,generate:km,getAt:jf,findItem:hh,filterItems:pr,justCells:lo,justColumns:Em,hasColumns:Ts,getColumnAt:wd},Vu=function(u,l){var d=l.column,h=l.column+l.colspan-1,y=l.row,k=l.row+l.rowspan-1;return d<=u.finishCol&&h>=u.startCol&&y<=u.finishRow&&k>=u.startRow},N0=function(u,l){return l.column>=u.startCol&&l.column+l.colspan-1<=u.finishCol&&l.row>=u.startRow&&l.row+l.rowspan-1<=u.finishRow},I0=function(u,l){for(var d=!0,h=Ne(N0,l),y=l.startRow;y<=l.finishRow;y++)for(var k=l.startCol;k<=l.finishCol;k++)d=d&&wr.getAt(u,y,k).exists(h);return d?Y.some(l):Y.none()},bo=function(u,l){return St(Math.min(u.row,l.row),Math.min(u.column,l.column),Math.max(u.row+u.rowspan-1,l.row+l.rowspan-1),Math.max(u.column+u.colspan-1,l.column+l.colspan-1))},Om=function(u,l,d){var h=wr.findItem(u,l,Tr),y=wr.findItem(u,d,Tr);return h.bind(function(k){return y.map(function(_){return bo(k,_)})})},O=function(u,l,d){return Om(u,l,d).bind(function(h){return I0(u,h)})},$=function(u,l,d,h){return wr.findItem(u,l,Tr).bind(function(y){var k=d>0?y.row+y.rowspan-1:y.row,_=h>0?y.column+y.colspan-1:y.column,N=wr.getAt(u,k+d,_+h);return N.map(function(j){return j.element})})},U=function(u,l,d){return Om(u,l,d).map(function(h){var y=wr.filterItems(u,Ne(Vu,h));return wt(y,function(k){return k.element})})},oe=function(u,l){var d=function(h,y){return qa(y,h)};return wr.findItem(u,l,d).map(function(h){return h.element})},Oe=function(u,l,d){return po(u).bind(function(h){var y=jr(h);return $(y,u,l,d)})},Xe=function(u,l,d){var h=jr(u);return U(h,l,d)},En=function(u,l,d,h,y){var k=jr(u),_=Tr(u,d)?Y.some(l):oe(k,l),N=Tr(u,y)?Y.some(h):oe(k,h);return _.bind(function(j){return N.bind(function(re){return U(k,j,re)})})},ur=function(u,l,d){var h=jr(u);return O(h,l,d)},jr=wr.fromTable,Cr=function(u,l){var d=so(u);d.each(function(h){h.dom.insertBefore(l.dom,u.dom)})},Ka=function(u,l){var d=T(u);d.fold(function(){var h=so(u);h.each(function(y){No(y,l)})},function(h){Cr(h,l)})},du=function(u,l){var d=L(u);d.fold(function(){No(u,l)},function(h){u.dom.insertBefore(l.dom,h.dom)})},No=function(u,l){u.dom.appendChild(l.dom)},Tk=function(u,l,d){A(u,d).fold(function(){No(u,l)},function(h){Cr(h,l)})},fC=function(u,l){Cr(u,l),No(l,u)},vC=function(u,l){jt(l,function(d){Cr(u,d)})},kk=function(u,l){jt(l,function(d,h){var y=h===0?u:l[h-1];Ka(y,d)})},Sl=function(u,l){jt(l,function(d){No(u,d)})},ph=function(u){u.dom.textContent="",jt(w(u),function(l){ks(l)})},ks=function(u){var l=u.dom;l.parentNode!==null&&l.parentNode.removeChild(l)},Am=function(u){var l=w(u);l.length>0&&vC(u,l),ks(u)},$0=function(u,l){var d=function(k){if(!u(k))throw new Error("Can only get "+l+" value of a "+l+" node");return h(k).getOr("")},h=function(k){return u(k)?Y.from(k.dom.nodeValue):Y.none()},y=function(k,_){if(!u(k))throw new Error("Can only set raw "+l+" value of a "+l+" node");k.dom.nodeValue=_};return{get:d,getOption:h,set:y}},bh=$0(Ei,"text"),o1=function(u){return bh.get(u)},dC=function(u){return bh.getOption(u)},Ek=function(u,l){return bh.set(u,l)},xl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function yh(){var u=function(re){return lt.fromDom(re.dom.cloneNode(!1))},l=function(re){return je(re).dom},d=function(re){return qr(re)?kr(re)==="body"?!0:Vr(xl,kr(re)):!1},h=function(re){return qr(re)?Vr(["br","img","hr","input"],kr(re)):!1},y=function(re){return qr(re)&&fc(re,"contenteditable")==="false"},k=function(re,he){return re.dom.compareDocumentPosition(he.dom)},_=function(re,he){var Ge=Hu(re);oi(he,Ge)},N=function(re){var he=kr(re);return Vr(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],he)},j=function(re){return qr(re)?la(re,"lang"):Y.none()};return{up:Ze({selector:Yc,closest:Bo,predicate:Eo,all:Ss}),down:Ze({selector:Us,predicate:ca}),styles:Ze({get:yl,getRaw:os,set:Vo,remove:fu}),attrs:Ze({get:fc,set:Ai,remove:ro,copyTo:_}),insert:Ze({before:Cr,after:Ka,afterAll:kk,append:No,appendAll:Sl,prepend:du,wrap:fC}),remove:Ze({unwrap:Am,remove:ks}),create:Ze({nu:lt.fromTag,clone:u,text:lt.fromText}),query:Ze({comparePosition:k,prevSibling:B,nextSibling:T}),property:Ze({children:w,name:kr,parent:so,document:l,isText:Ei,isComment:Rc,isElement:qr,isSpecial:N,getLanguage:j,getText:o1,setText:Ek,isBoundary:d,isEmptyTag:h,isNonEditable:y}),eq:Tr,is:ts}}var Ok=function(u,l,d,h){var y=d[0],k=d.slice(1);return h(u,l,y,k)},z0=function(u,l,d){return d.length>0?Ok(u,l,d,Ak):Y.none()},Ak=function(u,l,d,h){var y=l(u,d);return ba(h,function(k,_){var N=l(u,_);return Dk(u,k,N)},y)},Dk=function(u,l,d){return l.bind(function(h){return d.filter(Ne(u.eq,h))})},Dm=function(u,l){return Ne(u.eq,l)},wh=function(u,l,d,h){h===void 0&&(h=Kt);var y=[l].concat(u.up().all(l)),k=[d].concat(u.up().all(d)),_=function(he){var Ge=Lt(he,h);return Ge.fold(function(){return he},function(yt){return he.slice(0,yt+1)})},N=_(y),j=_(k),re=gt(N,function(he){return R(j,Dm(u,he))});return{firstpath:N,secondpath:j,shared:re}},mC=z0,gC=wh,qs=yh(),In=function(u,l){return mC(qs,function(d,h){return u(h)},l)},Gf=function(u,l,d){return gC(qs,u,l,d)},Ch=function(u){return Yc(u,"table")},Ev=function(u,l,d){var h=function(y){return function(k){return d!==void 0&&d(k)||Tr(k,y)}};return Tr(u,l)?Y.some({boxes:Y.some([u]),start:u,finish:l}):Ch(u).bind(function(y){return Ch(l).bind(function(k){if(Tr(y,k))return Y.some({boxes:Xe(y,u,l),start:u,finish:l});if(qa(y,k)){var _=Oi(l,"td,th",h(y)),N=_.length>0?_[_.length-1]:l;return Y.some({boxes:En(y,u,y,l,k),start:u,finish:N})}else if(qa(k,y)){var _=Oi(u,"td,th",h(k)),j=_.length>0?_[_.length-1]:u;return Y.some({boxes:En(k,u,y,l,k),start:u,finish:j})}else return Gf(u,l).shared.bind(function(re){return Bo(re,"table",d).bind(function(he){var Ge=Oi(l,"td,th",h(he)),yt=Ge.length>0?Ge[Ge.length-1]:l,at=Oi(u,"td,th",h(he)),qe=at.length>0?at[at.length-1]:u;return Y.some({boxes:En(he,u,y,l,k),start:qe,finish:yt})})})})})},_m=function(u,l){var d=Us(u,l);return d.length>0?Y.some(d):Y.none()},F0=function(u,l){return gt(u,function(d){return no(d,l)})},Zc=function(u,l,d){return Ws(u,l).bind(function(h){return Ws(u,d).bind(function(y){return In(Ch,[h,y]).map(function(k){return{first:h,last:y,table:k}})})})},Cd=function(u,l){return Yc(u,"table").bind(function(d){return Ws(d,l).bind(function(h){return Ev(h,u).bind(function(y){return y.boxes.map(function(k){return{boxes:k,start:y.start,finish:y.finish}})})})})},Rm=function(u,l,d,h,y){return F0(u,y).bind(function(k){return Oe(k,l,d).bind(function(_){return Cd(_,h)})})},Zo=function(u,l){return _m(u,l)},Zi=function(u,l,d){return Zc(u,l,d).bind(function(h){var y=function(j){return Tr(u,j)},k="thead,tfoot,tbody,table",_=Yc(h.first,k,y),N=Yc(h.last,k,y);return _.bind(function(j){return N.bind(function(re){return Tr(j,re)?ur(h.table,h.first,h.last):Y.none()})})})},Sh=function(u){if(!Sn(u))throw new Error("cases must be an array");if(u.length===0)throw new Error("there must be at least one case");var l=[],d={};return jt(u,function(h,y){var k=ai(h);if(k.length!==1)throw new Error("one and only one name per case");var _=k[0],N=h[_];if(d[_]!==void 0)throw new Error("duplicate key detected:"+_);if(_==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn(N))throw new Error("case arguments must be an array");l.push(_),d[_]=function(){for(var j=[],re=0;re<arguments.length;re++)j[re]=arguments[re];var he=j.length;if(he!==N.length)throw new Error("Wrong number of arguments to case "+_+". Expected "+N.length+" ("+N+"), got "+he);var Ge=function(yt){var at=ai(yt);if(l.length!==at.length)throw new Error("Wrong number of arguments to match. Expected: "+l.join(",")+`
Actual: `+at.join(","));var qe=Nt(l,function(Dt){return Vr(at,Dt)});if(!qe)throw new Error("Not all branches were specified when using match. Specified: "+at.join(", ")+`
Required: `+l.join(", "));return yt[_].apply(null,j)};return{fold:function(){for(var yt=[],at=0;at<arguments.length;at++)yt[at]=arguments[at];if(yt.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+yt.length);var qe=yt[y];return qe.apply(null,j)},match:Ge,log:function(yt){console.log(yt,{constructors:l,constructor:_,params:j})}}}}),d},Zl={generate:Sh},xh=Zl.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),i1=function(u,l,d,h){return u.fold(l,d,h)},u1=xh.none,_k=xh.multiple,Mm=xh.single,Ru=function(u,l,d){var h=function(){return Zo(u(),d).fold(function(){return l().fold(u1,Mm)},function(y){return _k(y)})};return{get:h}},hC=tinymce.util.Tools.resolve("tinymce.PluginManager"),Oo=function(u,l){return lt.fromDom(u.dom.cloneNode(l))},Qc=function(u){return Oo(u,!1)},Ta=function(u){return Oo(u,!0)},Ov=function(u,l){var d=lt.fromTag(l),h=Hu(u);return oi(d,h),d},Nc=function(u,l){var d=Ov(u,l),h=w(Ta(u));return Sl(d,h),d},Rk=function(u,l){var d=Ov(u,l);Cr(u,d);var h=w(u);return Sl(d,h),ks(u),d},Ri=function(u,l){var d=function(N,j){if(!xn(j)&&!j.match(/^[0-9]+$/))throw new Error(u+".set accepts only positive integer values. Value was "+j);var re=N.dom;Bc(re)&&(re.style[u]=j+"px")},h=function(N){var j=l(N);if(j<=0||j===null){var re=yl(N,u);return parseFloat(re)||0}return j},y=h,k=function(N,j){return Q(j,function(re,he){var Ge=yl(N,he),yt=Ge===void 0?0:parseInt(Ge,10);return isNaN(yt)?re:re+yt},0)},_=function(N,j,re){var he=k(N,re),Ge=j>he?j-he:0;return Ge};return{set:d,get:h,getOuter:y,aggregate:k,max:_}},us=function(){var u=Wn().browser;return u.isIE()||u.isEdge()},pC=function(u,l){return Mo(u).getOr(l)},rt=function(u,l,d){return pC(yl(u,l),d)},Es=function(u){return yl(u,"box-sizing")},qf=function(u,l,d,h){var y=rt(u,"padding-"+d,0),k=rt(u,"padding-"+h,0),_=rt(u,"border-"+d+"-width",0),N=rt(u,"border-"+h+"-width",0);return l-y-k-_-N},er=function(u,l){var d=u.dom,h=d.getBoundingClientRect().height||d.offsetHeight;return l==="border-box"?h:qf(u,h,"top","bottom")},mc=function(u,l){var d=u.dom,h=d.getBoundingClientRect().width||d.offsetWidth;return l==="border-box"?h:qf(u,h,"left","right")},Mk=function(u){return us()?er(u,Es(u)):rt(u,"height",u.dom.offsetHeight)},Uu=function(u){return us()?mc(u,Es(u)):rt(u,"width",u.dom.offsetWidth)},Bm=function(u){return mc(u,"content-box")},Ql=Ri("width",function(u){return u.dom.offsetWidth}),el=function(u){return Ql.get(u)},Mu=function(u){return Ql.getOuter(u)},fa=Bm,Tl=Uu,Sd=function(u,l){l===void 0&&(l=ht);var d=u.grid,h=Aa(d.columns,qt),y=Aa(d.rows,qt);return wt(h,function(k){var _=function(){return Er(y,function(re){return wr.getAt(u,re,k).filter(function(he){return he.column===k}).toArray()})},N=function(re){return re.colspan===1&&l(re.element)},j=function(){return wr.getAt(u,0,k)};return Za(_,N,j)})},Za=function(u,l,d){var h=u(),y=gt(h,l),k=y.orThunk(function(){return Y.from(h[0]).orThunk(d)});return k.map(function(_){return _.element})},Av=function(u){var l=u.grid,d=Aa(l.rows,qt),h=Aa(l.columns,qt);return wt(d,function(y){var k=function(){return Er(h,function(j){return wr.getAt(u,y,j).filter(function(re){return re.row===y}).fold(Ze([]),function(re){return[re]})})},_=function(j){return j.rowspan===1},N=function(){return wr.getAt(u,y,0)};return Za(k,_,N)})},Ks=function(u,l){if(l<0||l>=u.length-1)return Y.none();var d=u[l].fold(function(){var y=Dn(u.slice(0,l));return ta(y,function(k,_){return k.map(function(N){return{value:N,delta:_+1}})})},function(y){return Y.some({value:y,delta:0})}),h=u[l+1].fold(function(){var y=u.slice(l+1);return ta(y,function(k,_){return k.map(function(N){return{value:N,delta:_+1}})})},function(y){return Y.some({value:y,delta:1})});return d.bind(function(y){return h.map(function(k){var _=k.delta+y.delta;return Math.abs(k.value-y.value)/_})})},Xs=function(u,l){return function(d){return Bk(d)==="rtl"?l:u}},Bk=function(u){return yl(u,"direction")==="rtl"?"rtl":"ltr"},Se=Ri("height",function(u){var l=u.dom;return rr(u)?l.getBoundingClientRect().height:l.offsetHeight}),ss=function(u){return Se.get(u)},kl=function(u){return Se.getOuter(u)},Pm=Mk,gc=function(u,l){var d=function(h,y){return gc(u+h,l+y)};return{left:u,top:l,translate:d}},Ua=gc,Qa=function(u){var l=u.getBoundingClientRect();return Ua(l.left,l.top)},Os=function(u,l){return u!==void 0?u:l!==void 0?l:0},Kf=function(u){var l=u.dom.ownerDocument,d=l.body,h=l.defaultView,y=l.documentElement;if(d===u.dom)return Ua(d.offsetLeft,d.offsetTop);var k=Os(h==null?void 0:h.pageYOffset,y.scrollTop),_=Os(h==null?void 0:h.pageXOffset,y.scrollLeft),N=Os(y.clientTop,d.clientTop),j=Os(y.clientLeft,d.clientLeft);return L0(u).translate(_-j,k-N)},L0=function(u){var l=u.dom,d=l.ownerDocument,h=d.body;return h===l?Ua(h.offsetLeft,h.offsetTop):rr(u)?Qa(l):Ua(0,0)},Hn=function(u,l){return{row:u,y:l}},s1=function(u,l){return{col:u,x:l}},hc=function(u){var l=Kf(u);return l.left+Mu(u)},bC=function(u){return Kf(u).left},Th=function(u,l){return s1(u,bC(l))},kh=function(u,l){return s1(u,hc(l))},H0=function(u){return Kf(u).top},V0=function(u,l){return Hn(u,H0(l))},ef=function(u,l){return Hn(u,H0(l)+kl(l))},Xf=function(u,l,d){if(d.length===0)return[];var h=wt(d.slice(1),function(k,_){return k.map(function(N){return u(_,N)})}),y=d[d.length-1].map(function(k){return l(d.length-1,k)});return h.concat([y])},Pk=function(u){return-u},U0={delta:qt,positions:function(u){return Xf(V0,ef,u)},edge:H0},Nk={delta:qt,edge:bC,positions:function(u){return Xf(Th,kh,u)}},yC={delta:Pk,edge:hc,positions:function(u){return Xf(kh,Th,u)}},Eh=Xs(Nk,yC),Nm={delta:function(u,l){return Eh(l).delta(u,l)},positions:function(u,l){return Eh(l).positions(u,l)},edge:function(u){return Eh(u).edge(u)}},wC={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},tf=function(){var u="[0-9]+",l="[+-]?"+u,d="[eE]"+l,h="\\.",y=function(N){return"(?:"+N+")?"},k=["Infinity",u+h+y(u)+y(d),h+u+y(d),u+y(d)].join("|"),_="[+-]?(?:"+k+")";return new RegExp("^("+_+")(.*)$")}(),Im=function(u,l){return R(l,function(d){return R(wC[d],function(h){return u===h})})},W0=function(u,l){var d=Y.from(tf.exec(u));return d.bind(function(h){var y=Number(h[1]),k=h[2];return Im(k,l)?Y.some({value:y,unit:k}):Y.none()})},CC=/(\d+(\.\d+)?)%/,Ik=/(\d+(\.\d+)?)px|em/,$k=uo("col"),bi=function(u,l,d){var h=pl(u).getOrThunk(function(){return La(Vs(u))});return l(u)/d(h)*100},nf=function(u,l){Vo(u,"width",l+"px")},tl=function(u,l){Vo(u,"width",l+"%")},Dv=function(u,l){Vo(u,"height",l+"px")},SC=function(u){return Pm(u)+"px"},nl=function(u,l,d,h){var y=po(u).map(function(k){var _=d(k);return Math.floor(l/100*_)}).getOr(l);return h(u,y),y},xd=function(u,l,d,h){var y=parseFloat(u);return Nr(u,"%")&&kr(l)!=="table"?nl(l,y,d,h):y},j0=function(u){var l=SC(u);return l?xd(l,u,ss,Dv):ss(u)},G0=function(u,l,d){var h=d(u),y=Di(u,l);return h/y},Yf=function(u,l){return os(u,l).orThunk(function(){return la(u,l).map(function(d){return d+"px"})})},Ic=function(u){return Yf(u,"width")},mu=function(u){return Yf(u,"height")},c1=function(u){return bi(u,el,fa)},q0=function(u){return $k(u)?el(u):Tl(u)},Td=function(u){return G0(u,"rowspan",j0)},$m=function(u){var l=Ic(u);return l.bind(function(d){return W0(d,["fixed","relative","empty"])})},zm=function(u,l,d){Vo(u,"width",l+d)},zk=function(u){return el(u)+"px"},Fm=function(u){return bi(u,el,fa)+"%"},K0=function(u){return Ic(u).exists(function(l){return CC.test(l)})},Fk=function(u){return Ic(u).exists(function(l){return Ik.test(l)})},Io=function(u){return Ic(u).isNone()},l1=Ze(CC),_v=uo("col"),X0=function(u){return Ic(u).getOrThunk(function(){return q0(u)+"px"})},Y0=function(u){return mu(u).getOrThunk(function(){return Td(u)+"px"})},$c=function(u){return wt(wr.justColumns(u),function(l){return Y.from(l.element)})},pc=function(u){var l=Wn().browser,d=l.isChrome()||l.isFirefox();return _v(u)?d:!0},kd=function(u,l,d,h,y,k){return u.filter(h).fold(function(){return k(Ks(d,l))},function(_){return y(_)})},Rv=function(u,l,d,h){var y=Sd(u),k=wr.hasColumns(u)?$c(u):y,_=[Y.some(Nm.edge(l))].concat(wt(Nm.positions(y,l),function(j){return j.map(function(re){return re.x})})),N=ke(yd);return wt(k,function(j,re){return kd(j,re,_,N,function(he){if(pc(he))return d(he);var Ge=n1(y[re],qt);return kd(Ge,re,_,N,function(yt){return h(Y.some(el(yt)))},h)},h)})},f1=function(u){return u.map(function(l){return l+"px"}).getOr("")},Oh=function(u,l){return Rv(u,l,X0,f1)},J0=function(u,l,d){return Rv(u,l,c1,function(h){return h.fold(function(){return d.minCellWidth()},function(y){return y/d.pixelWidth()*100})})},Ed=function(u,l,d){return Rv(u,l,q0,function(h){return h.getOrThunk(d.minCellWidth)})},v1=function(u,l,d,h,y){var k=Av(u),_=[Y.some(d.edge(l))].concat(wt(d.positions(k,l),function(N){return N.map(function(j){return j.y})}));return wt(k,function(N,j){return kd(N,j,_,ke(r1),h,y)})},Lk=function(u,l,d){return v1(u,l,d,Td,function(h){return h.getOrThunk(Uo)})},Z0=function(u,l,d){return v1(u,l,d,Y0,f1)},bc=function(u,l){return function(){return rr(u)?l(u):parseFloat(os(u,"width").getOr("0"))}},Ys=function(u){var l=bc(u,el),d=Ze(0),h=function(y,k){return Ed(y,u,k)};return{width:l,pixelWidth:l,getWidths:h,getCellDelta:d,singleColumnWidth:Ze([0]),minCellWidth:d,setElementWidth:ze,adjustTableWidth:ze,isRelative:!0,label:"none"}},Lm=function(u){var l=bc(u,function(j){return parseFloat(Fm(j))}),d=bc(u,el),h=function(j){return j/d()*100},y=function(j,re){return[100-j]},k=function(){return Ff()/d()*100},_=function(j){var re=l(),he=j/100*re,Ge=re+he;tl(u,Ge)},N=function(j,re){return J0(j,u,re)};return{width:l,pixelWidth:d,getWidths:N,getCellDelta:h,singleColumnWidth:y,minCellWidth:k,setElementWidth:tl,adjustTableWidth:_,isRelative:!0,label:"percent"}},rl=function(u){var l=bc(u,el),d=qt,h=function(_,N){var j=Math.max(Ff(),_+N);return[j-_]},y=function(_){var N=l()+_;nf(u,N)},k=function(_,N){return Ed(_,u,N)};return{width:l,pixelWidth:l,getWidths:k,getCellDelta:d,singleColumnWidth:h,minCellWidth:Ff,setElementWidth:nf,adjustTableWidth:y,isRelative:!1,label:"pixel"}},Bu=function(u,l){var d=l1().exec(l);return d!==null?Lm(u):rl(u)},d1=function(u){var l=Ic(u);return l.fold(function(){return Ys(u)},function(d){return Bu(u,d)})},Jf={getTableSize:d1,pixelSize:rl,percentageSize:Lm,noneSize:Ys},xC=function(u,l,d,h,y,k){return{minRow:u,minCol:l,maxRow:d,maxCol:h,allCells:y,selectedCells:k}},gu=function(u,l){var d=u.grid.columns,h=u.grid.rows,y=h,k=d,_=0,N=0,j=[],re=[];return ga(u.access,function(he){if(j.push(he),l(he)){re.push(he);var Ge=he.row,yt=Ge+he.rowspan-1,at=he.column,qe=at+he.colspan-1;Ge<y?y=Ge:yt>_&&(_=yt),at<k?k=at:qe>N&&(N=qe)}}),xC(y,k,_,N,j,re)},Q0=function(u,l,d){var h=u[d].element,y=lt.fromTag("td");No(y,lt.fromTag("br"));var k=l?No:du;k(h,y)},m1=function(u,l,d,h){for(var y=l.grid.columns,k=l.grid.rows,_=0;_<k;_++)for(var N=!1,j=0;j<y;j++)if(!(_<d.minRow||_>d.maxRow||j<d.minCol||j>d.maxCol)){var re=wr.getAt(l,_,j).filter(h).isNone();re?Q0(u,N,_):N=!0}},oa=function(u,l,d,h){ga(d.columns,function(_){(_.column<l.minCol||_.column>l.maxCol)&&ks(_.element)});var y=nr(Lf(u,"tr"),function(_){return _.dom.childElementCount===0});jt(y,ks),(l.minCol===l.maxCol||l.minRow===l.maxRow)&&jt(Lf(u,"th,td"),function(_){ro(_,"rowspan"),ro(_,"colspan")}),ro(u,ii),ro(u,"data-snooker-col-series");var k=Jf.getTableSize(u);k.adjustTableWidth(h)},Vn=function(u,l,d,h){if(h.minCol===0&&l.grid.columns===h.maxCol+1)return 0;var y=Ed(l,u,d),k=Q(y,function(re,he){return re+he},0),_=Q(y.slice(h.minCol,h.maxCol+1),function(re,he){return re+he},0),N=_/k*d.pixelWidth(),j=N-d.pixelWidth();return d.getCellDelta(j)},yc=function(u,l){var d=function(yt){return no(yt.element,l)},h=Ta(u),y=a1(h),k=Jf.getTableSize(u),_=wr.generate(y),N=gu(_,d),j="th:not("+l+"),td:not("+l+")",re=Hf(h,"th,td",function(yt){return no(yt,j)});jt(re,ks),m1(y,_,N,d);var he=wr.fromTable(u),Ge=Vn(u,he,k,N);return oa(h,N,_,Ge),h},g1=" ",al=function(u){return kr(u)==="img"?1:dC(u).fold(function(){return w(u).length},function(l){return l.length})},TC=function(u){return dC(u).filter(function(l){return l.trim().length!==0||l.indexOf(g1)>-1}).isSome()},Wa=["img","br"],ey=function(u){var l=TC(u);return l||Vr(Wa,kr(u))},h1=function(u){return mh(u,ey)},p1=function(u){return ut(u,ey)},ut=function(u,l){var d=function(h){for(var y=w(h),k=y.length-1;k>=0;k--){var _=y[k];if(l(_))return Y.some(_);var N=d(_);if(N.isSome())return N}return Y.none()};return d(u)},ty={scope:["row","col"]},ny=function(u){return function(){var l=lt.fromTag("td",u.dom);return No(l,lt.fromTag("br",u.dom)),l}},Mv=function(u){return function(){return lt.fromTag("col",u.dom)}},Ah=function(u){return function(){return lt.fromTag("colgroup",u.dom)}},Od=function(u){return function(){return lt.fromTag("tr",u.dom)}},Bv=function(u,l,d){var h=Nc(u,l);return ga(d,function(y,k){y===null?ro(h,k):Ai(h,k,y)}),h},Ad=function(u){return u},Hm=function(u,l,d){var h=h1(u);return h.map(function(y){var k=d.join(","),_=Oi(y,k,function(N){return Tr(N,u)});return ba(_,function(N,j){var re=Qc(j);return ro(re,"contenteditable"),No(N,re),re},l)}).getOr(l)},ui=function(u,l){ga(ty,function(d,h){return la(u,h).filter(function(y){return Vr(d,y)}).each(function(y){return Ai(l,h,y)})})},dr=function(u,l,d){var h=function(_,N){kv(_.element,N),fu(N,"height"),_.colspan!==1&&fu(N,"width")},y=function(_){var N=lt.fromTag(kr(_.element),l.dom),j=d.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),re=j.length>0?Hm(_.element,N,j):N;return No(re,lt.fromTag("br")),h(_,N),ui(_.element,N),u(_.element,N),N},k=function(_){var N=lt.fromTag(kr(_.element),l.dom);return h(_,N),u(_.element,N),N};return{col:k,colgroup:Ah(l),row:Od(l),cell:y,replace:Bv,colGap:Mv(l),gap:ny(l)}},wc=function(u){return{col:Mv(u),colgroup:Ah(u),row:Od(u),cell:ny(u),replace:Ad,colGap:Mv(u),gap:ny(u)}},kC=function(u,l){var d=l||document,h=d.createElement("div");return h.innerHTML=u,w(lt.fromDom(h))},Js=function(u){return wt(u,lt.fromDom)},ry=function(u){return u.nodeName.toLowerCase()},rf=function(u){return lt.fromDom(u.getBody())},Zf=function(u){return u.getBoundingClientRect().width},Qf=function(u){return u.getBoundingClientRect().height},Cc=function(u){return function(l){return Tr(l,rf(u))}},Pv=function(u){return u?u.replace(/px$/,""):""},Li=function(u){return/^\d+(\.\d+)?$/.test(u)?u+"px":u},cs=function(u){ro(u,"data-mce-style");var l=function(d){return ro(d,"data-mce-style")};jt(Vf(u),l),jt(Cl(u),l),jt(xs(u),l)},af=function(u,l){var d=u.dom.getStyle(l,"width")||u.dom.getAttrib(l,"width");return Y.from(d).filter(Ar)},Nv=function(u){return/^(\d+(\.\d+)?)%$/.test(u)},Vm=function(u){return/^(\d+(\.\d+)?)px$/.test(u)},Dd=function(u){return lt.fromDom(u.selection.getStart())},gn=function(u){return lt.fromDom(u.selection.getEnd())},Qi=function(u){return i1(u.get(),Ze([]),qt,pt)},El=function(u){var l=function(y,k){return la(y,k).exists(function(_){return parseInt(_,10)>1})},d=function(y){return l(y,"rowspan")||l(y,"colspan")},h=Qi(u);return h.length>0&&Nt(h,d)?Y.some(h):Y.none()},of=function(u,l,d){return i1(l.get(),Y.none,function(h){return h.length<=1?Y.none():Zi(u,d.firstSelectedSelector,d.lastSelectedSelector).map(function(y){return{bounds:y,cells:h}})},Y.none)},Dh="data-mce-selected",EC="td["+Dh+"],th["+Dh+"]",b1="["+Dh+"]",Iv="data-mce-first-selected",$v="td["+Iv+"],th["+Iv+"]",Um="data-mce-last-selected",_h="td["+Um+"],th["+Um+"]",Hk=b1,Sc={selected:Dh,selectedSelector:EC,firstSelected:Iv,firstSelectedSelector:$v,lastSelected:Um,lastSelectedSelector:_h},ay=function(u){return{element:u,mergable:Y.none(),unmergable:Y.none(),selection:[u]}},_d=function(u,l,d){return{element:d,mergable:of(l,u,Sc),unmergable:El(u),selection:Qi(u)}},zv=function(u,l,d){return{element:u,clipboard:l,generators:d}},oy=function(u,l,d,h){return{selection:Qi(u),clipboard:d,generators:h}},Fv=function(u){return po(u).bind(function(l){return Zo(l,Sc.firstSelectedSelector)}).fold(Ze(u),function(l){return l[0]})},OC=function(u){return function(l,d){var h=kr(l),y=h==="col"||h==="colgroup"?Fv(l):l;return Bo(y,u,d)}},Ao=OC("th,td,caption"),hu=OC("th,td"),Pu=function(u){return Qi(u)},AC=function(u,l){var d=hu(u),h=d.bind(function(y){return po(y)}).map(function(y){return xs(y)});return js(d,h,function(y,k){return nr(k,function(_){return R(Js(_.dom.cells),function(N){return fc(N,l)==="1"||Tr(N,y)})})}).getOr([])},y1=function(u){return po(u[0]).map(function(l){var d=yc(l,Hk);return cs(d),[d]})},Vk=function(u,l){return wt(l,function(d){return u.selection.serializer.serialize(d.dom,{})}).join("")},DC=function(u){return wt(u,function(l){return l.dom.innerText}).join("")},ol=function(u,l,d){u.on("BeforeGetContent",function(h){var y=function(k){h.preventDefault(),y1(k).each(function(_){h.content=h.format==="text"?DC(_):Vk(u,_)})};h.selection===!0&&i1(l.get(),ze,y,ze)}),u.on("BeforeSetContent",function(h){if(h.selection===!0&&h.paste===!0){var y=Pu(l);bn(y).each(function(k){po(k).each(function(_){var N=nr(kC(h.content),function(yt){return kr(yt)!=="meta"}),j=uo("table");if(N.length===1&&j(N[0])){h.preventDefault();var re=lt.fromDom(u.getDoc()),he=wc(re),Ge=zv(k,N[0],he);d.pasteCells(_,Ge).each(function(){u.focus()})}})})}})},Uk=Zl.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Wm=Nn({},Uk),w1=function(u,l){return u.length===0?Wm.none():u.length===1?Wm.only(0):l===0?Wm.left(0,1):l===u.length-1?Wm.right(l-1,l):l>0&&l<u.length-1?Wm.middle(l-1,l,l+1):Wm.none()},Wk=function(u,l,d,h,y){var k=u.slice(0),_=w1(u,l),N=Ze(wt(k,Ze(0))),j=function(yt){return h.singleColumnWidth(k[yt],d)},re=function(yt,at){return y.calcLeftEdgeDeltas(k,yt,at,d,h.minCellWidth(),h.isRelative)},he=function(yt,at,qe){return y.calcMiddleDeltas(k,yt,at,qe,d,h.minCellWidth(),h.isRelative)},Ge=function(yt,at){return y.calcRightEdgeDeltas(k,yt,at,d,h.minCellWidth(),h.isRelative)};return _.fold(N,j,re,he,Ge)},_C=function(u,l,d){for(var h=0,y=u;y<l;y++)h+=d[y]!==void 0?d[y]:0;return h},iy=function(u,l){var d=wr.justCells(u);return wt(d,function(h){var y=_C(h.column,h.column+h.colspan,l);return{element:h.element,width:y,colspan:h.colspan}})},uy=function(u,l){var d=wr.justColumns(u);return wt(d,function(h,y){return{element:h.element,width:l[y],colspan:h.colspan}})},sy=function(u,l){var d=wr.justCells(u);return wt(d,function(h){var y=_C(h.row,h.row+h.rowspan,l);return{element:h.element,height:y,rowspan:h.rowspan}})},jk=function(u,l){return wt(u.all,function(d,h){return{element:d.element,height:l[h]}})},Lv=function(u){return ba(u,function(l,d){return l+d},0)},Hv=function(u,l){return wr.hasColumns(u)?uy(u,l):iy(u,l)},za=function(u,l,d){var h=Hv(u,l);jt(h,function(y){d.setElementWidth(y.element,y.width)})},C1=function(u,l,d,h,y){var k=wr.fromTable(u),_=y.getCellDelta(l),N=y.getWidths(k,y),j=d===k.grid.columns-1,re=h.clampTableDelta(N,d,_,y.minCellWidth(),j),he=Wk(N,d,re,y,h),Ge=wt(he,function(yt,at){return yt+N[at]});za(k,Ge,y),h.resizeTable(y.adjustTableWidth,re,j)},Ol=function(u,l,d,h){var y=wr.fromTable(u),k=Lk(y,u,h),_=wt(k,function(he,Ge){return d===Ge?Math.max(l+he,Uo()):he}),N=sy(y,_),j=jk(y,_);jt(j,function(he){Dv(he.element,he.height)}),jt(N,function(he){Dv(he.element,he.height)});var re=Lv(_);Dv(u,re)},RC=function(u,l,d,h,y){var k=wr.generate(l),_=h.getWidths(k,h),N=h.pixelWidth(),j=y.calcRedestributedWidths(_,N,d.pixelDelta,h.isRelative),re=j.newSizes,he=j.delta;za(k,re,h),h.adjustTableWidth(he)},Al=function(u,l,d,h){var y=wr.generate(l),k=h.getWidths(y,h);za(y,k,h)},uf=function(u){return wt(u,Ze(0))},Vv=function(u,l,d,h,y){return y(u.slice(0,l)).concat(h).concat(y(u.slice(d)))},S1=function(u){return function(l,d,h,y){if(u(h)){var k=Math.max(y,l[d]-Math.abs(h)),_=Math.abs(k-l[d]);return h>=0?_:-_}else return h}},Rh=S1(function(u){return u<0}),x1=S1(ht),T1=function(){var u=function(N,j,re,he,Ge){var yt=Rh(N,j,he,Ge);return Vv(N,j,re+1,[yt,0],uf)},l=function(N,j,re,he){var Ge=(100+re)/100,yt=Math.max(he,(N[j]+re)/Ge);return wt(N,function(at,qe){var Dt=qe===j?yt:at/Ge;return Dt-at})},d=function(N,j,re,he,Ge,yt){return yt?l(N,j,he,Ge):u(N,j,re,he,Ge)},h=function(N,j,re,he,Ge,yt,at){return d(N,re,he,Ge,yt,at)},y=function(N,j){return N(j)},k=function(N,j,re,he,Ge,yt){if(yt)return l(N,re,he,Ge);var at=Rh(N,re,he,Ge);return uf(N.slice(0,re)).concat([at])},_=function(N,j,re,he){if(he){var Ge=j+re,yt=Ge/j,at=wt(N,function(qe){return qe/yt});return{delta:yt*100-100,newSizes:at}}else return{delta:re,newSizes:N}};return{resizeTable:y,clampTableDelta:Rh,calcLeftEdgeDeltas:d,calcMiddleDeltas:h,calcRightEdgeDeltas:k,calcRedestributedWidths:_}},Rd=function(){var u=function(_,N,j,re,he){var Ge=re>=0?j:N,yt=x1(_,Ge,re,he);return Vv(_,N,j+1,[yt,-yt],uf)},l=function(_,N,j,re,he,Ge){return u(_,j,re,he,Ge)},d=function(_,N,j){j&&_(N)},h=function(_,N,j,re,he,Ge){if(Ge)return uf(_);var yt=re/_.length;return wt(_,Ze(yt))},y=function(_,N,j,re,he){if(he){if(j>=0)return j;var Ge=Q(_,function(yt,at){return yt+at-re},0);return Math.max(-Ge,j)}else return Rh(_,N,j,re)},k=function(_,N,j,re){return{delta:0,newSizes:_}};return{resizeTable:d,clampTableDelta:y,calcLeftEdgeDeltas:u,calcMiddleDeltas:l,calcRightEdgeDeltas:h,calcRedestributedWidths:k}},Gk=function(u,l){var d=Y.from(u.dom.documentElement).map(lt.fromDom).getOr(u);return{parent:Ze(d),view:Ze(u),origin:Ze(Ua(0,0)),isResizable:l}},k1=function(u,l,d){var h=function(){return Kf(l)};return{parent:Ze(l),view:Ze(u),origin:h,isResizable:d}},jm=function(u,l,d){return{parent:Ze(l),view:Ze(u),origin:Ze(Ua(0,0)),isResizable:d}},Mh={only:Gk,detached:k1,body:jm},Bh=Zl.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),cy=function(u,l,d){var h=d.substring(0,d.length-u.length),y=parseFloat(h);return h===y.toString()?l(y):Bh.invalid(d)},Mi=function(u){return Nr(u,"%")?cy("%",Bh.percent,u):Nr(u,"px")?cy("px",Bh.pixels,u):Bh.invalid(u)},Md=Nn(Nn({},Bh),{from:Mi}),yi=function(u,l){return wt(u,function(d){var h=Md.from(d);return h.fold(function(){return d},function(y){var k=y/l*100;return k+"%"},function(y){return y+"%"})})},ls=function(u,l,d){var h=d/l;return wt(u,function(y){var k=Md.from(y);return k.fold(function(){return y},function(_){return _*h+"px"},function(_){return _/100*d+"px"})})},Bd=function(u,l){var d=u.fold(function(){return Ze("")},function(h){var y=h/l;return Ze(y+"px")},function(){var h=100/l;return Ze(h+"%")});return Aa(l,d)},xc=function(u,l,d){return u.fold(function(){return l},function(h){return ls(l,d,h)},function(h){return yi(l,d)})},E1=function(u,l,d){var h=Md.from(d),y=Nt(u,function(k){return k==="0px"})?Bd(h,u.length):xc(h,u,l);return MC(y)},sf=function(u,l){return u.length===0?l:ba(u,function(d,h){return Md.from(h).fold(Ze(0),qt,qt)+d},0)},Gm=function(u,l){var d=Math.floor(u);return{value:d+l,remainder:u-d}},qm=function(u,l){return Md.from(u).fold(Ze(u),function(d){return d+l+"px"},function(d){return d+l+"%"})},MC=function(u){if(u.length===0)return u;var l=ba(u,function(h,y){var k=Md.from(y).fold(function(){return{value:y,remainder:0}},function(_){return Gm(_,"px")},function(_){return{value:_+"%",remainder:0}});return{output:[k.value].concat(h.output),remainder:h.remainder+k.remainder}},{output:[],remainder:0}),d=l.output;return d.slice(0,d.length-1).concat([qm(d[d.length-1],Math.round(l.remainder))])},BC=Md.from,qk=function(u,l,d){jt(l,function(h){var y=u.slice(h.column,h.colspan+h.column),k=sf(y,Ff());Vo(h.element,"width",k+d)})},Kk=function(u,l,d){jt(l,function(h,y){var k=sf([u[y]],Ff());Vo(h.element,"width",k+d)})},Xk=function(u,l,d,h){jt(d,function(y){var k=u.slice(y.row,y.rowspan+y.row),_=sf(k,Uo());Vo(y.element,"height",_+h)}),jt(l,function(y,k){Vo(y.element,"height",u[k])})},PC=function(u){return BC(u).fold(Ze("px"),Ze("px"),Ze("%"))},O1=function(u,l,d){var h=wr.fromTable(u),y=h.all,k=wr.justCells(h),_=wr.justColumns(h);l.each(function(N){var j=PC(N),re=el(u),he=Oh(h,u),Ge=E1(he,re,N);wr.hasColumns(h)?Kk(Ge,_,j):qk(Ge,k,j),Vo(u,"width",N)}),d.each(function(N){var j=PC(N),re=ss(u),he=Z0(h,u,U0),Ge=E1(he,re,N);Xk(Ge,y,k,j),Vo(u,"height",N)})},A1=K0,pu=Fk,D1=Io,ly=function(u){var l=wr.fromTable(u);return l.grid},zc=function(u){var l=[],d=function(k){if(k===void 0)throw new Error("Event bind error: undefined handler");l.push(k)},h=function(k){l=nr(l,function(_){return _!==k})},y=function(){for(var k=[],_=0;_<arguments.length;_++)k[_]=arguments[_];var N={};jt(u,function(j,re){N[j]=k[re]}),jt(l,function(j){j(N)})};return{bind:d,unbind:h,trigger:y}},fo=function(u){var l=ns(u,function(h){return{bind:h.bind,unbind:h.unbind}}),d=ns(u,function(h){return h.trigger});return{registry:l,trigger:d}},Tc=function(u,l){var d=null,h=function(){Mn(d)||(clearTimeout(d),d=null)},y=function(){for(var k=[],_=0;_<arguments.length;_++)k[_]=arguments[_];h(),d=setTimeout(function(){d=null,u.apply(null,k)},l)};return{cancel:h,throttle:y}},Uv=function(u){return u.slice(0).sort()},fy=function(u,l){throw new Error("All required keys ("+Uv(u).join(", ")+") were not specified. Specified keys were: "+Uv(l).join(", ")+".")},_1=function(u){throw new Error("Unsupported keys for object: "+Uv(u).join(", "))},NC=function(u,l){if(!Sn(l))throw new Error("The "+u+" fields must be an array. Was: "+l+".");jt(l,function(d){if(!dt(d))throw new Error("The value "+d+" in the "+u+" fields was not a string.")})},br=function(u,l){throw new Error("All values need to be of type: "+l+". Keys ("+Uv(u).join(", ")+") were not.")},Km=function(u){var l=Uv(u),d=gt(l,function(h,y){return y<l.length-1&&h===l[y+1]});d.each(function(h){throw new Error("The field: "+h+" occurs more than once in the combined fields: ["+l.join(", ")+"].")})},R1=function(u,l){return vy(u,l,{validate:Ft,label:"function"})},vy=function(u,l,d){if(l.length===0)throw new Error("You must specify at least one required field.");return NC("required",l),Km(l),function(h){var y=ai(h),k=Nt(l,function(N){return Vr(y,N)});k||fy(l,y),u(l,y);var _=nr(l,function(N){return!d.validate(h[N],N)});return _.length>0&&br(_,d.label),h}},Bi=function(u,l){var d=nr(l,function(h){return!Vr(u,h)});d.length>0&&_1(d)},Fc=function(u){return R1(Bi,u)},IC=Fc(["compare","extract","mutate","sink"]),Pd=Fc(["element","start","stop","destroy"]),ao=Fc(["forceDrop","drop","move","delayDrop"]),Nd=function(){var u=Y.none(),l=function(){u=Y.none()},d=function(k,_){var N=u.map(function(j){return k.compare(j,_)});return u=Y.some(_),N},h=function(k,_){var N=_.extract(k);N.each(function(j){var re=d(_,j);re.each(function(he){y.trigger.move(he)})})},y=fo({move:zc(["info"])});return{onEvent:h,reset:l,events:y.registry}},M1=function(){var u=fo({move:zc(["info"])});return{onEvent:ze,reset:ze,events:u.registry}},Xm=function(){var u=M1(),l=Nd(),d=u,h=function(){d.reset(),d=l},y=function(){d.reset(),d=u},k=function(N,j){d.onEvent(N,j)},_=function(){return d===l};return{on:h,off:y,isOn:_,onEvent:k,events:l.events}},dy=function(u,l,d){var h=!1,y=fo({start:zc([]),stop:zc([])}),k=Xm(),_=function(){at.stop(),k.isOn()&&(k.off(),y.trigger.stop())},N=Tc(_,200),j=function(Dt){at.start(Dt),k.on(),y.trigger.start()},re=function(Dt){N.cancel(),k.onEvent(Dt,l)};k.events.move.bind(function(Dt){l.mutate(u,Dt.info)});var he=function(){h=!0},Ge=function(){h=!1},yt=function(Dt){return function(){for(var It=[],_n=0;_n<arguments.length;_n++)It[_n]=arguments[_n];h&&Dt.apply(null,It)}},at=l.sink(ao({forceDrop:_,drop:yt(_),move:yt(re),delayDrop:yt(N.throttle)}),d),qe=function(){at.destroy()};return{element:at.element,go:j,on:he,off:Ge,destroy:qe,events:y.registry}},$C=function(u,l,d,h,y,k,_){return{target:u,x:l,y:d,stop:h,prevent:y,kill:k,raw:_}},Ph=function(u){var l=lt.fromDom(fn(u).getOr(u.target)),d=function(){return u.stopPropagation()},h=function(){return u.preventDefault()},y=ge(h,d);return $C(l,u.clientX,u.clientY,d,h,y,u)},zC=function(u,l){return function(d){u(d)&&l(Ph(d))}},ev=function(u,l,d,h,y){var k=zC(d,h);return u.dom.addEventListener(l,k,y),{unbind:Ne(my,u,l,k,y)}},fs=function(u,l,d,h){return ev(u,l,d,h,!1)},my=function(u,l,d,h){u.dom.removeEventListener(l,d,h)},Yk=ht,Dl=function(u,l,d){return fs(u,l,Yk,d)},tv=Ph,B1=function(u,l){var d=fc(u,l);return d===void 0||d===""?[]:d.split(" ")},Jk=function(u,l,d){var h=B1(u,l),y=h.concat([d]);return Ai(u,l,y.join(" ")),!0},Zk=function(u,l,d){var h=nr(B1(u,l),function(y){return y!==d});return h.length>0?Ai(u,l,h.join(" ")):ro(u,l),!1},Id=function(u){return u.dom.classList!==void 0},$d=function(u){return B1(u,"class")},P1=function(u,l){return Jk(u,"class",l)},va=function(u,l){return Zk(u,"class",l)},Pi=function(u,l){Id(u)?u.dom.classList.add(l):P1(u,l)},vs=function(u){var l=Id(u)?u.dom.classList:$d(u);l.length===0&&ro(u,"class")},As=function(u,l){if(Id(u)){var d=u.dom.classList;d.remove(l)}else va(u,l);vs(u)},Xa=function(u,l){return Id(u)&&u.dom.classList.contains(l)},Wv=function(u){var l=u.replace(/\./g,"-"),d=function(h){return l+"-"+h};return{resolve:d}},N1=Wv("ephox-dragster"),Hi=N1.resolve,cf=function(u){var l=Nn({layerClass:Hi("blocker")},u),d=lt.fromTag("div");Ai(d,"role","presentation"),Xl(d,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Pi(d,Hi("blocker")),Pi(d,l.layerClass);var h=Ze(d),y=function(){ks(d)};return{element:h,destroy:y}},Qk=function(u,l){return Ua(l.left-u.left,l.top-u.top)},eE=function(u){return Y.some(Ua(u.x,u.y))},I1=function(u,l){u.mutate(l.left,l.top)},$1=function(u,l){var d=cf(l),h=Dl(d.element(),"mousedown",u.forceDrop),y=Dl(d.element(),"mouseup",u.drop),k=Dl(d.element(),"mousemove",u.move),_=Dl(d.element(),"mouseout",u.delayDrop),N=function(){d.destroy(),y.unbind(),k.unbind(),_.unbind(),h.unbind()},j=function(he){No(he,d.element())},re=function(){ks(d.element())};return Pd({element:d.element,start:j,stop:re,destroy:N})},gy=IC({compare:Qk,extract:eE,sink:$1,mutate:I1}),hy=function(u,l){l===void 0&&(l={});var d=l.mode!==void 0?l.mode:gy;return dy(u,d,l)},zd=function(u){return Bo(u,"[contenteditable]")},Nh=function(u,l){return l===void 0&&(l=!1),!Wn().browser.isIE()&&rr(u)?u.dom.isContentEditable:zd(u).fold(Ze(l),function(d){return py(d)==="true"})},py=function(u){return u.dom.contentEditable},by=Wv("ephox-snooker"),Ym=by.resolve,bu=function(){var u=fo({drag:zc(["xDelta","yDelta"])}),l=function(d,h){u.trigger.drag(d,h)};return{mutate:l,events:u.registry}},Zs=function(){var u=fo({drag:zc(["xDelta","yDelta","target"])}),l=Y.none(),d=bu();d.events.drag.bind(function(k){l.each(function(_){u.trigger.drag(k.xDelta,k.yDelta,_)})});var h=function(k){l=Y.some(k)},y=function(){return l};return{assign:h,get:y,mutate:d.mutate,events:u.registry}},Ih=function(u,l,d,h,y){var k=lt.fromTag("div");return Xl(k,{position:"absolute",left:l-h/2+"px",top:d+"px",height:y+"px",width:h+"px"}),oi(k,{"data-column":u,role:"presentation"}),k},Ni=function(u,l,d,h,y){var k=lt.fromTag("div");return Xl(k,{position:"absolute",left:l+"px",top:d-y/2+"px",height:y+"px",width:h+"px"}),oi(k,{"data-row":u,role:"presentation"}),k},z1=Ym("resizer-bar"),nv=Ym("resizer-rows"),yy=Ym("resizer-cols"),wy=7,FC=function(u,l){return Er(u.all,function(d,h){return l(d.element)?[h]:[]})},Cy=function(u,l){var d=[];return Aa(u.grid.columns,function(h){var y=wr.getColumnAt(u,h).map(function(k){return k.element});y.forall(l)&&d.push(h)}),nr(d,function(h){var y=wr.filterItems(u,function(k){return k.column===h});return Nt(y,function(k){return l(k.element)})})},$h=function(u){var l=Us(u.parent(),"."+z1);jt(l,ks)},F1=function(u,l,d){var h=u.origin();jt(l,function(y){y.each(function(k){var _=d(h,k);Pi(_,z1),No(u.parent(),_)})})},LC=function(u,l,d,h){F1(u,l,function(y,k){var _=Ih(k.col,k.x-y.left,d.top-y.top,wy,h);return Pi(_,yy),_})},tE=function(u,l,d,h){F1(u,l,function(y,k){var _=Ni(k.row,d.left-y.left,k.y-y.top,h,wy);return Pi(_,nv),_})},Nu=function(u,l,d,h,y){var k=Kf(d),_=l.isResizable,N=h.length>0?U0.positions(h,d):[],j=N.length>0?FC(u,_):[],re=nr(N,function(at,qe){return R(j,function(Dt){return qe===Dt})});tE(l,re,k,Mu(d));var he=y.length>0?Nm.positions(y,d):[],Ge=he.length>0?Cy(u,_):[],yt=nr(he,function(at,qe){return R(Ge,function(Dt){return qe===Dt})});LC(l,yt,k,kl(d))},Vi=function(u,l){if($h(u),u.isResizable(l)){var d=wr.fromTable(l),h=Av(d),y=Sd(d);Nu(d,u,l,h,y)}},ds=function(u,l){var d=Us(u.parent(),"."+z1);jt(d,l)},ms=function(u){ds(u,function(l){Vo(l,"display","none")})},Ds=function(u){ds(u,function(l){Vo(l,"display","block")})},wi=function(u){return Xa(u,nv)},L1=function(u){return Xa(u,yy)},H1=Ym("resizer-bar-dragging"),Sy=function(u){var l=Zs(),d=hy(l,{}),h=Y.none(),y=function(qe,Dt){return Y.from(fc(qe,Dt))};l.events.drag.bind(function(qe){y(qe.target,"data-row").each(function(Dt){var It=zf(qe.target,"top");Vo(qe.target,"top",It+qe.yDelta+"px")}),y(qe.target,"data-column").each(function(Dt){var It=zf(qe.target,"left");Vo(qe.target,"left",It+qe.xDelta+"px")})});var k=function(qe,Dt){var It=zf(qe,Dt),_n=Pc(qe,"data-initial-"+Dt,0);return It-_n};d.events.stop.bind(function(){l.get().each(function(qe){h.each(function(Dt){y(qe,"data-row").each(function(It){var _n=k(qe,"top");ro(qe,"data-initial-top"),at.trigger.adjustHeight(Dt,_n,parseInt(It,10))}),y(qe,"data-column").each(function(It){var _n=k(qe,"left");ro(qe,"data-initial-left"),at.trigger.adjustWidth(Dt,_n,parseInt(It,10))}),Vi(u,Dt)})})});var _=function(qe,Dt){at.trigger.startAdjust(),l.assign(qe),Ai(qe,"data-initial-"+Dt,zf(qe,Dt)),Pi(qe,H1),Vo(qe,"opacity","0.2"),d.go(u.parent())},N=Dl(u.parent(),"mousedown",function(qe){wi(qe.target)&&_(qe.target,"top"),L1(qe.target)&&_(qe.target,"left")}),j=function(qe){return Tr(qe,u.view())},re=function(qe){return Bo(qe,"table",j).filter(Nh)},he=Dl(u.view(),"mouseover",function(qe){re(qe.target).fold(function(){rr(qe.target)&&$h(u)},function(Dt){h=Y.some(Dt),Vi(u,Dt)})}),Ge=function(){N.unbind(),he.unbind(),d.destroy(),$h(u)},yt=function(qe){Vi(u,qe)},at=fo({adjustHeight:zc(["table","delta","row"]),adjustWidth:zc(["table","delta","column"]),startAdjust:zc([])});return{destroy:Ge,refresh:yt,on:d.on,off:d.off,hideBars:Ne(ms,u),showBars:Ne(Ds,u),events:at.registry}},Fd=function(u,l,d){var h=U0,y=Nm,k=Sy(u),_=fo({beforeResize:zc(["table","type"]),afterResize:zc(["table","type"]),startDrag:zc([])});return k.events.adjustHeight.bind(function(N){var j=N.table;_.trigger.beforeResize(j,"row");var re=h.delta(N.delta,j);Ol(j,re,N.row,h),_.trigger.afterResize(j,"row")}),k.events.startAdjust.bind(function(N){_.trigger.startDrag()}),k.events.adjustWidth.bind(function(N){var j=N.table;_.trigger.beforeResize(j,"col");var re=y.delta(N.delta,j),he=d(j);C1(j,re,N.column,l,he),_.trigger.afterResize(j,"col")}),{on:k.on,off:k.off,hideBars:k.hideBars,showBars:k.showBars,destroy:k.destroy,events:_.registry}},jv={create:Fd},V1=function(u,l){return u.fire("newrow",{node:l})},U1=function(u,l){return u.fire("newcell",{node:l})},W1=function(u,l,d,h,y){u.fire("ObjectResizeStart",{target:l,width:d,height:h,origin:y})},Jm=function(u,l,d,h,y){u.fire("ObjectResized",{target:l,width:d,height:h,origin:y})},Zm=function(u,l,d,h,y){u.fire("TableSelectionChange",{cells:l,start:d,finish:h,otherCells:y})},HC=function(u){u.fire("TableSelectionClear")},lf=function(u,l,d){u.fire("TableModified",Nn(Nn({},d),{table:l}))},Ld={structure:!1,style:!0},yo={structure:!0,style:!1},nE={structure:!0,style:!0},rE="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",j1={"border-collapse":"collapse",width:"100%"},aE=Aa(5,function(u){var l=u+1+"px";return{title:l,value:l}}),VC=wt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(u){return{title:u,value:u.toLowerCase()}}),Bt=function(u){var l;if(rv(u)){var d=u.dom,h=(l=d.getParent(u.selection.getStart(),d.isBlock))!==null&&l!==void 0?l:u.getBody(),y=fa(lt.fromDom(h));return Nn(Nn({},j1),{width:y+"px"})}else return Qm(u)?Ke(j1,function(k,_){return _!=="width"}):j1},oE={border:"1"},Ii="preservetable",xy=function(u){return u.getParam("table_sizing_mode","auto")},Hd=function(u){return u.getParam("table_responsive_width")},UC=function(u){return u.getParam("table_border_widths",aE,"array")},Wu=function(u){return u.getParam("table_border_styles",VC,"array")},zh=function(u){return u.getParam("table_default_attributes",oE,"object")},G1=function(u){return u.getParam("table_default_styles",Bt(u),"object")},Fh=function(u){return u.getParam("table_resize_bars",!0,"boolean")},_l=function(u){return u.getParam("table_tab_navigation",!0,"boolean")},Lh=function(u){return u.getParam("table_cell_advtab",!0,"boolean")},Hh=function(u){return u.getParam("table_row_advtab",!0,"boolean")},gs=function(u){return u.getParam("table_advtab",!0,"boolean")},Rl=function(u){return u.getParam("table_appearance_options",!0,"boolean")},WC=function(u){return u.getParam("table_grid",!0,"boolean")},ju=function(u){return u.getParam("table_style_by_css",!1,"boolean")},ff=function(u){return u.getParam("table_cell_class_list",[],"array")},Gv=function(u){return u.getParam("table_row_class_list",[],"array")},Vh=function(u){return u.getParam("table_class_list",[],"array")},Ue=function(u){return xy(u)==="relative"||Hd(u)===!0},rv=function(u){return xy(u)==="fixed"||Hd(u)===!1},Qm=function(u){return xy(u)==="responsive"},iE=function(u){return u.getParam("table_toolbar",rE)},q1=function(u){return u.getParam("table_use_colgroups",!1,"boolean")},il=function(u){var l="section",d=u.getParam("table_header_type",l,"string"),h=["section","cells","sectionCells","auto"];return Vr(h,d)?d:l},K1=function(u){var l=["preservetable","resizetable"],d=u.getParam("table_column_resizing",Ii,"string");return gt(l,function(h){return h===d}).getOr(Ii)},Ty=function(u){return K1(u)==="preservetable"},ky=function(u){return K1(u)==="resizetable"},X1=function(u){var l=u.getParam("table_clone_elements");return dt(l)?Y.some(l.split(/[ ,]/)):Array.isArray(l)?Y.some(l):Y.none()},Ey=function(u){var l=u.getParam("object_resizing",!0);return dt(l)?l==="table":l},Oy=function(u){return u.getParam("table_background_color_map",[],"array")},Ay=function(u){return u.getParam("table_border_color_map",[],"array")},Dy=function(u,l){return Ue(u)?Jf.percentageSize(l):rv(u)?Jf.pixelSize(l):Jf.getTableSize(l)},Vd=function(u){ro(u,"width")},jC=function(u){var l=Fm(u);O1(u,Y.some(l),Y.none()),Vd(u)},uE=function(u){var l=zk(u);O1(u,Y.some(l),Y.none()),Vd(u)},sE=function(u){fu(u,"width");var l=Cl(u),d=l.length>0?l:Vf(u);jt(d,function(h){fu(h,"width"),Vd(h)}),Vd(u)},eg=jC,tg=uE,Y1=sE,_y=function(u){var l=wr.fromTable(u);wr.hasColumns(l)||jt(Vf(u),function(d){var h=yl(d,"width");Vo(d,"width",h),ro(d,"width")})},ng=function(){var u=lt.fromTag("div");return Xl(u,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),No(Yn(),u),u},Ry=function(u,l){return u.inline?Mh.body(rf(u),ng(),l):Mh.only(lt.fromDom(u.getDoc()),l)},Wo=function(u,l){u.inline&&ks(l.parent())},Uh="bar-",Qo=function(u){return fc(u,"data-mce-resize")!=="false"},J1=function(u){var l=Y.none(),d=Y.none(),h=Y.none(),y,k,_=function(qe){return qe.nodeName==="TABLE"},N=function(){return d},j=function(){return h.getOr(Mh.only(lt.fromDom(u.getBody()),Qo))},re=function(qe){return Dy(u,qe)},he=function(){return Ty(u)?Rd():T1()},Ge=function(qe){return ly(qe).columns},yt=function(qe,Dt,It){var _n=Nr(Dt,"e");if(k===""&&eg(qe),It!==y&&k!==""){Vo(qe,"width",k);var ia=he(),An=re(qe),ar=Ty(u)||_n?Ge(qe)-1:0;C1(qe,It-y,ar,ia,An)}else if(Nv(k)){var Lr=parseFloat(k.replace("%","")),Mr=It*Lr/y;Vo(qe,"width",Mr+"%")}Vm(k)&&_y(qe)},at=function(){d.each(function(qe){qe.destroy()}),h.each(function(qe){Wo(u,qe)})};return u.on("init",function(){var qe=Ry(u,Qo);if(h=Y.some(qe),Ey(u)&&Fh(u)){var Dt=he(),It=jv.create(qe,Dt,re);It.on(),It.events.startDrag.bind(function(_n){l=Y.some(u.selection.getRng())}),It.events.beforeResize.bind(function(_n){var ia=_n.table.dom;W1(u,ia,Zf(ia),Qf(ia),Uh+_n.type)}),It.events.afterResize.bind(function(_n){var ia=_n.table,An=ia.dom;cs(ia),l.each(function(ar){u.selection.setRng(ar),u.focus()}),Jm(u,An,Zf(An),Qf(An),Uh+_n.type),u.undoManager.add()}),d=Y.some(It)}}),u.on("ObjectResizeStart",function(qe){var Dt=qe.target;if(_(Dt)){var It=lt.fromDom(Dt);jt(u.dom.select(".mce-clonedresizable"),function(_n){u.dom.addClass(_n,"mce-"+K1(u)+"-columns")}),!pu(It)&&rv(u)?tg(It):!A1(It)&&Ue(u)&&eg(It),D1(It)&&Or(qe.origin,Uh)&&eg(It),y=qe.width,k=Qm(u)?"":af(u,Dt).getOr("")}}),u.on("ObjectResized",function(qe){var Dt=qe.target;if(_(Dt)){var It=lt.fromDom(Dt),_n=qe.origin;Or(_n,"corner-")&&yt(It,_n,qe.width),cs(It),lf(u,It.dom,Ld)}}),u.on("SwitchMode",function(){N().each(function(qe){u.mode.isReadOnly()?qe.hideBars():qe.showBars()})}),{lazyResize:N,lazyWire:j,destroy:at}},Ud=function(u,l){return{element:u,offset:l}},My=function(u,l,d){return u.property().isText(l)&&u.property().getText(l).trim().length===0||u.property().isComment(l)?d(l).bind(function(h){return My(u,h,d).orThunk(function(){return Y.some(h)})}):Y.none()},Wh=function(u,l){if(u.property().isText(l))return u.property().getText(l).length;var d=u.property().children(l);return d.length},By=function(u,l){var d=My(u,l,u.query().prevSibling).getOr(l);if(u.property().isText(d))return Ud(d,Wh(u,d));var h=u.property().children(d);return h.length>0?By(u,h[h.length-1]):Ud(d,Wh(u,d))},GC=By,cE=yh(),qC=function(u){return GC(cE,u)},lE=function(u,l){var d=Di(u,"colspan");if(d===1){var h=$m(u);h.each(function(y){var k=y.value/2;zm(u,k,y.unit),zm(l,k,y.unit)})}},Z1=uo("th"),jh=function(u){return Nt(u,function(l){return Z1(l.element)})},fE=function(u,l){return u&&l?"sectionCells":u?"section":"cells"},KC=function(u){var l=u.section==="thead",d=bl(Py(u.cells),"th");return l||d?{type:"header",subType:fE(l,d)}:u.section==="tfoot"?{type:"footer"}:{type:"body"}},Py=function(u){var l=nr(u,function(d){return Z1(d.element)});return l.length===0?Y.some("td"):l.length===u.length?Y.some("th"):Y.none()},vE=function(u){var l=wt(u,function(k){return KC(k).type}),d=Vr(l,"header"),h=Vr(l,"footer");if(!d&&!h)return Y.some("body");var y=Vr(l,"body");return d&&!y&&!h?Y.some("header"):!d&&!y&&h?Y.some("footer"):Y.none()},dE=function(u){return ta(u.all,function(l){var d=KC(l);return d.type==="header"?Y.from(d.subType):Y.none()})},Q1=function(u,l,d){return To(d(u.element,l),!0,u.isLocked)},Ny=function(u,l){return u.section!==l?Tn(u.element,u.cells,l,u.isNew):u},yu=function(){return{transformRow:Ny,transformCell:function(u,l,d){var h=d(u.element,l),y=kr(h)!=="td"?Rk(h,"td"):h;return To(y,u.isNew,u.isLocked)}}},rg=function(){return{transformRow:Ny,transformCell:Q1}},ag=function(){return{transformRow:function(u,l){var d=l==="thead"?"tbody":l;return Ny(u,d)},transformCell:Q1}},XC=function(){return{transformRow:qt,transformCell:Q1}},mE=function(u,l){var d=wr.fromTable(u),h=dE(d).getOr(l);switch(h){case"section":return yu();case"sectionCells":return rg();case"cells":return ag()}},Gh={getTableSectionType:mE,section:yu,sectionCells:rg,cells:ag,fallback:XC},qh=function(u,l,d,h){d===h?ro(u,l):Ai(u,l,d)},Wd=function(u,l,d){Yr(hr(u,l)).fold(function(){return du(u,d)},function(h){return Ka(h,d)})},eb=function(u,l){var d=Zn(u,l).getOrThunk(function(){var h=lt.fromTag(l,Vs(u).dom);return l==="thead"?Wd(u,"caption,colgroup",h):l==="colgroup"?Wd(u,"caption",h):No(u,h),h});return ph(d),d},Kh=function(u,l){var d=[],h=[],y=function(at){return wt(at,function(qe){qe.isNew&&d.push(qe.element);var Dt=qe.element;return ph(Dt),jt(qe.cells,function(It){It.isNew&&h.push(It.element),qh(It.element,"colspan",It.colspan,1),qh(It.element,"rowspan",It.rowspan,1),No(Dt,It.element)}),Dt})},k=function(at){return Er(at,function(qe){return wt(qe.cells,function(Dt){return qh(Dt.element,"span",Dt.colspan,1),Dt.element})})},_=function(at,qe){var Dt=eb(u,qe),It=qe==="colgroup"?k:y,_n=It(at);Sl(Dt,_n)},N=function(at){Zn(u,at).each(ks)},j=function(at,qe){at.length>0?_(at,qe):N(qe)},re=[],he=[],Ge=[],yt=[];return jt(l,function(at){switch(at.section){case"thead":re.push(at);break;case"tbody":he.push(at);break;case"tfoot":Ge.push(at);break;case"colgroup":yt.push(at);break}}),j(yt,"colgroup"),j(re,"thead"),j(he,"tbody"),j(Ge,"tfoot"),{newRows:d,newCells:h}},Iy=function(u){return wt(u,function(l){var d=Qc(l.element);return jt(l.cells,function(h){var y=Ta(h.element);qh(y,"colspan",h.colspan,1),qh(y,"rowspan",h.rowspan,1),No(d,y)}),d})},gE=function(u,l){return wt(u,function(d){return is(d,l)})},vf=function(u,l){return u[l]},tb=function(u,l){if(u.length===0)return 0;var d=u[0],h=Lt(u,function(y){return!l(d.element,y.element)});return h.getOr(u.length)},hE=function(u,l,d,h){var y=vf(u,l),k=y.section==="colgroup",_=tb(y.cells.slice(d),h),N=k?1:tb(gE(u.slice(l),d),h);return{colspan:_,rowspan:N}},qv=function(u,l){var d=wt(u,function(y){return wt(y.cells,Kt)}),h=function(y,k,_,N){for(var j=y;j<y+_;j++)for(var re=k;re<k+N;re++)d[j][re]=!0};return wt(u,function(y,k){var _=Er(y.cells,function(N,j){if(d[k][j]===!1){var re=hE(u,k,j,l);return h(k,j,re.rowspan,re.colspan),[or(N.element,re.rowspan,re.colspan,N.isNew)]}else return[]});return Eu(y.element,_,y.section,y.isNew)})},Kv=function(u,l,d){var h=[];jt(u.colgroups,function(he){for(var Ge=[],yt=0;yt<u.grid.columns;yt++){var at=wr.getColumnAt(u,yt).map(function(qe){return To(qe.element,d,!1)}).getOrThunk(function(){return To(l.colGap(),!0,!1)});Ge.push(at)}h.push(Tn(he.element,Ge,"colgroup",d))});for(var y=0;y<u.grid.rows;y++){for(var k=[],_=0;_<u.grid.columns;_++){var N=wr.getAt(u,y,_).map(function(he){return To(he.element,d,he.isLocked)}).getOrThunk(function(){return To(l.gap(),!0,!1)});k.push(N)}var j=u.all[y],re=Tn(j.element,k,j.section,d);h.push(re)}return h},pE=function(u,l){return Kv(u,l,!1)},nb=function(u){return qv(u,Tr)},rb=function(u,l){return ta(u.all,function(d){return gt(d.cells,function(h){return Tr(l,h.element)})})},ab=function(u,l,d){var h=wt(l.selection,function(k){return wl(k).bind(function(_){return rb(u,_)}).filter(d)}),y=pi(h);return Ha(y.length>0,y)},eu=function(u,l,d,h,y){return function(k,_,N,j,re){var he=wr.fromTable(_),Ge=Y.from(re==null?void 0:re.section).getOrThunk(Gh.fallback),yt=l(he,N).map(function(at){var qe=pE(he,j),Dt=u(qe,at,Tr,y(j),Ge),It=vu(Dt.grid),_n=nb(Dt.grid);return{info:at,grid:_n,cursor:Dt.cursor,lockedColumns:It}});return yt.bind(function(at){var qe=Kh(_,at.grid),Dt=Y.from(re==null?void 0:re.sizing).getOrThunk(function(){return Jf.getTableSize(_)}),It=Y.from(re==null?void 0:re.resize).getOrThunk(Rd);return d(_,at.grid,at.info,{sizing:Dt,resize:It,section:Ge}),h(_),Vi(k,_),ro(_,ii),at.lockedColumns.length>0&&Ai(_,ii,at.lockedColumns.join(",")),Y.some({cursor:at.cursor,newRows:qe.newRows,newCells:qe.newCells})})}},YC=function(u,l){return wl(l.element).bind(function(d){return rb(u,d).map(function(h){var y=Nn(Nn({},h),{generators:l.generators,clipboard:l.clipboard});return y})})},$y=function(u,l){return ab(u,l,ht).map(function(d){return{cells:d,generators:l.generators,clipboard:l.clipboard}})},JC=function(u,l){return l.mergable},ZC=function(u,l){return l.unmergable},Ml=function(u,l){return ab(u,l,ht)},av=function(u,l){return ab(u,l,function(d){return!d.isLocked})},QC=function(u,l){return rb(u,l).exists(function(d){return!d.isLocked})},eS=function(u,l){return Nt(l,function(d){return QC(u,d)})},zy=function(u,l){return JC(u,l).filter(function(d){return eS(u,d.cells)})},ob=function(u,l){return ZC(u,l).filter(function(d){return eS(u,d)})},tS=function(u,l,d,h){var y=Jo(u).rows;if(y.length===0)return u;for(var k=l.startRow;k<=l.finishRow;k++)for(var _=l.startCol;_<=l.finishCol;_++){var N=y[k],j=is(N,_).isLocked;Yl(N,_,To(h(),!1,j))}return u},og=function(u,l,d,h){for(var y=Jo(u).rows,k=!0,_=0;_<y.length;_++)for(var N=0;N<dc(y[0]);N++){var j=y[_],re=is(j,N),he=re.element,Ge=d(he,l);Ge===!0&&k===!1?Yl(j,N,To(h(),!0,re.isLocked)):Ge===!0&&(k=!1)}return u},bE=function(u,l){return Q(u,function(d,h){return R(d,function(y){return l(y.element,h.element)})?d:d.concat([h])},[])},Xh=function(u,l,d,h){return l>0&&l<u[0].cells.length&&jt(u,function(y){var k=y.cells[l-1],_=y.cells[l],N=d(_.element,k.element);N&&Yl(y,l,To(h(),!0,_.isLocked))}),u},yE=function(u,l,d,h){var y=Jo(u).rows;if(l>0&&l<y.length){var k=y[l-1].cells,_=bE(k,d);jt(_,function(N){for(var j=Y.none(),re=l;re<y.length;re++)for(var he=function(yt){var at=y[re],qe=is(at,yt),Dt=d(qe.element,N.element);Dt&&(j.isNone()&&(j=Y.some(h())),j.each(function(It){Yl(at,yt,To(It,!0,qe.isLocked))}))},Ge=0;Ge<dc(y[0]);Ge++)he(Ge)})}return u},ig=function(u){var l=function(Ge){return ig(u)},d=function(Ge){return ig(u)},h=function(Ge){return ig(Ge(u))},y=function(Ge){return ig(u)},k=function(Ge){Ge(u)},_=function(Ge){return Ge(u)},N=function(Ge,yt){return yt(u)},j=function(Ge){return Ge(u)},re=function(Ge){return Ge(u)},he=function(){return Y.some(u)};return{isValue:ht,isError:Kt,getOr:Ze(u),getOrThunk:Ze(u),getOrDie:Ze(u),or:l,orThunk:d,fold:N,map:h,mapError:y,each:k,bind:_,exists:j,forall:re,toOptional:he}},jd=function(u){var l=function(re){return re()},d=function(){return Vt(String(u))()},h=qt,y=function(re){return re()},k=function(re){return jd(u)},_=function(re){return jd(re(u))},N=function(re){return jd(u)},j=function(re,he){return re(u)};return{isValue:Kt,isError:ht,getOr:qt,getOrThunk:l,getOrDie:d,or:h,orThunk:y,fold:j,map:k,mapError:_,each:ze,bind:N,exists:Kt,forall:ht,toOptional:Y.none}},Fy=function(u,l){return u.fold(function(){return jd(l)},ig)},nS={value:ig,error:jd,fromOption:Fy},wE=function(u,l,d){if(u.row>=l.length||u.column>dc(l[0]))return nS.error("invalid start address out of table bounds, row: "+u.row+", column: "+u.column);var h=l.slice(u.row),y=h[0].cells.slice(u.column),k=dc(d[0]),_=d.length;return nS.value({rowDelta:h.length-_,colDelta:y.length-k})},rS=function(u,l){var d=dc(u[0]),h=dc(l[0]);return{rowDelta:0,colDelta:d-h}},aS=function(u,l){var d=u.length,h=l.length;return{rowDelta:d-h,colDelta:0}},Ly=function(u,l,d,h){var y=l.section==="colgroup"?d.col:d.cell;return Aa(u,function(k){return To(y(),!0,h(k))})},CE=function(u,l,d,h){var y=u[u.length-1];return u.concat(Aa(l,function(){var k=y.section==="colgroup"?d.colgroup:d.row,_=_i(y,k,qt),N=Ly(_.cells.length,_,d,function(j){return V(h,j.toString())});return Qn(_,N)}))},ib=function(u,l,d,h){return wt(u,function(y){var k=Ly(l,y,d,Kt);return Uf(y,h,k)})},SE=function(u,l,d){return wt(u,function(h){return Q(d,function(y,k){var _=Ly(1,h,l,ht)[0];return Wf(y,k,_)},h)})},Yh=function(u,l,d){var h=l.colDelta<0?ib:qt,y=l.rowDelta<0?CE:qt,k=vu(u),_=dc(u[0]),N=R(k,function(he){return he===_-1}),j=h(u,Math.abs(l.colDelta),d,N?_-1:_),re=vu(j);return y(j,Math.abs(l.rowDelta),d,$n(re,ht))},xE=function(u,l,d,h){var y=is(u[l],d),k=Ne(h,y.element),_=u[l];return u.length>1&&dc(_)>1&&(d>0&&k(_u(_,d-1))||d<_.cells.length-1&&k(_u(_,d+1))||l>0&&k(_u(u[l-1],d))||l<u.length-1&&k(_u(u[l+1],d)))},TE=function(u,l,d,h,y,k){for(var _=u.row,N=u.column,j=d.length,re=dc(d[0]),he=_+j,Ge=N+re+k.length,yt=$n(k,ht),at=_;at<he;at++)for(var qe=0,Dt=N;Dt<Ge;Dt++){if(yt[Dt]){qe++;continue}xE(l,at,Dt,y)&&og(l,_u(l[at],Dt),y,h.cell);var It=Dt-N-qe,_n=is(d[at-_],It),ia=_n.element,An=h.replace(ia);Yl(l[at],Dt,To(An,!0,_n.isLocked))}return l},kE=function(u,l,d){var h=dc(l[0]),y=Jo(l).cols.length+u.row,k=Aa(h-u.column,function(N){return N+u.column}),_=gt(k,function(N){return Nt(d,function(j){return j!==N})}).getOr(h-1);return{row:y,column:_}},ub=function(u,l,d){return nr(d,function(h){return h>=u.column&&h<=dc(l[0])+u.column})},EE=function(u,l,d,h,y){var k=vu(l),_=kE(u,l,k),N=Jo(d).rows,j=ub(_,N,k),re=wE(_,l,N);return re.map(function(he){var Ge=Nn(Nn({},he),{colDelta:he.colDelta-j.length}),yt=Yh(l,Ge,h),at=vu(yt),qe=ub(_,N,at);return TE(_,yt,N,h,y,qe)})},ug=function(u,l,d,h,y){Xh(l,u,y,h.cell);var k=aS(d,l),_=Yh(d,k,h),N=aS(l,_),j=Yh(l,N,h);return wt(j,function(re,he){return Uf(re,u,_[he].cells)})},oS=function(u,l,d,h,y){yE(l,u,y,h.cell);var k=vu(l),_=rS(l,d),N=Nn(Nn({},_),{colDelta:_.colDelta-k.length}),j=Yh(l,N,h),re=Jo(j),he=re.cols,Ge=re.rows,yt=vu(j),at=rS(d,l),qe=Nn(Nn({},at),{colDelta:at.colDelta+yt.length}),Dt=SE(d,h,yt),It=Yh(Dt,qe,h);return he.concat(Ge.slice(0,u)).concat(It).concat(Ge.slice(u,Ge.length))},OE=function(u,l,d,h){return _i(u,function(y){return h(y,d)},l)},Hy=function(u,l,d,h,y){var k=Jo(u),_=k.rows,N=k.cols,j=_.slice(0,l),re=_.slice(l),he=OE(_[d],function(Ge,yt){var at=l>0&&l<_.length&&h(_u(_[l-1],yt),_u(_[l],yt)),qe=at?is(_[l],yt):To(y(Ge.element,h),!0,Ge.isLocked);return qe},h,y);return N.concat(j).concat([he]).concat(re)},iS=function(u,l,d,h,y,k,_){if(d==="colgroup"||!h){var N=is(u,y);return To(_(N.element,k),!0,!1)}else return is(u,l)},Vy=function(u,l,d,h,y){return wt(u,function(k){var _=l>0&&l<dc(k)&&h(_u(k,l-1),_u(k,l)),N=iS(k,l,k.section,_,d,h,y);return Wf(k,l,N)})},uS=function(u,l){return Er(u,function(d){var h=d.cells,y=ba(l,function(k,_){return _>=0&&_<k.length?k.slice(0,_).concat(k.slice(_+1)):k},h);return y.length>0?[Tn(d.element,y,d.section,d.isNew)]:[]})},sS=function(u,l,d){var h=Jo(u),y=h.rows,k=h.cols;return k.concat(y.slice(0,l)).concat(y.slice(d+1))},sg=function(u,l,d,h){return _u(u[l],d)!==void 0&&l>0&&h(_u(u[l-1],d),_u(u[l],d))},Uy=function(u,l,d){return l>0&&d(_u(u,l-1),_u(u,l))},Wy=function(u,l,d,h){return sg(u,l,d,h)||Uy(u[l],d,h)},AE=function(u,l){var d=Nt(l,qt)&&jh(u.cells);return d?ht:function(h,y,k){var _=kr(h.element);return!(_==="th"&&l[k])}},DE=function(u,l){var d=Nt(l,qt)&&jh(u);return d?ht:function(h,y,k){var _=kr(h.element);return!(_==="th"&&l[y])}},jy=function(u,l,d,h){var y=function(N){return N==="row"?r1(l):yd(l)},k=function(N){return y(N)?N+"group":N};if(u)return Z1(l)?k(d):null;if(h&&Z1(l)){var _=d==="row"?"col":"row";return k(_)}else return null},_E=function(u,l){return function(d,h,y){return Y.some(jy(u,d.element,"col",l[y]))}},cS=function(u,l){return function(d,h){return Y.some(jy(u,d.element,"row",l[h]))}},Xv=function(u,l,d){return To(d(u.element,l),!0,u.isLocked)},cg=function(u,l,d,h,y,k,_){var N=function(j){return R(l,function(re){return d(j.element,re.element)})};return wt(u,function(j,re){return vc(j,function(he,Ge){if(N(he)){var yt=_(he,re,Ge)?y(he,d,h):he;return k(yt,re,Ge).each(function(at){If(yt.element,{scope:Y.from(at)})}),yt}else return he})})},lS=function(u,l,d){return Er(u,function(h,y){return Wy(u,y,l,d)?[]:[is(h,l)]})},RE=function(u,l,d){var h=u[l];return Er(h.cells,function(y,k){return Wy(u,l,k,d)?[]:[y]})},fS=function(u,l,d,h,y){var k=Jo(u).rows,_=Er(l,function(he){return lS(k,he,h)}),N=wt(u,function(he){return jh(he.cells)}),j=DE(_,N),re=cS(d,N);return cg(u,_,h,y,Xv,re,j)},ME=function(u,l,d,h,y,k,_){var N=Jo(u),j=N.cols,re=N.rows,he=re[l[0]],Ge=Er(l,function(_n){return RE(re,_n,y)}),yt=wt(he.cells,function(_n,ia){return jh(lS(re,ia,y))}),at=ya([],re,!0);jt(l,function(_n){at[_n]=_.transformRow(re[_n],d)});var qe=j.concat(at),Dt=AE(he,yt),It=_E(h,yt);return cg(qe,Ge,y,k,_.transformCell,It,Dt)},Gy=function(u,l,d,h){var y=Jo(u).rows,k=wt(l,function(_){return is(y[_.row],_.column)});return cg(u,k,d,h,Xv,Y.none,ht)},lg=function(u){var l=function(d,h){var y=R(d,function(k){return k.column===h.column});return y?d:d.concat([h])};return Q(u,l,[]).sort(function(d,h){return d.column-h.column})},Gu=uo("col"),qy=uo("colgroup"),fg=function(u){return kr(u)==="tr"||qy(u)},Gd=function(u){var l=Pc(u,"colspan",1),d=Pc(u,"rowspan",1);return{element:u,colspan:l,rowspan:d}},sb=function(u,l){l===void 0&&(l=Gd);var d=function(N){return Gu(N.element)?u.col(N):u.cell(N)},h=function(N){return qy(N.element)?u.colgroup(N):u.row(N)},y=function(N){if(fg(N))return h({element:N});var j=d(l(N));return k=Y.some({item:N,replacement:j}),j},k=Y.none(),_=function(N,j){return k.fold(function(){return y(N)},function(re){return j(N,re.item)?re.replacement:y(N)})};return{getOrInit:_}},BE=function(u){return function(l){var d=[],h=function(_,N){return gt(d,function(j){return N(j.item,_)})},y=function(_){var N=u==="td"?{scope:null}:{},j=l.replace(_,u,N);return d.push({item:_,sub:j}),j},k=function(_,N){return fg(_)||Gu(_)?_:h(_,N).fold(function(){return y(_)},function(j){return N(_,j.item)?j.sub:y(_)})};return{replaceOrInit:k}}},vS=function(u){return la(u,"scope").map(function(l){return l.substr(0,3)})},Ky=function(u){var l=function(h){var y=vS(h);return y.each(function(k){return Ai(h,"scope",k)}),function(){var k=u.cell({element:h,colspan:1,rowspan:1});return fu(k,"width"),fu(h,"width"),y.each(function(_){return Ai(k,"scope",_)}),k}},d=function(h){var y=function(){var k=pi(wt(h,vS));if(k.length===0)return Y.none();var _=k[0],N=["row","col"],j=R(k,function(re){return re!==_&&Vr(N,re)});return j?Y.none():Y.from(_)};return fu(h[0],"width"),y().fold(function(){return ro(h[0],"scope")},function(k){return Ai(h[0],"scope",k+"group")}),Ze(h[0])};return{unmerge:l,merge:d}},_s={modification:sb,transform:BE,merging:Ky},Jh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],PE=function(u,l){var d=u.property().name(l);return Vr(["ol","ul"],d)},qd=function(u,l){var d=u.property().name(l);return Vr(Jh,d)},Yv=function(u,l){return Vr(["br","img","hr","input"],u.property().name(l))},vg=yh(),Jv=function(u){return qd(vg,u)},Bl=function(u){return PE(vg,u)},Pl=function(u){return Yv(vg,u)},cb=function(u){var l=function(j){return kr(j)==="br"},d=function(j){return Nt(j,function(re){return l(re)||Ei(re)&&o1(re).trim().length===0})},h=function(j){return kr(j)==="li"||Eo(j,Bl).isSome()},y=function(j){return T(j).map(function(re){return Jv(re)?!0:Pl(re)?kr(re)!=="img":!1}).getOr(!1)},k=function(j){return p1(j).bind(function(re){var he=y(re);return so(re).map(function(Ge){return he===!0||h(Ge)||l(re)||Jv(Ge)&&!Tr(j,Ge)?[]:[lt.fromTag("br")]})}).getOr([])},_=function(){var j=Er(u,function(re){var he=w(re);return d(he)?[]:he.concat(k(re))});return j.length===0?[lt.fromTag("br")]:j},N=_();ph(u[0]),Sl(u[0],N)},lb=function(u){return Nh(u,!0)},Xy=function(u){var l=Vf(u);l.length===0&&ks(u)},dg=function(u,l){return{grid:u,cursor:l}},mg=function(u){return ta(u,function(l){return ta(l.cells,function(d){var h=d.element;return Ha(lb(h),h)})})},gg=function(u,l,d){var h,y,k=Jo(u).rows;return Y.from((y=(h=k[l])===null||h===void 0?void 0:h.cells[d])===null||y===void 0?void 0:y.element).filter(lb).orThunk(function(){return mg(k)})},Iu=function(u,l,d){var h=gg(u,l,d);return dg(u,h)},hg=function(u){var l=function(d,h){var y=R(d,function(k){return k.row===h.row});return y?d:d.concat([h])};return Q(u,l,[]).sort(function(d,h){return d.row-h.row})},pg=function(u,l,d,h){var y=l[0].row,k=hg(l),_=ba(k,function(N,j){var re=Hy(N.grid,y,j.row+N.delta,d,h.getOrInit);return{grid:re,delta:N.delta+1}},{grid:u,delta:0}).grid;return Iu(_,y,l[0].column)},fb=function(u,l,d,h){var y=hg(l),k=y[y.length-1],_=k.row+k.rowspan,N=ba(y,function(j,re){return Hy(j,_,re.row,d,h.getOrInit)},u);return Iu(N,_,l[0].column)},NE=function(u,l,d,h){var y=l.details,k=lg(y),_=k[0].column,N=ba(k,function(j,re){var he=Vy(j.grid,_,re.column+j.delta,d,h.getOrInit);return{grid:he,delta:j.delta+1}},{grid:u,delta:0}).grid;return Iu(N,y[0].row,_)},Yy=function(u,l,d,h){var y=l.details,k=y[y.length-1],_=k.column+k.colspan,N=lg(y),j=ba(N,function(re,he){return Vy(re,_,he.column,d,h.getOrInit)},u);return Iu(j,y[0].row,_)},vb=function(u,l,d,h){var y=lg(l),k=wt(y,function(N){return N.column}),_=fS(u,k,!0,d,h.replaceOrInit);return Iu(_,l[0].row,l[0].column)},wu=function(u,l,d,h){var y=Gy(u,l,d,h.replaceOrInit);return Iu(y,l[0].row,l[0].column)},IE=function(u,l,d,h){var y=lg(l),k=wt(y,function(N){return N.column}),_=fS(u,k,!1,d,h.replaceOrInit);return Iu(_,l[0].row,l[0].column)},df=function(u,l,d,h){var y=Gy(u,l,d,h.replaceOrInit);return Iu(y,l[0].row,l[0].column)},db=function(u,l){return function(d,h,y,k,_){var N=hg(h),j=wt(N,function(he){return he.row}),re=ME(d,j,u,l,y,k.replaceOrInit,_);return Iu(re,h[0].row,h[0].column)}},Jy=db("thead",!0),bg=db("tbody",!1),Zy=db("tfoot",!1),Zh=function(u,l,d,h){var y=lg(l.details),k=uS(u,wt(y,function(N){return N.column})),_=k.length>0?k[0].cells.length-1:0;return Iu(k,y[0].row,Math.min(y[0].column,_))},$E=function(u,l,d,h){var y=hg(l),k=sS(u,y[0].row,y[y.length-1].row),_=k.length>0?k.length-1:0;return Iu(k,Math.min(l[0].row,_),l[0].column)},dS=function(u,l,d,h){var y=l.cells;cb(y);var k=tS(u,l.bounds,d,h.merge(y));return dg(k,Y.from(y[0]))},mS=function(u,l,d,h){var y=function(_,N){return og(_,N,d,h.unmerge(N))},k=ba(l,y,u);return dg(k,Y.from(l[0]))},zE=function(u,l,d,h){var y=function(j,re){var he=wr.fromTable(j);return Kv(he,re,!0)},k=y(l.clipboard,l.generators),_=wn(l.row,l.column),N=EE(_,u,k,l.generators,d);return N.fold(function(){return dg(u,Y.some(l.element))},function(j){return Iu(j,l.row,l.column)})},yg=function(u,l,d){var h=gh(u,d.section),y=wr.generate(h);return Kv(y,l,!0)},jo=function(u,l,d,h){var y=Jo(u).rows,k=l.cells[0].column,_=y[l.cells[0].row],N=yg(l.clipboard,l.generators,_),j=ug(k,u,N,l.generators,d);return Iu(j,l.cells[0].row,l.cells[0].column)},mb=function(u,l,d,h){var y=Jo(u).rows,k=l.cells[l.cells.length-1].column+l.cells[l.cells.length-1].colspan,_=y[l.cells[0].row],N=yg(l.clipboard,l.generators,_),j=ug(k,u,N,l.generators,d);return Iu(j,l.cells[0].row,l.cells[0].column)},gb=function(u,l,d,h){var y=Jo(u).rows,k=l.cells[0].row,_=y[k],N=yg(l.clipboard,l.generators,_),j=oS(k,u,N,l.generators,d);return Iu(j,l.cells[0].row,l.cells[0].column)},Qy=function(u,l,d,h){var y=Jo(u).rows,k=l.cells[l.cells.length-1].row+l.cells[l.cells.length-1].rowspan,_=y[l.cells[0].row],N=yg(l.clipboard,l.generators,_),j=oS(k,u,N,l.generators,d);return Iu(j,l.cells[0].row,l.cells[0].column)},gS=function(u,l){var d=wr.fromTable(u),h=Ml(d,l);return h.bind(function(y){var k=y[y.length-1],_=y[0].column,N=k.column+k.colspan,j=Ro(wt(d.all,function(re){return nr(re.cells,function(he){return he.column>=_&&he.column<N})}));return Py(j)}).getOr("")},ew=function(u,l){var d=wr.fromTable(u),h=Ml(d,l);return h.bind(Py).getOr("")},Kd=function(u,l){var d=wr.fromTable(u),h=Ml(d,l);return h.bind(function(y){var k=y[y.length-1],_=y[0].row,N=k.row+k.rowspan,j=d.all.slice(_,N);return vE(j)}).getOr("")},hb=function(u,l,d,h){return Al(u,l,d,h.sizing)},Rs=function(u,l,d,h){return RC(u,l,d,h.sizing,h.resize)},Nl=function(u,l){return R(l,function(d){return d.column===0&&d.isLocked})},pb=function(u,l){return R(l,function(d){return d.column+d.colspan>=u.grid.columns&&d.isLocked})},ov=function(u,l){var d=Sd(u),h=lg(l);return Q(h,function(y,k){var _=d[k.column],N=_.map(Mu).getOr(0);return y+N},0)},ul=function(u){return function(l,d){return Ml(l,d).filter(function(h){var y=u?Nl:pb;return!y(l,h)}).map(function(h){return{details:h,pixelDelta:ov(l,h)}})}},Il=function(u,l){return av(u,l).map(function(d){return{details:d,pixelDelta:-ov(u,d)}})},qu=function(u){return function(l,d){return $y(l,d).filter(function(h){var y=u?Nl:pb;return!y(l,h.cells)})}},Lc=_s.transform("th"),wg=_s.transform("td"),mf=eu(pg,Ml,ze,ze,_s.modification),Xd=eu(fb,Ml,ze,ze,_s.modification),hS=eu(NE,ul(!0),Rs,ze,_s.modification),pS=eu(Yy,ul(!1),Rs,ze,_s.modification),FE=eu(Zh,Il,Rs,Xy,_s.modification),LE=eu($E,Ml,ze,Xy,_s.modification),bS=eu(vb,av,ze,ze,Lc),yS=eu(IE,av,ze,ze,wg),wS=eu(Jy,av,ze,ze,Lc),HE=eu(bg,av,ze,ze,wg),CS=eu(Zy,av,ze,ze,wg),VE=eu(wu,av,ze,ze,Lc),SS=eu(df,av,ze,ze,wg),xS=eu(dS,zy,hb,ze,_s.merging),tw=eu(mS,ob,hb,ze,_s.merging),TS=eu(zE,YC,hb,ze,_s.modification),UE=eu(jo,qu(!0),ze,ze,_s.modification),Kr=eu(mb,qu(!1),ze,ze,_s.modification),Yd=eu(gb,$y,ze,ze,_s.modification),Cg=eu(Qy,$y,ze,ze,_s.modification),nw=gS,WE=ew,Ms=Kd,jE=function(u,l,d){var h=function(au){return kr(rf(au))==="table"},y=function(au){return h(u)===!1||ly(au).rows>1},k=function(au){return h(u)===!1||ly(au).columns>1},_=X1(u),N=ky(u)?ze:lE,j=function(au){switch(il(u)){case"section":return Gh.section();case"sectionCells":return Gh.sectionCells();case"cells":return Gh.cells();default:return Gh.getTableSectionType(au,"section")}},re=function(au,wp){return wp.cursor.fold(function(){var vv=Vf(au);return bn(vv).filter(rr).map(function(zl){l.clear(au);var Oc=u.dom.createRng();return Oc.selectNode(zl.dom),u.selection.setRng(Oc),Ai(zl,"data-mce-selected","1"),Oc})},function(vv){var zl=qC(vv),Oc=u.dom.createRng();return Oc.setStart(zl.element.dom,zl.offset),Oc.setEnd(zl.element.dom,zl.offset),u.selection.setRng(Oc),l.clear(au),Y.some(Oc)})},he=function(au,wp,vv,zl,Oc){return function(Tf,a0,Vg){Vg===void 0&&(Vg=!1),cs(Tf);var Ug=zl(),Wg=lt.fromDom(u.getDoc()),Fl=dr(vv,Wg,_),jg={sizing:Dy(u,Tf),resize:ky(u)?T1():Rd(),section:j(Tf)};return wp(Tf)?au(Ug,Tf,a0,Fl,jg).bind(function(Gg){jt(Gg.newRows,function(qg){V1(u,qg.dom)}),jt(Gg.newCells,function(qg){U1(u,qg.dom)});var o2=re(Tf,Gg);return rr(Tf)&&(cs(Tf),Vg||lf(u,Tf.dom,Oc)),o2.map(function(qg){return{rng:qg,effect:Oc}})}):Y.none()}},Ge=he(LE,y,ze,d,yo),yt=he(FE,k,ze,d,yo),at=he(mf,ht,ze,d,yo),qe=he(Xd,ht,ze,d,yo),Dt=he(hS,ht,N,d,yo),It=he(pS,ht,N,d,yo),_n=he(xS,ht,ze,d,yo),ia=he(tw,ht,ze,d,yo),An=he(UE,ht,ze,d,yo),ar=he(Kr,ht,ze,d,yo),Lr=he(Yd,ht,ze,d,yo),Mr=he(Cg,ht,ze,d,yo),ei=he(TS,ht,ze,d,nE),nu=he(VE,ht,ze,d,yo),ru=he(SS,ht,ze,d,yo),Zr=he(bS,ht,ze,d,yo),cr=he(yS,ht,ze,d,yo),Gr=he(wS,ht,ze,d,yo),Na=he(HE,ht,ze,d,yo),$o=he(CS,ht,ze,d,yo),fv=WE,_a=nw,ec=Ms;return{deleteRow:Ge,deleteColumn:yt,insertRowsBefore:at,insertRowsAfter:qe,insertColumnsBefore:Dt,insertColumnsAfter:It,mergeCells:_n,unmergeCells:ia,pasteColsBefore:An,pasteColsAfter:ar,pasteRowsBefore:Lr,pasteRowsAfter:Mr,pasteCells:ei,makeCellsHeader:nu,unmakeCellsHeader:ru,makeColumnsHeader:Zr,unmakeColumnsHeader:cr,makeRowsHeader:Gr,makeRowsBody:Na,makeRowsFooter:$o,getTableRowType:ec,getTableCellType:fv,getTableColType:_a}},Jd={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Zv=function(){return lt.fromTag("th")},bb=function(){return lt.fromTag("td")},yb=function(){return lt.fromTag("col")},GE=function(u,l,d,h){for(var y=lt.fromTag("tr"),k=0;k<u;k++){var _=h<l||k<d?Zv():bb();k<d&&Ai(_,"scope","row"),h<l&&Ai(_,"scope","col"),No(_,lt.fromTag("br")),No(y,_)}return y},kS=function(u){var l=lt.fromTag("colgroup");return Aa(u,function(){return No(l,yb())}),l},wb=function(u,l,d,h){return Aa(u,function(y){return GE(l,d,h,y)})},rw=function(u,l,d,h,y,k){k===void 0&&(k=Jd);var _=lt.fromTag("table"),N=y!=="cells";Xl(_,k.styles),oi(_,k.attributes),k.colGroups&&No(_,kS(l));var j=Math.min(u,d);if(N&&d>0){var re=lt.fromTag("thead");No(_,re);var he=y==="sectionCells"?j:0,Ge=wb(d,l,he,h);Sl(re,Ge)}var yt=lt.fromTag("tbody");No(_,yt);var at=N?u-j:u,qe=N?0:d,Dt=wb(at,l,qe,h);return Sl(yt,Dt),_},Sg=function(u){return u.dom.innerHTML},Cb=function(u){var l=lt.fromTag("div"),d=lt.fromDom(u.dom.cloneNode(!0));return No(l,d),Sg(l)},qE=function(u,l){u.selection.select(l.dom,!0),u.selection.collapse(!0)},gf=function(u,l){Ws(l,"td,th").each(Ne(qE,u))},aw=function(u,l){jt(Us(l,"tr"),function(d){V1(u,d.dom),jt(Us(d,"th,td"),function(h){U1(u,h.dom)})})},ow=function(u){return dt(u)&&u.indexOf("%")!==-1},xg=function(u,l,d,h,y){var k=G1(u),_={styles:k,attributes:zh(u),colGroups:q1(u)};return u.undoManager.ignore(function(){var N=rw(d,l,y,h,il(u),_);Ai(N,"data-mce-id","__mce");var j=Cb(N);u.insertContent(j),u.addVisual()}),Ws(rf(u),'table[data-mce-id="__mce"]').map(function(N){return rv(u)?tg(N):Qm(u)?Y1(N):(Ue(u)||ow(k.width))&&eg(N),cs(N),ro(N,"data-mce-id"),aw(u,N),gf(u,N),N.dom}).getOr(null)},iw=function(u,l,d,h,y){h===void 0&&(h={});var k=function(j){return xn(j)&&j>0};if(k(l)&&k(d)){var _=h.headerRows||0,N=h.headerColumns||0;return xg(u,d,l,N,_)}else return console.error(y),null},Qh=function(u){return function(){return u().fold(function(){return[]},function(l){return wt(l,function(d){return d.dom})})}},ES=function(u){return function(l){var d=l.length>0?Y.some(Js(l)):Y.none();u(d)}},KE=function(u){return function(l,d,h){h===void 0&&(h={});var y=iw(u,d,l,h,"Invalid values for insertTable - rows and columns values are required to insert a table.");return u.undoManager.add(),y}},hf=function(u,l,d,h){return{insertTable:KE(u),setClipboardRows:ES(l.setRows),getClipboardRows:Qh(l.getRows),setClipboardCols:ES(l.setColumns),getClipboardCols:Qh(l.getColumns),resizeHandler:d,selectionTargets:h}},Qs=function(u,l,d){var h=Pc(u,l,1);d===1||h<=1?ro(u,l):Ai(u,l,Math.min(d,h))},Cu=function(u,l,d){if(wr.hasColumns(u)){var h=nr(wr.justColumns(u),function(_){return _.column>=l&&_.column<d}),y=wt(h,function(_){var N=Ta(_.element);return Qs(N,"span",d-l),N}),k=lt.fromTag("colgroup");return Sl(k,y),[k]}else return[]},XE=function(u,l,d){return wt(u.all,function(h){var y=nr(h.cells,function(N){return N.column>=l&&N.column<d}),k=wt(y,function(N){var j=Ta(N.element);return Qs(j,"colspan",d-l),j}),_=lt.fromTag("tr");return Sl(_,k),_})},uw=function(u,l){var d=wr.fromTable(u),h=av(d,l);return h.map(function(y){var k=y[y.length-1],_=y[0].column,N=k.column+k.colspan,j=Cu(d,_,N),re=XE(d,_,N);return ya(ya([],j,!0),re,!0)})},Tg=function(u,l,d){var h=wr.fromTable(u),y=Ml(h,l);return y.bind(function(k){var _=Kv(h,d,!1),N=Jo(_).rows,j=N.slice(k[0].row,k[k.length-1].row+k[k.length-1].rowspan),re=Er(j,function(Ge){var yt=nr(Ge.cells,function(at){return!at.isLocked});return yt.length>0?[Nn(Nn({},Ge),{cells:yt})]:[]}),he=nb(re);return Ha(he.length>0,he)}).map(function(k){return Iy(k)})},sw=tinymce.util.Tools.resolve("tinymce.util.Tools"),ep=function(u,l,d){var h=u.select("td,th",l),y,k=function(_,N){for(var j=0;j<N.length;j++){var re=u.getStyle(N[j],d);if(typeof _>"u"&&(_=re),_!==re)return""}return _};return k(y,h)},cw=function(u,l,d){d&&u.formatter.apply("align"+d,{},l)},YE=function(u,l,d){d&&u.formatter.apply("valign"+d,{},l)},Ut=function(u,l){sw.each("left center right".split(" "),function(d){u.formatter.remove("align"+d,{},l)})},$i=function(u,l){sw.each("top middle bottom".split(" "),function(d){u.formatter.remove("valign"+d,{},l)})},kg=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],tu=function(u){return{value:u}},Hc=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lw=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tp=function(u){return Hc.test(u)||lw.test(u)},Sb=function(u){return sn(u,"#").toUpperCase()},xb=function(u){return tp(u)?Y.some({value:Sb(u)}):Y.none()},Tb=function(u){var l=u.toString(16);return(l.length===1?"0"+l:l).toUpperCase()},Qv=function(u){var l=Tb(u.red)+Tb(u.green)+Tb(u.blue);return tu(l)},np=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fw=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,vw=function(u,l,d,h){return{red:u,green:l,blue:d,alpha:h}},dw=function(u,l,d,h){var y=parseInt(u,10),k=parseInt(l,10),_=parseInt(d,10),N=parseFloat(h);return vw(y,k,_,N)},JE=function(u){if(u==="transparent")return Y.some(vw(0,0,0,0));var l=np.exec(u);if(l!==null)return Y.some(dw(l[1],l[2],l[3],"1"));var d=fw.exec(u);return d!==null?Y.some(dw(d[1],d[2],d[3],d[4])):Y.none()},OS=function(u){return xb(u).orThunk(function(){return JE(u).map(Qv)}).getOrThunk(function(){var l=document.createElement("canvas");l.height=1,l.width=1;var d=l.getContext("2d");d.clearRect(0,0,l.width,l.height),d.fillStyle="#FFFFFF",d.fillStyle=u,d.fillRect(0,0,1,1);var h=d.getImageData(0,0,1,1).data,y=h[0],k=h[1],_=h[2],N=h[3];return Qv(vw(y,k,_,N))})},iv=function(u){var l=u,d=function(){return l},h=function(y){l=y};return{get:d,set:h}},pf=function(u){var l=iv(Y.none()),d=function(){return l.get().each(u)},h=function(){d(),l.set(Y.none())},y=function(){return l.get().isSome()},k=function(){return l.get()},_=function(N){d(),l.set(Y.some(N))};return{clear:h,isSet:y,get:k,set:_}},Zd=function(){return pf(function(u){return u.unbind()})},Eg=function(){var u=pf(ze),l=function(d){return u.get().each(d)};return Nn(Nn({},u),{on:l})},mw=function(u,l,d,h){return function(y){var k=Zd(),_=wa(h),N=function(){var j=Pu(l),re=function(he){return u.formatter.match(d,{value:h},he.dom,_)};_?(y.setActive(!R(j,re)),k.set(u.formatter.formatChanged(d,function(he){return y.setActive(!he)},!0))):(y.setActive(Nt(j,re)),k.set(u.formatter.formatChanged(d,y.setActive,!1,{value:h})))};return u.initialized?N():u.on("init",N),k.clear}},kb=function(u){return fe(u,"menu")},bf=function(u){return wt(u,function(l){var d=l.text||l.title;return kb(l)?{text:d,items:bf(l.menu)}:{text:d,value:l.value}})},sl=function(u,l,d,h,y){return wt(d,function(k){var _=k.text||k.title;return kb(k)?{type:"nestedmenuitem",text:_,getSubmenuItems:function(){return sl(u,l,k.menu,h,y)}}:{text:_,type:"togglemenuitem",onAction:function(){return y(k.value)},onSetup:mw(u,l,h,k.value)}})},ed=function(u,l){return function(d){var h;u.execCommand("mceTableApplyCellStyle",!1,(h={},h[l]=d,h))}},td=function(u){return Er(u,function(l){return kb(l)?[Nn(Nn({},l),{menu:td(l.menu)})]:Ar(l.value)?[l]:[]})},Qd=function(u,l,d,h,y){return function(k){return k(sl(u,l,d,h,y))}},Og=function(u,l,d){var h=wt(l,function(y){return{text:y.title,value:"#"+OS(y.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:h.length>0?h:void 0,allowCustomColors:!1},onAction:function(y){var k,_=y.value==="remove"?"":y.value;u.execCommand("mceTableApplyCellStyle",!1,(k={},k[d]=_,k))}}]},gw=function(u){return function(){var l=u.queryCommandValue("mceTableRowType"),d=l==="header"?"body":"header";u.execCommand("mceTableRowType",!1,{type:d})}},hw=function(u){return function(){var l=u.queryCommandValue("mceTableColType"),d=l==="th"?"td":"th";u.execCommand("mceTableColType",!1,{type:d})}},pw=function(u){var l=bf(ff(u));return l.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:l}):Y.none()},Eb=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:kg}],Su=function(u){return Eb.concat(pw(u).toArray())},kc=function(u,l){var d=[{text:"Select...",value:""}],h=[{name:"borderstyle",type:"listbox",label:"Border style",items:d.concat(bf(Wu(u)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],y={name:"borderwidth",type:"input",label:"Border width"},k=l==="cell"?[y].concat(h):h;return{title:"Advanced",name:"advanced",items:k}},Vc=function(u){return function(l,d){var h=l.dom,y=function(N,j){(!u||j)&&h.setAttrib(d,N,j)},k=function(N,j){(!u||j)&&h.setStyle(d,N,j)},_=function(N,j){(!u||j)&&(j===""?l.formatter.remove(N,{value:null},d,!0):l.formatter.apply(N,{value:j},d))};return{setAttrib:y,setStyle:k,setFormat:_}}},yf={normal:Vc(!1),ifTruthy:Vc(!0)},Ag=function(u){return function(l){return Or(l,"rgb")?u.toHex(l):l}},Ob=function(u,l){var d=lt.fromDom(l);return{borderwidth:os(d,"border-width").getOr(""),borderstyle:os(d,"border-style").getOr(""),bordercolor:os(d,"border-color").map(Ag(u)).getOr(""),backgroundcolor:os(d,"background-color").map(Ag(u)).getOr("")}},nd=function(u){var l=u[0],d=u.slice(1);return jt(d,function(h){jt(ai(l),function(y){ga(h,function(k,_){var N=l[y];N!==""&&y===_&&N!==k&&(l[y]="")})})}),l},em=function(u,l,d,h){return gt(u,function(y){return!Dr(d.formatter.matchNode(h,l+y))}).getOr("")},tm=Ne(em,["left","center","right"],"align"),ZE=Ne(em,["top","middle","bottom"],"valign"),bw=function(u,l){var d=G1(u),h=zh(u),y=function(he){return{borderstyle:vr(d,"border-style").getOr(""),bordercolor:Ag(he)(vr(d,"border-color").getOr("")),backgroundcolor:Ag(he)(vr(d,"background-color").getOr(""))}},k={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},_=function(){var he=d["border-width"];return ju(u)&&he?{border:he}:vr(h,"border").fold(function(){return{}},function(Ge){return{border:Ge}})},N=l?y(u.dom):{},j=function(){var he=vr(d,"border-spacing").or(vr(h,"cellspacing")).fold(function(){return{}},function(yt){return{cellspacing:yt}}),Ge=vr(d,"border-padding").or(vr(h,"cellpadding")).fold(function(){return{}},function(yt){return{cellpadding:yt}});return Nn(Nn({},he),Ge)},re=Nn(Nn(Nn(Nn(Nn(Nn({},k),d),h),N),_()),j());return re},AS=function(u){return po(lt.fromDom(u)).map(function(l){var d={selection:Js(u.cells)};return Ms(l,d)}).getOr("")},DS=function(u,l,d){var h=function(N,j){var re=os(lt.fromDom(j),"border-width");return ju(u)&&re.isSome()?re.getOr(""):N.getAttrib(j,"border")||ep(u.dom,j,"border-width")||ep(u.dom,j,"border")},y=u.dom,k=ju(u)?y.getStyle(l,"border-spacing")||y.getAttrib(l,"cellspacing"):y.getAttrib(l,"cellspacing")||y.getStyle(l,"border-spacing"),_=ju(u)?ep(y,l,"padding")||y.getAttrib(l,"cellpadding"):y.getAttrib(l,"cellpadding")||ep(y,l,"padding");return Nn({width:y.getStyle(l,"width")||y.getAttrib(l,"width"),height:y.getStyle(l,"height")||y.getAttrib(l,"height"),cellspacing:k,cellpadding:_,border:h(y,l),caption:!!y.select("caption",l)[0],class:y.getAttrib(l,"class",""),align:tm(u,l)},d?Ob(y,l):{})},yw=function(u,l,d){var h=u.dom;return Nn({height:h.getStyle(l,"height")||h.getAttrib(l,"height"),class:h.getAttrib(l,"class",""),type:AS(l),align:tm(u,l)},d?Ob(h,l):{})},ww=function(u,l,d,h){var y=u.dom,k=h.getOr(l),_=function(N,j){return y.getStyle(N,j)||y.getAttrib(N,j)};return Nn({width:_(k,"width"),height:_(l,"height"),scope:y.getAttrib(l,"scope"),celltype:ry(l),class:y.getAttrib(l,"class",""),halign:tm(u,l),valign:ZE(u,l)},d?Ob(y,l):{})},Fa=function(u,l){var d=wr.fromTable(u),h=wr.justCells(d),y=nr(h,function(k){return R(l,function(_){return Tr(k.element,_)})});return wt(y,function(k){return{element:k.element.dom,column:wr.getColumnAt(d,k.column).map(function(_){return _.element.dom})}})},wf=function(u,l,d){u.setAttrib("scope",d.scope),u.setAttrib("class",d.class),u.setStyle("height",Li(d.height)),l.setStyle("width",Li(d.width))},_S=function(u,l){u.setFormat("tablecellbackgroundcolor",l.backgroundcolor),u.setFormat("tablecellbordercolor",l.bordercolor),u.setFormat("tablecellborderstyle",l.borderstyle),u.setFormat("tablecellborderwidth",Li(l.borderwidth))},RS=function(u,l,d){var h=l.length===1;jt(l,function(y){var k=y.element,_=h?yf.normal(u,k):yf.ifTruthy(u,k),N=y.column.map(function(j){return h?yf.normal(u,j):yf.ifTruthy(u,j)}).getOr(_);wf(_,N,d),Lh(u)&&_S(_,d),h&&(Ut(u,k),$i(u,k)),d.halign&&cw(u,k,d.halign),d.valign&&YE(u,k,d.valign)})},MS=function(u,l){u.execCommand("mceTableCellType",!1,{type:l.celltype,no_events:!0})},Ab=function(u,l,d,h){var y=Ke(h,function(k,_){return d[_]!==k});mn(y)>0&&l.length>=1&&po(l[0]).each(function(k){var _=Fa(k,l),N=mn(Ke(y,function(re,he){return he!=="scope"&&he!=="celltype"}))>0,j=V(y,"celltype");(N||V(y,"scope"))&&RS(u,_,h),j&&MS(u,h),lf(u,k.dom,{structure:j,style:N})})},Cw=function(u,l,d,h){var y=h.getData();h.close(),u.undoManager.transact(function(){Ab(u,l,d,y),u.focus()})},rp=function(u,l){var d=po(l[0]).map(function(h){return wt(Fa(h,l),function(y){return ww(u,y.element,Lh(u),y.column)})});return nd(d.getOrDie())},Jn=function(u,l){var d=Pu(l);if(d.length!==0){var h=rp(u,d),y={type:"tabpanel",tabs:[{title:"General",name:"general",items:Su(u)},kc(u,"cell")]},k={type:"panel",items:[{type:"grid",columns:2,items:Su(u)}]};u.windowManager.open({title:"Cell Properties",size:"normal",body:Lh(u)?y:k,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onSubmit:Ne(Cw,u,d,h)})}},QE=function(u){var l=bf(Gv(u));return l.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:l}):Y.none()},Sw=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],BS=function(u){return Sw.concat(QE(u).toArray())},xw=function(u,l){u.setAttrib("class",l.class),u.setStyle("height",Li(l.height))},eO=function(u,l){u.setStyle("background-color",l.backgroundcolor),u.setStyle("border-color",l.bordercolor),u.setStyle("border-style",l.borderstyle)},PS=function(u,l,d,h){var y=l.length===1;jt(l,function(k){var _=y?yf.normal(u,k):yf.ifTruthy(u,k);xw(_,d),Hh(u)&&eO(_,d),d.align!==h.align&&(Ut(u,k),cw(u,k,d.align))})},Tw=function(u,l){u.execCommand("mceTableRowType",!1,{type:l.type,no_events:!0})},kw=function(u,l,d,h){var y=Ke(h,function(N,j){return d[j]!==N});if(mn(y)>0){var k=V(y,"type"),_=k?mn(y)>1:!0;_&&PS(u,l,h,d),k&&Tw(u,h),po(lt.fromDom(l[0])).each(function(N){return lf(u,N.dom,{structure:k,style:_})})}},tO=function(u,l,d,h){var y=h.getData();h.close(),u.undoManager.transact(function(){kw(u,l,d,y),u.focus()})},Ec=function(u){var l=AC(Dd(u),Sc.selected);if(l.length!==0){var d=wt(l,function(_){return yw(u,_.dom,Hh(u))}),h=nd(d),y={type:"tabpanel",tabs:[{title:"General",name:"general",items:BS(u)},kc(u,"row")]},k={type:"panel",items:[{type:"grid",columns:2,items:BS(u)}]};u.windowManager.open({title:"Row Properties",size:"normal",body:Hh(u)?y:k,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onSubmit:Ne(tO,u,wt(l,function(_){return _.dom}),h)})}},hs=function(u,l,d){var h=d?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],y=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],k=Rl(u)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],_=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],N=l.length>0?[{type:"listbox",name:"class",label:"Class",items:l}]:[];return h.concat(y).concat(k).concat(_).concat(N)},Cf=function(u,l,d,h){if(l.tagName==="TD"||l.tagName==="TH")dt(d)?u.setStyle(l,d,h):u.setStyle(l,d);else if(l.children)for(var y=0;y<l.children.length;y++)Cf(u,l.children[y],d,h)},nO=function(u,l,d){var h=u.dom,y={},k={};if(y.class=d.class,k.height=Li(d.height),h.getAttrib(l,"width")&&!ju(u)?y.width=Pv(d.width):k.width=Li(d.width),ju(u)?(k["border-width"]=Li(d.border),k["border-spacing"]=Li(d.cellspacing)):(y.border=d.border,y.cellpadding=d.cellpadding,y.cellspacing=d.cellspacing),ju(u)&&l.children)for(var _=0;_<l.children.length;_++)Cf(h,l.children[_],{"border-width":Li(d.border),padding:Li(d.cellpadding)}),gs(u)&&Cf(h,l.children[_],{"border-color":d.bordercolor});gs(u)&&(k["background-color"]=d.backgroundcolor,k["border-color"]=d.bordercolor,k["border-style"]=d.borderstyle),y.style=h.serializeStyle(Nn(Nn({},G1(u)),k)),h.setAttribs(l,Nn(Nn({},zh(u)),y))},rO=function(u,l,d,h){var y=u.dom,k=h.getData(),_=Ke(k,function(N,j){return d[j]!==N});h.close(),k.class===""&&delete k.class,u.undoManager.transact(function(){if(!l){var N=parseInt(k.cols,10)||1,j=parseInt(k.rows,10)||1;l=xg(u,N,j,0,0)}if(mn(_)>0){nO(u,l,k);var re=y.select("caption",l)[0];(re&&!k.caption||!re&&k.caption)&&u.execCommand("mceTableToggleCaption"),k.align===""?Ut(u,l):cw(u,l,k.align)}if(u.focus(),u.addVisual(),mn(_)>0){var he=V(_,"caption"),Ge=he?mn(_)>1:!0;lf(u,l,{structure:he,style:Ge})}})},Ew=function(u,l){var d=u.dom,h,y=bw(u,gs(u));l===!1?(h=d.getParent(u.selection.getStart(),"table",u.getBody()),h?y=DS(u,h,gs(u)):gs(u)&&(y.borderstyle="",y.bordercolor="",y.backgroundcolor="")):(y.cols="1",y.rows="1",gs(u)&&(y.borderstyle="",y.bordercolor="",y.backgroundcolor=""));var k=bf(Vh(u));k.length>0&&y.class&&(y.class=y.class.replace(/\s*mce\-item\-table\s*/g,""));var _={type:"grid",columns:2,items:hs(u,k,l)},N=function(){return{type:"panel",items:[_]}},j=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[_]},kc(u,"table")]}},re=gs(u)?j():N();u.windowManager.open({title:"Table Properties",size:"normal",body:re,onSubmit:Ne(rO,u,h,y),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:y})},Fr=function(u){return Ao(Dd(u),Cc(u))},aO=function(u){return hu(Dd(u),Cc(u))},Db=function(u,l,d,h,y){var k=Cc(u),_=function(){return Fr(u).each(function(An){po(An,k).filter(ke(k)).each(function(ar){var Lr=lt.fromText("");if(Ka(ar,Lr),ks(ar),u.dom.isEmpty(u.getBody()))u.setContent(""),u.selection.setCursorLocation();else{var Mr=u.dom.createRng();Mr.setStart(Lr.dom,0),Mr.setEnd(Lr.dom,0),u.selection.setRng(Mr),u.nodeChanged()}})})},N=function(An){return Fr(u).each(function(ar){var Lr=Qm(u)||rv(u)||Ue(u);Lr||po(ar,k).each(function(Mr){An==="relative"&&!A1(Mr)?eg(Mr):An==="fixed"&&!pu(Mr)?tg(Mr):An==="responsive"&&!D1(Mr)&&Y1(Mr),cs(Mr),lf(u,Mr.dom,yo)})})},j=function(An){return po(An,k)},re=function(An){return aO(u).bind(function(ar){return j(ar).map(function(Lr){return An(Lr,ar)})})},he=function(An,ar){re(function(Lr){u.formatter.toggle("tableclass",{value:ar},Lr.dom),lf(u,Lr.dom,Ld)})},Ge=function(An,ar){re(function(Lr){var Mr=Pu(h),ei=Nt(Mr,function(ru){return u.formatter.match("tablecellclass",{value:ar},ru.dom)}),nu=ei?u.formatter.remove:u.formatter.apply;jt(Mr,function(ru){return nu("tablecellclass",{value:ar},ru.dom)}),lf(u,Lr.dom,Ld)})},yt=function(){Fr(u).each(function(An){po(An,k).each(function(ar){Zn(ar,"caption").fold(function(){var Lr=lt.fromTag("caption");No(Lr,lt.fromText("Caption")),Tk(ar,Lr,0),u.selection.setCursorLocation(Lr.dom,0)},function(Lr){uo("caption")(An)&&es("td",ar).each(function(Mr){return u.selection.setCursorLocation(Mr.dom,0)}),ks(Lr)}),lf(u,ar.dom,yo)})})},at=function(An){u.focus()},qe=function(An,ar){return ar===void 0&&(ar=!1),re(function(Lr,Mr){var ei=_d(h,Lr,Mr);An(Lr,ei,ar).each(at)})},Dt=function(){return re(function(An,ar){var Lr=_d(h,An,ar),Mr=dr(ze,lt.fromDom(u.getDoc()),Y.none());return Tg(An,Lr,Mr)})},It=function(){return re(function(An,ar){var Lr=_d(h,An,ar);return uw(An,Lr)})},_n=function(An,ar){return ar().each(function(Lr){var Mr=wt(Lr,function(ei){return Ta(ei)});re(function(ei,nu){var ru=wc(lt.fromDom(u.getDoc())),Zr=oy(h,nu,Mr,ru);An(ei,Zr).each(at)})})},ia=function(An){return function(ar,Lr){return vr(Lr,"type").each(function(Mr){qe(An(Mr),Lr.no_events)})}};ga({mceTableSplitCells:function(){return qe(l.unmergeCells)},mceTableMergeCells:function(){return qe(l.mergeCells)},mceTableInsertRowBefore:function(){return qe(l.insertRowsBefore)},mceTableInsertRowAfter:function(){return qe(l.insertRowsAfter)},mceTableInsertColBefore:function(){return qe(l.insertColumnsBefore)},mceTableInsertColAfter:function(){return qe(l.insertColumnsAfter)},mceTableDeleteCol:function(){return qe(l.deleteColumn)},mceTableDeleteRow:function(){return qe(l.deleteRow)},mceTableCutCol:function(){return It().each(function(An){y.setColumns(An),qe(l.deleteColumn)})},mceTableCutRow:function(){return Dt().each(function(An){y.setRows(An),qe(l.deleteRow)})},mceTableCopyCol:function(){return It().each(function(An){return y.setColumns(An)})},mceTableCopyRow:function(){return Dt().each(function(An){return y.setRows(An)})},mceTablePasteColBefore:function(){return _n(l.pasteColsBefore,y.getColumns)},mceTablePasteColAfter:function(){return _n(l.pasteColsAfter,y.getColumns)},mceTablePasteRowBefore:function(){return _n(l.pasteRowsBefore,y.getRows)},mceTablePasteRowAfter:function(){return _n(l.pasteRowsAfter,y.getRows)},mceTableDelete:_,mceTableCellToggleClass:Ge,mceTableToggleClass:he,mceTableToggleCaption:yt,mceTableSizingMode:function(An,ar){return N(ar)},mceTableCellType:ia(function(An){return An==="th"?l.makeCellsHeader:l.unmakeCellsHeader}),mceTableColType:ia(function(An){return An==="th"?l.makeColumnsHeader:l.unmakeColumnsHeader}),mceTableRowType:ia(function(An){switch(An){case"header":return l.makeRowsHeader;case"footer":return l.makeRowsFooter;default:return l.makeRowsBody}})},function(An,ar){return u.addCommand(ar,An)}),ga({mceTableProps:Ne(Ew,u,!1),mceTableRowProps:Ne(Ec,u),mceTableCellProps:Ne(Jn,u,h)},function(An,ar){return u.addCommand(ar,function(){return An()})}),u.addCommand("mceInsertTable",function(An,ar){Qt(ar)&&ai(ar).length>0?iw(u,ar.rows,ar.columns,ar.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Ew(u,!0)}),u.addCommand("mceTableApplyCellStyle",function(An,ar){var Lr=function(nu){return"tablecell"+nu.toLowerCase().replace("-","")};if(Qt(ar)){var Mr=Pu(h);if(Mr.length!==0){var ei=Ke(ar,function(nu,ru){return u.formatter.has(Lr(ru))&&dt(nu)});xe(ei)||(ga(ei,function(nu,ru){jt(Mr,function(Zr){yf.normal(u,Zr.dom).setFormat(Lr(ru),nu)})}),j(Mr[0]).each(function(nu){return lf(u,nu.dom,Ld)}))}}})},_b=function(u,l,d){var h=Cc(u),y=function(k){return hu(Dd(u)).bind(function(_){return po(_,h).map(function(N){var j=_d(d,N,_);return k(N,j)})}).getOr("")};ga({mceTableRowType:function(){return y(l.getTableRowType)},mceTableCellType:function(){return y(l.getTableCellType)},mceTableColType:function(){return y(l.getTableColType)}},function(k,_){return u.addQueryValueHandler(_,k)})},Rb=function(){var u=Eg(),l=Eg();return{getRows:u.get,setRows:function(d){d.fold(u.clear,u.set),l.clear()},clearRows:u.clear,getColumns:l.get,setColumns:function(d){d.fold(l.clear,l.set),u.clear()},clearColumns:l.clear}},ap={remove_similar:!0,inherit:!1},uv=Nn({selector:"td,th"},ap),op={tablecellbackgroundcolor:Nn({styles:{backgroundColor:"%value"}},uv),tablecellverticalalign:Nn({styles:{"vertical-align":"%value"}},uv),tablecellbordercolor:Nn({styles:{borderColor:"%value"}},uv),tablecellclass:Nn({classes:["%value"]},uv),tableclass:Nn({selector:"table",classes:["%value"]},ap),tablecellborderstyle:Nn({styles:{borderStyle:"%value"}},uv),tablecellborderwidth:Nn({styles:{borderWidth:"%value"}},uv)},oO=function(u){u.formatter.register(op)},NS=Zl.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ow=function(u){return u===void 0&&(u=void 0),NS.none(u)},rd=Nn(Nn({},NS),{none:Ow}),Mb=function(u,l,d,h,y){y===void 0&&(y=ht);var k=h===1;if(!k&&d<=0)return rd.first(u[0]);if(k&&d>=u.length-1)return rd.last(u[u.length-1]);var _=d+h,N=u[_];return y(N)?rd.middle(l,N):Mb(u,l,_,h,y)},IS=function(u,l){return po(u,l).bind(function(d){var h=Vf(d),y=Lt(h,function(k){return Tr(u,k)});return y.map(function(k){return{index:k,all:h}})})},iO=function(u,l,d){var h=IS(u,d);return h.fold(function(){return rd.none(u)},function(y){return Mb(y.all,u,y.index,1,l)})},uO=function(u,l,d){var h=IS(u,d);return h.fold(function(){return rd.none()},function(y){return Mb(y.all,u,y.index,-1,l)})},sO=function(u,l,d,h){return{start:u,soffset:l,finish:d,foffset:h}},nm={create:sO},Aw=Zl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ln=function(u,l,d,h){return u.fold(l,d,h)},$S=function(u){return u.fold(qt,qt,qt)},zS=Aw.before,cO=Aw.on,ip=Aw.after,Ku={before:zS,on:cO,after:ip,cata:Ln,getStart:$S},up=Zl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lO=function(u){return up.exact(u.start,u.soffset,u.finish,u.foffset)},FS=function(u){return u.match({domRange:function(l){return lt.fromDom(l.startContainer)},relative:function(l,d){return Ku.getStart(l)},exact:function(l,d,h,y){return l}})},Dw=up.domRange,_w=up.relative,LS=up.exact,Rw=function(u){var l=FS(u);return lc(l)},Mw=nm.create,sv={domRange:Dw,relative:_w,exact:LS,exactFromRange:lO,getWin:Rw,range:Mw},fO=function(u,l){var d=u.document.createRange();return d.selectNode(l.dom),d},vO=function(u,l){var d=u.document.createRange();return HS(d,l),d},HS=function(u,l){return u.selectNodeContents(l.dom)},dO=function(u,l){l.fold(function(d){u.setStartBefore(d.dom)},function(d,h){u.setStart(d.dom,h)},function(d){u.setStartAfter(d.dom)})},sp=function(u,l){l.fold(function(d){u.setEndBefore(d.dom)},function(d,h){u.setEnd(d.dom,h)},function(d){u.setEndAfter(d.dom)})},ha=function(u,l,d){var h=u.document.createRange();return dO(h,l),sp(h,d),h},Bb=function(u,l,d,h,y){var k=u.document.createRange();return k.setStart(l.dom,d),k.setEnd(h.dom,y),k},cv=function(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom,width:u.width,height:u.height}},cl=function(u){var l=u.getClientRects(),d=l.length>0?l[0]:u.getBoundingClientRect();return d.width>0||d.height>0?Y.some(d).map(cv):Y.none()},ad=Zl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Bs=function(u,l,d){return l(lt.fromDom(d.startContainer),d.startOffset,lt.fromDom(d.endContainer),d.endOffset)},Pb=function(u,l){return l.match({domRange:function(d){return{ltr:Ze(d),rtl:Y.none}},relative:function(d,h){return{ltr:qo(function(){return ha(u,d,h)}),rtl:qo(function(){return Y.some(ha(u,h,d))})}},exact:function(d,h,y,k){return{ltr:qo(function(){return Bb(u,d,h,y,k)}),rtl:qo(function(){return Y.some(Bb(u,y,k,d,h))})}}})},rm=function(u,l){var d=l.ltr();if(d.collapsed){var h=l.rtl().filter(function(y){return y.collapsed===!1});return h.map(function(y){return ad.rtl(lt.fromDom(y.endContainer),y.endOffset,lt.fromDom(y.startContainer),y.startOffset)}).getOrThunk(function(){return Bs(u,ad.ltr,d)})}else return Bs(u,ad.ltr,d)},Dg=function(u,l){var d=Pb(u,l);return rm(u,d)},od=function(u,l){var d=Dg(u,l);return d.match({ltr:function(h,y,k,_){var N=u.document.createRange();return N.setStart(h.dom,y),N.setEnd(k.dom,_),N},rtl:function(h,y,k,_){var N=u.document.createRange();return N.setStart(k.dom,_),N.setEnd(h.dom,y),N}})};ad.ltr,ad.rtl;var mO=function(u,l,d,h,y){if(y===0)return 0;if(l===h)return y-1;for(var k=h,_=1;_<y;_++){var N=u(_),j=Math.abs(l-N.left);if(d<=N.bottom){if(d<N.top||j>k)return _-1;k=j}}return 0},VS=function(u,l,d){return l>=u.left&&l<=u.right&&d>=u.top&&d<=u.bottom},gO=function(u,l,d,h,y){var k=function(re){var he=u.dom.createRange();return he.setStart(l.dom,re),he.collapse(!0),he},_=function(re){var he=k(re);return he.getBoundingClientRect()},N=o1(l).length,j=mO(_,d,h,y.right,N);return k(j)},hO=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var k=y.getClientRects(),_=ta(k,function(N){return VS(N,d,h)?Y.some(N):Y.none()});return _.map(function(N){return gO(u,l,d,h,N)})},Rr=function(u,l,d,h){var y=u.dom.createRange(),k=w(l);return ta(k,function(_){return y.selectNode(_.dom),VS(y.getBoundingClientRect(),d,h)?ll(u,_,d,h):Y.none()})},ll=function(u,l,d,h){return Ei(l)?hO(u,l,d,h):Rr(u,l,d,h)},_g=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var k=y.getBoundingClientRect(),_=Math.max(k.left,Math.min(k.right,d)),N=Math.max(k.top,Math.min(k.bottom,h));return ll(u,l,_,N)},US=!0,cp=!1,Xr=function(u,l){return l-u.left<u.right-l?US:cp},WS=function(u,l,d){var h=u.dom.createRange();return h.selectNode(l.dom),h.collapse(d),h},jS=function(u,l,d){var h=u.dom.createRange();h.selectNode(l.dom);var y=h.getBoundingClientRect(),k=Xr(y,d),_=k===US?h1:p1;return _(l).map(function(N){return WS(u,N,k)})},lp=function(u,l,d){var h=l.dom.getBoundingClientRect(),y=Xr(h,d);return Y.some(WS(u,l,y))},GS=function(u,l,d){var h=w(l).length===0?lp:jS;return h(u,l,d)},fp=function(u,l,d){var h,y;return Y.from((y=(h=u.dom).caretPositionFromPoint)===null||y===void 0?void 0:y.call(h,l,d)).bind(function(k){if(k.offsetNode===null)return Y.none();var _=u.dom.createRange();return _.setStart(k.offsetNode,k.offset),_.collapse(),Y.some(_)})},am=function(u,l,d){var h,y;return Y.from((y=(h=u.dom).caretRangeFromPoint)===null||y===void 0?void 0:y.call(h,l,d))},Bw=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var k=y.getBoundingClientRect(),_=Math.max(k.left,Math.min(k.right,d)),N=Math.max(k.top,Math.min(k.bottom,h));return _g(u,l,_,N)},Pw=function(u,l,d){return lt.fromPoint(u,l,d).bind(function(h){var y=function(){return GS(u,h,l)};return w(h).length===0?y():Bw(u,h,l,d).orThunk(y)})},qS=function(){return document.caretPositionFromPoint?fp:document.caretRangeFromPoint?am:Pw}(),KS=function(u,l,d){var h=lt.fromDom(u.document);return qS(h,l,d).map(function(y){return nm.create(lt.fromDom(y.startContainer),y.startOffset,lt.fromDom(y.endContainer),y.endOffset)})},id=function(u,l){var d=kr(u);return d==="input"?Ku.after(u):Vr(["br","img"],d)?l===0?Ku.before(u):Ku.after(u):Ku.on(u,l)},om=function(u,l){var d=u.fold(Ku.before,id,Ku.after),h=l.fold(Ku.before,id,Ku.after);return sv.relative(d,h)},Nw=function(u,l,d,h){var y=id(u,l),k=id(d,h);return sv.relative(y,k)},XS=function(u){return u.match({domRange:function(l){var d=lt.fromDom(l.startContainer),h=lt.fromDom(l.endContainer);return Nw(d,l.startOffset,h,l.endOffset)},relative:om,exact:Nw})},Nb=function(u,l,d,h){var y=Vs(u),k=y.dom.createRange();return k.setStart(u.dom,l),k.setEnd(d.dom,h),k},pO=function(u,l,d,h){var y=Nb(u,l,d,h),k=Tr(u,d)&&l===h;return y.collapsed&&!k},Rg=function(u){return Y.from(u.getSelection())},Iw=function(u,l){Rg(u).each(function(d){d.removeAllRanges(),d.addRange(l)})},$w=function(u,l,d,h,y){var k=Bb(u,l,d,h,y);Iw(u,k)},YS=function(u,l,d,h,y,k){l.collapse(d.dom,h),l.extend(y.dom,k)},zw=function(u,l){return Dg(u,l).match({ltr:function(d,h,y,k){$w(u,d,h,y,k)},rtl:function(d,h,y,k){Rg(u).each(function(_){if(_.setBaseAndExtent)_.setBaseAndExtent(d.dom,h,y.dom,k);else if(_.extend)try{YS(u,_,d,h,y,k)}catch{$w(u,y,k,d,h)}else $w(u,y,k,d,h)})}})},Ib=function(u,l,d,h,y){var k=Nw(l,d,h,y);zw(u,k)},$b=function(u,l,d){var h=om(l,d);zw(u,h)},Fw=function(u){var l=sv.getWin(u).dom,d=function(y,k,_,N){return Bb(l,y,k,_,N)},h=XS(u);return Dg(l,h).match({ltr:d,rtl:d})},Lw=function(u){if(u.rangeCount>0){var l=u.getRangeAt(0),d=u.getRangeAt(u.rangeCount-1);return Y.some(nm.create(lt.fromDom(l.startContainer),l.startOffset,lt.fromDom(d.endContainer),d.endOffset))}else return Y.none()},JS=function(u){if(u.anchorNode===null||u.focusNode===null)return Lw(u);var l=lt.fromDom(u.anchorNode),d=lt.fromDom(u.focusNode);return pO(l,u.anchorOffset,d,u.focusOffset)?Y.some(nm.create(l,u.anchorOffset,d,u.focusOffset)):Lw(u)},im=function(u,l,d){d===void 0&&(d=!0);var h=d?vO:fO,y=h(u,l);Iw(u,y)},Mg=function(u){return Rg(u).filter(function(l){return l.rangeCount>0}).bind(JS)},ZS=function(u){return Mg(u).map(function(l){return sv.exact(l.start,l.soffset,l.finish,l.foffset)})},QS=function(u,l){var d=od(u,l);return cl(d)},zb=function(u,l,d){return KS(u,l,d)},ex=function(u){Rg(u).each(function(l){return l.removeAllRanges()})},tx=tinymce.util.Tools.resolve("tinymce.util.VK"),Hw=function(u,l,d){return ax(u,l,iO(d,Nh))},nx=function(u,l,d){return ax(u,l,uO(d,Nh))},rx=function(u,l){var d=sv.exact(l,0,l,0);return Fw(d)},ax=function(u,l,d){return d.fold(Y.none,Y.none,function(h,y){return h1(y).map(function(k){return rx(u,k)})},function(h){return u.execCommand("mceTableInsertRowAfter"),Hw(u,l,h)})},bO=["table","li","dl"],ox=function(u,l,d){if(u.keyCode===tx.TAB){var h=rf(l),y=function(N){var j=kr(N);return Tr(N,h)||Vr(bO,j)},k=l.selection.getRng(),_=lt.fromDom(u.shiftKey?k.startContainer:k.endContainer);wl(_,y).each(function(N){u.preventDefault(),po(N,y).each(d.clear),l.selection.collapse(u.shiftKey);var j=u.shiftKey?nx:Hw,re=j(l,y,N);re.each(function(he){l.selection.setRng(he)})})}},Vw=function(u,l){return{selection:u,kill:l}},Bg={create:Vw},yO=function(u,l,d,h){return{start:Ku.on(u,l),finish:Ku.on(d,h)}},ix={create:yO},ux=function(u,l){var d=od(u,l);return nm.create(lt.fromDom(d.startContainer),d.startOffset,lt.fromDom(d.endContainer),d.endOffset)},Uc=ix.create,sx=function(u,l,d,h,y,k,_){return Tr(d,y)&&h===k?Y.none():Bo(d,"td,th",l).bind(function(N){return Bo(y,"td,th",l).bind(function(j){return cx(u,l,N,j,_)})})},cx=function(u,l,d,h,y){return Tr(d,h)?Y.none():Ev(d,h,l).bind(function(k){var _=k.boxes.getOr([]);return _.length>1?(y(u,_,k.start,k.finish),Y.some(Bg.create(Y.some(Uc(d,0,d,al(d))),!0))):Y.none()})},Fb=function(u,l,d,h,y){var k=function(_){return y.clearBeforeUpdate(d),y.selectRange(d,_.boxes,_.start,_.finish),_.boxes};return Rm(h,u,l,y.firstSelectedSelector,y.lastSelectedSelector).map(k)},Lb=function(u,l){return{item:u,mode:l}},Uw=function(u,l,d,h){return h===void 0&&(h=um),u.property().parent(l).map(function(y){return Lb(y,h)})},um=function(u,l,d,h){return h===void 0&&(h=Pg),d.sibling(u,l).map(function(y){return Lb(y,h)})},Pg=function(u,l,d,h){h===void 0&&(h=Pg);var y=u.property().children(l),k=d.first(y);return k.map(function(_){return Lb(_,h)})},lx=[{current:Uw,next:um,fallback:Y.none()},{current:um,next:Pg,fallback:Y.some(Uw)},{current:Pg,next:Pg,fallback:Y.some(um)}],fx=function(u,l,d,h,y){y===void 0&&(y=lx);var k=gt(y,function(_){return _.current===d});return k.bind(function(_){return _.current(u,l,h,_.next).orThunk(function(){return _.fallback.bind(function(N){return fx(u,l,N,h)})})})},Hb=function(){var u=function(d,h){return d.query().prevSibling(h)},l=function(d){return d.length>0?Y.some(d[d.length-1]):Y.none()};return{sibling:u,first:l}},wO=function(){var u=function(d,h){return d.query().nextSibling(h)},l=function(d){return d.length>0?Y.some(d[0]):Y.none()};return{sibling:u,first:l}},Vb={left:Hb,right:wO},vp=function(u,l,d,h,y,k){var _=fx(u,l,h,y);return _.bind(function(N){return k(N.item)?Y.none():d(N.item)?Y.some(N.item):vp(u,N.item,d,N.mode,y,k)})},Ub=function(u,l,d,h){return vp(u,l,d,um,Vb.left(),h)},vx=function(u,l,d,h){return vp(u,l,d,um,Vb.right(),h)},Wb=function(u){return function(l){return u.property().children(l).length===0}},Wc=function(u,l,d){return jb(u,l,Wb(u),d)},CO=function(u,l,d){return dx(u,l,Wb(u),d)},jb=Ub,dx=vx,dp=yh(),mp=function(u,l){return Wc(dp,u,l)},Ww=function(u,l){return CO(dp,u,l)},mx=function(u,l,d){return jb(dp,u,l,d)},gx=function(u,l,d){return dx(dp,u,l,d)},hx=function(u,l,d){return Eo(u,l,d).isSome()},Gb=Zl.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ud=function(u,l,d){var h=u.getRect(l),y=u.getRect(d);return y.right>h.left&&y.left<h.right},SO=function(u){return Bo(u,"tr")},xO=function(u,l,d,h,y,k,_){return Bo(h,"td,th",_).bind(function(N){return Bo(l,"td,th",_).map(function(j){return Tr(N,j)?Tr(h,N)&&al(N)===y?k(j):Gb.none("in same cell"):In(SO,[N,j]).fold(function(){return ud(u,j,N)?Gb.success():k(j)},function(re){return k(j)})})}).getOr(Gb.none("default"))},TO=function(u,l,d,h,y){return u.fold(l,d,h,y)},sd=Nn(Nn({},Gb),{verify:xO,cata:TO}),kO=function(u,l,d,h){return{parent:u,children:l,element:d,index:h}},jw=function(u){return so(u).bind(function(l){var d=w(l);return EO(d,u).map(function(h){return kO(l,d,u,h)})})},EO=function(u,l){return Lt(u,Ne(Tr,l))},Ng=function(u){return kr(u)==="br"},Gw=function(u,l,d){return l(u,d).bind(function(h){return Ei(h)&&o1(h).trim().length===0?Gw(h,l,d):Y.some(h)})},px=function(u,l,d){return d.traverse(l).orThunk(function(){return Gw(l,d.gather,u)}).map(d.relative)},qb=function(u,l){return A(u,l).filter(Ng).orThunk(function(){return A(u,l-1).filter(Ng)})},bx=function(u,l,d,h){return qb(l,d).bind(function(y){return h.traverse(y).fold(function(){return Gw(y,h.gather,u).map(h.relative)},function(k){return jw(k).map(function(_){return Ku.on(_.parent,_.index)})})})},yx=function(u,l,d,h){var y=Ng(l)?px(u,l,h):bx(u,l,d,h);return y.map(function(k){return{start:k,finish:k}})},OO=function(u){return sd.cata(u,function(l){return Y.none()},function(){return Y.none()},function(l){return Y.some(Ud(l,0))},function(l){return Y.some(Ud(l,al(l)))})},Kb=function(u,l){return{left:u.left,top:u.top+l,right:u.right,bottom:u.bottom+l}},Xb=function(u,l){return{left:u.left,top:u.top-l,right:u.right,bottom:u.bottom-l}},qw=function(u,l,d){return{left:u.left+l,top:u.top+d,right:u.right+l,bottom:u.bottom+d}},wx=function(u){return u.top},Cx=function(u){return u.bottom},sm=function(u,l,d){return d>=0&&d<al(l)?u.getRangedRect(l,d,l,d+1):d>0?u.getRangedRect(l,d-1,l,d):Y.none()},gp=function(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom}},Yb=function(u,l){return Y.some(u.getRect(l))},hp=function(u,l,d){return qr(l)?Yb(u,l).map(gp):Ei(l)?sm(u,l,d).map(gp):Y.none()},Sx=function(u,l){return qr(l)?Yb(u,l).map(gp):Ei(l)?u.getRangedRect(l,0,l,al(l)).map(gp):Y.none()},lv=5,AO=100,Sf=Zl.generate([{none:[]},{retry:["caret"]}]),xx=function(u,l){return u.left<l.left||Math.abs(l.right-u.left)<1||u.left>l.right},Jb=function(u,l,d){return t1(l,Jv).fold(Kt,function(h){return Sx(u,h).exists(function(y){return xx(d,y)})})},Kw=function(u,l,d,h,y){var k=Kb(y,lv);return Math.abs(d.bottom-h.bottom)<1||d.top>y.bottom?Sf.retry(k):d.top===y.bottom?Sf.retry(Kb(y,1)):Jb(u,l,y)?Sf.retry(qw(k,lv,0)):Sf.none()},DO=function(u,l,d,h,y){var k=Xb(y,lv);return Math.abs(d.top-h.top)<1||d.bottom<y.top?Sf.retry(k):d.bottom===y.top?Sf.retry(Xb(y,1)):Jb(u,l,y)?Sf.retry(qw(k,lv,0)):Sf.none()},cd={point:wx,adjuster:DO,move:Xb,gather:mp},Tx={point:Cx,adjuster:Kw,move:Kb,gather:Ww},kx=function(u,l,d){return u.elementFromPoint(l,d).filter(function(h){return kr(h)==="table"}).isSome()},_O=function(u,l,d,h,y){return Xw(u,l,d,l.move(h,lv),y)},Xw=function(u,l,d,h,y){return y===0?Y.some(h):kx(u,h.left,l.point(h))?_O(u,l,d,h,y-1):u.situsFromPoint(h.left,l.point(h)).bind(function(k){return k.start.fold(Y.none,function(_){return Sx(u,_).bind(function(N){return l.adjuster(u,_,N,d,h).fold(Y.none,function(j){return Xw(u,l,d,j,y-1)})}).orThunk(function(){return Y.some(h)})},Y.none)})},Ig=function(u,l){return u.situsFromPoint(l.left,l.bottom+lv)},$g=function(u,l){return u.situsFromPoint(l.left,l.top-lv)},Ex=function(u,l,d){return u.point(l)>d.getInnerHeight()?Y.some(u.point(l)-d.getInnerHeight()):u.point(l)<0?Y.some(-u.point(l)):Y.none()},Yw=function(u,l,d){var h=u.move(d,lv),y=Xw(l,u,d,h,AO).getOr(h);return Ex(u,y,l).fold(function(){return l.situsFromPoint(y.left,u.point(y))},function(k){return l.scrollBy(0,k),l.situsFromPoint(y.left,u.point(y)-k)})},fl={tryUp:Ne(Yw,cd),tryDown:Ne(Yw,Tx),ieTryUp:$g,ieTryDown:Ig,getJumpSize:Ze(lv)},ld=20,Gn=function(u,l,d){return u.getSelection().bind(function(h){return yx(l,h.finish,h.foffset,d).fold(function(){return Y.some(Ud(h.finish,h.foffset))},function(y){var k=u.fromSitus(y),_=sd.verify(u,h.finish,h.foffset,k.finish,k.foffset,d.failure,l);return OO(_)})})},Jw=function(u,l,d,h,y,k){return k===0?Y.none():RO(u,l,d,h,y).bind(function(_){var N=u.fromSitus(_),j=sd.verify(u,d,h,N.finish,N.foffset,y.failure,l);return sd.cata(j,function(){return Y.none()},function(){return Y.some(_)},function(re){return Tr(d,re)&&h===0?xf(u,d,h,Xb,y):Jw(u,l,re,0,y,k-1)},function(re){return Tr(d,re)&&h===al(re)?xf(u,d,h,Kb,y):Jw(u,l,re,al(re),y,k-1)})})},xf=function(u,l,d,h,y){return hp(u,l,d).bind(function(k){return Ox(u,y,h(k,fl.getJumpSize()))})},Ox=function(u,l,d){var h=Wn().browser;return h.isChrome()||h.isSafari()||h.isFirefox()||h.isEdge()?l.otherRetry(u,d):h.isIE()?l.ieRetry(u,d):Y.none()},RO=function(u,l,d,h,y){return hp(u,d,h).bind(function(k){return Ox(u,y,k)})},Ax=function(u,l,d){return Gn(u,l,d).bind(function(h){return Jw(u,l,h.element,h.offset,d,ld).map(u.fromSitus)})},pp=function(u,l){return hx(u,function(d){return so(d).exists(function(h){return Tr(h,l)})})},$l=function(u,l,d,h,y){return Bo(h,"td,th",l).bind(function(k){return Bo(k,"table",l).bind(function(_){return pp(y,_)?Ax(u,l,d).bind(function(N){return Bo(N.finish,"td,th",l).map(function(j){return{start:k,finish:j,range:N}})}):Y.none()})})},Zb=function(u,l,d,h,y,k){return Wn().browser.isIE()?Y.none():k(h,l).orThunk(function(){return $l(u,l,d,h,y).map(function(_){var N=_.range;return Bg.create(Y.some(Uc(N.start,N.soffset,N.finish,N.foffset)),!0)})})},Dx=function(u,l){return Bo(u,"tr",l).bind(function(d){return Bo(d,"table",l).bind(function(h){var y=Us(h,"tr");return Tr(d,y[0])?mx(h,function(k){return p1(k).isSome()},l).map(function(k){var _=al(k);return Bg.create(Y.some(Uc(k,_,k,_)),!0)}):Y.none()})})},sr=function(u,l){return Bo(u,"tr",l).bind(function(d){return Bo(d,"table",l).bind(function(h){var y=Us(h,"tr");return Tr(d,y[y.length-1])?gx(h,function(k){return h1(k).isSome()},l).map(function(k){return Bg.create(Y.some(Uc(k,0,k,0)),!0)}):Y.none()})})},Zw=function(u,l,d,h,y,k,_){return $l(u,d,h,y,k).bind(function(N){return cx(l,d,N.start,N.finish,_)})},mr=function(u,l){return Bo(u,"td,th",l)},Qw=function(u,l,d,h){var y=Eg(),k=y.clear,_=function(he){y.on(function(Ge){h.clearBeforeUpdate(l),mr(he.target,d).each(function(yt){Ev(Ge,yt,d).each(function(at){var qe=at.boxes.getOr([]);if(qe.length===1){var Dt=qe[0],It=py(Dt)==="false",_n=bl(zd(he.target),Dt,Tr);It&&_n&&(h.selectRange(l,qe,Dt,Dt),u.selectContents(Dt))}else qe.length>1&&(h.selectRange(l,qe,at.start,at.finish),u.selectContents(yt))})})})},N=function(he){h.clear(l),mr(he.target,d).each(y.set)},j=function(he){_(he)},re=function(he){_(he),k()};return{clearstate:k,mousedown:N,mouseover:j,mouseup:re}},_x={traverse:T,gather:Ww,relative:Ku.before,otherRetry:fl.tryDown,ieRetry:fl.ieTryDown,failure:sd.failedDown},Rx={traverse:B,gather:mp,relative:Ku.before,otherRetry:fl.tryUp,ieRetry:fl.ieTryUp,failure:sd.failedUp},zg=function(u){return function(l){return l===u}},Fg=zg(38),Lg=zg(40),Hg=function(u){return u>=37&&u<=40},MO={isBackward:zg(37),isForward:zg(39)},tr={isBackward:zg(39),isForward:zg(37)},Mx=function(u){var l=u!==void 0?u.dom:document,d=l.body.scrollLeft||l.documentElement.scrollLeft,h=l.body.scrollTop||l.documentElement.scrollTop;return Ua(d,h)},e2=function(u,l,d){var h=d!==void 0?d.dom:document,y=h.defaultView;y&&y.scrollBy(u,l)},bp=function(u){var l=function(It,_n){return lt.fromPoint(lt.fromDom(u.document),It,_n)},d=function(It){return It.dom.getBoundingClientRect()},h=function(It,_n,ia,An){var ar=sv.exact(It,_n,ia,An);return QS(u,ar)},y=function(){return ZS(u).map(function(It){return ux(u,It)})},k=function(It){var _n=sv.relative(It.start,It.finish);return ux(u,_n)},_=function(It,_n){return zb(u,It,_n).map(function(ia){return ix.create(ia.start,ia.soffset,ia.finish,ia.foffset)})},N=function(){ex(u)},j=function(It){It===void 0&&(It=!1),ZS(u).each(function(_n){return _n.fold(function(ia){return ia.collapse(It)},function(ia,An){var ar=It?ia:An;$b(u,ar,ar)},function(ia,An,ar,Lr){var Mr=It?ia:ar,ei=It?An:Lr;Ib(u,Mr,ei,Mr,ei)})})},re=function(It){im(u,It,!1)},he=function(It){im(u,It)},Ge=function(It){Ib(u,It.start,It.soffset,It.finish,It.foffset)},yt=function(It,_n){$b(u,It,_n)},at=function(){return u.innerHeight},qe=function(){var It=Mx(lt.fromDom(u.document));return It.top},Dt=function(It,_n){e2(It,_n,lt.fromDom(u.document))};return{elementFromPoint:l,getRect:d,getRangedRect:h,getSelection:y,fromSitus:k,situsFromPoint:_,clearSelection:N,collapseSelection:j,setSelection:Ge,setRelativeSelection:yt,selectNode:re,selectContents:he,getInnerHeight:at,getScrollY:qe,scrollBy:Dt}},fd=function(u,l){return{rows:u,cols:l}},Bx=function(u,l,d,h){var y=bp(u),k=Qw(y,l,d,h);return{clearstate:k.clearstate,mousedown:k.mousedown,mouseover:k.mouseover,mouseup:k.mouseup}},Qb=function(u,l,d,h){var y=bp(u),k=function(){return h.clear(l),Y.none()},_=function(j,re,he,Ge,yt,at){var qe=j.raw,Dt=qe.which,It=qe.shiftKey===!0,_n=_m(l,h.selectedSelector).fold(function(){return Hg(Dt)&&!It&&h.clearBeforeUpdate(l),Lg(Dt)&&It?Ne(Zw,y,l,d,_x,Ge,re,h.selectRange):Fg(Dt)&&It?Ne(Zw,y,l,d,Rx,Ge,re,h.selectRange):Lg(Dt)?Ne(Zb,y,d,_x,Ge,re,sr):Fg(Dt)?Ne(Zb,y,d,Rx,Ge,re,Dx):Y.none},function(ia){var An=function(ar){return function(){var Lr=ta(ar,function(Mr){return Fb(Mr.rows,Mr.cols,l,ia,h)});return Lr.fold(function(){return Zc(l,h.firstSelectedSelector,h.lastSelectedSelector).map(function(Mr){var ei=Lg(Dt)||at.isForward(Dt)?Ku.after:Ku.before;return y.setRelativeSelection(Ku.on(Mr.first,0),ei(Mr.table)),h.clear(l),Bg.create(Y.none(),!0)})},function(Mr){return Y.some(Bg.create(Y.none(),!0))})}};return Lg(Dt)&&It?An([fd(1,0)]):Fg(Dt)&&It?An([fd(-1,0)]):at.isBackward(Dt)&&It?An([fd(0,-1),fd(-1,0)]):at.isForward(Dt)&&It?An([fd(0,1),fd(1,0)]):Hg(Dt)&&!It?k:Y.none});return _n()},N=function(j,re,he,Ge,yt){return _m(l,h.selectedSelector).fold(function(){var at=j.raw,qe=at.which,Dt=at.shiftKey===!0;return Dt&&Hg(qe)?sx(l,d,re,he,Ge,yt,h.selectRange):Y.none()},Y.none)};return{keydown:_,keyup:N}},t2=function(u,l,d,h){var y=bp(u);return function(k,_){h.clearBeforeUpdate(l),Ev(k,_,d).each(function(N){var j=N.boxes.getOr([]);h.selectRange(l,j,N.start,N.finish),y.selectContents(_),y.collapseSelection()})}},BO=function(u,l){jt(l,function(d){As(u,d)})},Px=function(u){return function(l){Pi(l,u)}},PO=function(u){return function(l){BO(l,u)}},e0=function(u){var l=Px(u.selected),d=PO([u.selected,u.lastSelected,u.firstSelected]),h=function(k){var _=Us(k,u.selectedSelector);jt(_,d)},y=function(k,_,N,j){h(k),jt(_,l),Pi(N,u.firstSelected),Pi(j,u.lastSelected)};return{clearBeforeUpdate:h,clear:h,selectRange:y,selectedSelector:u.selectedSelector,firstSelectedSelector:u.firstSelectedSelector,lastSelectedSelector:u.lastSelectedSelector}},NO=function(u,l,d){var h=function(j){ro(j,u.selected),ro(j,u.firstSelected),ro(j,u.lastSelected)},y=function(j){Ai(j,u.selected,"1")},k=function(j){_(j),d()},_=function(j){var re=Us(j,u.selectedSelector+","+u.firstSelectedSelector+","+u.lastSelectedSelector);jt(re,h)},N=function(j,re,he,Ge){k(j),jt(re,y),Ai(he,u.firstSelected,"1"),Ai(Ge,u.lastSelected,"1"),l(re,he,Ge)};return{clearBeforeUpdate:_,clear:k,selectRange:N,selectedSelector:u.selectedSelector,firstSelectedSelector:u.firstSelectedSelector,lastSelectedSelector:u.lastSelectedSelector}},t0={byClass:e0,byAttr:NO},Nx=function(u,l){var d=u.slice(0,l[l.length-1].row+1),h=nb(d);return Er(h,function(y){var k=y.cells.slice(0,l[l.length-1].column+1);return wt(k,function(_){return _.element})})},Ix=function(u,l){var d=u.slice(l[0].row+l[0].rowspan-1,u.length),h=nb(d);return Er(h,function(y){var k=y.cells.slice(l[0].column+l[0].colspan-1,y.cells.length);return wt(k,function(_){return _.element})})},IO=function(u,l,d){var h=wr.fromTable(u),y=Ml(h,l);return y.map(function(k){var _=Kv(h,d,!1),N=Nx(_,k),j=Ix(_,k);return{upOrLeftCells:N,downOrRightCells:j}})},$x=tinymce.util.Tools.resolve("tinymce.Env"),n2=function(u){return Xa(lt.fromDom(u.target),"ephox-snooker-resizer-bar")===!1};function Jr(u,l,d){var h=function(_,N,j){d.targets().each(function(re){var he=po(N);he.each(function(Ge){var yt=X1(u),at=dr(ze,lt.fromDom(u.getDoc()),yt),qe=IO(Ge,re,at);Zm(u,_,N,j,qe)})})},y=function(){return HC(u)},k=t0.byAttr(Sc,h,y);return u.on("init",function(_){var N=u.getWin(),j=rf(u),re=Cc(u),he=function(){var Zr=u.selection,cr=lt.fromDom(Zr.getStart()),Gr=lt.fromDom(Zr.getEnd()),Na=In(po,[cr,Gr]);Na.fold(function(){return k.clear(j)},ze)},Ge=Bx(N,j,re,k),yt=Qb(N,j,re,k),at=t2(N,j,re,k),qe=function(Zr){return Zr.raw.shiftKey===!0};u.on("TableSelectorChange",function(Zr){return at(Zr.start,Zr.finish)});var Dt=function(Zr,cr){qe(Zr)&&(cr.kill&&Zr.kill(),cr.selection.each(function(Gr){var Na=sv.relative(Gr.start,Gr.finish),$o=od(N,Na);u.selection.setRng($o)}))},It=function(Zr){var cr=tv(Zr);if(cr.raw.shiftKey&&Hg(cr.raw.which)){var Gr=u.selection.getRng(),Na=lt.fromDom(Gr.startContainer),$o=lt.fromDom(Gr.endContainer);yt.keyup(cr,Na,Gr.startOffset,$o,Gr.endOffset).each(function(fv){Dt(cr,fv)})}},_n=function(Zr){var cr=tv(Zr);l().each(function(_a){return _a.hideBars()});var Gr=u.selection.getRng(),Na=lt.fromDom(Gr.startContainer),$o=lt.fromDom(Gr.endContainer),fv=Xs(MO,tr)(lt.fromDom(u.selection.getStart()));yt.keydown(cr,Na,Gr.startOffset,$o,Gr.endOffset,fv).each(function(_a){Dt(cr,_a)}),l().each(function(_a){return _a.showBars()})},ia=function(Zr){return Zr.button===0},An=function(Zr){return Zr.buttons===void 0||$x.browser.isEdge()&&Zr.buttons===0?!0:(Zr.buttons&1)!==0},ar=function(Zr){Ge.clearstate()},Lr=function(Zr){ia(Zr)&&n2(Zr)&&Ge.mousedown(tv(Zr))},Mr=function(Zr){An(Zr)&&n2(Zr)&&Ge.mouseover(tv(Zr))},ei=function(Zr){ia(Zr)&&n2(Zr)&&Ge.mouseup(tv(Zr))},nu=function(){var Zr=iv(lt.fromDom(j)),cr=iv(0),Gr=function(Na){var $o=lt.fromDom(Na.target);if(kr($o)==="td"||kr($o)==="th"){var fv=Zr.get(),_a=cr.get();Tr(fv,$o)&&Na.timeStamp-_a<300&&(Na.preventDefault(),at($o,$o))}Zr.set($o),cr.set(Na.timeStamp)};return{touchEnd:Gr}},ru=nu();u.on("dragstart",ar),u.on("mousedown",Lr),u.on("mouseover",Mr),u.on("mouseup",ei),u.on("touchend",ru.touchEnd),u.on("keyup",It),u.on("keydown",_n),u.on("NodeChange",he)}),{clear:k.clear}}var zx=function(u,l){return Zn(u,l).isSome()},n0=function(u,l){var d=iv(Y.none()),h=iv([]),y=Y.none(),k=uo("caption"),_=function(cr){return y.forall(function(Gr){return!Gr[cr]})},N=function(){return Ao(Dd(u),Cc(u))},j=function(){return Ao(gn(u),Cc(u))},re=function(){return N().bind(function(cr){return $f(js(po(cr),j().bind(po),function(Gr,Na){return Tr(Gr,Na)?k(cr)?Y.some(ay(cr)):Y.some(_d(l,Gr,cr)):Y.none()}))})},he=function(cr){var Gr=po(cr.element);return Gr.map(function(Na){var $o=wr.fromTable(Na),fv=Ml($o,cr).getOr([]),_a=Q(fv,function(ec,au){return au.isLocked&&(ec.onAny=!0,au.column===0?ec.onFirst=!0:au.column+au.colspan>=$o.grid.columns&&(ec.onLast=!0)),ec},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:zy($o,cr).isSome(),unmergeable:ob($o,cr).isSome(),locked:_a}})},Ge=function(){d.set(qo(re)()),y=d.get().bind(he),jt(h.get(),function(cr){return cr()})},yt=function(cr){return cr(),h.set(h.get().concat([cr])),function(){h.set(nr(h.get(),function(Gr){return Gr!==cr}))}},at=function(cr,Gr){return yt(function(){return d.get().fold(function(){cr.setDisabled(!0)},function(Na){cr.setDisabled(Gr(Na))})})},qe=function(cr,Gr,Na){return yt(function(){return d.get().fold(function(){cr.setDisabled(!0),cr.setActive(!1)},function($o){cr.setDisabled(Gr($o)),cr.setActive(Na($o))})})},Dt=function(cr){return y.exists(function(Gr){return Gr.locked[cr]})},It=function(cr){return at(cr,function(Gr){return!1})},_n=function(cr){return at(cr,function(Gr){return k(Gr.element)})},ia=function(cr){return function(Gr){return at(Gr,function(Na){return k(Na.element)||Dt(cr)})}},An=function(cr){return function(Gr){return at(Gr,function(Na){return k(Na.element)||cr().isNone()})}},ar=function(cr,Gr){return function(Na){return at(Na,function($o){return k($o.element)||cr().isNone()||Dt(Gr)})}},Lr=function(cr){return at(cr,function(Gr){return _("mergeable")})},Mr=function(cr){return at(cr,function(Gr){return _("unmergeable")})},ei=function(cr){return qe(cr,Kt,function(Gr){var Na=po(Gr.element,Cc(u));return Na.exists(function($o){return zx($o,"caption")})})},nu=function(cr,Gr){return function(Na){return qe(Na,function($o){return k($o.element)},function(){return u.queryCommandValue(cr)===Gr})}},ru=nu("mceTableRowType","header"),Zr=nu("mceTableColType","th");return u.on("NodeChange ExecCommand TableSelectorChange",Ge),{onSetupTable:It,onSetupCellOrRow:_n,onSetupColumn:ia,onSetupPasteable:An,onSetupPasteableColumn:ar,onSetupMergeable:Lr,onSetupUnmergeable:Mr,resetTargets:Ge,onSetupTableWithCaption:ei,onSetupTableRowHeaders:ru,onSetupTableColumnHeaders:Zr,targets:d.get}},r2=function(u,l,d,h){u.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(N){return N("inserttable | cell row column | advtablesort | tableprops deletetable")}});var y=function(N){return function(){return u.execCommand(N)}};u.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:y("mceTableProps"),icon:"table",onSetup:d.onSetupTable}),u.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:y("mceTableDelete"),icon:"table-delete-table",onSetup:d.onSetupTable}),u.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:y("mceTableCellProps"),icon:"table-cell-properties",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:y("mceTableMergeCells"),icon:"table-merge-cells",onSetup:d.onSetupMergeable}),u.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:y("mceTableSplitCells"),icon:"table-split-cells",onSetup:d.onSetupUnmergeable}),u.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:y("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:y("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:y("mceTableDeleteRow"),icon:"table-delete-row",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:y("mceTableRowProps"),icon:"table-row-properties",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:y("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:d.onSetupColumn("onFirst")}),u.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:y("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:d.onSetupColumn("onLast")}),u.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:y("mceTableDeleteCol"),icon:"table-delete-column",onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:y("mceTableCutRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:y("mceTableCopyRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:y("mceTablePasteRowBefore"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:y("mceTablePasteRowAfter"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:y("mceTableCutCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:y("mceTableCopyCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:y("mceTablePasteColBefore"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onFirst")}),u.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:y("mceTablePasteColAfter"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onLast")}),u.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:y("mceInsertTable"),icon:"table"});var k=td(Vh(u));k.length!==0&&u.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Qd(u,l,k,"tableclass",function(N){return u.execCommand("mceTableToggleClass",!1,N)}),onSetup:d.onSetupTable});var _=td(ff(u));_.length!==0&&u.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Qd(u,l,_,"tablecellclass",function(N){return u.execCommand("mceTableCellToggleClass",!1,N)}),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Qd(u,l,kg,"tablecellverticalalign",ed(u,"vertical-align")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Qd(u,l,UC(u),"tablecellborderwidth",ed(u,"border-width")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Qd(u,l,Wu(u),"tablecellborderstyle",ed(u,"border-style")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:y("mceTableToggleCaption"),icon:"table-caption",onSetup:d.onSetupTableWithCaption}),u.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(N){return N(Og(u,Oy(u),"background-color"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(N){return N(Og(u,Ay(u),"border-color"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:gw(u),onSetup:d.onSetupTableRowHeaders}),u.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:hw(u),onSetup:d.onSetupTableColumnHeaders})},Fx=function(u){var l=function(h){return u.dom.is(h,"table")&&u.getBody().contains(h)},d=iE(u);d.length>0&&u.ui.registry.addContextToolbar("table",{predicate:l,items:d,scope:"node",position:"node"})},a2=function(u,l,d,h){var y=function(at){return function(){return u.execCommand(at)}},k=function(at){u.execCommand("mceInsertTable",!1,{rows:at.numRows,columns:at.numColumns})},_={text:"Table properties",onSetup:d.onSetupTable,onAction:y("mceTableProps")},N={text:"Delete table",icon:"table-delete-table",onSetup:d.onSetupTable,onAction:y("mceTableDelete")};u.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:y("mceTableInsertRowBefore"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:y("mceTableInsertRowAfter"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:y("mceTableDeleteRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:y("mceTableRowProps"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:y("mceTableCutRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:y("mceTableCopyRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:y("mceTablePasteRowBefore"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:y("mceTablePasteRowAfter"),onSetup:d.onSetupPasteable(h.getRows)});var j={type:"nestedmenuitem",text:"Row",getSubmenuItems:Ze("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};u.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:y("mceTableInsertColBefore"),onSetup:d.onSetupColumn("onFirst")}),u.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:y("mceTableInsertColAfter"),onSetup:d.onSetupColumn("onLast")}),u.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:y("mceTableDeleteCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:y("mceTableCutCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:y("mceTableCopyCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:y("mceTablePasteColBefore"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onFirst")}),u.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:y("mceTablePasteColAfter"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onLast")});var re={type:"nestedmenuitem",text:"Column",getSubmenuItems:Ze("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};u.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:y("mceTableCellProps"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:y("mceTableMergeCells"),onSetup:d.onSetupMergeable}),u.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:y("mceTableSplitCells"),onSetup:d.onSetupUnmergeable});var he={type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ze("tablecellprops tablemergecells tablesplitcells")};WC(u)===!1?u.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:y("mceInsertTable")}):u.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:k}]}}),u.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:y("mceInsertTable")}),u.ui.registry.addMenuItem("tableprops",_),u.ui.registry.addMenuItem("deletetable",N),u.ui.registry.addNestedMenuItem("row",j),u.ui.registry.addNestedMenuItem("column",re),u.ui.registry.addNestedMenuItem("cell",he),u.ui.registry.addContextMenu("table",{update:function(){return d.resetTargets(),d.targets().fold(Ze(""),function(at){return kr(at.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var Ge=td(Vh(u));Ge.length!==0&&u.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return sl(u,l,Ge,"tableclass",function(at){return u.execCommand("mceTableToggleClass",!1,at)})},onSetup:d.onSetupTable});var yt=td(ff(u));yt.length!==0&&u.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return sl(u,l,yt,"tablecellclass",function(at){return u.execCommand("mceTableCellToggleClass",!1,at)})},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return sl(u,l,kg,"tablecellverticalalign",ed(u,"vertical-align"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return sl(u,l,UC(u),"tablecellborderwidth",ed(u,"border-width"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return sl(u,l,Wu(u),"tablecellborderstyle",ed(u,"border-style"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:y("mceTableToggleCaption"),onSetup:d.onSetupTableWithCaption}),u.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Og(u,Oy(u),"background-color")},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Og(u,Ay(u),"border-color")},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:gw(u),onSetup:d.onSetupTableRowHeaders}),u.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:hw(u),onSetup:d.onSetupTableColumnHeaders})},yp=function(u){var l=Ru(function(){return rf(u)},function(){return hu(Dd(u),Cc(u))},Sc.selectedSelector),d=n0(u,l),h=J1(u),y=Jr(u,h.lazyResize,d),k=jE(u,y,h.lazyWire),_=Rb();return Db(u,k,y,l,_),_b(u,k,l),ol(u,l,k),a2(u,l,d,_),r2(u,l,d,_),Fx(u),u.on("PreInit",function(){u.serializer.addTempAttr(Sc.firstSelected),u.serializer.addTempAttr(Sc.lastSelected),oO(u)}),_l(u)&&u.on("keydown",function(N){ox(N,u,y)}),u.on("remove",function(){h.destroy()}),hf(u,_,h,d)};function r0(){hC.add("table",yp)}r0()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}});const hG=X8({components:{Editor:oG},props:{value:{type:String,default:""},field:{type:String,default:""},toolbar:{type:Array,default:()=>["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","hr","code","fullscreen"]},font:{type:String,default:"sans-serif"},customFormats:{type:Array,default:()=>[]},tinymceOverrides:{type:Object,default:null},disabled:{type:Boolean,default:!0},imageToken:{type:String,default:void 0},folder:{type:String,default:void 0},softLength:{type:Number,default:void 0},direction:{type:String,default:void 0}},emits:["input"],setup(le,{emit:nt}){var Er;const{t:ln}=Wj(),Gt=Ls(null),dt=Ls(null),{imageToken:Qt}=Y8(le),Sn=Hj();let Mn=Ls("all"),pn=Ls([]);(Er=Sn.settings)!=null&&Er.storage_asset_transform&&(Mn.value=Sn.settings.storage_asset_transform,pn.value=Sn.settings.storage_asset_presets??[]);let Dr=Ls(0);const{imageDrawerOpen:Bn,imageSelection:Ve,closeImageDrawer:Ft,onImageSelect:xn,saveImage:ze,imageButton:ge}=fG(Gt,Qt,{storageAssetTransform:Mn,storageAssetPresets:pn}),{mediaDrawerOpen:Tt,mediaSelection:Ze,closeMediaDrawer:qt,openMediaTab:Z,onMediaSelect:Ne,embed:ke,saveMedia:Vt,mediaHeight:Kt,mediaWidth:ht,mediaSource:$t,mediaButton:We}=dG(Gt,Qt),{linkButton:ja,linkDrawerOpen:ve,closeLinkDrawer:Y,saveLink:Pn,linkSelection:Ea,linkNode:Mt}=vG(Gt),{codeDrawerOpen:Oa,code:Vr,closeCodeDrawer:R,saveCode:Aa,sourceCodeButton:wt}=mG(Gt),jt=Sk({get(){return le.value||""},set(Nt){le.value!==Nt&&Ja()}});lC(()=>[le.direction,Gt],()=>{var Nt,Dn,$n,pt,lr,Ra;Gt.value&&(le.direction==="rtl"?($n=(Dn=(Nt=Gt.value.editorCommands)==null?void 0:Nt.commands)==null?void 0:Dn.exec)==null||$n.mcedirectionrtl():(Ra=(lr=(pt=Gt.value.editorCommands)==null?void 0:pt.commands)==null?void 0:lr.exec)==null||Ra.mcedirectionltr())});const go=Sk(()=>{let Nt=null;Array.isArray(le.customFormats)&&le.customFormats.length>0&&(Nt=le.customFormats);let Dn=(le.toolbar??[]).map($n=>$n.replace(/^link$/g,"customLink").replace(/^media$/g,"customMedia").replace(/^code$/g,"customCode").replace(/^image$/g,"customImage")).join(" ");return Nt&&(Dn+=" styleselect"),{skin:!1,skin_url:!1,content_css:!1,content_style:lG(le.font),plugins:"media table hr lists image link pagebreak code insertdatetime autoresize paste preview fullscreen directionality",branding:!1,max_height:1e3,elementpath:!1,statusbar:!1,menubar:!1,convert_urls:!1,image_dimensions:!1,extended_valid_elements:"audio[loop|controls],source[src|type]",toolbar:Dn,style_formats:Nt,file_picker_types:"customImage customMedia image media",link_default_protocol:"https",browser_spellcheck:!0,directionality:le.direction,setup:Lt,...le.tinymceOverrides||{}}}),Go=Sk(()=>Vj(Dr.value,le.softLength)??100);let nr,ba;return{t:ln,percRemaining:Go,count:Dr,editorElement:dt,editorOptions:go,internalValue:jt,setFocus:Ro,onImageSelect:xn,saveImage:ze,imageDrawerOpen:Bn,closeImageDrawer:Ft,imageSelection:Ve,mediaDrawerOpen:Tt,mediaSelection:Ze,closeMediaDrawer:qt,openMediaTab:Z,embed:ke,onMediaSelect:Ne,saveMedia:Vt,mediaHeight:Kt,mediaWidth:ht,mediaSource:$t,linkButton:ja,linkDrawerOpen:ve,closeLinkDrawer:Y,saveLink:Pn,linkSelection:Ea,linkNode:Mt,codeDrawerOpen:Oa,code:Vr,closeCodeDrawer:R,saveCode:Aa,sourceCodeButton:wt,setupContentWatcher:gt,setCount:Q,contentUpdated:Ja,storageAssetTransform:Mn,storageAssetPresets:pn};function Q(){var Dn,$n,pt;const Nt=(Dn=Gt.value)==null?void 0:Dn.contentWindow.document.getElementById("tinymce");Dr.value=((pt=($n=Nt==null?void 0:Nt.textContent)==null?void 0:$n.replace(`
`,""))==null?void 0:pt.length)??0}function Ja(){if(Q(),!nr)return;const Nt=Gt.value.getContent()?Gt.value.getContent():null;Nt!==ba&&(ba=Nt,nt("input",Nt))}function gt(){if(nr)return;const Nt=Gt.value.contentWindow.document.getElementById("tinymce");nr=new MutationObserver($n=>{Ja()});const Dn={characterData:!0,childList:!0,subtree:!0};nr.observe(Nt,Dn)}function Lt(Nt){Gt.value=Nt,Nt.ui.registry.addToggleButton("customImage",ge),Nt.ui.registry.addToggleButton("customMedia",We),Nt.ui.registry.addToggleButton("customLink",ja),Nt.ui.registry.addButton("customCode",wt),Nt.on("init",function(){Nt.shortcuts.remove("meta+k"),Nt.addShortcut("meta+k","Insert Link",()=>{Nt.ui.registry.getAll().buttons.customlink.onAction()}),Q()}),Nt.on("OpenWindow",function(Dn){var $n,pt;if(($n=Dn.dialog)!=null&&$n.getData){const lr=(pt=Dn.dialog)==null?void 0:pt.getData();lr&&(lr.url&&(Dn.dialog.close(),Nt.ui.registry.getAll().buttons.customlink.onAction()),lr.src&&(Dn.dialog.close(),Nt.ui.registry.getAll().buttons.customimage.onAction(!0)))}})}function Ro(Nt){var $n;if(dt.value==null)return;const Dn=($n=dt.value.$el.parentElement)==null?void 0:$n.querySelector(".tox-tinymce");Dn!=null&&(Nt?Dn.classList.add("focus"):Dn.classList.remove("focus"))}}});const pG=["id"],bG={class:"grid"},yG={class:"field"},wG={class:"type-label"},CG={class:"field"},SG={class:"type-label"},xG={class:"field half"},TG={class:"type-label"},kG={class:"field half-right"},EG={class:"type-label"},OG={class:"content"},AG={class:"content"},DG=["src"],_G={class:"grid"},RG={class:"field half"},MG={class:"type-label"},BG={class:"field half-right"},PG={class:"type-label"},NG={class:"field half"},IG={class:"type-label"},$G={class:"field half-right"},zG={class:"type-label"},FG={key:1,class:"field half"},LG={class:"type-label"},HG={class:"content"},VG={key:0,class:"media-preview",controls:"true"},UG=["src"],WG=["src"],jG={class:"grid"},GG={class:"field"},qG={class:"type-label"},KG={class:"field half"},XG={class:"type-label"},YG={class:"field half-right"},JG={class:"type-label"},ZG={class:"grid"},QG={class:"field"},eq={class:"type-label"};function tq(le,nt,ln,Gt,dt,Qt){const Sn=sc("editor"),Mn=sc("v-card-title"),pn=sc("v-input"),Dr=sc("v-checkbox"),Bn=sc("v-card-text"),Ve=sc("v-button"),Ft=sc("v-card-actions"),xn=sc("v-card"),ze=sc("v-dialog"),ge=sc("interface-input-code"),Tt=sc("v-icon"),Ze=sc("v-drawer"),qt=sc("v-select"),Z=sc("v-upload"),Ne=sc("v-tab"),ke=sc("v-tabs"),Vt=sc("v-tab-item"),Kt=sc("v-textarea"),ht=sc("v-tabs-items"),$t=Fj("tooltip");return bd(),P0("div",{id:le.field,class:U8(["wysiwyg",{disabled:le.disabled}])},[mo(Sn,{ref:"editorElement",modelValue:le.internalValue,"onUpdate:modelValue":nt[0]||(nt[0]=We=>le.internalValue=We),init:le.editorOptions,disabled:le.disabled,"model-events":"change keydown blur focus paste ExecCommand SetContent",onFocusin:nt[1]||(nt[1]=We=>le.setFocus(!0)),onFocusout:nt[2]||(nt[2]=We=>le.setFocus(!1)),onFocus:le.setupContentWatcher,onSetContent:le.contentUpdated},null,8,["modelValue","init","disabled","onFocus","onSetContent"]),le.softLength?(bd(),P0("span",{key:0,class:U8(["remaining",{warning:le.percRemaining<10,danger:le.percRemaining<5}])},cc(le.softLength-le.count),3)):y3("",!0),mo(ze,{modelValue:le.linkDrawerOpen,"onUpdate:modelValue":nt[7]||(nt[7]=We=>le.linkDrawerOpen=We)},{default:zu(()=>[mo(xn,{class:"card"},{default:zu(()=>[mo(Mn,{class:"card-title"},{default:zu(()=>[w3(cc(le.t("wysiwyg_options.link")),1)]),_:1}),mo(Bn,null,{default:zu(()=>[wo("div",bG,[wo("div",yG,[wo("div",wG,cc(le.t("url")),1),mo(pn,{modelValue:le.linkSelection.url,"onUpdate:modelValue":nt[3]||(nt[3]=We=>le.linkSelection.url=We),placeholder:le.t("url_placeholder")},null,8,["modelValue","placeholder"])]),wo("div",CG,[wo("div",SG,cc(le.t("display_text")),1),mo(pn,{modelValue:le.linkSelection.displayText,"onUpdate:modelValue":nt[4]||(nt[4]=We=>le.linkSelection.displayText=We),placeholder:le.t("display_text_placeholder")},null,8,["modelValue","placeholder"])]),wo("div",xG,[wo("div",TG,cc(le.t("tooltip")),1),mo(pn,{modelValue:le.linkSelection.title,"onUpdate:modelValue":nt[5]||(nt[5]=We=>le.linkSelection.title=We),placeholder:le.t("tooltip_placeholder")},null,8,["modelValue","placeholder"])]),wo("div",kG,[wo("div",EG,cc(le.t("open_link_in")),1),mo(Dr,{modelValue:le.linkSelection.newTab,"onUpdate:modelValue":nt[6]||(nt[6]=We=>le.linkSelection.newTab=We),block:"",label:le.t(le.linkSelection.newTab?"new_tab":"current_tab")},null,8,["modelValue","label"])])])]),_:1}),mo(Ft,null,{default:zu(()=>[mo(Ve,{secondary:"",onClick:le.closeLinkDrawer},{default:zu(()=>[w3(cc(le.t("cancel")),1)]),_:1},8,["onClick"]),mo(Ve,{disabled:le.linkSelection.url===null&&!le.linkNode,onClick:le.saveLink},{default:zu(()=>[w3(cc(le.t("save")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),mo(Ze,{modelValue:le.codeDrawerOpen,"onUpdate:modelValue":nt[9]||(nt[9]=We=>le.codeDrawerOpen=We),title:le.t("wysiwyg_options.source_code"),icon:"code",onCancel:le.closeCodeDrawer},{actions:zu(()=>[mo(Ve,{icon:"",rounded:"",onClick:le.saveCode},{default:zu(()=>[mo(Tt,{name:"check"})]),_:1},8,["onClick"])]),default:zu(()=>[wo("div",OG,[mo(ge,{value:le.code,language:"htmlmixed","line-wrapping":!0,onInput:nt[8]||(nt[8]=We=>le.code=We)},null,8,["value"])])]),_:1},8,["modelValue","title","onCancel"]),mo(Ze,{modelValue:le.imageDrawerOpen,"onUpdate:modelValue":nt[15]||(nt[15]=We=>le.imageDrawerOpen=We),title:le.t("wysiwyg_options.image"),icon:"image",onCancel:le.closeImageDrawer},{actions:zu(()=>[W8((bd(),FB(Ve,{icon:"",rounded:"",onClick:le.saveImage},{default:zu(()=>[mo(Tt,{name:"check"})]),_:1},8,["onClick"])),[[$t,le.t("save_image"),void 0,{bottom:!0}]])]),default:zu(()=>[wo("div",AG,[le.imageSelection?(bd(),P0(PL,{key:0},[wo("img",{class:"image-preview",src:le.imageSelection.previewUrl},null,8,DG),wo("div",_G,[wo("div",RG,[wo("div",MG,cc(le.t("image_url")),1),mo(pn,{modelValue:le.imageSelection.imageUrl,"onUpdate:modelValue":nt[10]||(nt[10]=We=>le.imageSelection.imageUrl=We)},null,8,["modelValue"])]),wo("div",BG,[wo("div",PG,cc(le.t("alt_text")),1),mo(pn,{modelValue:le.imageSelection.alt,"onUpdate:modelValue":nt[11]||(nt[11]=We=>le.imageSelection.alt=We),nullable:!1},null,8,["modelValue"])]),le.storageAssetTransform==="all"?(bd(),P0(PL,{key:0},[wo("div",NG,[wo("div",IG,cc(le.t("width")),1),mo(pn,{modelValue:le.imageSelection.width,"onUpdate:modelValue":nt[12]||(nt[12]=We=>le.imageSelection.width=We),disabled:!!le.imageSelection.transformationKey},null,8,["modelValue","disabled"])]),wo("div",$G,[wo("div",zG,cc(le.t("height")),1),mo(pn,{modelValue:le.imageSelection.height,"onUpdate:modelValue":nt[13]||(nt[13]=We=>le.imageSelection.height=We),disabled:!!le.imageSelection.transformationKey},null,8,["modelValue","disabled"])])],64)):y3("",!0),le.storageAssetTransform!=="none"&&le.storageAssetPresets.length>0?(bd(),P0("div",FG,[wo("div",LG,cc(le.t("transformation_preset_key")),1),mo(qt,{modelValue:le.imageSelection.transformationKey,"onUpdate:modelValue":nt[14]||(nt[14]=We=>le.imageSelection.transformationKey=We),items:le.storageAssetPresets.map(We=>({text:We.key,value:We.key})),"show-deselect":!0},null,8,["modelValue","items"])])):y3("",!0)])],64)):(bd(),FB(Z,{key:1,multiple:!1,"from-library":"","from-url":"",folder:le.folder,onInput:le.onImageSelect},null,8,["folder","onInput"]))])]),_:1},8,["modelValue","title","onCancel"]),mo(Ze,{modelValue:le.mediaDrawerOpen,"onUpdate:modelValue":nt[22]||(nt[22]=We=>le.mediaDrawerOpen=We),title:le.t("wysiwyg_options.media"),icon:"slideshow",onCancel:le.closeMediaDrawer},{sidebar:zu(()=>[mo(ke,{modelValue:le.openMediaTab,"onUpdate:modelValue":nt[16]||(nt[16]=We=>le.openMediaTab=We),vertical:""},{default:zu(()=>[mo(Ne,{value:"video"},{default:zu(()=>[w3(cc(le.t("media")),1)]),_:1}),mo(Ne,{value:"embed"},{default:zu(()=>[w3(cc(le.t("embed")),1)]),_:1})]),_:1},8,["modelValue"])]),actions:zu(()=>[W8((bd(),FB(Ve,{icon:"",rounded:"",onClick:le.saveMedia},{default:zu(()=>[mo(Tt,{name:"check"})]),_:1},8,["onClick"])),[[$t,le.t("save_media"),void 0,{bottom:!0}]])]),default:zu(()=>[wo("div",HG,[mo(ht,{modelValue:le.openMediaTab,"onUpdate:modelValue":nt[21]||(nt[21]=We=>le.openMediaTab=We)},{default:zu(()=>[mo(Vt,{value:"video"},{default:zu(()=>[le.mediaSelection?(bd(),P0(PL,{key:0},[le.mediaSelection.tag!=="iframe"?(bd(),P0("video",VG,[wo("source",{src:le.mediaSelection.previewUrl},null,8,UG)])):y3("",!0),le.mediaSelection.tag==="iframe"?(bd(),P0("iframe",{key:1,class:"media-preview",src:le.mediaSelection.previewUrl},null,8,WG)):y3("",!0),wo("div",jG,[wo("div",GG,[wo("div",qG,cc(le.t("source")),1),mo(pn,{modelValue:le.mediaSource,"onUpdate:modelValue":nt[17]||(nt[17]=We=>le.mediaSource=We)},null,8,["modelValue"])]),wo("div",KG,[wo("div",XG,cc(le.t("width")),1),mo(pn,{modelValue:le.mediaWidth,"onUpdate:modelValue":nt[18]||(nt[18]=We=>le.mediaWidth=We)},null,8,["modelValue"])]),wo("div",YG,[wo("div",JG,cc(le.t("height")),1),mo(pn,{modelValue:le.mediaHeight,"onUpdate:modelValue":nt[19]||(nt[19]=We=>le.mediaHeight=We)},null,8,["modelValue"])])])],64)):(bd(),FB(Z,{key:1,multiple:!1,"from-library":"","from-url":"",folder:le.folder,onInput:le.onMediaSelect},null,8,["folder","onInput"]))]),_:1}),mo(Vt,{value:"embed"},{default:zu(()=>[wo("div",ZG,[wo("div",QG,[wo("div",eq,cc(le.t("embed")),1),mo(Kt,{modelValue:le.embed,"onUpdate:modelValue":nt[20]||(nt[20]=We=>le.embed=We),nullable:!1},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title","onCancel"])],10,pG)}const lq=Uj(hG,[["render",tq],["__scopeId","data-v-a5dea8ae"]]);export{lq as default};
